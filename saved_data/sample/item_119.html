<!DOCTYPE html><html><div class="item-title">
        Item 119
      </div> <div class="item-details"><div><b>git_comments:</b> <ol><li><div>
                 This is required since using pre-0.92.x with 0.92.x or greater will cause an IllegalArgumentException Not a host:port pair: 
              </div></li><li><div>
                 TODO: We ought to use ClassResolver from CamelContext API
              </div></li><li><div>
                 noop
 noop
              </div></li></ol></div><div><b>git_commits:</b> <ol><li><div><div><b>summary:</b> CAMEL-5506: Fixed table name configuration for camel-hbase. Thanks to Claudio Corsi for the patch. I polished the javadoc of the component as well.
                </div><div><b>message:</b> CAMEL-5506: Fixed table name configuration for camel-hbase. Thanks to Claudio Corsi for the patch. I polished the javadoc of the component as well.

git-svn-id: https://svn.apache.org/repos/asf/camel/branches/camel-2.10.x@1373457 13f79535-47bb-0310-9956-ffa450edef68

                </div></div></li></ol></div><div><b>github_issues:</b> <ol></ol></div><div><b>github_issues_comments:</b> <ol></ol></div><div><b>github_pulls:</b> <ol></ol></div><div><b>github_pulls_comments:</b> <ol></ol></div><div><b>github_pulls_reviews:</b> <ol></ol></div><div><b>jira_issues:</b> <ol><li><div><div><b>summary:</b> HBase component does not extract that table name in all cases and HBase runtime version issues.
                </div><div><b>description:</b> The current hbase component uses the URI getHost method to retrieve the table name but this method returns null if the host name does not conform to the requirements of this method.  For instance, it should include a '.' in the name, or is a ipv4 or ipv6 valid address string.  If the table name is a simple name then the getHost method will return null instead of the name of the table.  This will in turn cause a NPE exception.

The other issue is that if you are using 0.92.x or greater with the current implementation of the camel-hbase component.  An IllegalArgumentException is generated because of an incompatible host:port pair.  This is caused by the fact that the current hbase integration uses 0.90.5 and this will conflict with those versions.

I have a patch that solves both issues but in the second case.  It will require that the user define the specific hbase client version that they need to use.

btw, the camel-hbase component is not available as an option for the Component/s drop down list.

                </div></div></li><li><div><div><b>summary:</b> HBase component does not extract that table name in all cases and HBase runtime version issues.
                </div><div><b>description:</b> The current hbase component uses the URI getHost method to retrieve the table name but this method returns null if the host name does not conform to the requirements of this method.  For instance, it should include a '.' in the name, or is a ipv4 or ipv6 valid address string.  If the table name is a simple name then the getHost method will return null instead of the name of the table.  This will in turn cause a NPE exception.

The other issue is that if you are using 0.92.x or greater with the current implementation of the camel-hbase component.  An IllegalArgumentException is generated because of an incompatible host:port pair.  This is caused by the fact that the current hbase integration uses 0.90.5 and this will conflict with those versions.

I have a patch that solves both issues but in the second case.  It will require that the user define the specific hbase client version that they need to use.

btw, the camel-hbase component is not available as an option for the Component/s drop down list.

                </div><div><b>label:</b> code-design
                </div></div></li><li><div><div><b>summary:</b> HBase component does not extract that table name in all cases and HBase runtime version issues.
                </div><div><b>description:</b> The current hbase component uses the URI getHost method to retrieve the table name but this method returns null if the host name does not conform to the requirements of this method.  For instance, it should include a '.' in the name, or is a ipv4 or ipv6 valid address string.  If the table name is a simple name then the getHost method will return null instead of the name of the table.  This will in turn cause a NPE exception.

The other issue is that if you are using 0.92.x or greater with the current implementation of the camel-hbase component.  An IllegalArgumentException is generated because of an incompatible host:port pair.  This is caused by the fact that the current hbase integration uses 0.90.5 and this will conflict with those versions.

I have a patch that solves both issues but in the second case.  It will require that the user define the specific hbase client version that they need to use.

btw, the camel-hbase component is not available as an option for the Component/s drop down list.

                </div></div></li><li><div><div><b>summary:</b> HBase component does not extract that table name in all cases and HBase runtime version issues.
                </div><div><b>description:</b> The current hbase component uses the URI getHost method to retrieve the table name but this method returns null if the host name does not conform to the requirements of this method.  For instance, it should include a '.' in the name, or is a ipv4 or ipv6 valid address string.  If the table name is a simple name then the getHost method will return null instead of the name of the table.  This will in turn cause a NPE exception.

The other issue is that if you are using 0.92.x or greater with the current implementation of the camel-hbase component.  An IllegalArgumentException is generated because of an incompatible host:port pair.  This is caused by the fact that the current hbase integration uses 0.90.5 and this will conflict with those versions.

I have a patch that solves both issues but in the second case.  It will require that the user define the specific hbase client version that they need to use.

btw, the camel-hbase component is not available as an option for the Component/s drop down list.

                </div></div></li><li><div><div><b>summary:</b> HBase component does not extract that table name in all cases and HBase runtime version issues.
                </div><div><b>description:</b> The current hbase component uses the URI getHost method to retrieve the table name but this method returns null if the host name does not conform to the requirements of this method.  For instance, it should include a '.' in the name, or is a ipv4 or ipv6 valid address string.  If the table name is a simple name then the getHost method will return null instead of the name of the table.  This will in turn cause a NPE exception.

The other issue is that if you are using 0.92.x or greater with the current implementation of the camel-hbase component.  An IllegalArgumentException is generated because of an incompatible host:port pair.  This is caused by the fact that the current hbase integration uses 0.90.5 and this will conflict with those versions.

I have a patch that solves both issues but in the second case.  It will require that the user define the specific hbase client version that they need to use.

btw, the camel-hbase component is not available as an option for the Component/s drop down list.

                </div><div><b>label:</b> code-design
                </div></div></li><li><div><div><b>summary:</b> HBase component does not extract that table name in all cases and HBase runtime version issues.
                </div><div><b>description:</b> The current hbase component uses the URI getHost method to retrieve the table name but this method returns null if the host name does not conform to the requirements of this method.  For instance, it should include a '.' in the name, or is a ipv4 or ipv6 valid address string.  If the table name is a simple name then the getHost method will return null instead of the name of the table.  This will in turn cause a NPE exception.

The other issue is that if you are using 0.92.x or greater with the current implementation of the camel-hbase component.  An IllegalArgumentException is generated because of an incompatible host:port pair.  This is caused by the fact that the current hbase integration uses 0.90.5 and this will conflict with those versions.

I have a patch that solves both issues but in the second case.  It will require that the user define the specific hbase client version that they need to use.

btw, the camel-hbase component is not available as an option for the Component/s drop down list.

                </div></div></li><li><div><div><b>summary:</b> HBase component does not extract that table name in all cases and HBase runtime version issues.
                </div><div><b>description:</b> The current hbase component uses the URI getHost method to retrieve the table name but this method returns null if the host name does not conform to the requirements of this method.  For instance, it should include a '.' in the name, or is a ipv4 or ipv6 valid address string.  If the table name is a simple name then the getHost method will return null instead of the name of the table.  This will in turn cause a NPE exception.

The other issue is that if you are using 0.92.x or greater with the current implementation of the camel-hbase component.  An IllegalArgumentException is generated because of an incompatible host:port pair.  This is caused by the fact that the current hbase integration uses 0.90.5 and this will conflict with those versions.

I have a patch that solves both issues but in the second case.  It will require that the user define the specific hbase client version that they need to use.

btw, the camel-hbase component is not available as an option for the Component/s drop down list.

                </div></div></li><li><div><div><b>summary:</b> HBase component does not extract that table name in all cases and HBase runtime version issues.
                </div><div><b>description:</b> The current hbase component uses the URI getHost method to retrieve the table name but this method returns null if the host name does not conform to the requirements of this method.  For instance, it should include a '.' in the name, or is a ipv4 or ipv6 valid address string.  If the table name is a simple name then the getHost method will return null instead of the name of the table.  This will in turn cause a NPE exception.

The other issue is that if you are using 0.92.x or greater with the current implementation of the camel-hbase component.  An IllegalArgumentException is generated because of an incompatible host:port pair.  This is caused by the fact that the current hbase integration uses 0.90.5 and this will conflict with those versions.

I have a patch that solves both issues but in the second case.  It will require that the user define the specific hbase client version that they need to use.

btw, the camel-hbase component is not available as an option for the Component/s drop down list.

                </div></div></li><li><div><div><b>summary:</b> HBase component does not extract that table name in all cases and HBase runtime version issues.
                </div><div><b>description:</b> The current hbase component uses the URI getHost method to retrieve the table name but this method returns null if the host name does not conform to the requirements of this method.  For instance, it should include a '.' in the name, or is a ipv4 or ipv6 valid address string.  If the table name is a simple name then the getHost method will return null instead of the name of the table.  This will in turn cause a NPE exception.

The other issue is that if you are using 0.92.x or greater with the current implementation of the camel-hbase component.  An IllegalArgumentException is generated because of an incompatible host:port pair.  This is caused by the fact that the current hbase integration uses 0.90.5 and this will conflict with those versions.

I have a patch that solves both issues but in the second case.  It will require that the user define the specific hbase client version that they need to use.

btw, the camel-hbase component is not available as an option for the Component/s drop down list.

                </div></div></li></ol></div><div><b>jira_issues_comments:</b> <ol><li><div>
                This is the patch that contains the fixes required for this issue.

              </div></li><li><div><div><b>body:</b> BTW:  This issue has the following workaround.

The table name should include at the very least a '.' in the name.

If using hbase 0.92.x or greater than they need to add the following to their pom file.

{noformat}
	&lt;dependency&gt;
	    &lt;groupId&gt;org.apache.camel&lt;/groupId&gt;
	    &lt;artifactId&gt;camel-hbase&lt;/artifactId&gt;
            &lt;exclusions&gt;
              &lt;exclusion&gt;
                &lt;groupId&gt;org.apache.hbase&lt;/groupId&gt;
                &lt;artifactId&gt;hbase&lt;/artifactId&gt;
              &lt;/exclusion&gt;
            &lt;/exclusions&gt;
	&lt;/dependency&gt;

        &lt;dependency&gt;
          &lt;groupId&gt;org.apache.hbase&lt;/groupId&gt;
          &lt;artifactId&gt;hbase&lt;/artifactId&gt;
          &lt;version&gt;${hbase-version}&lt;/version&gt;
        &lt;/dependency&gt;
{noformat}

Where base.version is defined.

Note that the patch that I have attached forces the users to define the required hbase client version. 
This might not be necessary in this case since the package will not include the hbase client and the users will need to include the runtime.  Come to think about it, you can just ignore that part of the patch and apply the rest.  Instead, state on the web site that trying to use the default hbase client with 0.92.x or greater will cause an exception.

                </div><div><b>label:</b> code-design
                </div></div></li><li><div>
                Claudio, thanks for the patch.

The pom.xml code above, is that an information if people would upgrade to a newer hbase version that shipped with Camel?
I assume you patch can be applied to the ASF Camel trunk code.

We may be able to upgrade hbase version but i wonder if there was some osgi issues with newer release?
              </div></li><li><div>
                The pom.xml update is only required for users that have a maven project and want to test using camel:run against an already running hbase system.  If the service is using 0.92.x or greater, then the camel:run will produce the illegal argument exception with the not a host:port pair.  Adding the above update to their maven project pom file will resolve that issue.

The original patch that includes changing the hbase to provided is not required in general since the api using the 0.90.5 hbase is the same as the latest version of hbase.


              </div></li><li><div><div><b>body:</b> Regarding the provided scope I agree, as it seems that unless there is an exact version match between the client and the server, then there will be problems.

Regarding the getHost() thing, I am not sure I understand what exactly is the problem. AFAIK it doesn't have issues working with simple names too. In fact in the unit tests simple names have been used and they do work fine. Maybe I misunderstood the problem?
                </div><div><b>label:</b> code-design
                </div></div></li><li><div>
                Oh we should remember to upon up the osgi feature so it uses a range of [0.9,1)
              </div></li><li><div>
                osgi range widen as well
              </div></li></ol></div></div></html>