<!DOCTYPE html><html><div class="item-title">
        Item 110
      </div> <div class="item-details"><div><b>git_comments:</b> <ol></ol></div><div><b>git_commits:</b> <ol><li><div><div><b>summary:</b> Merge pull request #157 from rxin/kryo
                </div><div><b>message:</b> Merge pull request #157 from rxin/kryo

3 Kryo related changes.

1. Call Kryo setReferences before calling user specified Kryo registrator. This is done so the user specified registrator can override the default setting.

2. Register more internal classes (MapStatus, BlockManagerId).

3. Slightly refactored the internal class registration to allocate less memory.

(cherry picked from commit 58d4f6c8a5d9739dc2a3f26f116528457336f0d3)
Signed-off-by: Reynold Xin &lt;rxin@apache.org&gt;

                </div></div></li></ol></div><div><b>github_issues:</b> <ol></ol></div><div><b>github_issues_comments:</b> <ol></ol></div><div><b>github_pulls:</b> <ol><li><div><div><b>title:</b> Update CommandUtils.scala
                </div><div><b>body:</b> enable the user can do remote-debugging on the ExcutorRunner Process. we need one flag to enable this function: spark.excutor.debug=true(default is false), an other flag spark.excutor.debug.port to set the port（default is 18000）. at normal time, the function is off
if we want do remote-debuggging，we should use -Dspark.excutor.debug=1 as jvm arguments when we start worker process

                </div></div></li></ol></div><div><b>github_pulls_comments:</b> <ol><li><div>
                Can one of the admins verify this patch?

              </div></li><li><div>
                This can be done with SPARK_JAVA_OPTS set to java debug options.
That goes to master and executors.

Practically, particularly in multi-tennet deployments this need not work
due to port conflicts
 On Mar 16, 2014 7:45 AM, "baishuo(白硕)" notifications@github.com wrote:

&gt; enable the user can do remote-debugging on the ExcutorRunner Process. we
&gt; need one flag to enable this function: spark.excutor.debug, an other flag
&gt; spark.excutor.debug.port to set the port. at normal time, the function is
&gt; off
&gt; if we want do remote-debuggging，weshould use -Dspark.excutor.debug=1 as
&gt; 
&gt; ## jvm arguments when we start worker process
&gt; 
&gt; You can merge this Pull Request by running
&gt; 
&gt;   git pull https://github.com/baishuo/spark master
&gt; 
&gt; Or view, comment on, or merge it at:
&gt; 
&gt;   https://github.com/apache/spark/pull/157
&gt; Commit Summary
&gt; - Update CommandUtils.scala
&gt; 
&gt; File Changes
&gt; - _M_
&gt;   core/src/main/scala/org/apache/spark/deploy/worker/CommandUtils.scalahttps://github.com/apache/spark/pull/157/files#diff-0(9)
&gt; 
&gt; Patch Links:
&gt; - https://github.com/apache/spark/pull/157.patch
&gt; - https://github.com/apache/spark/pull/157.diff
&gt; 
&gt; —
&gt; Reply to this email directly or view it on GitHubhttps://github.com/apache/spark/pull/157
&gt; .

              </div></li><li><div>
                Thank you for mridulm‘s update。 I had set  SPARK_JAVA_OPTS of one worker  to "-Xdebug  -Xrunjdwp:transport=dt_socket,address=18000,server=y,suspend=y" and try to do a remote-debugging but it dosnt work.  I think maybe the remote-debugging option  must the be set to some special place then it can works.

              </div></li><li><div>
                That is weird - you can see the use of SPARK_JAVA_OPTS just a few lines above in the patch you submitted.

              </div></li><li><div>
                Hey @baishuo I'd separately try to debug why SPARK_JAVA_OPTS isn't working. In general we probably don't want to hard code debugging options like this in the launcher.

              </div></li><li><div>
                Hey @pwendell   I think maybe the "-Xdebug -Xrunjdwp..." option can not located behind  the classpath? In my privious work, I always set it before "-cp"

              </div></li><li><div>
                FWIW yes the -X options should come first, but they appear to be before -cp in this patch.
I also agree these are probably rare enough flags to not need code support.

But tiny suggestions anyway: "debugflage" should be "debugflag" and why not use a boolean (true/false) instead of int (1/0)? Is the intent to support different debug levels later?
You can also avoid repeating construction of the rest of the command line by just prepending a Seq debug options if the debug flag is set.

              </div></li><li><div>
                @baishuo I think we'd probably opt to not include this in Spark, but it's helpful to have this as a reference example. Do you mind closing this pull request for now?

              </div></li><li><div>
                @srowen thank you

              </div></li><li><div>
                If you'd like, you can send a pull request that adds this in the docs somewhere (e.g. under monitoring).

              </div></li><li><div>
                Hey @mateiz I  had update the monitoring.md 

              </div></li><li><div>
                My comment on monitoring was to explain to people how to do it with the existing SPARK_JAVA_OPTS flag, not by modifying CommandUtils.scala.

Anyway to submit that you'd have to submit it as a separate pull request covering just that file, from a new branch in git.

              </div></li><li><div>
                Oh，I see，please let me do that

              </div></li><li><div>
                please close this PR，thank you

              </div></li><li><div>
                please close this PR，thank you @pwendell 

              </div></li><li><div>
                Hi @pwendell @mateiz ，i'm a new user of github, could you please teach me how to undo the recently commit (I just want to make my master branche the same as spark:master)

              </div></li><li><div>
                close it

              </div></li></ol></div><div><b>github_pulls_reviews:</b> <ol></ol></div><div><b>jira_issues:</b> <ol></ol></div><div><b>jira_issues_comments:</b> <ol></ol></div></div></html>