<!DOCTYPE html><html><div class="item-title">
        Item 117
      </div> <div class="item-details"><div><b>git_comments:</b> <ol><li><div>
                *
 * Licensed to the Apache Software Foundation (ASF) under one or more
 * contributor license agreements.  See the NOTICE file distributed with
 * this work for additional information regarding copyright ownership.
 * The ASF licenses this file to You under the Apache License, Version 2.0
 * (the "License"); you may not use this file except in compliance with
 * the License.  You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 
              </div></li><li><div>
                 should inherit default values
              </div></li><li><div>
                 should inherit default options
              </div></li><li><div>
                *
 * Licensed to the Apache Software Foundation (ASF) under one or more
 * contributor license agreements.  See the NOTICE file distributed with
 * this work for additional information regarding copyright ownership.
 * The ASF licenses this file to You under the Apache License, Version 2.0
 * (the "License"); you may not use this file except in compliance with
 * the License.  You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 
              </div></li><li><div>
                 create a thread pool from big
              </div></li><li><div>
                 create a thread pool from low
              </div></li><li><div>
                
    Licensed to the Apache Software Foundation (ASF) under one or more
    contributor license agreements.  See the NOTICE file distributed with
    this work for additional information regarding copyright ownership.
    The ASF licenses this file to You under the Apache License, Version 2.0
    (the "License"); you may not use this file except in compliance with
    the License.  You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.

              </div></li><li><div>
                
    Licensed to the Apache Software Foundation (ASF) under one or more
    contributor license agreements.  See the NOTICE file distributed with
    this work for additional information regarding copyright ownership.
    The ASF licenses this file to You under the Apache License, Version 2.0
    (the "License"); you may not use this file except in compliance with
    the License.  You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.

              </div></li><li><div>
                 define a low profile 
              </div></li><li><div>
                 define a big profile with many threads 
              </div></li><li><div>
                 create and register the default profile
              </div></li><li><div>
                 and mark the new profile as default
              </div></li><li><div>
                 the default profile has the following values
              </div></li><li><div>
                 create the pool
              </div></li><li><div>
                 fallback to use values from default profile if not specified
              </div></li><li><div>
                 validate that all options has been given as its mandatory for a default thread pool profile
 as it is used as fallback for other profiles if they do not have that particular value
              </div></li><li><div>
                 no profile with that id
              </div></li><li><div>
                 fallback and use old default values for new default profile if absent (convention over configuration)
              </div></li><li><div>
                *
     * Gets the thread pool profile by the given id
     *
     * @param id  id of the thread pool profile to get
     * @return the found profile, or &lt;tt&gt;null&lt;/tt&gt; if not found
     
              </div></li><li><div>
                *
     * Registers the given thread pool profile
     *
     * @param profile the profile
     
              </div></li><li><div>
                *
     * Creates a new thread pool using based on the given profile id.
     *
     * @param source                the source object, usually it should be &lt;tt&gt;this&lt;/tt&gt; passed in as parameter
     * @param name                  name which is appended to the thread name
     * @param threadPoolProfileId   id of the thread pool profile to use for creating the thread pool
     * @return the created thread pool, or &lt;tt&gt;null&lt;/tt&gt; if the was no thread pool profile with that given id.
     
              </div></li><li><div>
                *
     * Gets the id of this profile
     *
     * @return the id of this profile
     
              </div></li><li><div>
                 should inherit the default values
              </div></li><li><div>
                 just change the max pool as the default profile should then inherit the old default profile
              </div></li></ol></div><div><b>git_commits:</b> <ol><li><div><div><b>summary:</b> CAMEL-1588: Added support for multiple threadPoolProfile. And a custom thread pool profile will inherit parameters from default if not explict given.
                </div><div><b>message:</b> CAMEL-1588: Added support for multiple threadPoolProfile. And a custom thread pool profile will inherit parameters from default if not explict given.

git-svn-id: https://svn.apache.org/repos/asf/camel/trunk@925588 13f79535-47bb-0310-9956-ffa450edef68

                </div></div></li></ol></div><div><b>github_issues:</b> <ol></ol></div><div><b>github_issues_comments:</b> <ol></ol></div><div><b>github_pulls:</b> <ol></ol></div><div><b>github_pulls_comments:</b> <ol></ol></div><div><b>github_pulls_reviews:</b> <ol></ol></div><div><b>jira_issues:</b> <ol><li><div><div><b>summary:</b> ExecutorService configuration
                </div><div><b>description:</b> Camel uses some thread pools, for component, endpoint and processor.

We should have some default configuration that is easy to configure with Camel to adjust pool sizes for individual/groups/type etc.
By not they use 5 as the default pool size. And have their own executor unless configured otherwise.



                </div></div></li><li><div><div><b>summary:</b> ExecutorService configuration
                </div><div><b>description:</b> Camel uses some thread pools, for component, endpoint and processor.

We should have some default configuration that is easy to configure with Camel to adjust pool sizes for individual/groups/type etc.
By not they use 5 as the default pool size. And have their own executor unless configured otherwise.



                </div></div></li><li><div><div><b>summary:</b> ExecutorService configuration
                </div><div><b>description:</b> Camel uses some thread pools, for component, endpoint and processor.

We should have some default configuration that is easy to configure with Camel to adjust pool sizes for individual/groups/type etc.
By not they use 5 as the default pool size. And have their own executor unless configured otherwise.



                </div></div></li><li><div><div><b>summary:</b> ExecutorService configuration
                </div><div><b>description:</b> Camel uses some thread pools, for component, endpoint and processor.

We should have some default configuration that is easy to configure with Camel to adjust pool sizes for individual/groups/type etc.
By not they use 5 as the default pool size. And have their own executor unless configured otherwise.



                </div></div></li><li><div><div><b>summary:</b> ExecutorService configuration
                </div><div><b>description:</b> Camel uses some thread pools, for component, endpoint and processor.

We should have some default configuration that is easy to configure with Camel to adjust pool sizes for individual/groups/type etc.
By not they use 5 as the default pool size. And have their own executor unless configured otherwise.



                </div></div></li><li><div><div><b>summary:</b> ExecutorService configuration
                </div><div><b>description:</b> Camel uses some thread pools, for component, endpoint and processor.

We should have some default configuration that is easy to configure with Camel to adjust pool sizes for individual/groups/type etc.
By not they use 5 as the default pool size. And have their own executor unless configured otherwise.



                </div></div></li><li><div><div><b>summary:</b> ExecutorService configuration
                </div><div><b>description:</b> Camel uses some thread pools, for component, endpoint and processor.

We should have some default configuration that is easy to configure with Camel to adjust pool sizes for individual/groups/type etc.
By not they use 5 as the default pool size. And have their own executor unless configured otherwise.



                </div></div></li><li><div><div><b>summary:</b> ExecutorService configuration
                </div><div><b>description:</b> Camel uses some thread pools, for component, endpoint and processor.

We should have some default configuration that is easy to configure with Camel to adjust pool sizes for individual/groups/type etc.
By not they use 5 as the default pool size. And have their own executor unless configured otherwise.



                </div></div></li><li><div><div><b>summary:</b> ExecutorService configuration
                </div><div><b>description:</b> Camel uses some thread pools, for component, endpoint and processor.

We should have some default configuration that is easy to configure with Camel to adjust pool sizes for individual/groups/type etc.
By not they use 5 as the default pool size. And have their own executor unless configured otherwise.



                </div></div></li><li><div><div><b>summary:</b> ExecutorService configuration
                </div><div><b>description:</b> Camel uses some thread pools, for component, endpoint and processor.

We should have some default configuration that is easy to configure with Camel to adjust pool sizes for individual/groups/type etc.
By not they use 5 as the default pool size. And have their own executor unless configured otherwise.



                </div></div></li><li><div><div><b>summary:</b> ExecutorService configuration
                </div><div><b>description:</b> Camel uses some thread pools, for component, endpoint and processor.

We should have some default configuration that is easy to configure with Camel to adjust pool sizes for individual/groups/type etc.
By not they use 5 as the default pool size. And have their own executor unless configured otherwise.



                </div></div></li><li><div><div><b>summary:</b> ExecutorService configuration
                </div><div><b>description:</b> Camel uses some thread pools, for component, endpoint and processor.

We should have some default configuration that is easy to configure with Camel to adjust pool sizes for individual/groups/type etc.
By not they use 5 as the default pool size. And have their own executor unless configured otherwise.



                </div></div></li><li><div><div><b>summary:</b> ExecutorService configuration
                </div><div><b>description:</b> Camel uses some thread pools, for component, endpoint and processor.

We should have some default configuration that is easy to configure with Camel to adjust pool sizes for individual/groups/type etc.
By not they use 5 as the default pool size. And have their own executor unless configured otherwise.



                </div></div></li><li><div><div><b>summary:</b> ExecutorService configuration
                </div><div><b>description:</b> Camel uses some thread pools, for component, endpoint and processor.

We should have some default configuration that is easy to configure with Camel to adjust pool sizes for individual/groups/type etc.
By not they use 5 as the default pool size. And have their own executor unless configured otherwise.



                </div><div><b>label:</b> code-design
                </div></div></li><li><div><div><b>summary:</b> ExecutorService configuration
                </div><div><b>description:</b> Camel uses some thread pools, for component, endpoint and processor.

We should have some default configuration that is easy to configure with Camel to adjust pool sizes for individual/groups/type etc.
By not they use 5 as the default pool size. And have their own executor unless configured otherwise.



                </div></div></li><li><div><div><b>summary:</b> ExecutorService configuration
                </div><div><b>description:</b> Camel uses some thread pools, for component, endpoint and processor.

We should have some default configuration that is easy to configure with Camel to adjust pool sizes for individual/groups/type etc.
By not they use 5 as the default pool size. And have their own executor unless configured otherwise.



                </div></div></li><li><div><div><b>summary:</b> ExecutorService configuration
                </div><div><b>description:</b> Camel uses some thread pools, for component, endpoint and processor.

We should have some default configuration that is easy to configure with Camel to adjust pool sizes for individual/groups/type etc.
By not they use 5 as the default pool size. And have their own executor unless configured otherwise.



                </div></div></li><li><div><div><b>summary:</b> ExecutorService configuration
                </div><div><b>description:</b> Camel uses some thread pools, for component, endpoint and processor.

We should have some default configuration that is easy to configure with Camel to adjust pool sizes for individual/groups/type etc.
By not they use 5 as the default pool size. And have their own executor unless configured otherwise.



                </div></div></li><li><div><div><b>summary:</b> ExecutorService configuration
                </div><div><b>description:</b> Camel uses some thread pools, for component, endpoint and processor.

We should have some default configuration that is easy to configure with Camel to adjust pool sizes for individual/groups/type etc.
By not they use 5 as the default pool size. And have their own executor unless configured otherwise.



                </div></div></li></ol></div><div><b>jira_issues_comments:</b> <ol><li><div>
                Supports thread pools using core pool size, max pool size, timeout etc.

e.g. we gotta do this ourself instead of the pre existing on the Executors.

{code}
 ExecutorService executor = new ThreadPoolExecutor(numberOfThreads, numberOfThreads, 60, TimeUnit.SECONDS, new LinkedBlockingQueue&lt;Runnable&gt;());
{code}

This can be retrofitted in the ExecutorServiceHelper which camel uses to obtain a default pool.
              </div></li><li><div>
                See wiki page
http://cwiki.apache.org/confluence/display/CAMEL/Threading+Model
              </div></li><li><div>
                trunk: 925588.

Added support for multiple thread pool profiles with inheritance from the default profile for options not explicit given
              </div></li><li><div>
                trunk: 925181.

Thread pools is now managed from JMX
              </div></li><li><div>
                See more details here
http://cwiki.apache.org/confluence/display/CAMEL/Camel+2.3+-+ThreadPool+Configuration
              </div></li><li><div>
                Added a threadPool in Spring XML so you can easily define custom pools and use in Camel routes

{code:xml}
    &lt;camelContext id="camel" xmlns="http://camel.apache.org/schema/spring"&gt;

        &lt;!-- define a custom thread pool --&gt;
        &lt;threadPool id="myPool" poolSize="2" maxPoolSize="4" threadName="myPool"/&gt;

        &lt;route&gt;
            &lt;from uri="direct:start"/&gt;
            &lt;!-- use the custom thread pool in the camel route --&gt;
            &lt;threads executorServiceRef="myOtherPool"&gt;
                &lt;to uri="mock:result"/&gt;
            &lt;/threads&gt;
        &lt;/route&gt;
        
    &lt;/camelContext&gt;
{code}

trunk: 919408.
              </div></li><li><div>
                Aligned DSL to unify thread pool configuration on EIPs by introducing a {{ExecutorServiceAware}} interface for the EIPs

trunk: 919331.
              </div></li><li><div>
                trunk: 919389.

threads DSL can now be much more configured with max pool size, keep alive timeout and the likes
              </div></li><li><div>
                trunk: 919382.

Prefer to use CachedExecutorService as its the best general purpose pool. It can grown/shrink and recommended to be used by the JDK and concurrent experts.

              </div></li><li><div>
                trunk: 920791.

the thread name can now be configured using a pattern like syntax
              </div></li><li><div>
                Having ExecutorServiceStrategy to handle shutdown of thread pools

trunk: 922485.
              </div></li><li><div>
                Introduced {{ShutdownableService}} so having CamelContext shutdown when its stops.

trunk: 922296.
              </div></li><li><div>
                trunk: 922185.

preparing for pattern based configuration
              </div></li><li><div><div><b>body:</b> EIP model now creates thread pool for its EIP processor, so they are pre created and we have better knowledge which route uses which pools.

trunk: 922524.
                </div><div><b>label:</b> code-design
                </div></div></li><li><div>
                Made much more progress on this today.

See wiki page for details
http://cwiki.apache.org/confluence/display/CAMEL/Camel+2.3+-+ThreadPool+Configuration

What is missing is the JMX part :)
              </div></li><li><div>
                I have added a default thread pool file which can be configured in both Java DSL and Spring XML.

Here is a sample from Spring XML
{code:xml}
    &lt;camelContext id="camel" xmlns="http://camel.apache.org/schema/spring"&gt;

        &lt;!-- define the default thread pool profile to be used in Camel --&gt;
        &lt;threadPoolProfile id="myDefaultProfile"
                           defaultProfile="true"
                           poolSize="5" keepAliveTime="25" maxPoolSize="15" maxQueueSize="250" rejectedPolicy="Abort"/&gt;

        &lt;route&gt;
            &lt;from uri="direct:start"/&gt;
            &lt;threads/&gt;
            &lt;to uri="mock:result"/&gt;
        &lt;/route&gt;

    &lt;/camelContext&gt;
{code}

The profile dictates that all the default kind of thread pools Camel creates will follow the profile. For example &lt;threads/&gt; etc.
Of course background threads will still be a single threaded pool etc.

In the future those profiles, can be enhanced to have a pattern like options so you can say, route X should use this profile, route Y that profile etc.
              </div></li><li><div>
                Closing all resolved tickets from 2010 or older
              </div></li></ol></div></div></html>