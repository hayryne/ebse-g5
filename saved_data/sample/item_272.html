<!DOCTYPE html><html><div class="item-title">
        Item 272
      </div> <div class="item-details"><div><b>git_comments:</b> <ol></ol></div><div><b>git_commits:</b> <ol><li><div><div><b>summary:</b> PHOENIX-4304 adding checks whether coprocesseros presently already before adding again(Rajeshbabu)
                </div><div><b>message:</b> PHOENIX-4304 adding checks whether coprocesseros presently already before adding again(Rajeshbabu)

                </div></div></li></ol></div><div><b>github_issues:</b> <ol></ol></div><div><b>github_issues_comments:</b> <ol></ol></div><div><b>github_pulls:</b> <ol></ol></div><div><b>github_pulls_comments:</b> <ol></ol></div><div><b>github_pulls_reviews:</b> <ol></ol></div><div><b>jira_issues:</b> <ol><li><div><div><b>summary:</b> Refactoring to avoid using deprecated HTableDescriptor, HColumnDescriptor, HRegionInfo
                </div><div><b>description:</b> We can change 
HTableDescriptor - &gt; TableDescriptor
HColumnDescriptor -&gt; ColumnFamilyDescriptor
HRegioInfo -&gt; RegionInfo
                </div></div></li><li><div><div><b>summary:</b> Refactoring to avoid using deprecated HTableDescriptor, HColumnDescriptor, HRegionInfo
                </div><div><b>description:</b> We can change 
HTableDescriptor - &gt; TableDescriptor
HColumnDescriptor -&gt; ColumnFamilyDescriptor
HRegioInfo -&gt; RegionInfo
                </div><div><b>label:</b> code-design
                </div></div></li><li><div><div><b>summary:</b> Refactoring to avoid using deprecated HTableDescriptor, HColumnDescriptor, HRegionInfo
                </div><div><b>description:</b> We can change 
HTableDescriptor - &gt; TableDescriptor
HColumnDescriptor -&gt; ColumnFamilyDescriptor
HRegioInfo -&gt; RegionInfo
                </div></div></li><li><div><div><b>summary:</b> Refactoring to avoid using deprecated HTableDescriptor, HColumnDescriptor, HRegionInfo
                </div><div><b>description:</b> We can change 
HTableDescriptor - &gt; TableDescriptor
HColumnDescriptor -&gt; ColumnFamilyDescriptor
HRegioInfo -&gt; RegionInfo
                </div></div></li><li><div><div><b>summary:</b> Refactoring to avoid using deprecated HTableDescriptor, HColumnDescriptor, HRegionInfo
                </div><div><b>description:</b> We can change 
HTableDescriptor - &gt; TableDescriptor
HColumnDescriptor -&gt; ColumnFamilyDescriptor
HRegioInfo -&gt; RegionInfo
                </div></div></li><li><div><div><b>summary:</b> Refactoring to avoid using deprecated HTableDescriptor, HColumnDescriptor, HRegionInfo
                </div><div><b>description:</b> We can change 
HTableDescriptor - &gt; TableDescriptor
HColumnDescriptor -&gt; ColumnFamilyDescriptor
HRegioInfo -&gt; RegionInfo
                </div></div></li><li><div><div><b>summary:</b> Refactoring to avoid using deprecated HTableDescriptor, HColumnDescriptor, HRegionInfo
                </div><div><b>description:</b> We can change 
HTableDescriptor - &gt; TableDescriptor
HColumnDescriptor -&gt; ColumnFamilyDescriptor
HRegioInfo -&gt; RegionInfo
                </div></div></li><li><div><div><b>summary:</b> Refactoring to avoid using deprecated HTableDescriptor, HColumnDescriptor, HRegionInfo
                </div><div><b>description:</b> We can change 
HTableDescriptor - &gt; TableDescriptor
HColumnDescriptor -&gt; ColumnFamilyDescriptor
HRegioInfo -&gt; RegionInfo
                </div><div><b>label:</b> code-design
                </div></div></li></ol></div><div><b>jira_issues_comments:</b> <ol><li><div>
                [~ankit@apache.org] [~sergey.soldatov] [~elserj] Here is the patch replace deprecated HTD,HCD and HRI with TableDescriptor, ColumnFamilyDescriptor, RegionInfo respectively. Please review.
              </div></li><li><div><div><b>body:</b> LGTM.

{code}
@@ -1690,17 +1675,17 @@ public class ConnectionQueryServicesImpl extends DelegateQueryServices implement
     private void ensureViewIndexTableCreated(PTable table, long timestamp, boolean isNamespaceMapped)
             throws SQLException {
         byte[] physicalTableName = table.getPhysicalName().getBytes();
-        HTableDescriptor htableDesc = this.getTableDescriptor(physicalTableName);
+       TableDescriptor htableDesc = this.getTableDescriptor(physicalTableName);
{code}

Nit: space :)
                </div><div><b>label:</b> code-design
                </div></div></li><li><div>
                LGTM, but not compatible with the 5.x branch already. (5 files in conflict).
              </div></li><li><div>
                Ankit handled the conflicts and committed the patch. Thanks [~ankit@apache.org]. This issue is specific to HBase 2.0 hence closing.
              </div></li><li><div>
                [~rajeshbabu], In the addendum I see, we are ignoring SecureUserConnectionsTest, is there any reason for it?
              </div></li><li><div>
                FYI, I changed fixVersion from 4.14.0 to 5.0.0 as I don't think this has made it yet to 4.x branches.
              </div></li><li><div>
                FAILURE: Integrated in Jenkins build PreCommit-PHOENIX-Build #1930 (See [https://builds.apache.org/job/PreCommit-PHOENIX-Build/1930/])
PHOENIX-4304 Refactoring to avoid using deprecated HTableDescriptor, (ankitsinghal59: rev c3ec80d3166d8b365ae39a69bd57d24d8971c63d)
* (edit) phoenix-core/src/main/java/org/apache/phoenix/util/IndexUtil.java
* (edit) phoenix-core/src/test/java/org/apache/phoenix/compile/QueryCompilerTest.java
* (edit) phoenix-core/src/it/java/org/apache/phoenix/end2end/index/MutableIndexSplitIT.java
* (edit) phoenix-core/src/it/java/org/apache/phoenix/end2end/MappingTableDataTypeIT.java
* (edit) phoenix-core/src/main/java/org/apache/phoenix/parse/CreateTableStatement.java
* (edit) phoenix-core/src/main/java/org/apache/phoenix/query/DelegateConnectionQueryServices.java
* (edit) phoenix-core/src/it/java/org/apache/phoenix/end2end/IndexToolForPartialBuildIT.java
* (edit) phoenix-core/src/main/java/org/apache/phoenix/util/RepairUtil.java
* (edit) phoenix-core/src/main/java/org/apache/phoenix/transaction/TephraTransactionTable.java
* (edit) phoenix-core/src/it/java/org/apache/phoenix/end2end/QueryDatabaseMetaDataIT.java
* (edit) phoenix-core/src/it/java/org/apache/phoenix/end2end/index/MutableIndexIT.java
* (edit) phoenix-core/src/main/java/org/apache/phoenix/transaction/PhoenixTransactionContext.java
* (edit) phoenix-core/src/main/java/org/apache/phoenix/hbase/index/Indexer.java
* (edit) phoenix-core/src/main/java/org/apache/phoenix/hbase/index/write/ParallelWriterIndexCommitter.java
* (edit) phoenix-core/src/it/java/org/apache/phoenix/end2end/AlterTableIT.java
* (edit) phoenix-core/src/test/java/org/apache/phoenix/hbase/index/write/TestWALRecoveryCaching.java
* (edit) phoenix-core/src/it/java/org/apache/phoenix/end2end/DynamicColumnIT.java
* (edit) phoenix-core/src/test/java/org/apache/phoenix/hbase/index/util/TestIndexManagementUtil.java
* (edit) phoenix-core/src/it/java/org/apache/phoenix/rpc/PhoenixServerRpcIT.java
* (edit) phoenix-core/src/main/java/org/apache/phoenix/query/ConnectionQueryServices.java
* (edit) phoenix-core/src/test/java/org/apache/phoenix/hbase/index/write/recovery/TestPerRegionIndexWriteCache.java
* (edit) phoenix-core/src/it/java/org/apache/phoenix/end2end/SetPropertyIT.java
* (edit) phoenix-core/src/main/java/org/apache/phoenix/query/ConnectionlessQueryServicesImpl.java
* (edit) phoenix-core/src/test/java/org/apache/phoenix/hbase/index/covered/NonTxIndexBuilderTest.java
* (edit) phoenix-core/src/it/java/org/apache/phoenix/end2end/FlappingLocalIndexIT.java
* (edit) phoenix-core/src/main/java/org/apache/phoenix/hbase/index/covered/NonTxIndexBuilder.java
* (edit) phoenix-core/src/main/java/org/apache/phoenix/iterate/BaseResultIterators.java
* (edit) phoenix-core/src/it/java/org/apache/phoenix/end2end/AlterMultiTenantTableWithViewsIT.java
* (edit) phoenix-core/src/main/java/org/apache/phoenix/query/GuidePostsCache.java
* (edit) phoenix-core/src/main/java/org/apache/phoenix/index/PhoenixIndexFailurePolicy.java
* (edit) phoenix-core/src/it/java/org/apache/phoenix/end2end/NativeHBaseTypesIT.java
* (edit) phoenix-core/src/it/java/org/apache/phoenix/end2end/FlappingAlterTableIT.java
* (edit) phoenix-core/src/it/java/org/apache/hadoop/hbase/regionserver/wal/WALRecoveryRegionPostOpenIT.java
* (edit) phoenix-core/src/main/java/org/apache/phoenix/iterate/TableSnapshotResultIterator.java
* (edit) phoenix-core/src/main/java/org/apache/hadoop/hbase/regionserver/IndexHalfStoreFileReaderGenerator.java
* (edit) phoenix-core/src/it/java/org/apache/phoenix/end2end/index/MutableIndexReplicationIT.java
* (edit) phoenix-core/src/main/java/org/apache/phoenix/compile/UpsertCompiler.java
* (edit) phoenix-core/src/it/java/org/apache/phoenix/end2end/index/BaseIndexIT.java
* (edit) phoenix-core/src/it/java/org/apache/phoenix/end2end/index/LocalIndexIT.java
* (edit) phoenix-core/src/main/java/org/apache/phoenix/cache/ServerCacheClient.java
* (edit) phoenix-core/src/it/java/org/apache/phoenix/end2end/LocalIndexSplitMergeIT.java
* (edit) phoenix-core/src/main/java/org/apache/phoenix/hbase/index/write/TrackingParallelWriterIndexCommitter.java
* (edit) phoenix-core/src/it/java/org/apache/phoenix/hbase/index/FailForUnsupportedHBaseVersionsIT.java
* (edit) phoenix-core/src/main/java/org/apache/phoenix/execute/ClientAggregatePlan.java
* (edit) phoenix-core/src/it/java/org/apache/phoenix/end2end/ColumnProjectionOptimizationIT.java
* (edit) phoenix-core/src/it/java/org/apache/phoenix/end2end/NamespaceSchemaMappingIT.java
* (edit) phoenix-core/src/test/java/org/apache/phoenix/util/TestUtil.java
* (edit) phoenix-core/src/main/java/org/apache/phoenix/index/PhoenixIndexCodec.java
* (edit) phoenix-core/src/main/java/org/apache/phoenix/query/QueryConstants.java
* (edit) phoenix-core/src/it/java/org/apache/phoenix/tx/ParameterizedTransactionIT.java
* (edit) phoenix-core/src/main/java/org/apache/phoenix/iterate/RegionScannerFactory.java
* (edit) phoenix-core/src/test/java/org/apache/phoenix/query/BaseTest.java
* (edit) phoenix-core/src/test/java/org/apache/phoenix/schema/stats/StatisticsScannerTest.java
* (edit) phoenix-core/src/main/java/org/apache/phoenix/query/ConnectionQueryServicesImpl.java
* (edit) phoenix-core/src/it/java/org/apache/phoenix/execute/UpsertSelectOverlappingBatchesIT.java
* (edit) phoenix-core/src/main/java/org/apache/phoenix/schema/MetaDataClient.java
* (edit) phoenix-core/src/main/java/org/apache/phoenix/util/ScanUtil.java
* (edit) phoenix-core/src/main/java/org/apache/phoenix/util/UpgradeUtil.java
* (edit) phoenix-core/src/it/java/org/apache/phoenix/end2end/CreateTableIT.java
* (edit) phoenix-core/src/it/java/org/apache/phoenix/tx/TransactionIT.java
* (edit) phoenix-core/src/it/java/org/apache/phoenix/end2end/UseSchemaIT.java
* (edit) phoenix-core/src/it/java/org/apache/phoenix/end2end/ViewIT.java
* (edit) phoenix-core/src/test/java/org/apache/phoenix/hbase/index/write/TestIndexWriter.java
* (edit) phoenix-core/src/main/java/org/apache/phoenix/util/MetaDataUtil.java
* (edit) phoenix-core/src/main/java/org/apache/phoenix/iterate/MapReduceParallelScanGrouper.java
* (edit) phoenix-core/src/it/java/org/apache/phoenix/coprocessor/StatisticsCollectionRunTrackerIT.java
* (edit) phoenix-core/src/it/java/org/apache/phoenix/schema/stats/StatsCollectorIT.java
* (edit) phoenix-core/src/main/java/org/apache/phoenix/coprocessor/UngroupedAggregateRegionObserver.java
* (edit) phoenix-core/src/main/java/org/apache/phoenix/iterate/SnapshotScanner.java
* (edit) phoenix-core/src/main/java/org/apache/phoenix/transaction/OmidTransactionTable.java
* (edit) phoenix-core/src/it/java/org/apache/hadoop/hbase/regionserver/wal/WALReplayWithIndexWritesAndCompressedWALIT.java
* (edit) phoenix-core/src/it/java/org/apache/phoenix/end2end/index/DropMetadataIT.java
* (edit) phoenix-core/src/test/java/org/apache/phoenix/hbase/index/covered/CoveredColumnIndexSpecifierBuilder.java
* (edit) phoenix-core/src/it/java/org/apache/phoenix/end2end/SkipScanAfterManualSplitIT.java
* (edit) phoenix-core/src/it/java/org/apache/phoenix/iterate/RoundRobinResultIteratorIT.java
PHOENIX-4304 adding checks whether coprocesseros presently already (rajeshbabu: rev 06bb5d95ada56ccd86b538b29d12468a096ff376)
* (edit) phoenix-core/src/main/java/org/apache/phoenix/query/ConnectionQueryServicesImpl.java
PHOENIX-4304 fixing the coprocessor checks(Rajeshbabu) (rajeshbabu: rev a3d6c774ad309cd2bd0895ee4d5cb7172a03aa20)
* (edit) phoenix-core/src/test/java/org/apache/phoenix/jdbc/SecureUserConnectionsTest.java
* (edit) phoenix-core/src/main/java/org/apache/phoenix/query/ConnectionQueryServicesImpl.java
PHOENIX-4304 Adding coprocessor existence checks to avoid (rajeshbabu: rev 30ff6d5bbca230ccfba9cbfeceea34b06cf9b022)
* (edit) phoenix-core/src/main/java/org/apache/phoenix/query/ConnectionQueryServicesImpl.java

              </div></li></ol></div></div></html>