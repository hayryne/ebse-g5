<!DOCTYPE html><html><div class="item-title">
        Item 44
      </div> <div class="item-details"><div><b>git_comments:</b> <ol><li><div>
                *
 * Defines the record format versions supported by Kafka.
 *
 * For historical reasons, the record format version is also known as `magic` and `message format version`. Note that
 * the version actually applies to the {@link RecordBatch} (instead of the {@link Record}). Finally, the
 * `message.format.version` topic config confusingly expects an ApiVersion instead of a RecordVersion.
 
              </div></li><li><div>
                *
 * Defines the record format versions supported by Kafka.
 *
 * For historical reasons, the record format version is also known as `magic` and `message format version`. Note that
 * the version actually applies to the {@link RecordBatch} (instead of the {@link Record}). Finally, the
 * `message.format.version` topic config confusingly expects an ApiVersion instead of a RecordVersion.
 
              </div></li></ol></div><div><b>git_commits:</b> <ol><li><div><div><b>summary:</b> MINOR: Rename RecordFormat to RecordVersion (#4809)
                </div><div><b>message:</b> MINOR: Rename RecordFormat to RecordVersion (#4809)

Also include a few clean-ups:

* Method/variable/parameter renames to make them consistent with
the class name
* Return `ApiVersion` from `minSupportedFor`
* Use `values` to remove some code duplication
* Reduce duplication in `ApiVersion` by introducing the `shortVersion`
method and building the versions map programatically
* Avoid unnecessary `regex` in `ApiVersion.apply`
* Added scaladoc to a few methods

Some of these were originally discussed in:

https://github.com/apache/kafka/pull/4583#pullrequestreview-98089400

Added a test for `ApiVersion.shortVersion`. Relying on existing tests
for the rest since there is no change in behaviour.

Reviewers: Jason Gustafson &lt;jason@confluent.io&gt;
                </div></div></li></ol></div><div><b>github_issues:</b> <ol></ol></div><div><b>github_issues_comments:</b> <ol></ol></div><div><b>github_pulls:</b> <ol><li><div><div><b>title:</b> MINOR: Rename RecordFormat to RecordVersion
                </div><div><b>body:</b> Also include a few clean-ups:

* Method/variable/parameter renames to make them consistent with
the class name
* Return `ApiVersion` from `minSupportedFor`
* Use `values` to remove some code duplication
* Reduce duplication in `ApiVersion` by introducing the `shortVersion`
method and building the versions map programatically
* Avoid unnecessary `regex` in `ApiVersion.apply`
* Added scaladoc to a few methods

Some of these were originally discussed in:

https://github.com/apache/kafka/pull/4583#pullrequestreview-98089400

Added a test for `ApiVersion.shortVersion`. Relying on existing tests
for the rest since there is no change in behaviour.

### Committer Checklist (excluded from commit message)
- [ ] Verify design and implementation 
- [ ] Verify test coverage and CI build status
- [ ] Verify documentation (including upgrade notes)

                </div></div></li></ol></div><div><b>github_pulls_comments:</b> <ol><li><div>
                Thanks for the review @hachikuji, does the updated version look OK?
              </div></li><li><div>
                retest this please
              </div></li><li><div>
                retest this please
              </div></li><li><div>
                @hachikuji does this update look OK?
              </div></li></ol></div><div><b>github_pulls_reviews:</b> <ol><li><div>
                nit: the redundancy in this name is slightly vexing. Maybe we can leave off `ForRecordVersion` since it's sort of implicit from the argument anyway. Perhaps `minSupportingVersion`?
              </div></li><li><div>
                Wonder if it would be better to use `Option`?
              </div></li><li><div>
                Yes, I wondered about that too. The reason why I didn't want to is that every new version should define this (i.e. `None` is not a valid option for new versions). So, only legacy versions have the empty string case. And there's only one place where we need to check for the empty string. What do you think?
              </div></li><li><div>
                @hachikuji I pushed a change, what do you think?
              </div></li></ol></div><div><b>jira_issues:</b> <ol></ol></div><div><b>jira_issues_comments:</b> <ol></ol></div></div></html>