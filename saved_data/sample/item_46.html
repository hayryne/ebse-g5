<!DOCTYPE html><html><div class="item-title">
        Item 46
      </div> <div class="item-details"><div><b>git_comments:</b> <ol><li><div>
                * Returns the current range. 
              </div></li><li><div>
                * Tests for {@link ByteKeyRangeTracker#getFractionConsumed()} with updated start key. 
              </div></li><li><div>
                * Tests for updating the start key to the first record returned. 
              </div></li></ol></div><div><b>git_commits:</b> <ol><li><div><div><b>summary:</b> Closes #440
                </div><div><b>message:</b> Closes #440

                </div></div></li></ol></div><div><b>github_issues:</b> <ol></ol></div><div><b>github_issues_comments:</b> <ol></ol></div><div><b>github_pulls:</b> <ol><li><div><div><b>title:</b> [BEAM-347] Modify range tracker to use first response as start key
                </div><div><b>body:</b> Be sure to do all of the following to help us incorporate your contribution
quickly and easily:
- [ ] Make sure the PR title is formatted like:
  `[BEAM-&lt;Jira issue #&gt;] Description of pull request`
- [ ] Make sure tests pass via `mvn clean verify`. (Even better, enable
     Travis-CI on your fork and ensure the whole test matrix passes).
- [ ] Replace `&lt;Jira issue #&gt;` in the title with the actual Jira issue
     number, if there is one.
- [ ] If this contribution is large, please file an Apache
     [Individual Contributor License Agreement](https://www.apache.org/licenses/icla.txt).

---

                </div></div></li><li><div><div><b>title:</b> [BEAM-347] Modify range tracker to use first response as start key
                </div><div><b>body:</b> Be sure to do all of the following to help us incorporate your contribution
quickly and easily:
- [ ] Make sure the PR title is formatted like:
  `[BEAM-&lt;Jira issue #&gt;] Description of pull request`
- [ ] Make sure tests pass via `mvn clean verify`. (Even better, enable
     Travis-CI on your fork and ensure the whole test matrix passes).
- [ ] Replace `&lt;Jira issue #&gt;` in the title with the actual Jira issue
     number, if there is one.
- [ ] If this contribution is large, please file an Apache
     [Individual Contributor License Agreement](https://www.apache.org/licenses/icla.txt).

---

                </div></div></li><li><div><div><b>title:</b> [BEAM-347] Modify range tracker to use first response as start key
                </div><div><b>body:</b> Be sure to do all of the following to help us incorporate your contribution
quickly and easily:
- [ ] Make sure the PR title is formatted like:
  `[BEAM-&lt;Jira issue #&gt;] Description of pull request`
- [ ] Make sure tests pass via `mvn clean verify`. (Even better, enable
     Travis-CI on your fork and ensure the whole test matrix passes).
- [ ] Replace `&lt;Jira issue #&gt;` in the title with the actual Jira issue
     number, if there is one.
- [ ] If this contribution is large, please file an Apache
     [Individual Contributor License Agreement](https://www.apache.org/licenses/icla.txt).

---

                </div></div></li><li><div><div><b>title:</b> [BEAM-347] Modify range tracker to use first response as start key
                </div><div><b>body:</b> Be sure to do all of the following to help us incorporate your contribution
quickly and easily:
- [ ] Make sure the PR title is formatted like:
  `[BEAM-&lt;Jira issue #&gt;] Description of pull request`
- [ ] Make sure tests pass via `mvn clean verify`. (Even better, enable
     Travis-CI on your fork and ensure the whole test matrix passes).
- [ ] Replace `&lt;Jira issue #&gt;` in the title with the actual Jira issue
     number, if there is one.
- [ ] If this contribution is large, please file an Apache
     [Individual Contributor License Agreement](https://www.apache.org/licenses/icla.txt).

---

                </div></div></li><li><div><div><b>title:</b> [BEAM-347] Modify range tracker to use first response as start key
                </div><div><b>body:</b> Be sure to do all of the following to help us incorporate your contribution
quickly and easily:
- [ ] Make sure the PR title is formatted like:
  `[BEAM-&lt;Jira issue #&gt;] Description of pull request`
- [ ] Make sure tests pass via `mvn clean verify`. (Even better, enable
     Travis-CI on your fork and ensure the whole test matrix passes).
- [ ] Replace `&lt;Jira issue #&gt;` in the title with the actual Jira issue
     number, if there is one.
- [ ] If this contribution is large, please file an Apache
     [Individual Contributor License Agreement](https://www.apache.org/licenses/icla.txt).

---

                </div></div></li><li><div><div><b>title:</b> [BEAM-347] Modify range tracker to use first response as start key
                </div><div><b>body:</b> Be sure to do all of the following to help us incorporate your contribution
quickly and easily:
- [ ] Make sure the PR title is formatted like:
  `[BEAM-&lt;Jira issue #&gt;] Description of pull request`
- [ ] Make sure tests pass via `mvn clean verify`. (Even better, enable
     Travis-CI on your fork and ensure the whole test matrix passes).
- [ ] Replace `&lt;Jira issue #&gt;` in the title with the actual Jira issue
     number, if there is one.
- [ ] If this contribution is large, please file an Apache
     [Individual Contributor License Agreement](https://www.apache.org/licenses/icla.txt).

---

                </div></div></li><li><div><div><b>title:</b> [BEAM-347] Modify range tracker to use first response as start key
                </div><div><b>body:</b> Be sure to do all of the following to help us incorporate your contribution
quickly and easily:
- [ ] Make sure the PR title is formatted like:
  `[BEAM-&lt;Jira issue #&gt;] Description of pull request`
- [ ] Make sure tests pass via `mvn clean verify`. (Even better, enable
     Travis-CI on your fork and ensure the whole test matrix passes).
- [ ] Replace `&lt;Jira issue #&gt;` in the title with the actual Jira issue
     number, if there is one.
- [ ] If this contribution is large, please file an Apache
     [Individual Contributor License Agreement](https://www.apache.org/licenses/icla.txt).

---

                </div></div></li><li><div><div><b>title:</b> [BEAM-347] Modify range tracker to use first response as start key
                </div><div><b>body:</b> Be sure to do all of the following to help us incorporate your contribution
quickly and easily:
- [ ] Make sure the PR title is formatted like:
  `[BEAM-&lt;Jira issue #&gt;] Description of pull request`
- [ ] Make sure tests pass via `mvn clean verify`. (Even better, enable
     Travis-CI on your fork and ensure the whole test matrix passes).
- [ ] Replace `&lt;Jira issue #&gt;` in the title with the actual Jira issue
     number, if there is one.
- [ ] If this contribution is large, please file an Apache
     [Individual Contributor License Agreement](https://www.apache.org/licenses/icla.txt).

---

                </div></div></li><li><div><div><b>title:</b> [BEAM-347] Modify range tracker to use first response as start key
                </div><div><b>body:</b> Be sure to do all of the following to help us incorporate your contribution
quickly and easily:
- [ ] Make sure the PR title is formatted like:
  `[BEAM-&lt;Jira issue #&gt;] Description of pull request`
- [ ] Make sure tests pass via `mvn clean verify`. (Even better, enable
     Travis-CI on your fork and ensure the whole test matrix passes).
- [ ] Replace `&lt;Jira issue #&gt;` in the title with the actual Jira issue
     number, if there is one.
- [ ] If this contribution is large, please file an Apache
     [Individual Contributor License Agreement](https://www.apache.org/licenses/icla.txt).

---

                </div></div></li><li><div><div><b>title:</b> [BEAM-347] Modify range tracker to use first response as start key
                </div><div><b>body:</b> Be sure to do all of the following to help us incorporate your contribution
quickly and easily:
- [ ] Make sure the PR title is formatted like:
  `[BEAM-&lt;Jira issue #&gt;] Description of pull request`
- [ ] Make sure tests pass via `mvn clean verify`. (Even better, enable
     Travis-CI on your fork and ensure the whole test matrix passes).
- [ ] Replace `&lt;Jira issue #&gt;` in the title with the actual Jira issue
     number, if there is one.
- [ ] If this contribution is large, please file an Apache
     [Individual Contributor License Agreement](https://www.apache.org/licenses/icla.txt).

---

                </div><div><b>label:</b> code-design
                </div></div></li><li><div><div><b>title:</b> [BEAM-347] Modify range tracker to use first response as start key
                </div><div><b>body:</b> Be sure to do all of the following to help us incorporate your contribution
quickly and easily:
- [ ] Make sure the PR title is formatted like:
  `[BEAM-&lt;Jira issue #&gt;] Description of pull request`
- [ ] Make sure tests pass via `mvn clean verify`. (Even better, enable
     Travis-CI on your fork and ensure the whole test matrix passes).
- [ ] Replace `&lt;Jira issue #&gt;` in the title with the actual Jira issue
     number, if there is one.
- [ ] If this contribution is large, please file an Apache
     [Individual Contributor License Agreement](https://www.apache.org/licenses/icla.txt).

---

                </div></div></li><li><div><div><b>title:</b> [BEAM-347] Modify range tracker to use first response as start key
                </div><div><b>body:</b> Be sure to do all of the following to help us incorporate your contribution
quickly and easily:
- [ ] Make sure the PR title is formatted like:
  `[BEAM-&lt;Jira issue #&gt;] Description of pull request`
- [ ] Make sure tests pass via `mvn clean verify`. (Even better, enable
     Travis-CI on your fork and ensure the whole test matrix passes).
- [ ] Replace `&lt;Jira issue #&gt;` in the title with the actual Jira issue
     number, if there is one.
- [ ] If this contribution is large, please file an Apache
     [Individual Contributor License Agreement](https://www.apache.org/licenses/icla.txt).

---

                </div></div></li><li><div><div><b>title:</b> [BEAM-347] Modify range tracker to use first response as start key
                </div><div><b>body:</b> Be sure to do all of the following to help us incorporate your contribution
quickly and easily:
- [ ] Make sure the PR title is formatted like:
  `[BEAM-&lt;Jira issue #&gt;] Description of pull request`
- [ ] Make sure tests pass via `mvn clean verify`. (Even better, enable
     Travis-CI on your fork and ensure the whole test matrix passes).
- [ ] Replace `&lt;Jira issue #&gt;` in the title with the actual Jira issue
     number, if there is one.
- [ ] If this contribution is large, please file an Apache
     [Individual Contributor License Agreement](https://www.apache.org/licenses/icla.txt).

---

                </div></div></li><li><div><div><b>title:</b> [BEAM-347] Modify range tracker to use first response as start key
                </div><div><b>body:</b> Be sure to do all of the following to help us incorporate your contribution
quickly and easily:
- [ ] Make sure the PR title is formatted like:
  `[BEAM-&lt;Jira issue #&gt;] Description of pull request`
- [ ] Make sure tests pass via `mvn clean verify`. (Even better, enable
     Travis-CI on your fork and ensure the whole test matrix passes).
- [ ] Replace `&lt;Jira issue #&gt;` in the title with the actual Jira issue
     number, if there is one.
- [ ] If this contribution is large, please file an Apache
     [Individual Contributor License Agreement](https://www.apache.org/licenses/icla.txt).

---

                </div><div><b>label:</b> test
                </div></div></li><li><div><div><b>title:</b> [BEAM-347] Modify range tracker to use first response as start key
                </div><div><b>body:</b> Be sure to do all of the following to help us incorporate your contribution
quickly and easily:
- [ ] Make sure the PR title is formatted like:
  `[BEAM-&lt;Jira issue #&gt;] Description of pull request`
- [ ] Make sure tests pass via `mvn clean verify`. (Even better, enable
     Travis-CI on your fork and ensure the whole test matrix passes).
- [ ] Replace `&lt;Jira issue #&gt;` in the title with the actual Jira issue
     number, if there is one.
- [ ] If this contribution is large, please file an Apache
     [Individual Contributor License Agreement](https://www.apache.org/licenses/icla.txt).

---

                </div></div></li></ol></div><div><b>github_pulls_comments:</b> <ol><li><div>
                R: @dhalperi

              </div></li><li><div>
                This PR contains a lot of other commits, it looks like. Can you please rebase on top of master and force-push?

This assumes you followed the `remote` naming scheme from the Beam contribution guide:

``` sh
git fetch --all
git rebase apache/master
git log apache/master..    # this should only show your changes
git push -f ianzhou1 HEAD:beam
```

              </div></li><li><div>
                I see you have BEAM-??? in your title. Is there a ticket filed about this, so I can gain context on it? Just for my own edification.

              </div></li><li><div>
                Looks pretty good, Ian. Lots of comments, but all details.

Please do file a JIRA issue explaining the bug and then update the issue number in the title.

Happy to sit down with you to draft the issue desc if you're not comfortable writing from scratch, but you should go for it! Good intern task. ;)

              </div></li><li><div>
                ptal @dhalperi 

              </div></li><li><div>
                One last comment.

              </div></li><li><div>
                ptal again

              </div></li><li><div>
                LGTM. I can merge once the tests are green.

              </div></li></ol></div><div><b>github_pulls_reviews:</b> <ol><li><div><div><b>body:</b> I don't think this code needs to change. The range tracker could handle all of the range adjustment. Can you see why? (Maybe there's an issue somewhere else in BigtableIO?)

                </div><div><b>label:</b> code-design
                </div></div></li><li><div>
                This is subtle, but I don't think that we want this change. If the Source's range is `[a,z)` and the first key is `d`, I think the source's range is still `[a, z)`. Leave the start key alone, but the rangeTracker will still keep the state the same.

(The change above is still good)

              </div></li><li><div>
                please restore.

We may need to update the intellij config I sent you if it was removing this line

              </div></li><li><div>
                I expected a test of `getFractionConsumed` with a key that is NOT the initial start key, to ensure that progress gets and stays updated.

              </div></li><li><div><div><b>body:</b> please make it a separate test.

`testGetFractionConsumed` as it was, and then `testGetFractionConsumedLateStartKey`, for example

                </div><div><b>label:</b> test
                </div></div></li></ol></div><div><b>jira_issues:</b> <ol><li><div><div><b>summary:</b> Progress updates inaccurate for non-uniform keys in Bigtable
                </div><div><b>description:</b> When reading from a Bigtable source with clustered keys, fraction consumed progress updates are inaccurate. For example, for a range spanning ['a', 'z'], a cluster of keys starting with the letter 'm' (e.g. 'me100,' ..., 'me999') will be recorded as ~50% complete upon reading the first key, and will remain at this percentage until the final key has been read. Instead, the start of the range should be changed to the first key read (e.g. new range ['me100', 'z']). The end of the range can be changed over time through dynamic work rebalancing.
                </div></div></li></ol></div><div><b>jira_issues_comments:</b> <ol><li><div>
                Github user asfgit closed the pull request at:

    https://github.com/apache/incubator-beam/pull/440

              </div></li></ol></div></div></html>