<!DOCTYPE html><html><div class="item-title">
        Item 1
      </div> <div class="item-details"><div><b>git_comments:</b> <ol><li><div>
                *
     * @return The length in bytes of the on disk size for this SSTable. For
     * compressed files, this is not the same thing as the data length (see
     * length())
     
              </div></li><li><div>
                 This differs from length for compressed files (but we still need length for
 SegmentIterator because offsets in the file are relative to the uncompressed size)
              </div></li></ol></div><div><b>git_commits:</b> <ol><li><div><div><b>summary:</b> Fix places where uncompressed sstable size is used in place of the compressed one.
                </div><div><b>message:</b> Fix places where uncompressed sstable size is used in place of the compressed one.
patch by slebresne; reviewed by jbellis for CASSANDRA-3338


git-svn-id: https://svn.apache.org/repos/asf/cassandra/branches/cassandra-1.0.0@1180970 13f79535-47bb-0310-9956-ffa450edef68

                </div></div></li></ol></div><div><b>github_issues:</b> <ol></ol></div><div><b>github_issues_comments:</b> <ol></ol></div><div><b>github_pulls:</b> <ol></ol></div><div><b>github_pulls_comments:</b> <ol></ol></div><div><b>github_pulls_reviews:</b> <ol></ol></div><div><b>jira_issues:</b> <ol><li><div><div><b>summary:</b> Uncompressed sizes are used to estimate space for compaction of compressed sstables
                </div><div><b>description:</b> We are using the uncompressed data size when estimating if we have enough to compact sstables. This means we can easily refuse compaction when there is clearly enough room to compact.
                </div></div></li></ol></div><div><b>jira_issues_comments:</b> <ol><li><div>
                maybe we should rename .length() to uncompressedLength() as well?

otherwise +1
              </div></li><li><div><div><b>body:</b> Actually renaming length() to uncompressedLength() proved to be a good idea, as I had missed quite a bunch of places where the onDiskLength should be used. Attached v2.
                </div><div><b>label:</b> code-design
                </div></div></li><li><div>
                +1
              </div></li><li><div>
                Committed, thanks
              </div></li></ol></div></div></html>