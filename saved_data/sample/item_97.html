<!DOCTYPE html><html><div class="item-title">
        Item 97
      </div> <div class="item-details"><div><b>git_comments:</b> <ol></ol></div><div><b>git_commits:</b> <ol><li><div><div><b>summary:</b> TAJO-1815: Catalog store initialization with PostgreSQL failed.
                </div><div><b>message:</b> TAJO-1815: Catalog store initialization with PostgreSQL failed.

Signed-off-by: Hyunsik Choi &lt;hyunsik@apache.org&gt;

                </div></div></li></ol></div><div><b>github_issues:</b> <ol></ol></div><div><b>github_issues_comments:</b> <ol></ol></div><div><b>github_pulls:</b> <ol></ol></div><div><b>github_pulls_comments:</b> <ol></ol></div><div><b>github_pulls_reviews:</b> <ol></ol></div><div><b>jira_issues:</b> <ol><li><div><div><b>summary:</b> Catalog store initialization with PostgreSQL failed
                </div><div><b>description:</b> According to a document on Tajo website, PostgreSQL catalog store is set, but initialization failed like following:

{quote}
2015-09-04 22:20:09,977 WARN org.apache.tajo.catalog.store.XMLCatalogSchemaManager: Failed to drop database objects TABLE INDEXES,TABLE STATS,TABLE PARTITION_METHODS,TABLE PARTITIONS,TABLE PARTITION_KEYS
2015-09-04 22:20:09,978 ERROR org.apache.tajo.catalog.CatalogServer: CatalogServer initialization failed
java.lang.reflect.InvocationTargetException
  at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
  at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
  at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
  at java.lang.reflect.Constructor.newInstance(Constructor.java:526)
  at org.apache.tajo.catalog.CatalogServer.serviceInit(CatalogServer.java:129)
  at org.apache.hadoop.service.AbstractService.init(AbstractService.java:163)
  at org.apache.hadoop.service.CompositeService.serviceInit(CompositeService.java:107)
  at org.apache.tajo.master.TajoMaster.serviceInit(TajoMaster.java:213)
  at org.apache.hadoop.service.AbstractService.init(AbstractService.java:163)
  at org.apache.tajo.master.TajoMaster.main(TajoMaster.java:561)
Caused by: org.apache.tajo.exception.TajoInternalError: internal error: internal error: ERROR: multiple primary keys for table "indexes" are not allowed
  Position: 586
  at org.apache.tajo.catalog.store.AbstractDBStore.&lt;init&gt;(AbstractDBStore.java:187)
  at org.apache.tajo.catalog.store.PostgreSQLStore.&lt;init&gt;(PostgreSQLStore.java:32)
  ... 10 more
{quote}
                </div></div></li></ol></div><div><b>jira_issues_comments:</b> <ol><li><div>
                GitHub user eminency opened a pull request:

    https://github.com/apache/tajo/pull/730

    TAJO-1815: Catalog store initialization with PostgreSQL failed

    Duplicated primary key definition removed.

You can merge this pull request into a Git repository by running:

    $ git pull https://github.com/eminency/tajo TAJO-1815

Alternatively you can review and apply these changes as the patch at:

    https://github.com/apache/tajo/pull/730.patch

To close this pull request, make a commit to your master/trunk branch
with (at least) the following in the commit message:

    This closes #730
    
----
commit 7062b0ec2ec74754d9cfd7e1568345e162172f2d
Author: Jongyoung Park &lt;eminency@gmail.com&gt;
Date:   2015-09-04T14:02:57Z

    Duplicate primary key clause deleted

----

              </div></li><li><div><div><b>body:</b> {color:red}*-1 overall.*{color}  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12754205/TAJO-1815.patch
  against master revision release-0.9.0-rc0-443-g7e0a4a1.

    {color:green}+1 @author.{color}  The patch does not contain any @author tags.

    {color:red}-1 tests included.{color}  The patch doesn't appear to include any new or modified tests.
                        Please justify why no new tests are needed for this patch.
                        Also please list what manual steps were performed to verify this patch.

    {color:green}+1 javac.{color}  The applied patch does not increase the total number of javac compiler warnings.

    {color:green}+1 javadoc.{color}  The applied patch does not increase the total number of javadoc warnings.

    {color:green}+1 checkstyle.{color}  The patch generated 0 code style errors.

    {color:red}-1 findbugs.{color}  The patch appears to introduce 8 new Findbugs (version 2.0.3) warnings.

    {color:green}+1 release audit.{color}  The applied patch does not increase the total number of release audit warnings.

    {color:green}+1 core tests.{color}  The patch passed unit tests in tajo-catalog/tajo-catalog-server.

Test results: https://builds.apache.org/job/PreCommit-TAJO-Build/853//testReport/
Findbugs warnings: https://builds.apache.org/job/PreCommit-TAJO-Build/853//artifact/incubator-tajo/patchprocess/newPatchFindbugsWarningstajo-catalog-server.html
Console output: https://builds.apache.org/job/PreCommit-TAJO-Build/853//console

This message is automatically generated.
                </div><div><b>label:</b> code-design
                </div></div></li><li><div>
                Github user hyunsik commented on the pull request:

    https://github.com/apache/tajo/pull/730#issuecomment-137893327
  
    +1

              </div></li><li><div>
                FAILURE: Integrated in Tajo-master-CODEGEN-build #477 (See [https://builds.apache.org/job/Tajo-master-CODEGEN-build/477/])
TAJO-1815: Catalog store initialization with PostgreSQL failed. (hyunsik: rev ea4443d8df6ffb02e328304dc5681dbd54f62501)
* CHANGES
* tajo-catalog/tajo-catalog-server/src/main/resources/schemas/postgresql/postgresql.xml

              </div></li><li><div>
                I just committed the patch. I fix it as resolved.
              </div></li><li><div>
                Github user hyunsik commented on the pull request:

    https://github.com/apache/tajo/pull/730#issuecomment-137893470
  
    I missed to close this issue. Could you close this ticket?

              </div></li><li><div>
                Github user hyunsik commented on the pull request:

    https://github.com/apache/tajo/pull/730#issuecomment-137893489
  
    It was committed in ea4443d8df6ffb02e328304dc5681dbd54f62501.

              </div></li><li><div>
                SUCCESS: Integrated in Tajo-master-build #833 (See [https://builds.apache.org/job/Tajo-master-build/833/])
TAJO-1815: Catalog store initialization with PostgreSQL failed. (hyunsik: rev ea4443d8df6ffb02e328304dc5681dbd54f62501)
* tajo-catalog/tajo-catalog-server/src/main/resources/schemas/postgresql/postgresql.xml
* CHANGES

              </div></li><li><div>
                SUCCESS: Integrated in Tajo-0.11.0-build #12 (See [https://builds.apache.org/job/Tajo-0.11.0-build/12/])
TAJO-1815: Catalog store initialization with PostgreSQL failed. (hyunsik: rev 5ab667a027d734dbdb81c88691aac609bdc43b56)
* CHANGES
* tajo-catalog/tajo-catalog-server/src/main/resources/schemas/postgresql/postgresql.xml

              </div></li><li><div>
                Github user eminency commented on the pull request:

    https://github.com/apache/tajo/pull/730#issuecomment-137924168
  
    Sure, thank you for the review.

              </div></li><li><div>
                Github user eminency closed the pull request at:

    https://github.com/apache/tajo/pull/730

              </div></li></ol></div></div></html>