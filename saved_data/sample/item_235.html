<!DOCTYPE html><html><div class="item-title">
        Item 235
      </div> <div class="item-details"><div><b>git_comments:</b> <ol><li><div>
                 wait a bit before retrying
              </div></li><li><div>
                 if the job submission returned an error other than no resources
 retry a couple of times
              </div></li></ol></div><div><b>git_commits:</b> <ol><li><div><div><b>summary:</b> Merge -r 705419:705420 from trunk to branch-0.17 to fix HADOOP-3127.
                </div><div><b>message:</b> Merge -r 705419:705420 from trunk to branch-0.17 to fix HADOOP-3127.

git-svn-id: https://svn.apache.org/repos/asf/hadoop/core/branches/branch-0.17@705426 13f79535-47bb-0310-9956-ffa450edef68

                </div></div></li></ol></div><div><b>github_issues:</b> <ol></ol></div><div><b>github_issues_comments:</b> <ol></ol></div><div><b>github_pulls:</b> <ol></ol></div><div><b>github_pulls_comments:</b> <ol></ol></div><div><b>github_pulls_reviews:</b> <ol></ol></div><div><b>jira_issues:</b> <ol><li><div><div><b>summary:</b> rm /user/&lt;username&gt;/.Trash/____ only moves it back to .Trash 
                </div><div><b>description:</b> In 0.15 or before, any dfs -rm call for  files under Trash were deleted. 
From 0.16, it just renames it back to Trash.

In Trash.java:moveToTrash() 
{noformat}
if (path.toString().startsWith(trash.toString()))
{noformat}

seems like trash.toString() is fully qualified, and path.toString() is not.
                </div></div></li></ol></div><div><b>jira_issues_comments:</b> <ol><li><div>
                Here is a patch and a test for this bug... It's my first patch to Hadoop, I just hope it is OK
              </div></li><li><div>
                +1 overall.  Here are the results of testing the latest attachment 
http://issues.apache.org/jira/secure/attachment/12380175/fixInTrashDeletion.patch
against trunk revision 645773.

    @author +1.  The patch does not contain any @author tags.

    tests included +1.  The patch appears to include 3 new or modified tests.

    javadoc +1.  The javadoc tool did not generate any warning messages.

    javac +1.  The applied patch does not generate any new javac compiler warnings.

    release audit +1.  The applied patch does not generate any new release audit warnings.

    findbugs +1.  The patch does not introduce any new Findbugs warnings.

    core tests +1.  The patch passed core unit tests.

    contrib tests +1.  The patch passed contrib unit tests.

Test results: http://hudson.zones.apache.org/hudson/job/Hadoop-Patch/2242/testReport/
Findbugs warnings: http://hudson.zones.apache.org/hudson/job/Hadoop-Patch/2242/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html
Checkstyle results: http://hudson.zones.apache.org/hudson/job/Hadoop-Patch/2242/artifact/trunk/build/test/checkstyle-errors.html
Console output: http://hudson.zones.apache.org/hudson/job/Hadoop-Patch/2242/console

This message is automatically generated.
              </div></li><li><div>
                Brice,
   You picked up some spurious whitespace changes in your patch. Can you please re-create your patch without them? Thanks! Other than that, it looks good.
              </div></li><li><div>
                Oops. Here is a second patch, without those spaces.
              </div></li><li><div>
                I just committed this with the slight change of using Path.makeQualified instead of string append. Thanks, Brice!
              </div></li><li><div>
                +1 overall.  Here are the results of testing the latest attachment 
http://issues.apache.org/jira/secure/attachment/12380774/fixInTrashDeletion.patch
against trunk revision 645773.

    @author +1.  The patch does not contain any @author tags.

    tests included +1.  The patch appears to include 3 new or modified tests.

    javadoc +1.  The javadoc tool did not generate any warning messages.

    javac +1.  The applied patch does not generate any new javac compiler warnings.

    release audit +1.  The applied patch does not generate any new release audit warnings.

    findbugs +1.  The patch does not introduce any new Findbugs warnings.

    core tests +1.  The patch passed core unit tests.

    contrib tests +1.  The patch passed contrib unit tests.

Test results: http://hudson.zones.apache.org/hudson/job/Hadoop-Patch/2309/testReport/
Findbugs warnings: http://hudson.zones.apache.org/hudson/job/Hadoop-Patch/2309/artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html
Checkstyle results: http://hudson.zones.apache.org/hudson/job/Hadoop-Patch/2309/artifact/trunk/build/test/checkstyle-errors.html
Console output: http://hudson.zones.apache.org/hudson/job/Hadoop-Patch/2309/console

This message is automatically generated.
              </div></li><li><div>
                Integrated in Hadoop-trunk #469 (See [http://hudson.zones.apache.org/hudson/job/Hadoop-trunk/469/])
              </div></li></ol></div></div></html>