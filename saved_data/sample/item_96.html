<!DOCTYPE html><html><div class="item-title">
        Item 96
      </div> <div class="item-details"><div><b>git_comments:</b> <ol></ol></div><div><b>git_commits:</b> <ol><li><div><div><b>summary:</b> [SPARK-15386][CORE] Master doesn't compile against Java 1.7 / Process.isAlive
                </div><div><b>message:</b> [SPARK-15386][CORE] Master doesn't compile against Java 1.7 / Process.isAlive

## What changes were proposed in this pull request?

Remove call to Process.isAlive -- Java 8 only. Introduced in https://github.com/apache/spark/pull/13042 / SPARK-15263

## How was this patch tested?

Jenkins tests

Author: Sean Owen &lt;sowen@cloudera.com&gt;

Closes #13174 from srowen/SPARK-15386.

                </div></div></li></ol></div><div><b>github_issues:</b> <ol></ol></div><div><b>github_issues_comments:</b> <ol></ol></div><div><b>github_pulls:</b> <ol><li><div><div><b>title:</b> [SPARK-15386] [CORE] Master doesn't compile against Java 1.7 / Process.isAlive
                </div><div><b>body:</b> ## What changes were proposed in this pull request?

Remove call to Process.isAlive -- Java 8 only. Introduced in https://github.com/apache/spark/pull/13042 / SPARK-15263
## How was this patch tested?

Jenkins tests

                </div></div></li></ol></div><div><b>github_pulls_comments:</b> <ol><li><div>
                LGTM.

              </div></li><li><div>
                **[Test build #58793 has finished](https://amplab.cs.berkeley.edu/jenkins/job/SparkPullRequestBuilder/58793/consoleFull)** for PR 13174 at commit [`5315de5`](https://github.com/apache/spark/commit/5315de51c06c56fddfa18fcc46430d2e659fd3dc).
- This patch **fails MiMa tests**.
- This patch merges cleanly.
- This patch adds no public classes.

              </div></li><li><div>
                Jenkins retest this please

              </div></li><li><div>
                **[Test build #58794 has finished](https://amplab.cs.berkeley.edu/jenkins/job/SparkPullRequestBuilder/58794/consoleFull)** for PR 13174 at commit [`5315de5`](https://github.com/apache/spark/commit/5315de51c06c56fddfa18fcc46430d2e659fd3dc).
- This patch **fails MiMa tests**.
- This patch merges cleanly.
- This patch adds no public classes.

              </div></li><li><div>
                Definitely spurious, but happened twice. I think we should pull the trigger on this hot-fix pretty soon regardless to get Java 7 compilation working again in master. Although I've learned to never say never, I can't fathom how this change would break something.

              </div></li><li><div>
                @srowen : Sorry about this. In order to not let this happen again, are we going to do something ? If trunk needs to work with Java 7 or higher, then Jenkins tests should be ran with Java 7. In PRs, the Jenkins bot could then help catch such problems before PRs get merged into trunk. I recall that a month or two ago it used to be Java 7 but recently it seems to have switched to Java 8.

              </div></li><li><div>
                Yeah, this is really a bit of a test infrastructure issue. Ideally Jenkins' PR builders run with 7. We have a bunch of other jobs that test things like this, later. It may be a moot point soon enough (when Spark ~2.1 requires Java 8?) that we just accept the occasional hiccup like this. It's not a big deal. 

              </div></li><li><div>
                The PR builders use java 8 because parts of the build need to run with target = 1.8 (to test closures, for example).

But the really correct way to do this would have been to use jdk 8 but use jdk 7's rt.jar when compiling with target = 1.7. (javac even prints out a warning when you don't do that.)

```
$ javac -target 1.7 -source 1.7 test.java 
warning: [options] bootstrap class path not set in conjunction with -source 1.7
```

              </div></li><li><div>
                Yeah that's totally right. I reveal my bias, which is to just go ahead and require Java 8, perhaps soon in master, to resolve this.

              </div></li><li><div>
                **[Test build #2992 has finished](https://amplab.cs.berkeley.edu/jenkins/job/NewSparkPullRequestBuilder/2992/consoleFull)** for PR 13174 at commit [`5315de5`](https://github.com/apache/spark/commit/5315de51c06c56fddfa18fcc46430d2e659fd3dc).
- This patch **fails MiMa tests**.
- This patch merges cleanly.
- This patch adds no public classes.

              </div></li><li><div>
                @JoshRosen knows more about mima and might have seen these errors in the past?

              </div></li><li><div>
                **[Test build #58796 has finished](https://amplab.cs.berkeley.edu/jenkins/job/SparkPullRequestBuilder/58796/consoleFull)** for PR 13174 at commit [`5315de5`](https://github.com/apache/spark/commit/5315de51c06c56fddfa18fcc46430d2e659fd3dc).
- This patch **fails Spark unit tests**.
- This patch merges cleanly.
- This patch adds no public classes.

              </div></li><li><div>
                Jenkins retest this please

              </div></li><li><div>
                So, this branch passes all tests for me locally. If it still faces some spurious failures, I'm going to merge it anyway.

              </div></li><li><div>
                **[Test build #58811 has finished](https://amplab.cs.berkeley.edu/jenkins/job/SparkPullRequestBuilder/58811/consoleFull)** for PR 13174 at commit [`5315de5`](https://github.com/apache/spark/commit/5315de51c06c56fddfa18fcc46430d2e659fd3dc).
- This patch passes all tests.
- This patch merges cleanly.
- This patch adds no public classes.

              </div></li><li><div>
                Merging to master.

              </div></li><li><div>
                I'm on vacation and won't be able to do this myself, but if we want to avoid this problem in the future then someone should determine the path to a Java 7 rt.jar, modify the SBT and Maven builds so that the path to RT.JAR can be overridden via an environment variable, and update the Jenkins configuration scripts to set that new configuration variable. If nobody gets to this, I can take care of it when I'm back.

In addition, someone should configure Maven Enforcer to fail if we accidentally depend on JARs which contain Java 8 bytecode.

              </div></li></ol></div><div><b>github_pulls_reviews:</b> <ol></ol></div><div><b>jira_issues:</b> <ol></ol></div><div><b>jira_issues_comments:</b> <ol></ol></div></div></html>