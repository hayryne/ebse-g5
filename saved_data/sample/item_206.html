<!DOCTYPE html><html><div class="item-title">
        Item 206
      </div> <div class="item-details"><div><b>git_comments:</b> <ol></ol></div><div><b>git_commits:</b> <ol><li><div><div><b>summary:</b> ARROW-3473: [Format] Clarify that 64-bit lengths and null counts are permitted, but not recommended
                </div><div><b>message:</b> ARROW-3473: [Format] Clarify that 64-bit lengths and null counts are permitted, but not recommended

The Arrow metadata was changed from the initial format specification to permit 64-bit array lengths, support for which is provided by the C++ library. This clarifies that 64-bit lengths are permissible, but for best compatibility (e.g. with Java), it is recommended to use 32-bits or less in practice.

see also #2733

Author: Wes McKinney &lt;wesm+git@apache.org&gt;

Closes #2734 from wesm/ARROW-3473 and squashes the following commits:

11b4b08a9 &lt;Wes McKinney&gt; Add note about representing large data sets using chunks
067ec9932 &lt;Wes McKinney&gt; Clarify that 64-bit lengths and null counts are permitted, but not recommended for best inter-language compatibility

                </div></div></li></ol></div><div><b>github_issues:</b> <ol><li><div><div><b>title:</b> Spec array size int32 or int64?
                </div><div><b>body:</b> The spec mentions clearly that the array size and null count are signed int32_t (https://github.com/apache/arrow/blob/master/format/Layout.md#array-lengths)

However, it appears to have changed to int64_t in C++ implementation ( https://github.com/apache/arrow/blob/master/cpp/src/arrow/array.h#L171 )

So I was wondering wether the spec needs an update or if C++ just internally uses int64_t?
                </div><div><b>label:</b> code-design
                </div></div></li><li><div><div><b>title:</b> Spec array size int32 or int64?
                </div><div><b>body:</b> The spec mentions clearly that the array size and null count are signed int32_t (https://github.com/apache/arrow/blob/master/format/Layout.md#array-lengths)

However, it appears to have changed to int64_t in C++ implementation ( https://github.com/apache/arrow/blob/master/cpp/src/arrow/array.h#L171 )

So I was wondering wether the spec needs an update or if C++ just internally uses int64_t?
                </div></div></li><li><div><div><b>title:</b> Spec array size int32 or int64?
                </div><div><b>body:</b> The spec mentions clearly that the array size and null count are signed int32_t (https://github.com/apache/arrow/blob/master/format/Layout.md#array-lengths)

However, it appears to have changed to int64_t in C++ implementation ( https://github.com/apache/arrow/blob/master/cpp/src/arrow/array.h#L171 )

So I was wondering wether the spec needs an update or if C++ just internally uses int64_t?
                </div></div></li><li><div><div><b>title:</b> Spec array size int32 or int64?
                </div><div><b>body:</b> The spec mentions clearly that the array size and null count are signed int32_t (https://github.com/apache/arrow/blob/master/format/Layout.md#array-lengths)

However, it appears to have changed to int64_t in C++ implementation ( https://github.com/apache/arrow/blob/master/cpp/src/arrow/array.h#L171 )

So I was wondering wether the spec needs an update or if C++ just internally uses int64_t?
                </div></div></li></ol></div><div><b>github_issues_comments:</b> <ol><li><div><div><b>body:</b> Hi -- best to discuss on JIRA. Yes, we permit 64-bit lengths. An implementation is valid if it does not, though. For best compatibility between languages, we recommend limiting lengths to 32 bits. 
                </div><div><b>label:</b> code-design
                </div></div></li><li><div>
                https://issues.apache.org/jira/browse/ARROW-3473
              </div></li></ol></div><div><b>github_pulls:</b> <ol></ol></div><div><b>github_pulls_comments:</b> <ol></ol></div><div><b>github_pulls_reviews:</b> <ol></ol></div><div><b>jira_issues:</b> <ol><li><div><div><b>summary:</b> [Format] Update Layout.md document to clarify use of 64-bit array lengths
                </div><div><b>description:</b> See https://github.com/apache/arrow/issues/2733. While 64-bit lengths are permitted, it is recommended to limit array sizes to 32-bit length or less. I will update
                </div></div></li></ol></div><div><b>jira_issues_comments:</b> <ol><li><div>
                Issue resolved by pull request 2734
[https://github.com/apache/arrow/pull/2734]
              </div></li></ol></div></div></html>