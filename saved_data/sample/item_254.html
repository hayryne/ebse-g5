<!DOCTYPE html><html><div class="item-title">
        Item 254
      </div> <div class="item-details"><div><b>git_comments:</b> <ol><li><div>
                 Trigger a scheduling run - in case there's some task which was waiting for this node to
 become available.
              </div></li><li><div>
                 Flush any pending scheduler runs which may be blocked. Wait 2 seconds for the run to complete.
              </div></li></ol></div><div><b>git_commits:</b> <ol><li><div><div><b>summary:</b> HIVE-14439. LlapTaskScheduler should try scheduling tasks when a node is disabled. (Siddharth Seth, reviewed by Prasanth Jayachandran)
                </div><div><b>message:</b> HIVE-14439. LlapTaskScheduler should try scheduling tasks when a node is disabled. (Siddharth Seth, reviewed by Prasanth Jayachandran)

                </div></div></li></ol></div><div><b>github_issues:</b> <ol></ol></div><div><b>github_issues_comments:</b> <ol></ol></div><div><b>github_pulls:</b> <ol></ol></div><div><b>github_pulls_comments:</b> <ol></ol></div><div><b>github_pulls_reviews:</b> <ol></ol></div><div><b>jira_issues:</b> <ol><li><div><div><b>summary:</b> LlapTaskScheduler should try scheduling tasks when a node is disabled
                </div><div><b>description:</b> When a node is disabled - try scheduling pending tasks. Tasks which may have been waiting for the node to become available could become candidates for scheduling on alternate nodes depending on the locality delay and disable duration.
This is what is causing an occasional timeout on testDelayedLocalityNodeCommErrorImmediateAllocation
                </div></div></li><li><div><div><b>summary:</b> LlapTaskScheduler should try scheduling tasks when a node is disabled
                </div><div><b>description:</b> When a node is disabled - try scheduling pending tasks. Tasks which may have been waiting for the node to become available could become candidates for scheduling on alternate nodes depending on the locality delay and disable duration.
This is what is causing an occasional timeout on testDelayedLocalityNodeCommErrorImmediateAllocation
                </div><div><b>label:</b> test
                </div></div></li><li><div><div><b>summary:</b> LlapTaskScheduler should try scheduling tasks when a node is disabled
                </div><div><b>description:</b> When a node is disabled - try scheduling pending tasks. Tasks which may have been waiting for the node to become available could become candidates for scheduling on alternate nodes depending on the locality delay and disable duration.
This is what is causing an occasional timeout on testDelayedLocalityNodeCommErrorImmediateAllocation
                </div></div></li><li><div><div><b>summary:</b> LlapTaskScheduler should try scheduling tasks when a node is disabled
                </div><div><b>description:</b> When a node is disabled - try scheduling pending tasks. Tasks which may have been waiting for the node to become available could become candidates for scheduling on alternate nodes depending on the locality delay and disable duration.
This is what is causing an occasional timeout on testDelayedLocalityNodeCommErrorImmediateAllocation
                </div></div></li><li><div><div><b>summary:</b> LlapTaskScheduler should try scheduling tasks when a node is disabled
                </div><div><b>description:</b> When a node is disabled - try scheduling pending tasks. Tasks which may have been waiting for the node to become available could become candidates for scheduling on alternate nodes depending on the locality delay and disable duration.
This is what is causing an occasional timeout on testDelayedLocalityNodeCommErrorImmediateAllocation
                </div><div><b>label:</b> test
                </div></div></li><li><div><div><b>summary:</b> LlapTaskScheduler should try scheduling tasks when a node is disabled
                </div><div><b>description:</b> When a node is disabled - try scheduling pending tasks. Tasks which may have been waiting for the node to become available could become candidates for scheduling on alternate nodes depending on the locality delay and disable duration.
This is what is causing an occasional timeout on testDelayedLocalityNodeCommErrorImmediateAllocation
                </div></div></li><li><div><div><b>summary:</b> LlapTaskScheduler should try scheduling tasks when a node is disabled
                </div><div><b>description:</b> When a node is disabled - try scheduling pending tasks. Tasks which may have been waiting for the node to become available could become candidates for scheduling on alternate nodes depending on the locality delay and disable duration.
This is what is causing an occasional timeout on testDelayedLocalityNodeCommErrorImmediateAllocation
                </div></div></li><li><div><div><b>summary:</b> LlapTaskScheduler should try scheduling tasks when a node is disabled
                </div><div><b>description:</b> When a node is disabled - try scheduling pending tasks. Tasks which may have been waiting for the node to become available could become candidates for scheduling on alternate nodes depending on the locality delay and disable duration.
This is what is causing an occasional timeout on testDelayedLocalityNodeCommErrorImmediateAllocation
                </div></div></li><li><div><div><b>summary:</b> LlapTaskScheduler should try scheduling tasks when a node is disabled
                </div><div><b>description:</b> When a node is disabled - try scheduling pending tasks. Tasks which may have been waiting for the node to become available could become candidates for scheduling on alternate nodes depending on the locality delay and disable duration.
This is what is causing an occasional timeout on testDelayedLocalityNodeCommErrorImmediateAllocation
                </div></div></li><li><div><div><b>summary:</b> LlapTaskScheduler should try scheduling tasks when a node is disabled
                </div><div><b>description:</b> When a node is disabled - try scheduling pending tasks. Tasks which may have been waiting for the node to become available could become candidates for scheduling on alternate nodes depending on the locality delay and disable duration.
This is what is causing an occasional timeout on testDelayedLocalityNodeCommErrorImmediateAllocation
                </div></div></li></ol></div><div><b>jira_issues_comments:</b> <ol><li><div>
                cc [~prasanth_j], [~hagleitn] for review.
              </div></li><li><div><div><b>body:</b> Updated to make the test failure more consistent.
                </div><div><b>label:</b> test
                </div></div></li><li><div>
                +1
              </div></li><li><div>
                

Here are the results of testing the latest attachment:
https://issues.apache.org/jira/secure/attachment/12822334/HIVE-14439.02.patch

{color:green}SUCCESS:{color} +1 due to 1 test(s) being added or modified.

{color:red}ERROR:{color} -1 due to 3 failed/errored test(s), 10440 tests executed
*Failed tests:*
{noformat}
TestMsgBusConnection - did not produce a TEST-*.xml file
TestQueryLifeTimeHook - did not produce a TEST-*.xml file
org.apache.hadoop.hive.llap.tezplugins.TestLlapTaskSchedulerService.testForcedLocalityMultiplePreemptionsSameHost2
{noformat}

Test results: https://builds.apache.org/job/PreCommit-HIVE-MASTER-Build/791/testReport
Console output: https://builds.apache.org/job/PreCommit-HIVE-MASTER-Build/791/console
Test logs: http://ec2-204-236-174-241.us-west-1.compute.amazonaws.com/logs/PreCommit-HIVE-MASTER-Build-791/

Messages:
{noformat}
Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 3 tests failed
{noformat}

This message is automatically generated.

ATTACHMENT ID: 12822334 - PreCommit-HIVE-MASTER-Build
              </div></li><li><div><div><b>body:</b> Updated patch, with a minor change to the failing test (the test failure is unrelated to the main change. Flaky test)
                </div><div><b>label:</b> test
                </div></div></li><li><div>
                

Here are the results of testing the latest attachment:
https://issues.apache.org/jira/secure/attachment/12822655/HIVE-14439.03.patch

{color:green}SUCCESS:{color} +1 due to 1 test(s) being added or modified.

{color:red}ERROR:{color} -1 due to 4 failed/errored test(s), 10441 tests executed
*Failed tests:*
{noformat}
TestMsgBusConnection - did not produce a TEST-*.xml file
TestQueryLifeTimeHook - did not produce a TEST-*.xml file
org.apache.hadoop.hive.metastore.TestMetaStoreMetrics.testConnections
org.apache.hive.jdbc.TestJdbcWithMiniHS2.testAddJarConstructorUnCaching
{noformat}

Test results: https://builds.apache.org/job/PreCommit-HIVE-MASTER-Build/832/testReport
Console output: https://builds.apache.org/job/PreCommit-HIVE-MASTER-Build/832/console
Test logs: http://ec2-204-236-174-241.us-west-1.compute.amazonaws.com/logs/PreCommit-HIVE-MASTER-Build-832/

Messages:
{noformat}
Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 4 tests failed
{noformat}

This message is automatically generated.

ATTACHMENT ID: 12822655 - PreCommit-HIVE-MASTER-Build
              </div></li><li><div>
                New changes lgtm +1
              </div></li><li><div>
                Thanks for the reviews. Committing.
              </div></li></ol></div></div></html>