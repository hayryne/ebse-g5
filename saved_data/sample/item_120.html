<!DOCTYPE html><html><div class="item-title">
        Item 120
      </div> <div class="item-details"><div><b>git_comments:</b> <ol></ol></div><div><b>git_commits:</b> <ol><li><div><div><b>summary:</b> [SPARK-11068] [SQL] add callback to query execution
                </div><div><b>message:</b> [SPARK-11068] [SQL] add callback to query execution

With this feature, we can track the query plan, time cost, exception during query execution for spark users.

Author: Wenchen Fan &lt;cloud0fan@163.com&gt;

Closes #9078 from cloud-fan/callback.

                </div></div></li></ol></div><div><b>github_issues:</b> <ol></ol></div><div><b>github_issues_comments:</b> <ol></ol></div><div><b>github_pulls:</b> <ol><li><div><div><b>title:</b> [SPARK-11068][SQL] add callback to query execution
                </div><div><b>body:</b> With this feature, we can track the query plan, time cost, exception during query execution for spark users.

                </div></div></li></ol></div><div><b>github_pulls_comments:</b> <ol><li><div>
                cc @yhuai 

              </div></li><li><div>
                  [Test build #43579 has finished](https://amplab.cs.berkeley.edu/jenkins/job/SparkPullRequestBuilder/43579/console) for   PR 9078 at commit [`ea523b9`](https://github.com/apache/spark/commit/ea523b9843fc8bf39790d457c3cde5004d0d0764).
- This patch **fails RAT tests**.
- This patch merges cleanly.
- This patch adds the following public classes _(experimental)_:
  - `trait QueryExecutionListener`
  - `class ExecutionListenerManager extends Logging`

              </div></li><li><div>
                  [Test build #43583 has finished](https://amplab.cs.berkeley.edu/jenkins/job/SparkPullRequestBuilder/43583/console) for   PR 9078 at commit [`4e9f27a`](https://github.com/apache/spark/commit/4e9f27a70d1b1c9616f39c0058622d639cdf7e2c).
- This patch **fails to build**.
- This patch **does not merge cleanly**.
- This patch adds the following public classes _(experimental)_:
  - `trait QueryExecutionListener`
  - `class ExecutionListenerManager extends Logging`

              </div></li><li><div>
                Does this need to be a public interface?

If yes, can we add experimental label to it.

              </div></li><li><div>
                Actually if QueryExecution is not a public interface (it is in execution - I think it's incorrectly labeled developer api), this should probably be in execution as well as a semi private interface?

              </div></li><li><div>
                  [Test build #43592 has finished](https://amplab.cs.berkeley.edu/jenkins/job/SparkPullRequestBuilder/43592/console) for   PR 9078 at commit [`8f9bb8d`](https://github.com/apache/spark/commit/8f9bb8d0ac1edfdc0f1d7301f6b16d03046a805e).
- This patch **fails to build**.
- This patch merges cleanly.
- This patch adds the following public classes _(experimental)_:
  - `trait QueryExecutionListener`
  - `class ExecutionListenerManager extends Logging`

              </div></li><li><div>
                retest this please.

              </div></li><li><div>
                  [Test build #43600 has finished](https://amplab.cs.berkeley.edu/jenkins/job/SparkPullRequestBuilder/43600/console) for   PR 9078 at commit [`8f9bb8d`](https://github.com/apache/spark/commit/8f9bb8d0ac1edfdc0f1d7301f6b16d03046a805e).
- This patch **fails to build**.
- This patch merges cleanly.
- This patch adds the following public classes _(experimental)_:
  - `trait QueryExecutionListener`
  - `class ExecutionListenerManager extends Logging`

              </div></li><li><div>
                  [Test build #43604 has finished](https://amplab.cs.berkeley.edu/jenkins/job/SparkPullRequestBuilder/43604/console) for   PR 9078 at commit [`e5c2120`](https://github.com/apache/spark/commit/e5c2120425f225398fdff3ac389f1c6b20bf22ca).
- This patch **fails to build**.
- This patch merges cleanly.
- This patch adds no public classes.

              </div></li><li><div>
                  [Test build #43626 has finished](https://amplab.cs.berkeley.edu/jenkins/job/SparkPullRequestBuilder/43626/console) for   PR 9078 at commit [`e43c955`](https://github.com/apache/spark/commit/e43c955c43f197f82f883e2c460b58fc34125571).
- This patch **fails MiMa tests**.
- This patch merges cleanly.
- This patch adds the following public classes _(experimental)_:
  - `trait QueryExecutionListener`
  - `class ExecutionListenerManager extends Logging`

              </div></li><li><div>
                retest this please.

              </div></li><li><div>
                  [Test build #43637 has finished](https://amplab.cs.berkeley.edu/jenkins/job/SparkPullRequestBuilder/43637/console) for   PR 9078 at commit [`e43c955`](https://github.com/apache/spark/commit/e43c955c43f197f82f883e2c460b58fc34125571).
- This patch **passes all tests**.
- This patch merges cleanly.
- This patch adds the following public classes _(experimental)_:
  - `trait QueryExecutionListener`
  - `class ExecutionListenerManager extends Logging`

              </div></li><li><div>
                retest this please.

              </div></li><li><div>
                  [Test build #43652 has finished](https://amplab.cs.berkeley.edu/jenkins/job/SparkPullRequestBuilder/43652/console) for   PR 9078 at commit [`b7927d8`](https://github.com/apache/spark/commit/b7927d875712ebfcc7bb3ffa6edcca2df58c9ba6).
- This patch **fails to build**.
- This patch merges cleanly.
- This patch adds the following public classes _(experimental)_:
  - `trait QueryExecutionListener`
  - `class ExecutionListenerManager extends Logging`

              </div></li><li><div>
                  [Test build #43660 has finished](https://amplab.cs.berkeley.edu/jenkins/job/SparkPullRequestBuilder/43660/console) for   PR 9078 at commit [`903d65e`](https://github.com/apache/spark/commit/903d65e25872079333a55d92e38f7459535f38d0).
- This patch **fails Spark unit tests**.
- This patch merges cleanly.
- This patch adds the following public classes _(experimental)_:
  - `trait QueryExecutionListener`
  - `class ExecutionListenerManager extends Logging`

              </div></li><li><div>
                  [Test build #43667 has finished](https://amplab.cs.berkeley.edu/jenkins/job/SparkPullRequestBuilder/43667/console) for   PR 9078 at commit [`2d81674`](https://github.com/apache/spark/commit/2d816740084c447bf08e36035467a907f70df667).
- This patch **passes all tests**.
- This patch merges cleanly.
- This patch adds the following public classes _(experimental)_:
  - `trait QueryExecutionListener`
  - `class ExecutionListenerManager extends Logging`

              </div></li><li><div>
                  [Test build #43674 has finished](https://amplab.cs.berkeley.edu/jenkins/job/SparkPullRequestBuilder/43674/console) for   PR 9078 at commit [`0846260`](https://github.com/apache/spark/commit/084626087faa5749091b99c56cad5f706d1f75b2).
- This patch **passes all tests**.
- This patch merges cleanly.
- This patch adds the following public classes _(experimental)_:
  - `trait QueryExecutionListener`
  - `class ExecutionListenerManager extends Logging`

              </div></li><li><div>
                LGTM, waiting for tests.

              </div></li><li><div>
                  [Test build #43685 has finished](https://amplab.cs.berkeley.edu/jenkins/job/SparkPullRequestBuilder/43685/console) for   PR 9078 at commit [`9943fea`](https://github.com/apache/spark/commit/9943feaf4ce288614e40a8502626900fb3cf3a4b).
- This patch **passes all tests**.
- This patch merges cleanly.
- This patch adds the following public classes _(experimental)_:
  - `trait QueryExecutionListener`
  - `class ExecutionListenerManager extends Logging`

              </div></li><li><div>
                Merged into master, thanks!

              </div></li></ol></div><div><b>github_pulls_reviews:</b> <ol><li><div>
                This should be thread-safe.

              </div></li><li><div>
                Could you add some java doc for all the public interface?

              </div></li></ol></div><div><b>jira_issues:</b> <ol></ol></div><div><b>jira_issues_comments:</b> <ol></ol></div></div></html>