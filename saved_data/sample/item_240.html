<!DOCTYPE html><html><div class="item-title">
        Item 240
      </div> <div class="item-details"><div><b>git_comments:</b> <ol><li><div>
                / &lt;summary&gt;
/ Runs the actual broadcast and reduce job with fault tolerance
/ &lt;/summary&gt;
              </div></li><li><div>
                / &lt;param name="totalNumberOfForcedFailures"&gt;Number of forced failure times in recovery.&lt;/param&gt;
              </div></li><li><div>
                 
              </div></li><li><div>
                / &lt;summary&gt;
/ Configuration for Mapper function
/ &lt;/summary&gt;
              </div></li><li><div>
                / &lt;summary&gt;
/ Configuration for Map Input Codec
/ &lt;/summary&gt;
              </div></li><li><div>
                / &lt;summary&gt;
/ Configuration for Reduce Function
/ &lt;/summary&gt;
              </div></li><li><div>
                / &lt;summary&gt;
/ Configuration for Map Input Data Converter
/ &lt;/summary&gt;
              </div></li><li><div>
                / &lt;summary&gt;
/ Configuration for Update Function
/ &lt;/summary&gt;
              </div></li><li><div>
                / &lt;summary&gt;
/ Configuration for Map Output Data Converter
/ &lt;/summary&gt;
              </div></li><li><div>
                / &lt;summary&gt;
/ Configuration for Partitioned Dataset
/ &lt;/summary&gt;
              </div></li><li><div>
                / .\Org.Apache.REEF.IMRU.Examples.exe true 500 8900 1000 broadcastandreduce 20000000 1000000 1024 1024 10
/ .\Org.Apache.REEF.IMRU.Examples.exe true 500 8900 1000 broadcastandreduceft 20000000 1000000 1024 1024 100 5 2
              </div></li><li><div>
                 there should be no failed evaluators
              </div></li></ol></div><div><b>git_commits:</b> <ol><li><div><div><b>summary:</b> [REEF-1556] Add number of forced failures for IMRU fault tolerant testing
                </div><div><b>message:</b> [REEF-1556] Add number of forced failures for IMRU fault tolerant testing

* Refactor PipelinedBroadcastAndReduce in IMRU example
  so that it can be reused by fault tolerant.
* Update FaultTolerantPipelinedBroadcastAndReduce to allow configuring
  the number of forced failures done before successful run.
* Update test cases.

JIRA:
  [REEF-1556](https://issues.apache.org/jira/browse/REEF-1556)

Pull request:
  This closes #1114

                </div></div></li></ol></div><div><b>github_issues:</b> <ol></ol></div><div><b>github_issues_comments:</b> <ol></ol></div><div><b>github_pulls:</b> <ol><li><div><div><b>title:</b> [REEF-1556] Adding allowed failure number for IMRU fault tolerant tes…
                </div><div><b>body:</b> …ting
- Refactor PipelinedBroadcastAndReduce in IMRU example so that it can be reused by fault tolerant
- Update FaultTolerantPipelinedBroadcastAndReduce to allow passing allowed failure number
- Update test cases

JIRA: [REEF-1556](https://issues.apache.org/jira/browse/REEF-1556)
This closes

                </div></div></li></ol></div><div><b>github_pulls_comments:</b> <ol><li><div>
                I've done a pass

              </div></li><li><div>
                @tcNickolas I have addressed your review comments. Please have another look. Thanks!

              </div></li><li><div>
                AppVeyor test fail looks like some weird caching issue, the last commit fixed the failure on my machine, so tests pass locally for me. I'll do a couple of minor changes like remove empty tags and fix typos, and will merge

              </div></li></ol></div><div><b>github_pulls_reviews:</b> <ol><li><div>
                Typo: totalAllowedFailuresNumber

              </div></li><li><div>
                Maybe a better name would be `TotalNumberOfForcedFailures`? It's not that we _allow_ that many failures, it's that we fail intentionally that many times

              </div></li><li><div>
                A lot of these `.Set` instructions are the same for regular and FT versions of `PipelinedBroadcastAndReduce`. Would it make sense to separate them into a method of `PipelinedBroadcastAndReduce` class, so that FT version calls that method + things unique for FT?

              </div></li><li><div>
                Don't need to initialize int with default value

              </div></li><li><div>
                Better name `_retryIndex` (we're using numberOfSomething to denote count of something, not its serial number)

              </div></li><li><div>
                I would keep the old name even with `protected` modifier for uniformity

              </div></li><li><div>
                Please remove empty tags

              </div></li><li><div>
                This change is not related to adding number of forced failure. I don't think we should change it as a side effect of another change, which we're trying to do from time to time. If we decide to change it, it needs to be documented as a separate JIRA

              </div></li></ol></div><div><b>jira_issues:</b> <ol><li><div><div><b>summary:</b> Add number of forced failures for IMRU fault tolerant testing
                </div><div><b>description:</b> Currently, in IMRU testing for fault tolerant, we on purposely fail (maxRetryNumber -1) times, only make last retry successful without injected failure. 
We would like to add one more parameter to set numberOfAllowedFailure. For example, if maxRetryNumber is 6, numberOfAllowedFailure is 2, we would only inject failure in the first two runs, and let rest of the retries either successful or naturally get failures from the environment. This would help us to test more scenarios. 
                </div></div></li></ol></div><div><b>jira_issues_comments:</b> <ol><li><div>
                Resolved via [PR 1114|https://github.com/apache/reef/pull/1114]
              </div></li></ol></div></div></html>