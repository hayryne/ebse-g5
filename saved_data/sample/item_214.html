<!DOCTYPE html><html><div class="item-title">
        Item 214
      </div> <div class="item-details"><div><b>git_comments:</b> <ol></ol></div><div><b>git_commits:</b> <ol><li><div><div><b>summary:</b> [AIRFLOW-1843] Add Google Cloud Storage Sensor with prefix
                </div><div><b>message:</b> [AIRFLOW-1843] Add Google Cloud Storage Sensor with prefix

Sensor for checking if there any files in bucket
at certain prefix

Closes #2809 from litdeviant/gcs_prefix_sensor

                </div></div></li></ol></div><div><b>github_issues:</b> <ol></ol></div><div><b>github_issues_comments:</b> <ol></ol></div><div><b>github_pulls:</b> <ol><li><div><div><b>title:</b> [AIRFLOW-1843] Add Google Cloud Storage Sensor with prefix
                </div><div><b>body:</b> Dear Airflow maintainers,

Please accept this PR. I understand that it will not be reviewed until I have checked off all the steps below!


### JIRA
- [x] My PR addresses the following [Airflow JIRA](https://issues.apache.org/jira/browse/AIRFLOW/) issues and references them in the PR title. For example, "[AIRFLOW-XXX] My Airflow PR"
    - https://issues.apache.org/jira/browse/AIRFLOW-1843


### Description
- [x] Here are some details about my PR, including screenshots of any UI changes:
Sensor for checking if there any files in bucket at certain prefix

### Tests
- [x] My PR does not need testing for this extremely good reason:
Google doesn't provide local unittest for GCS.

### Commits
- [x] My commits all reference JIRA issues in their subject lines, and I have squashed multiple commits if they address the same issue. In addition, my commits follow the guidelines from "[How to write a good git commit message](http://chris.beams.io/posts/git-commit/)":
    1. Subject is separated from body by a blank line
    2. Subject is limited to 50 characters
    3. Subject does not end with a period
    4. Subject uses the imperative mood ("add", not "adding")
    5. Body wraps at 72 characters
    6. Body explains "what" and "why", not "how"


                </div></div></li><li><div><div><b>title:</b> [AIRFLOW-1843] Add Google Cloud Storage Sensor with prefix
                </div><div><b>body:</b> Dear Airflow maintainers,

Please accept this PR. I understand that it will not be reviewed until I have checked off all the steps below!


### JIRA
- [x] My PR addresses the following [Airflow JIRA](https://issues.apache.org/jira/browse/AIRFLOW/) issues and references them in the PR title. For example, "[AIRFLOW-XXX] My Airflow PR"
    - https://issues.apache.org/jira/browse/AIRFLOW-1843


### Description
- [x] Here are some details about my PR, including screenshots of any UI changes:
Sensor for checking if there any files in bucket at certain prefix

### Tests
- [x] My PR does not need testing for this extremely good reason:
Google doesn't provide local unittest for GCS.

### Commits
- [x] My commits all reference JIRA issues in their subject lines, and I have squashed multiple commits if they address the same issue. In addition, my commits follow the guidelines from "[How to write a good git commit message](http://chris.beams.io/posts/git-commit/)":
    1. Subject is separated from body by a blank line
    2. Subject is limited to 50 characters
    3. Subject does not end with a period
    4. Subject uses the imperative mood ("add", not "adding")
    5. Body wraps at 72 characters
    6. Body explains "what" and "why", not "how"


                </div><div><b>label:</b> code-design
                </div></div></li><li><div><div><b>title:</b> [AIRFLOW-1843] Add Google Cloud Storage Sensor with prefix
                </div><div><b>body:</b> Dear Airflow maintainers,

Please accept this PR. I understand that it will not be reviewed until I have checked off all the steps below!


### JIRA
- [x] My PR addresses the following [Airflow JIRA](https://issues.apache.org/jira/browse/AIRFLOW/) issues and references them in the PR title. For example, "[AIRFLOW-XXX] My Airflow PR"
    - https://issues.apache.org/jira/browse/AIRFLOW-1843


### Description
- [x] Here are some details about my PR, including screenshots of any UI changes:
Sensor for checking if there any files in bucket at certain prefix

### Tests
- [x] My PR does not need testing for this extremely good reason:
Google doesn't provide local unittest for GCS.

### Commits
- [x] My commits all reference JIRA issues in their subject lines, and I have squashed multiple commits if they address the same issue. In addition, my commits follow the guidelines from "[How to write a good git commit message](http://chris.beams.io/posts/git-commit/)":
    1. Subject is separated from body by a blank line
    2. Subject is limited to 50 characters
    3. Subject does not end with a period
    4. Subject uses the imperative mood ("add", not "adding")
    5. Body wraps at 72 characters
    6. Body explains "what" and "why", not "how"


                </div></div></li><li><div><div><b>title:</b> [AIRFLOW-1843] Add Google Cloud Storage Sensor with prefix
                </div><div><b>body:</b> Dear Airflow maintainers,

Please accept this PR. I understand that it will not be reviewed until I have checked off all the steps below!


### JIRA
- [x] My PR addresses the following [Airflow JIRA](https://issues.apache.org/jira/browse/AIRFLOW/) issues and references them in the PR title. For example, "[AIRFLOW-XXX] My Airflow PR"
    - https://issues.apache.org/jira/browse/AIRFLOW-1843


### Description
- [x] Here are some details about my PR, including screenshots of any UI changes:
Sensor for checking if there any files in bucket at certain prefix

### Tests
- [x] My PR does not need testing for this extremely good reason:
Google doesn't provide local unittest for GCS.

### Commits
- [x] My commits all reference JIRA issues in their subject lines, and I have squashed multiple commits if they address the same issue. In addition, my commits follow the guidelines from "[How to write a good git commit message](http://chris.beams.io/posts/git-commit/)":
    1. Subject is separated from body by a blank line
    2. Subject is limited to 50 characters
    3. Subject does not end with a period
    4. Subject uses the imperative mood ("add", not "adding")
    5. Body wraps at 72 characters
    6. Body explains "what" and "why", not "how"


                </div></div></li><li><div><div><b>title:</b> [AIRFLOW-1843] Add Google Cloud Storage Sensor with prefix
                </div><div><b>body:</b> Dear Airflow maintainers,

Please accept this PR. I understand that it will not be reviewed until I have checked off all the steps below!


### JIRA
- [x] My PR addresses the following [Airflow JIRA](https://issues.apache.org/jira/browse/AIRFLOW/) issues and references them in the PR title. For example, "[AIRFLOW-XXX] My Airflow PR"
    - https://issues.apache.org/jira/browse/AIRFLOW-1843


### Description
- [x] Here are some details about my PR, including screenshots of any UI changes:
Sensor for checking if there any files in bucket at certain prefix

### Tests
- [x] My PR does not need testing for this extremely good reason:
Google doesn't provide local unittest for GCS.

### Commits
- [x] My commits all reference JIRA issues in their subject lines, and I have squashed multiple commits if they address the same issue. In addition, my commits follow the guidelines from "[How to write a good git commit message](http://chris.beams.io/posts/git-commit/)":
    1. Subject is separated from body by a blank line
    2. Subject is limited to 50 characters
    3. Subject does not end with a period
    4. Subject uses the imperative mood ("add", not "adding")
    5. Body wraps at 72 characters
    6. Body explains "what" and "why", not "how"


                </div></div></li><li><div><div><b>title:</b> [AIRFLOW-1843] Add Google Cloud Storage Sensor with prefix
                </div><div><b>body:</b> Dear Airflow maintainers,

Please accept this PR. I understand that it will not be reviewed until I have checked off all the steps below!


### JIRA
- [x] My PR addresses the following [Airflow JIRA](https://issues.apache.org/jira/browse/AIRFLOW/) issues and references them in the PR title. For example, "[AIRFLOW-XXX] My Airflow PR"
    - https://issues.apache.org/jira/browse/AIRFLOW-1843


### Description
- [x] Here are some details about my PR, including screenshots of any UI changes:
Sensor for checking if there any files in bucket at certain prefix

### Tests
- [x] My PR does not need testing for this extremely good reason:
Google doesn't provide local unittest for GCS.

### Commits
- [x] My commits all reference JIRA issues in their subject lines, and I have squashed multiple commits if they address the same issue. In addition, my commits follow the guidelines from "[How to write a good git commit message](http://chris.beams.io/posts/git-commit/)":
    1. Subject is separated from body by a blank line
    2. Subject is limited to 50 characters
    3. Subject does not end with a period
    4. Subject uses the imperative mood ("add", not "adding")
    5. Body wraps at 72 characters
    6. Body explains "what" and "why", not "how"


                </div></div></li><li><div><div><b>title:</b> [AIRFLOW-1843] Add Google Cloud Storage Sensor with prefix
                </div><div><b>body:</b> Dear Airflow maintainers,

Please accept this PR. I understand that it will not be reviewed until I have checked off all the steps below!


### JIRA
- [x] My PR addresses the following [Airflow JIRA](https://issues.apache.org/jira/browse/AIRFLOW/) issues and references them in the PR title. For example, "[AIRFLOW-XXX] My Airflow PR"
    - https://issues.apache.org/jira/browse/AIRFLOW-1843


### Description
- [x] Here are some details about my PR, including screenshots of any UI changes:
Sensor for checking if there any files in bucket at certain prefix

### Tests
- [x] My PR does not need testing for this extremely good reason:
Google doesn't provide local unittest for GCS.

### Commits
- [x] My commits all reference JIRA issues in their subject lines, and I have squashed multiple commits if they address the same issue. In addition, my commits follow the guidelines from "[How to write a good git commit message](http://chris.beams.io/posts/git-commit/)":
    1. Subject is separated from body by a blank line
    2. Subject is limited to 50 characters
    3. Subject does not end with a period
    4. Subject uses the imperative mood ("add", not "adding")
    5. Body wraps at 72 characters
    6. Body explains "what" and "why", not "how"


                </div></div></li></ol></div><div><b>github_pulls_comments:</b> <ol><li><div>
                # [Codecov](https://codecov.io/gh/apache/incubator-airflow/pull/2809?src=pr&amp;el=h1) Report
&gt; Merging [#2809](https://codecov.io/gh/apache/incubator-airflow/pull/2809?src=pr&amp;el=desc) into [master](https://codecov.io/gh/apache/incubator-airflow/commit/d76bf76de2d2d4d3041e4d1bf9304dce8a1bcefb?src=pr&amp;el=desc) will **not change** coverage.
&gt; The diff coverage is `n/a`.

[![Impacted file tree graph](https://codecov.io/gh/apache/incubator-airflow/pull/2809/graphs/tree.svg?width=650&amp;src=pr&amp;token=WdLKlKHOAU&amp;height=150)](https://codecov.io/gh/apache/incubator-airflow/pull/2809?src=pr&amp;el=tree)

```diff
@@           Coverage Diff           @@
##           master    #2809   +/-   ##
=======================================
  Coverage   73.62%   73.62%           
=======================================
  Files         158      158           
  Lines       11962    11962           
=======================================
  Hits         8807     8807           
  Misses       3155     3155
```



------

[Continue to review full report at Codecov](https://codecov.io/gh/apache/incubator-airflow/pull/2809?src=pr&amp;el=continue).
&gt; **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta)
&gt; `Δ = absolute &lt;relative&gt; (impact)`, `ø = not affected`, `? = missing data`
&gt; Powered by [Codecov](https://codecov.io/gh/apache/incubator-airflow/pull/2809?src=pr&amp;el=footer). Last update [d76bf76...43cb770](https://codecov.io/gh/apache/incubator-airflow/pull/2809?src=pr&amp;el=lastupdated). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments).

              </div></li><li><div><div><b>body:</b> LGTM

And very much appreciated!
I have been neglecting writing this one in favor of reusing a ShortCircuit operator with a custom function retrieving the list of files.
This should make many DAGs cleaner and easier to read :)
                </div><div><b>label:</b> code-design
                </div></div></li><li><div>
                @litdeviant can you check the test failures?
              </div></li><li><div>
                @criccomini I did check them. My changes doesn't add or remove tests. take a look at https://travis-ci.org/litdeviant/incubator-airflow/builds/306248732 same build on my fork and everything pass. it's non determenistic bug with tornado futures and network connection doesn't relate to my changes. 
              </div></li><li><div>
                LGTM merged

Ignoring test failure since it's spurious
              </div></li></ol></div><div><b>github_pulls_reviews:</b> <ol></ol></div><div><b>jira_issues:</b> <ol><li><div><div><b>summary:</b> Add Google Cloud Storage Sensor with prefix
                </div><div><b>description:</b> Hook can do list objects in bucket with prefix so I need sensor which will check bucket with prefix if there any incoming files.
                </div></div></li></ol></div><div><b>jira_issues_comments:</b> <ol><li><div>
                Commit d8115e982b19e39fb96362c1acb3bf1715bc9180 in incubator-airflow's branch refs/heads/master from [~vait]
[ https://git-wip-us.apache.org/repos/asf?p=incubator-airflow.git;h=d8115e9 ]

[AIRFLOW-1843] Add Google Cloud Storage Sensor with prefix

Sensor for checking if there any files in bucket
at certain prefix

Closes #2809 from litdeviant/gcs_prefix_sensor

              </div></li></ol></div></div></html>