<!DOCTYPE html><html><div class="item-title">
        Item 214
      </div> <div class="item-details"><div><b>git_comments:</b> <ol><li><div>
                 [START howto_operator_external_task_marker]
              </div></li><li><div>
                 [START howto_operator_external_task_sensor]
              </div></li><li><div>
                 [END howto_operator_external_task_marker]
              </div></li><li><div>
                 [END howto_operator_external_task_sensor]
              </div></li><li><div>
                 -*- coding: utf-8 -*-

 Licensed to the Apache Software Foundation (ASF) under one
 or more contributor license agreements.  See the NOTICE file
 distributed with this work for additional information
 regarding copyright ownership.  The ASF licenses this file
 to you under the Apache License, Version 2.0 (the
 "License"); you may not use this file except in compliance
 with the License.  You may obtain a copy of the License at

   http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing,
 software distributed under the License is distributed on an
 "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 KIND, either express or implied.  See the License for the
 specific language governing permissions and limitations
 under the License.
              </div></li><li><div>
                 [START howto_operator_external_task_marker]
              </div></li><li><div>
                 [START howto_operator_external_task_sensor]
              </div></li><li><div>
                 [END howto_operator_external_task_marker]
              </div></li><li><div>
                 [END howto_operator_external_task_sensor]
              </div></li><li><div>
                 -*- coding: utf-8 -*-

 Licensed to the Apache Software Foundation (ASF) under one
 or more contributor license agreements.  See the NOTICE file
 distributed with this work for additional information
 regarding copyright ownership.  The ASF licenses this file
 to you under the Apache License, Version 2.0 (the
 "License"); you may not use this file except in compliance
 with the License.  You may obtain a copy of the License at

   http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing,
 software distributed under the License is distributed on an
 "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 KIND, either express or implied.  See the License for the
 specific language governing permissions and limitations
 under the License.
              </div></li><li><div>
                 pylint: disable=redefined-outer-name
              </div></li></ol></div><div><b>git_commits:</b> <ol><li><div><div><b>summary:</b> [AIRFLOW-2279] Clear tasks across DAGs if marked by ExternalTaskMarker (#6633)
                </div><div><b>message:</b> [AIRFLOW-2279] Clear tasks across DAGs if marked by ExternalTaskMarker (#6633)

                </div></div></li></ol></div><div><b>github_issues:</b> <ol></ol></div><div><b>github_issues_comments:</b> <ol></ol></div><div><b>github_pulls:</b> <ol><li><div><div><b>title:</b> [AIRFLOW-2279] Clear tasks across DAGs if marked by ExternalTaskMarker
                </div><div><b>body:</b> Make sure you have checked _all_ steps below.

### Jira

- [x] My PR addresses the following [Airflow Jira](https://issues.apache.org/jira/browse/AIRFLOW/) issues and references them in the PR title. 
  - https://issues.apache.org/jira/browse/AIRFLOW-2279

### Description

- [x] Here are some details about my PR, including screenshots of any UI changes:
There's an apparent need for a way to clear tasks across DAGs when there are dependencies set up by `ExternalTaskSensor`. This PR adds an `ExternalTaskMarker` to indicate such a need. When `ExternalTaskMarker` is used, the "Clear" action by the user will look for the external tasks recursively and clear them. There's no need to change the UI because the "Recursive" option in the Clear form fits this nicely. 

This is primarily addressing AIRFLOW-2279. However, there are various other users in the community using `ExternalTaskSensor` to set up cross-DAG dependencies. Many of them asked for this feature. 
https://issues.apache.org/jira/browse/AIRFLOW-2279
https://issues.apache.org/jira/browse/AIRFLOW-1414
https://issues.apache.org/jira/browse/AIRFLOW-1446
https://issues.apache.org/jira/browse/AIRFLOW-4005
https://www.mikulskibartosz.name/using-sensors-in-airflow/
https://forum.astronomer.io/t/dependencies-across-dags/332
https://geoffruddock.com/how-to-use-external-task-sensor-in-airflow/
https://stackoverflow.com/questions/38022323/how-to-set-dependencies-between-dags-in-airflow
https://issues.apache.org/jira/browse/AIRFLOW-1825

There was an inactive PR https://github.com/apache/airflow/pull/2444 trying to implement this feature. However it was abandoned. And I feel my approach is simpler and more flexible. And it does not need UI changes.

### Tests

- [x] My PR adds the following unit tests __OR__ does not need testing for this extremely good reason:
Tests added to test_external_task_sensor.py

### Commits

- [x] My commits all reference Jira issues in their subject lines, and I have squashed multiple commits if they address the same issue. In addition, my commits follow the guidelines from "[How to write a good git commit message](http://chris.beams.io/posts/git-commit/)":
  1. Subject is separated from body by a blank line
  1. Subject is limited to 50 characters (not including Jira issue reference)
  1. Subject does not end with a period
  1. Subject uses the imperative mood ("add", not "adding")
  1. Body wraps at 72 characters
  1. Body explains "what" and "why", not "how"

### Documentation

- [x] In case of new functionality, my PR adds documentation that describes how to use it.
  - All the public functions and the classes in the PR contain docstrings that explain what it does
  - If you implement backwards incompatible changes, please leave a note in the [Updating.md](https://github.com/apache/airflow/blob/master/UPDATING.md) so we can assign it to a appropriate release

                </div></div></li><li><div><div><b>title:</b> [AIRFLOW-2279] Clear tasks across DAGs if marked by ExternalTaskMarker
                </div><div><b>body:</b> Make sure you have checked _all_ steps below.

### Jira

- [x] My PR addresses the following [Airflow Jira](https://issues.apache.org/jira/browse/AIRFLOW/) issues and references them in the PR title. 
  - https://issues.apache.org/jira/browse/AIRFLOW-2279

### Description

- [x] Here are some details about my PR, including screenshots of any UI changes:
There's an apparent need for a way to clear tasks across DAGs when there are dependencies set up by `ExternalTaskSensor`. This PR adds an `ExternalTaskMarker` to indicate such a need. When `ExternalTaskMarker` is used, the "Clear" action by the user will look for the external tasks recursively and clear them. There's no need to change the UI because the "Recursive" option in the Clear form fits this nicely. 

This is primarily addressing AIRFLOW-2279. However, there are various other users in the community using `ExternalTaskSensor` to set up cross-DAG dependencies. Many of them asked for this feature. 
https://issues.apache.org/jira/browse/AIRFLOW-2279
https://issues.apache.org/jira/browse/AIRFLOW-1414
https://issues.apache.org/jira/browse/AIRFLOW-1446
https://issues.apache.org/jira/browse/AIRFLOW-4005
https://www.mikulskibartosz.name/using-sensors-in-airflow/
https://forum.astronomer.io/t/dependencies-across-dags/332
https://geoffruddock.com/how-to-use-external-task-sensor-in-airflow/
https://stackoverflow.com/questions/38022323/how-to-set-dependencies-between-dags-in-airflow
https://issues.apache.org/jira/browse/AIRFLOW-1825

There was an inactive PR https://github.com/apache/airflow/pull/2444 trying to implement this feature. However it was abandoned. And I feel my approach is simpler and more flexible. And it does not need UI changes.

### Tests

- [x] My PR adds the following unit tests __OR__ does not need testing for this extremely good reason:
Tests added to test_external_task_sensor.py

### Commits

- [x] My commits all reference Jira issues in their subject lines, and I have squashed multiple commits if they address the same issue. In addition, my commits follow the guidelines from "[How to write a good git commit message](http://chris.beams.io/posts/git-commit/)":
  1. Subject is separated from body by a blank line
  1. Subject is limited to 50 characters (not including Jira issue reference)
  1. Subject does not end with a period
  1. Subject uses the imperative mood ("add", not "adding")
  1. Body wraps at 72 characters
  1. Body explains "what" and "why", not "how"

### Documentation

- [x] In case of new functionality, my PR adds documentation that describes how to use it.
  - All the public functions and the classes in the PR contain docstrings that explain what it does
  - If you implement backwards incompatible changes, please leave a note in the [Updating.md](https://github.com/apache/airflow/blob/master/UPDATING.md) so we can assign it to a appropriate release

                </div></div></li><li><div><div><b>title:</b> [AIRFLOW-2279] Clear tasks across DAGs if marked by ExternalTaskMarker
                </div><div><b>body:</b> Make sure you have checked _all_ steps below.

### Jira

- [x] My PR addresses the following [Airflow Jira](https://issues.apache.org/jira/browse/AIRFLOW/) issues and references them in the PR title. 
  - https://issues.apache.org/jira/browse/AIRFLOW-2279

### Description

- [x] Here are some details about my PR, including screenshots of any UI changes:
There's an apparent need for a way to clear tasks across DAGs when there are dependencies set up by `ExternalTaskSensor`. This PR adds an `ExternalTaskMarker` to indicate such a need. When `ExternalTaskMarker` is used, the "Clear" action by the user will look for the external tasks recursively and clear them. There's no need to change the UI because the "Recursive" option in the Clear form fits this nicely. 

This is primarily addressing AIRFLOW-2279. However, there are various other users in the community using `ExternalTaskSensor` to set up cross-DAG dependencies. Many of them asked for this feature. 
https://issues.apache.org/jira/browse/AIRFLOW-2279
https://issues.apache.org/jira/browse/AIRFLOW-1414
https://issues.apache.org/jira/browse/AIRFLOW-1446
https://issues.apache.org/jira/browse/AIRFLOW-4005
https://www.mikulskibartosz.name/using-sensors-in-airflow/
https://forum.astronomer.io/t/dependencies-across-dags/332
https://geoffruddock.com/how-to-use-external-task-sensor-in-airflow/
https://stackoverflow.com/questions/38022323/how-to-set-dependencies-between-dags-in-airflow
https://issues.apache.org/jira/browse/AIRFLOW-1825

There was an inactive PR https://github.com/apache/airflow/pull/2444 trying to implement this feature. However it was abandoned. And I feel my approach is simpler and more flexible. And it does not need UI changes.

### Tests

- [x] My PR adds the following unit tests __OR__ does not need testing for this extremely good reason:
Tests added to test_external_task_sensor.py

### Commits

- [x] My commits all reference Jira issues in their subject lines, and I have squashed multiple commits if they address the same issue. In addition, my commits follow the guidelines from "[How to write a good git commit message](http://chris.beams.io/posts/git-commit/)":
  1. Subject is separated from body by a blank line
  1. Subject is limited to 50 characters (not including Jira issue reference)
  1. Subject does not end with a period
  1. Subject uses the imperative mood ("add", not "adding")
  1. Body wraps at 72 characters
  1. Body explains "what" and "why", not "how"

### Documentation

- [x] In case of new functionality, my PR adds documentation that describes how to use it.
  - All the public functions and the classes in the PR contain docstrings that explain what it does
  - If you implement backwards incompatible changes, please leave a note in the [Updating.md](https://github.com/apache/airflow/blob/master/UPDATING.md) so we can assign it to a appropriate release

                </div></div></li><li><div><div><b>title:</b> [AIRFLOW-2279] Clear tasks across DAGs if marked by ExternalTaskMarker
                </div><div><b>body:</b> Make sure you have checked _all_ steps below.

### Jira

- [x] My PR addresses the following [Airflow Jira](https://issues.apache.org/jira/browse/AIRFLOW/) issues and references them in the PR title. 
  - https://issues.apache.org/jira/browse/AIRFLOW-2279

### Description

- [x] Here are some details about my PR, including screenshots of any UI changes:
There's an apparent need for a way to clear tasks across DAGs when there are dependencies set up by `ExternalTaskSensor`. This PR adds an `ExternalTaskMarker` to indicate such a need. When `ExternalTaskMarker` is used, the "Clear" action by the user will look for the external tasks recursively and clear them. There's no need to change the UI because the "Recursive" option in the Clear form fits this nicely. 

This is primarily addressing AIRFLOW-2279. However, there are various other users in the community using `ExternalTaskSensor` to set up cross-DAG dependencies. Many of them asked for this feature. 
https://issues.apache.org/jira/browse/AIRFLOW-2279
https://issues.apache.org/jira/browse/AIRFLOW-1414
https://issues.apache.org/jira/browse/AIRFLOW-1446
https://issues.apache.org/jira/browse/AIRFLOW-4005
https://www.mikulskibartosz.name/using-sensors-in-airflow/
https://forum.astronomer.io/t/dependencies-across-dags/332
https://geoffruddock.com/how-to-use-external-task-sensor-in-airflow/
https://stackoverflow.com/questions/38022323/how-to-set-dependencies-between-dags-in-airflow
https://issues.apache.org/jira/browse/AIRFLOW-1825

There was an inactive PR https://github.com/apache/airflow/pull/2444 trying to implement this feature. However it was abandoned. And I feel my approach is simpler and more flexible. And it does not need UI changes.

### Tests

- [x] My PR adds the following unit tests __OR__ does not need testing for this extremely good reason:
Tests added to test_external_task_sensor.py

### Commits

- [x] My commits all reference Jira issues in their subject lines, and I have squashed multiple commits if they address the same issue. In addition, my commits follow the guidelines from "[How to write a good git commit message](http://chris.beams.io/posts/git-commit/)":
  1. Subject is separated from body by a blank line
  1. Subject is limited to 50 characters (not including Jira issue reference)
  1. Subject does not end with a period
  1. Subject uses the imperative mood ("add", not "adding")
  1. Body wraps at 72 characters
  1. Body explains "what" and "why", not "how"

### Documentation

- [x] In case of new functionality, my PR adds documentation that describes how to use it.
  - All the public functions and the classes in the PR contain docstrings that explain what it does
  - If you implement backwards incompatible changes, please leave a note in the [Updating.md](https://github.com/apache/airflow/blob/master/UPDATING.md) so we can assign it to a appropriate release

                </div></div></li><li><div><div><b>title:</b> [AIRFLOW-2279] Clear tasks across DAGs if marked by ExternalTaskMarker
                </div><div><b>body:</b> Make sure you have checked _all_ steps below.

### Jira

- [x] My PR addresses the following [Airflow Jira](https://issues.apache.org/jira/browse/AIRFLOW/) issues and references them in the PR title. 
  - https://issues.apache.org/jira/browse/AIRFLOW-2279

### Description

- [x] Here are some details about my PR, including screenshots of any UI changes:
There's an apparent need for a way to clear tasks across DAGs when there are dependencies set up by `ExternalTaskSensor`. This PR adds an `ExternalTaskMarker` to indicate such a need. When `ExternalTaskMarker` is used, the "Clear" action by the user will look for the external tasks recursively and clear them. There's no need to change the UI because the "Recursive" option in the Clear form fits this nicely. 

This is primarily addressing AIRFLOW-2279. However, there are various other users in the community using `ExternalTaskSensor` to set up cross-DAG dependencies. Many of them asked for this feature. 
https://issues.apache.org/jira/browse/AIRFLOW-2279
https://issues.apache.org/jira/browse/AIRFLOW-1414
https://issues.apache.org/jira/browse/AIRFLOW-1446
https://issues.apache.org/jira/browse/AIRFLOW-4005
https://www.mikulskibartosz.name/using-sensors-in-airflow/
https://forum.astronomer.io/t/dependencies-across-dags/332
https://geoffruddock.com/how-to-use-external-task-sensor-in-airflow/
https://stackoverflow.com/questions/38022323/how-to-set-dependencies-between-dags-in-airflow
https://issues.apache.org/jira/browse/AIRFLOW-1825

There was an inactive PR https://github.com/apache/airflow/pull/2444 trying to implement this feature. However it was abandoned. And I feel my approach is simpler and more flexible. And it does not need UI changes.

### Tests

- [x] My PR adds the following unit tests __OR__ does not need testing for this extremely good reason:
Tests added to test_external_task_sensor.py

### Commits

- [x] My commits all reference Jira issues in their subject lines, and I have squashed multiple commits if they address the same issue. In addition, my commits follow the guidelines from "[How to write a good git commit message](http://chris.beams.io/posts/git-commit/)":
  1. Subject is separated from body by a blank line
  1. Subject is limited to 50 characters (not including Jira issue reference)
  1. Subject does not end with a period
  1. Subject uses the imperative mood ("add", not "adding")
  1. Body wraps at 72 characters
  1. Body explains "what" and "why", not "how"

### Documentation

- [x] In case of new functionality, my PR adds documentation that describes how to use it.
  - All the public functions and the classes in the PR contain docstrings that explain what it does
  - If you implement backwards incompatible changes, please leave a note in the [Updating.md](https://github.com/apache/airflow/blob/master/UPDATING.md) so we can assign it to a appropriate release

                </div><div><b>label:</b> code-design
                </div></div></li><li><div><div><b>title:</b> [AIRFLOW-2279] Clear tasks across DAGs if marked by ExternalTaskMarker
                </div><div><b>body:</b> Make sure you have checked _all_ steps below.

### Jira

- [x] My PR addresses the following [Airflow Jira](https://issues.apache.org/jira/browse/AIRFLOW/) issues and references them in the PR title. 
  - https://issues.apache.org/jira/browse/AIRFLOW-2279

### Description

- [x] Here are some details about my PR, including screenshots of any UI changes:
There's an apparent need for a way to clear tasks across DAGs when there are dependencies set up by `ExternalTaskSensor`. This PR adds an `ExternalTaskMarker` to indicate such a need. When `ExternalTaskMarker` is used, the "Clear" action by the user will look for the external tasks recursively and clear them. There's no need to change the UI because the "Recursive" option in the Clear form fits this nicely. 

This is primarily addressing AIRFLOW-2279. However, there are various other users in the community using `ExternalTaskSensor` to set up cross-DAG dependencies. Many of them asked for this feature. 
https://issues.apache.org/jira/browse/AIRFLOW-2279
https://issues.apache.org/jira/browse/AIRFLOW-1414
https://issues.apache.org/jira/browse/AIRFLOW-1446
https://issues.apache.org/jira/browse/AIRFLOW-4005
https://www.mikulskibartosz.name/using-sensors-in-airflow/
https://forum.astronomer.io/t/dependencies-across-dags/332
https://geoffruddock.com/how-to-use-external-task-sensor-in-airflow/
https://stackoverflow.com/questions/38022323/how-to-set-dependencies-between-dags-in-airflow
https://issues.apache.org/jira/browse/AIRFLOW-1825

There was an inactive PR https://github.com/apache/airflow/pull/2444 trying to implement this feature. However it was abandoned. And I feel my approach is simpler and more flexible. And it does not need UI changes.

### Tests

- [x] My PR adds the following unit tests __OR__ does not need testing for this extremely good reason:
Tests added to test_external_task_sensor.py

### Commits

- [x] My commits all reference Jira issues in their subject lines, and I have squashed multiple commits if they address the same issue. In addition, my commits follow the guidelines from "[How to write a good git commit message](http://chris.beams.io/posts/git-commit/)":
  1. Subject is separated from body by a blank line
  1. Subject is limited to 50 characters (not including Jira issue reference)
  1. Subject does not end with a period
  1. Subject uses the imperative mood ("add", not "adding")
  1. Body wraps at 72 characters
  1. Body explains "what" and "why", not "how"

### Documentation

- [x] In case of new functionality, my PR adds documentation that describes how to use it.
  - All the public functions and the classes in the PR contain docstrings that explain what it does
  - If you implement backwards incompatible changes, please leave a note in the [Updating.md](https://github.com/apache/airflow/blob/master/UPDATING.md) so we can assign it to a appropriate release

                </div></div></li><li><div><div><b>title:</b> [AIRFLOW-2279] Clear tasks across DAGs if marked by ExternalTaskMarker
                </div><div><b>body:</b> Make sure you have checked _all_ steps below.

### Jira

- [x] My PR addresses the following [Airflow Jira](https://issues.apache.org/jira/browse/AIRFLOW/) issues and references them in the PR title. 
  - https://issues.apache.org/jira/browse/AIRFLOW-2279

### Description

- [x] Here are some details about my PR, including screenshots of any UI changes:
There's an apparent need for a way to clear tasks across DAGs when there are dependencies set up by `ExternalTaskSensor`. This PR adds an `ExternalTaskMarker` to indicate such a need. When `ExternalTaskMarker` is used, the "Clear" action by the user will look for the external tasks recursively and clear them. There's no need to change the UI because the "Recursive" option in the Clear form fits this nicely. 

This is primarily addressing AIRFLOW-2279. However, there are various other users in the community using `ExternalTaskSensor` to set up cross-DAG dependencies. Many of them asked for this feature. 
https://issues.apache.org/jira/browse/AIRFLOW-2279
https://issues.apache.org/jira/browse/AIRFLOW-1414
https://issues.apache.org/jira/browse/AIRFLOW-1446
https://issues.apache.org/jira/browse/AIRFLOW-4005
https://www.mikulskibartosz.name/using-sensors-in-airflow/
https://forum.astronomer.io/t/dependencies-across-dags/332
https://geoffruddock.com/how-to-use-external-task-sensor-in-airflow/
https://stackoverflow.com/questions/38022323/how-to-set-dependencies-between-dags-in-airflow
https://issues.apache.org/jira/browse/AIRFLOW-1825

There was an inactive PR https://github.com/apache/airflow/pull/2444 trying to implement this feature. However it was abandoned. And I feel my approach is simpler and more flexible. And it does not need UI changes.

### Tests

- [x] My PR adds the following unit tests __OR__ does not need testing for this extremely good reason:
Tests added to test_external_task_sensor.py

### Commits

- [x] My commits all reference Jira issues in their subject lines, and I have squashed multiple commits if they address the same issue. In addition, my commits follow the guidelines from "[How to write a good git commit message](http://chris.beams.io/posts/git-commit/)":
  1. Subject is separated from body by a blank line
  1. Subject is limited to 50 characters (not including Jira issue reference)
  1. Subject does not end with a period
  1. Subject uses the imperative mood ("add", not "adding")
  1. Body wraps at 72 characters
  1. Body explains "what" and "why", not "how"

### Documentation

- [x] In case of new functionality, my PR adds documentation that describes how to use it.
  - All the public functions and the classes in the PR contain docstrings that explain what it does
  - If you implement backwards incompatible changes, please leave a note in the [Updating.md](https://github.com/apache/airflow/blob/master/UPDATING.md) so we can assign it to a appropriate release

                </div></div></li><li><div><div><b>title:</b> [AIRFLOW-2279] Clear tasks across DAGs if marked by ExternalTaskMarker
                </div><div><b>body:</b> Make sure you have checked _all_ steps below.

### Jira

- [x] My PR addresses the following [Airflow Jira](https://issues.apache.org/jira/browse/AIRFLOW/) issues and references them in the PR title. 
  - https://issues.apache.org/jira/browse/AIRFLOW-2279

### Description

- [x] Here are some details about my PR, including screenshots of any UI changes:
There's an apparent need for a way to clear tasks across DAGs when there are dependencies set up by `ExternalTaskSensor`. This PR adds an `ExternalTaskMarker` to indicate such a need. When `ExternalTaskMarker` is used, the "Clear" action by the user will look for the external tasks recursively and clear them. There's no need to change the UI because the "Recursive" option in the Clear form fits this nicely. 

This is primarily addressing AIRFLOW-2279. However, there are various other users in the community using `ExternalTaskSensor` to set up cross-DAG dependencies. Many of them asked for this feature. 
https://issues.apache.org/jira/browse/AIRFLOW-2279
https://issues.apache.org/jira/browse/AIRFLOW-1414
https://issues.apache.org/jira/browse/AIRFLOW-1446
https://issues.apache.org/jira/browse/AIRFLOW-4005
https://www.mikulskibartosz.name/using-sensors-in-airflow/
https://forum.astronomer.io/t/dependencies-across-dags/332
https://geoffruddock.com/how-to-use-external-task-sensor-in-airflow/
https://stackoverflow.com/questions/38022323/how-to-set-dependencies-between-dags-in-airflow
https://issues.apache.org/jira/browse/AIRFLOW-1825

There was an inactive PR https://github.com/apache/airflow/pull/2444 trying to implement this feature. However it was abandoned. And I feel my approach is simpler and more flexible. And it does not need UI changes.

### Tests

- [x] My PR adds the following unit tests __OR__ does not need testing for this extremely good reason:
Tests added to test_external_task_sensor.py

### Commits

- [x] My commits all reference Jira issues in their subject lines, and I have squashed multiple commits if they address the same issue. In addition, my commits follow the guidelines from "[How to write a good git commit message](http://chris.beams.io/posts/git-commit/)":
  1. Subject is separated from body by a blank line
  1. Subject is limited to 50 characters (not including Jira issue reference)
  1. Subject does not end with a period
  1. Subject uses the imperative mood ("add", not "adding")
  1. Body wraps at 72 characters
  1. Body explains "what" and "why", not "how"

### Documentation

- [x] In case of new functionality, my PR adds documentation that describes how to use it.
  - All the public functions and the classes in the PR contain docstrings that explain what it does
  - If you implement backwards incompatible changes, please leave a note in the [Updating.md](https://github.com/apache/airflow/blob/master/UPDATING.md) so we can assign it to a appropriate release

                </div></div></li><li><div><div><b>title:</b> [AIRFLOW-2279] Clear tasks across DAGs if marked by ExternalTaskMarker
                </div><div><b>body:</b> Make sure you have checked _all_ steps below.

### Jira

- [x] My PR addresses the following [Airflow Jira](https://issues.apache.org/jira/browse/AIRFLOW/) issues and references them in the PR title. 
  - https://issues.apache.org/jira/browse/AIRFLOW-2279

### Description

- [x] Here are some details about my PR, including screenshots of any UI changes:
There's an apparent need for a way to clear tasks across DAGs when there are dependencies set up by `ExternalTaskSensor`. This PR adds an `ExternalTaskMarker` to indicate such a need. When `ExternalTaskMarker` is used, the "Clear" action by the user will look for the external tasks recursively and clear them. There's no need to change the UI because the "Recursive" option in the Clear form fits this nicely. 

This is primarily addressing AIRFLOW-2279. However, there are various other users in the community using `ExternalTaskSensor` to set up cross-DAG dependencies. Many of them asked for this feature. 
https://issues.apache.org/jira/browse/AIRFLOW-2279
https://issues.apache.org/jira/browse/AIRFLOW-1414
https://issues.apache.org/jira/browse/AIRFLOW-1446
https://issues.apache.org/jira/browse/AIRFLOW-4005
https://www.mikulskibartosz.name/using-sensors-in-airflow/
https://forum.astronomer.io/t/dependencies-across-dags/332
https://geoffruddock.com/how-to-use-external-task-sensor-in-airflow/
https://stackoverflow.com/questions/38022323/how-to-set-dependencies-between-dags-in-airflow
https://issues.apache.org/jira/browse/AIRFLOW-1825

There was an inactive PR https://github.com/apache/airflow/pull/2444 trying to implement this feature. However it was abandoned. And I feel my approach is simpler and more flexible. And it does not need UI changes.

### Tests

- [x] My PR adds the following unit tests __OR__ does not need testing for this extremely good reason:
Tests added to test_external_task_sensor.py

### Commits

- [x] My commits all reference Jira issues in their subject lines, and I have squashed multiple commits if they address the same issue. In addition, my commits follow the guidelines from "[How to write a good git commit message](http://chris.beams.io/posts/git-commit/)":
  1. Subject is separated from body by a blank line
  1. Subject is limited to 50 characters (not including Jira issue reference)
  1. Subject does not end with a period
  1. Subject uses the imperative mood ("add", not "adding")
  1. Body wraps at 72 characters
  1. Body explains "what" and "why", not "how"

### Documentation

- [x] In case of new functionality, my PR adds documentation that describes how to use it.
  - All the public functions and the classes in the PR contain docstrings that explain what it does
  - If you implement backwards incompatible changes, please leave a note in the [Updating.md](https://github.com/apache/airflow/blob/master/UPDATING.md) so we can assign it to a appropriate release

                </div></div></li><li><div><div><b>title:</b> [AIRFLOW-2279] Clear tasks across DAGs if marked by ExternalTaskMarker
                </div><div><b>body:</b> Make sure you have checked _all_ steps below.

### Jira

- [x] My PR addresses the following [Airflow Jira](https://issues.apache.org/jira/browse/AIRFLOW/) issues and references them in the PR title. 
  - https://issues.apache.org/jira/browse/AIRFLOW-2279

### Description

- [x] Here are some details about my PR, including screenshots of any UI changes:
There's an apparent need for a way to clear tasks across DAGs when there are dependencies set up by `ExternalTaskSensor`. This PR adds an `ExternalTaskMarker` to indicate such a need. When `ExternalTaskMarker` is used, the "Clear" action by the user will look for the external tasks recursively and clear them. There's no need to change the UI because the "Recursive" option in the Clear form fits this nicely. 

This is primarily addressing AIRFLOW-2279. However, there are various other users in the community using `ExternalTaskSensor` to set up cross-DAG dependencies. Many of them asked for this feature. 
https://issues.apache.org/jira/browse/AIRFLOW-2279
https://issues.apache.org/jira/browse/AIRFLOW-1414
https://issues.apache.org/jira/browse/AIRFLOW-1446
https://issues.apache.org/jira/browse/AIRFLOW-4005
https://www.mikulskibartosz.name/using-sensors-in-airflow/
https://forum.astronomer.io/t/dependencies-across-dags/332
https://geoffruddock.com/how-to-use-external-task-sensor-in-airflow/
https://stackoverflow.com/questions/38022323/how-to-set-dependencies-between-dags-in-airflow
https://issues.apache.org/jira/browse/AIRFLOW-1825

There was an inactive PR https://github.com/apache/airflow/pull/2444 trying to implement this feature. However it was abandoned. And I feel my approach is simpler and more flexible. And it does not need UI changes.

### Tests

- [x] My PR adds the following unit tests __OR__ does not need testing for this extremely good reason:
Tests added to test_external_task_sensor.py

### Commits

- [x] My commits all reference Jira issues in their subject lines, and I have squashed multiple commits if they address the same issue. In addition, my commits follow the guidelines from "[How to write a good git commit message](http://chris.beams.io/posts/git-commit/)":
  1. Subject is separated from body by a blank line
  1. Subject is limited to 50 characters (not including Jira issue reference)
  1. Subject does not end with a period
  1. Subject uses the imperative mood ("add", not "adding")
  1. Body wraps at 72 characters
  1. Body explains "what" and "why", not "how"

### Documentation

- [x] In case of new functionality, my PR adds documentation that describes how to use it.
  - All the public functions and the classes in the PR contain docstrings that explain what it does
  - If you implement backwards incompatible changes, please leave a note in the [Updating.md](https://github.com/apache/airflow/blob/master/UPDATING.md) so we can assign it to a appropriate release

                </div></div></li><li><div><div><b>title:</b> [AIRFLOW-2279] Clear tasks across DAGs if marked by ExternalTaskMarker
                </div><div><b>body:</b> Make sure you have checked _all_ steps below.

### Jira

- [x] My PR addresses the following [Airflow Jira](https://issues.apache.org/jira/browse/AIRFLOW/) issues and references them in the PR title. 
  - https://issues.apache.org/jira/browse/AIRFLOW-2279

### Description

- [x] Here are some details about my PR, including screenshots of any UI changes:
There's an apparent need for a way to clear tasks across DAGs when there are dependencies set up by `ExternalTaskSensor`. This PR adds an `ExternalTaskMarker` to indicate such a need. When `ExternalTaskMarker` is used, the "Clear" action by the user will look for the external tasks recursively and clear them. There's no need to change the UI because the "Recursive" option in the Clear form fits this nicely. 

This is primarily addressing AIRFLOW-2279. However, there are various other users in the community using `ExternalTaskSensor` to set up cross-DAG dependencies. Many of them asked for this feature. 
https://issues.apache.org/jira/browse/AIRFLOW-2279
https://issues.apache.org/jira/browse/AIRFLOW-1414
https://issues.apache.org/jira/browse/AIRFLOW-1446
https://issues.apache.org/jira/browse/AIRFLOW-4005
https://www.mikulskibartosz.name/using-sensors-in-airflow/
https://forum.astronomer.io/t/dependencies-across-dags/332
https://geoffruddock.com/how-to-use-external-task-sensor-in-airflow/
https://stackoverflow.com/questions/38022323/how-to-set-dependencies-between-dags-in-airflow
https://issues.apache.org/jira/browse/AIRFLOW-1825

There was an inactive PR https://github.com/apache/airflow/pull/2444 trying to implement this feature. However it was abandoned. And I feel my approach is simpler and more flexible. And it does not need UI changes.

### Tests

- [x] My PR adds the following unit tests __OR__ does not need testing for this extremely good reason:
Tests added to test_external_task_sensor.py

### Commits

- [x] My commits all reference Jira issues in their subject lines, and I have squashed multiple commits if they address the same issue. In addition, my commits follow the guidelines from "[How to write a good git commit message](http://chris.beams.io/posts/git-commit/)":
  1. Subject is separated from body by a blank line
  1. Subject is limited to 50 characters (not including Jira issue reference)
  1. Subject does not end with a period
  1. Subject uses the imperative mood ("add", not "adding")
  1. Body wraps at 72 characters
  1. Body explains "what" and "why", not "how"

### Documentation

- [x] In case of new functionality, my PR adds documentation that describes how to use it.
  - All the public functions and the classes in the PR contain docstrings that explain what it does
  - If you implement backwards incompatible changes, please leave a note in the [Updating.md](https://github.com/apache/airflow/blob/master/UPDATING.md) so we can assign it to a appropriate release

                </div><div><b>label:</b> code-design
                </div></div></li><li><div><div><b>title:</b> [AIRFLOW-2279] Clear tasks across DAGs if marked by ExternalTaskMarker
                </div><div><b>body:</b> Make sure you have checked _all_ steps below.

### Jira

- [x] My PR addresses the following [Airflow Jira](https://issues.apache.org/jira/browse/AIRFLOW/) issues and references them in the PR title. 
  - https://issues.apache.org/jira/browse/AIRFLOW-2279

### Description

- [x] Here are some details about my PR, including screenshots of any UI changes:
There's an apparent need for a way to clear tasks across DAGs when there are dependencies set up by `ExternalTaskSensor`. This PR adds an `ExternalTaskMarker` to indicate such a need. When `ExternalTaskMarker` is used, the "Clear" action by the user will look for the external tasks recursively and clear them. There's no need to change the UI because the "Recursive" option in the Clear form fits this nicely. 

This is primarily addressing AIRFLOW-2279. However, there are various other users in the community using `ExternalTaskSensor` to set up cross-DAG dependencies. Many of them asked for this feature. 
https://issues.apache.org/jira/browse/AIRFLOW-2279
https://issues.apache.org/jira/browse/AIRFLOW-1414
https://issues.apache.org/jira/browse/AIRFLOW-1446
https://issues.apache.org/jira/browse/AIRFLOW-4005
https://www.mikulskibartosz.name/using-sensors-in-airflow/
https://forum.astronomer.io/t/dependencies-across-dags/332
https://geoffruddock.com/how-to-use-external-task-sensor-in-airflow/
https://stackoverflow.com/questions/38022323/how-to-set-dependencies-between-dags-in-airflow
https://issues.apache.org/jira/browse/AIRFLOW-1825

There was an inactive PR https://github.com/apache/airflow/pull/2444 trying to implement this feature. However it was abandoned. And I feel my approach is simpler and more flexible. And it does not need UI changes.

### Tests

- [x] My PR adds the following unit tests __OR__ does not need testing for this extremely good reason:
Tests added to test_external_task_sensor.py

### Commits

- [x] My commits all reference Jira issues in their subject lines, and I have squashed multiple commits if they address the same issue. In addition, my commits follow the guidelines from "[How to write a good git commit message](http://chris.beams.io/posts/git-commit/)":
  1. Subject is separated from body by a blank line
  1. Subject is limited to 50 characters (not including Jira issue reference)
  1. Subject does not end with a period
  1. Subject uses the imperative mood ("add", not "adding")
  1. Body wraps at 72 characters
  1. Body explains "what" and "why", not "how"

### Documentation

- [x] In case of new functionality, my PR adds documentation that describes how to use it.
  - All the public functions and the classes in the PR contain docstrings that explain what it does
  - If you implement backwards incompatible changes, please leave a note in the [Updating.md](https://github.com/apache/airflow/blob/master/UPDATING.md) so we can assign it to a appropriate release

                </div></div></li><li><div><div><b>title:</b> [AIRFLOW-2279] Clear tasks across DAGs if marked by ExternalTaskMarker
                </div><div><b>body:</b> Make sure you have checked _all_ steps below.

### Jira

- [x] My PR addresses the following [Airflow Jira](https://issues.apache.org/jira/browse/AIRFLOW/) issues and references them in the PR title. 
  - https://issues.apache.org/jira/browse/AIRFLOW-2279

### Description

- [x] Here are some details about my PR, including screenshots of any UI changes:
There's an apparent need for a way to clear tasks across DAGs when there are dependencies set up by `ExternalTaskSensor`. This PR adds an `ExternalTaskMarker` to indicate such a need. When `ExternalTaskMarker` is used, the "Clear" action by the user will look for the external tasks recursively and clear them. There's no need to change the UI because the "Recursive" option in the Clear form fits this nicely. 

This is primarily addressing AIRFLOW-2279. However, there are various other users in the community using `ExternalTaskSensor` to set up cross-DAG dependencies. Many of them asked for this feature. 
https://issues.apache.org/jira/browse/AIRFLOW-2279
https://issues.apache.org/jira/browse/AIRFLOW-1414
https://issues.apache.org/jira/browse/AIRFLOW-1446
https://issues.apache.org/jira/browse/AIRFLOW-4005
https://www.mikulskibartosz.name/using-sensors-in-airflow/
https://forum.astronomer.io/t/dependencies-across-dags/332
https://geoffruddock.com/how-to-use-external-task-sensor-in-airflow/
https://stackoverflow.com/questions/38022323/how-to-set-dependencies-between-dags-in-airflow
https://issues.apache.org/jira/browse/AIRFLOW-1825

There was an inactive PR https://github.com/apache/airflow/pull/2444 trying to implement this feature. However it was abandoned. And I feel my approach is simpler and more flexible. And it does not need UI changes.

### Tests

- [x] My PR adds the following unit tests __OR__ does not need testing for this extremely good reason:
Tests added to test_external_task_sensor.py

### Commits

- [x] My commits all reference Jira issues in their subject lines, and I have squashed multiple commits if they address the same issue. In addition, my commits follow the guidelines from "[How to write a good git commit message](http://chris.beams.io/posts/git-commit/)":
  1. Subject is separated from body by a blank line
  1. Subject is limited to 50 characters (not including Jira issue reference)
  1. Subject does not end with a period
  1. Subject uses the imperative mood ("add", not "adding")
  1. Body wraps at 72 characters
  1. Body explains "what" and "why", not "how"

### Documentation

- [x] In case of new functionality, my PR adds documentation that describes how to use it.
  - All the public functions and the classes in the PR contain docstrings that explain what it does
  - If you implement backwards incompatible changes, please leave a note in the [Updating.md](https://github.com/apache/airflow/blob/master/UPDATING.md) so we can assign it to a appropriate release

                </div></div></li><li><div><div><b>title:</b> [AIRFLOW-2279] Clear tasks across DAGs if marked by ExternalTaskMarker
                </div><div><b>body:</b> Make sure you have checked _all_ steps below.

### Jira

- [x] My PR addresses the following [Airflow Jira](https://issues.apache.org/jira/browse/AIRFLOW/) issues and references them in the PR title. 
  - https://issues.apache.org/jira/browse/AIRFLOW-2279

### Description

- [x] Here are some details about my PR, including screenshots of any UI changes:
There's an apparent need for a way to clear tasks across DAGs when there are dependencies set up by `ExternalTaskSensor`. This PR adds an `ExternalTaskMarker` to indicate such a need. When `ExternalTaskMarker` is used, the "Clear" action by the user will look for the external tasks recursively and clear them. There's no need to change the UI because the "Recursive" option in the Clear form fits this nicely. 

This is primarily addressing AIRFLOW-2279. However, there are various other users in the community using `ExternalTaskSensor` to set up cross-DAG dependencies. Many of them asked for this feature. 
https://issues.apache.org/jira/browse/AIRFLOW-2279
https://issues.apache.org/jira/browse/AIRFLOW-1414
https://issues.apache.org/jira/browse/AIRFLOW-1446
https://issues.apache.org/jira/browse/AIRFLOW-4005
https://www.mikulskibartosz.name/using-sensors-in-airflow/
https://forum.astronomer.io/t/dependencies-across-dags/332
https://geoffruddock.com/how-to-use-external-task-sensor-in-airflow/
https://stackoverflow.com/questions/38022323/how-to-set-dependencies-between-dags-in-airflow
https://issues.apache.org/jira/browse/AIRFLOW-1825

There was an inactive PR https://github.com/apache/airflow/pull/2444 trying to implement this feature. However it was abandoned. And I feel my approach is simpler and more flexible. And it does not need UI changes.

### Tests

- [x] My PR adds the following unit tests __OR__ does not need testing for this extremely good reason:
Tests added to test_external_task_sensor.py

### Commits

- [x] My commits all reference Jira issues in their subject lines, and I have squashed multiple commits if they address the same issue. In addition, my commits follow the guidelines from "[How to write a good git commit message](http://chris.beams.io/posts/git-commit/)":
  1. Subject is separated from body by a blank line
  1. Subject is limited to 50 characters (not including Jira issue reference)
  1. Subject does not end with a period
  1. Subject uses the imperative mood ("add", not "adding")
  1. Body wraps at 72 characters
  1. Body explains "what" and "why", not "how"

### Documentation

- [x] In case of new functionality, my PR adds documentation that describes how to use it.
  - All the public functions and the classes in the PR contain docstrings that explain what it does
  - If you implement backwards incompatible changes, please leave a note in the [Updating.md](https://github.com/apache/airflow/blob/master/UPDATING.md) so we can assign it to a appropriate release

                </div><div><b>label:</b> code-design
                </div></div></li><li><div><div><b>title:</b> [AIRFLOW-2279] Clear tasks across DAGs if marked by ExternalTaskMarker
                </div><div><b>body:</b> Make sure you have checked _all_ steps below.

### Jira

- [x] My PR addresses the following [Airflow Jira](https://issues.apache.org/jira/browse/AIRFLOW/) issues and references them in the PR title. 
  - https://issues.apache.org/jira/browse/AIRFLOW-2279

### Description

- [x] Here are some details about my PR, including screenshots of any UI changes:
There's an apparent need for a way to clear tasks across DAGs when there are dependencies set up by `ExternalTaskSensor`. This PR adds an `ExternalTaskMarker` to indicate such a need. When `ExternalTaskMarker` is used, the "Clear" action by the user will look for the external tasks recursively and clear them. There's no need to change the UI because the "Recursive" option in the Clear form fits this nicely. 

This is primarily addressing AIRFLOW-2279. However, there are various other users in the community using `ExternalTaskSensor` to set up cross-DAG dependencies. Many of them asked for this feature. 
https://issues.apache.org/jira/browse/AIRFLOW-2279
https://issues.apache.org/jira/browse/AIRFLOW-1414
https://issues.apache.org/jira/browse/AIRFLOW-1446
https://issues.apache.org/jira/browse/AIRFLOW-4005
https://www.mikulskibartosz.name/using-sensors-in-airflow/
https://forum.astronomer.io/t/dependencies-across-dags/332
https://geoffruddock.com/how-to-use-external-task-sensor-in-airflow/
https://stackoverflow.com/questions/38022323/how-to-set-dependencies-between-dags-in-airflow
https://issues.apache.org/jira/browse/AIRFLOW-1825

There was an inactive PR https://github.com/apache/airflow/pull/2444 trying to implement this feature. However it was abandoned. And I feel my approach is simpler and more flexible. And it does not need UI changes.

### Tests

- [x] My PR adds the following unit tests __OR__ does not need testing for this extremely good reason:
Tests added to test_external_task_sensor.py

### Commits

- [x] My commits all reference Jira issues in their subject lines, and I have squashed multiple commits if they address the same issue. In addition, my commits follow the guidelines from "[How to write a good git commit message](http://chris.beams.io/posts/git-commit/)":
  1. Subject is separated from body by a blank line
  1. Subject is limited to 50 characters (not including Jira issue reference)
  1. Subject does not end with a period
  1. Subject uses the imperative mood ("add", not "adding")
  1. Body wraps at 72 characters
  1. Body explains "what" and "why", not "how"

### Documentation

- [x] In case of new functionality, my PR adds documentation that describes how to use it.
  - All the public functions and the classes in the PR contain docstrings that explain what it does
  - If you implement backwards incompatible changes, please leave a note in the [Updating.md](https://github.com/apache/airflow/blob/master/UPDATING.md) so we can assign it to a appropriate release

                </div></div></li><li><div><div><b>title:</b> [AIRFLOW-2279] Clear tasks across DAGs if marked by ExternalTaskMarker
                </div><div><b>body:</b> Make sure you have checked _all_ steps below.

### Jira

- [x] My PR addresses the following [Airflow Jira](https://issues.apache.org/jira/browse/AIRFLOW/) issues and references them in the PR title. 
  - https://issues.apache.org/jira/browse/AIRFLOW-2279

### Description

- [x] Here are some details about my PR, including screenshots of any UI changes:
There's an apparent need for a way to clear tasks across DAGs when there are dependencies set up by `ExternalTaskSensor`. This PR adds an `ExternalTaskMarker` to indicate such a need. When `ExternalTaskMarker` is used, the "Clear" action by the user will look for the external tasks recursively and clear them. There's no need to change the UI because the "Recursive" option in the Clear form fits this nicely. 

This is primarily addressing AIRFLOW-2279. However, there are various other users in the community using `ExternalTaskSensor` to set up cross-DAG dependencies. Many of them asked for this feature. 
https://issues.apache.org/jira/browse/AIRFLOW-2279
https://issues.apache.org/jira/browse/AIRFLOW-1414
https://issues.apache.org/jira/browse/AIRFLOW-1446
https://issues.apache.org/jira/browse/AIRFLOW-4005
https://www.mikulskibartosz.name/using-sensors-in-airflow/
https://forum.astronomer.io/t/dependencies-across-dags/332
https://geoffruddock.com/how-to-use-external-task-sensor-in-airflow/
https://stackoverflow.com/questions/38022323/how-to-set-dependencies-between-dags-in-airflow
https://issues.apache.org/jira/browse/AIRFLOW-1825

There was an inactive PR https://github.com/apache/airflow/pull/2444 trying to implement this feature. However it was abandoned. And I feel my approach is simpler and more flexible. And it does not need UI changes.

### Tests

- [x] My PR adds the following unit tests __OR__ does not need testing for this extremely good reason:
Tests added to test_external_task_sensor.py

### Commits

- [x] My commits all reference Jira issues in their subject lines, and I have squashed multiple commits if they address the same issue. In addition, my commits follow the guidelines from "[How to write a good git commit message](http://chris.beams.io/posts/git-commit/)":
  1. Subject is separated from body by a blank line
  1. Subject is limited to 50 characters (not including Jira issue reference)
  1. Subject does not end with a period
  1. Subject uses the imperative mood ("add", not "adding")
  1. Body wraps at 72 characters
  1. Body explains "what" and "why", not "how"

### Documentation

- [x] In case of new functionality, my PR adds documentation that describes how to use it.
  - All the public functions and the classes in the PR contain docstrings that explain what it does
  - If you implement backwards incompatible changes, please leave a note in the [Updating.md](https://github.com/apache/airflow/blob/master/UPDATING.md) so we can assign it to a appropriate release

                </div><div><b>label:</b> code-design
                </div></div></li><li><div><div><b>title:</b> [AIRFLOW-2279] Clear tasks across DAGs if marked by ExternalTaskMarker
                </div><div><b>body:</b> Make sure you have checked _all_ steps below.

### Jira

- [x] My PR addresses the following [Airflow Jira](https://issues.apache.org/jira/browse/AIRFLOW/) issues and references them in the PR title. 
  - https://issues.apache.org/jira/browse/AIRFLOW-2279

### Description

- [x] Here are some details about my PR, including screenshots of any UI changes:
There's an apparent need for a way to clear tasks across DAGs when there are dependencies set up by `ExternalTaskSensor`. This PR adds an `ExternalTaskMarker` to indicate such a need. When `ExternalTaskMarker` is used, the "Clear" action by the user will look for the external tasks recursively and clear them. There's no need to change the UI because the "Recursive" option in the Clear form fits this nicely. 

This is primarily addressing AIRFLOW-2279. However, there are various other users in the community using `ExternalTaskSensor` to set up cross-DAG dependencies. Many of them asked for this feature. 
https://issues.apache.org/jira/browse/AIRFLOW-2279
https://issues.apache.org/jira/browse/AIRFLOW-1414
https://issues.apache.org/jira/browse/AIRFLOW-1446
https://issues.apache.org/jira/browse/AIRFLOW-4005
https://www.mikulskibartosz.name/using-sensors-in-airflow/
https://forum.astronomer.io/t/dependencies-across-dags/332
https://geoffruddock.com/how-to-use-external-task-sensor-in-airflow/
https://stackoverflow.com/questions/38022323/how-to-set-dependencies-between-dags-in-airflow
https://issues.apache.org/jira/browse/AIRFLOW-1825

There was an inactive PR https://github.com/apache/airflow/pull/2444 trying to implement this feature. However it was abandoned. And I feel my approach is simpler and more flexible. And it does not need UI changes.

### Tests

- [x] My PR adds the following unit tests __OR__ does not need testing for this extremely good reason:
Tests added to test_external_task_sensor.py

### Commits

- [x] My commits all reference Jira issues in their subject lines, and I have squashed multiple commits if they address the same issue. In addition, my commits follow the guidelines from "[How to write a good git commit message](http://chris.beams.io/posts/git-commit/)":
  1. Subject is separated from body by a blank line
  1. Subject is limited to 50 characters (not including Jira issue reference)
  1. Subject does not end with a period
  1. Subject uses the imperative mood ("add", not "adding")
  1. Body wraps at 72 characters
  1. Body explains "what" and "why", not "how"

### Documentation

- [x] In case of new functionality, my PR adds documentation that describes how to use it.
  - All the public functions and the classes in the PR contain docstrings that explain what it does
  - If you implement backwards incompatible changes, please leave a note in the [Updating.md](https://github.com/apache/airflow/blob/master/UPDATING.md) so we can assign it to a appropriate release

                </div></div></li><li><div><div><b>title:</b> [AIRFLOW-2279] Clear tasks across DAGs if marked by ExternalTaskMarker
                </div><div><b>body:</b> Make sure you have checked _all_ steps below.

### Jira

- [x] My PR addresses the following [Airflow Jira](https://issues.apache.org/jira/browse/AIRFLOW/) issues and references them in the PR title. 
  - https://issues.apache.org/jira/browse/AIRFLOW-2279

### Description

- [x] Here are some details about my PR, including screenshots of any UI changes:
There's an apparent need for a way to clear tasks across DAGs when there are dependencies set up by `ExternalTaskSensor`. This PR adds an `ExternalTaskMarker` to indicate such a need. When `ExternalTaskMarker` is used, the "Clear" action by the user will look for the external tasks recursively and clear them. There's no need to change the UI because the "Recursive" option in the Clear form fits this nicely. 

This is primarily addressing AIRFLOW-2279. However, there are various other users in the community using `ExternalTaskSensor` to set up cross-DAG dependencies. Many of them asked for this feature. 
https://issues.apache.org/jira/browse/AIRFLOW-2279
https://issues.apache.org/jira/browse/AIRFLOW-1414
https://issues.apache.org/jira/browse/AIRFLOW-1446
https://issues.apache.org/jira/browse/AIRFLOW-4005
https://www.mikulskibartosz.name/using-sensors-in-airflow/
https://forum.astronomer.io/t/dependencies-across-dags/332
https://geoffruddock.com/how-to-use-external-task-sensor-in-airflow/
https://stackoverflow.com/questions/38022323/how-to-set-dependencies-between-dags-in-airflow
https://issues.apache.org/jira/browse/AIRFLOW-1825

There was an inactive PR https://github.com/apache/airflow/pull/2444 trying to implement this feature. However it was abandoned. And I feel my approach is simpler and more flexible. And it does not need UI changes.

### Tests

- [x] My PR adds the following unit tests __OR__ does not need testing for this extremely good reason:
Tests added to test_external_task_sensor.py

### Commits

- [x] My commits all reference Jira issues in their subject lines, and I have squashed multiple commits if they address the same issue. In addition, my commits follow the guidelines from "[How to write a good git commit message](http://chris.beams.io/posts/git-commit/)":
  1. Subject is separated from body by a blank line
  1. Subject is limited to 50 characters (not including Jira issue reference)
  1. Subject does not end with a period
  1. Subject uses the imperative mood ("add", not "adding")
  1. Body wraps at 72 characters
  1. Body explains "what" and "why", not "how"

### Documentation

- [x] In case of new functionality, my PR adds documentation that describes how to use it.
  - All the public functions and the classes in the PR contain docstrings that explain what it does
  - If you implement backwards incompatible changes, please leave a note in the [Updating.md](https://github.com/apache/airflow/blob/master/UPDATING.md) so we can assign it to a appropriate release

                </div></div></li><li><div><div><b>title:</b> [AIRFLOW-2279] Clear tasks across DAGs if marked by ExternalTaskMarker
                </div><div><b>body:</b> Make sure you have checked _all_ steps below.

### Jira

- [x] My PR addresses the following [Airflow Jira](https://issues.apache.org/jira/browse/AIRFLOW/) issues and references them in the PR title. 
  - https://issues.apache.org/jira/browse/AIRFLOW-2279

### Description

- [x] Here are some details about my PR, including screenshots of any UI changes:
There's an apparent need for a way to clear tasks across DAGs when there are dependencies set up by `ExternalTaskSensor`. This PR adds an `ExternalTaskMarker` to indicate such a need. When `ExternalTaskMarker` is used, the "Clear" action by the user will look for the external tasks recursively and clear them. There's no need to change the UI because the "Recursive" option in the Clear form fits this nicely. 

This is primarily addressing AIRFLOW-2279. However, there are various other users in the community using `ExternalTaskSensor` to set up cross-DAG dependencies. Many of them asked for this feature. 
https://issues.apache.org/jira/browse/AIRFLOW-2279
https://issues.apache.org/jira/browse/AIRFLOW-1414
https://issues.apache.org/jira/browse/AIRFLOW-1446
https://issues.apache.org/jira/browse/AIRFLOW-4005
https://www.mikulskibartosz.name/using-sensors-in-airflow/
https://forum.astronomer.io/t/dependencies-across-dags/332
https://geoffruddock.com/how-to-use-external-task-sensor-in-airflow/
https://stackoverflow.com/questions/38022323/how-to-set-dependencies-between-dags-in-airflow
https://issues.apache.org/jira/browse/AIRFLOW-1825

There was an inactive PR https://github.com/apache/airflow/pull/2444 trying to implement this feature. However it was abandoned. And I feel my approach is simpler and more flexible. And it does not need UI changes.

### Tests

- [x] My PR adds the following unit tests __OR__ does not need testing for this extremely good reason:
Tests added to test_external_task_sensor.py

### Commits

- [x] My commits all reference Jira issues in their subject lines, and I have squashed multiple commits if they address the same issue. In addition, my commits follow the guidelines from "[How to write a good git commit message](http://chris.beams.io/posts/git-commit/)":
  1. Subject is separated from body by a blank line
  1. Subject is limited to 50 characters (not including Jira issue reference)
  1. Subject does not end with a period
  1. Subject uses the imperative mood ("add", not "adding")
  1. Body wraps at 72 characters
  1. Body explains "what" and "why", not "how"

### Documentation

- [x] In case of new functionality, my PR adds documentation that describes how to use it.
  - All the public functions and the classes in the PR contain docstrings that explain what it does
  - If you implement backwards incompatible changes, please leave a note in the [Updating.md](https://github.com/apache/airflow/blob/master/UPDATING.md) so we can assign it to a appropriate release

                </div><div><b>label:</b> code-design
                </div></div></li><li><div><div><b>title:</b> [AIRFLOW-2279] Clear tasks across DAGs if marked by ExternalTaskMarker
                </div><div><b>body:</b> Make sure you have checked _all_ steps below.

### Jira

- [x] My PR addresses the following [Airflow Jira](https://issues.apache.org/jira/browse/AIRFLOW/) issues and references them in the PR title. 
  - https://issues.apache.org/jira/browse/AIRFLOW-2279

### Description

- [x] Here are some details about my PR, including screenshots of any UI changes:
There's an apparent need for a way to clear tasks across DAGs when there are dependencies set up by `ExternalTaskSensor`. This PR adds an `ExternalTaskMarker` to indicate such a need. When `ExternalTaskMarker` is used, the "Clear" action by the user will look for the external tasks recursively and clear them. There's no need to change the UI because the "Recursive" option in the Clear form fits this nicely. 

This is primarily addressing AIRFLOW-2279. However, there are various other users in the community using `ExternalTaskSensor` to set up cross-DAG dependencies. Many of them asked for this feature. 
https://issues.apache.org/jira/browse/AIRFLOW-2279
https://issues.apache.org/jira/browse/AIRFLOW-1414
https://issues.apache.org/jira/browse/AIRFLOW-1446
https://issues.apache.org/jira/browse/AIRFLOW-4005
https://www.mikulskibartosz.name/using-sensors-in-airflow/
https://forum.astronomer.io/t/dependencies-across-dags/332
https://geoffruddock.com/how-to-use-external-task-sensor-in-airflow/
https://stackoverflow.com/questions/38022323/how-to-set-dependencies-between-dags-in-airflow
https://issues.apache.org/jira/browse/AIRFLOW-1825

There was an inactive PR https://github.com/apache/airflow/pull/2444 trying to implement this feature. However it was abandoned. And I feel my approach is simpler and more flexible. And it does not need UI changes.

### Tests

- [x] My PR adds the following unit tests __OR__ does not need testing for this extremely good reason:
Tests added to test_external_task_sensor.py

### Commits

- [x] My commits all reference Jira issues in their subject lines, and I have squashed multiple commits if they address the same issue. In addition, my commits follow the guidelines from "[How to write a good git commit message](http://chris.beams.io/posts/git-commit/)":
  1. Subject is separated from body by a blank line
  1. Subject is limited to 50 characters (not including Jira issue reference)
  1. Subject does not end with a period
  1. Subject uses the imperative mood ("add", not "adding")
  1. Body wraps at 72 characters
  1. Body explains "what" and "why", not "how"

### Documentation

- [x] In case of new functionality, my PR adds documentation that describes how to use it.
  - All the public functions and the classes in the PR contain docstrings that explain what it does
  - If you implement backwards incompatible changes, please leave a note in the [Updating.md](https://github.com/apache/airflow/blob/master/UPDATING.md) so we can assign it to a appropriate release

                </div></div></li><li><div><div><b>title:</b> [AIRFLOW-2279] Clear tasks across DAGs if marked by ExternalTaskMarker
                </div><div><b>body:</b> Make sure you have checked _all_ steps below.

### Jira

- [x] My PR addresses the following [Airflow Jira](https://issues.apache.org/jira/browse/AIRFLOW/) issues and references them in the PR title. 
  - https://issues.apache.org/jira/browse/AIRFLOW-2279

### Description

- [x] Here are some details about my PR, including screenshots of any UI changes:
There's an apparent need for a way to clear tasks across DAGs when there are dependencies set up by `ExternalTaskSensor`. This PR adds an `ExternalTaskMarker` to indicate such a need. When `ExternalTaskMarker` is used, the "Clear" action by the user will look for the external tasks recursively and clear them. There's no need to change the UI because the "Recursive" option in the Clear form fits this nicely. 

This is primarily addressing AIRFLOW-2279. However, there are various other users in the community using `ExternalTaskSensor` to set up cross-DAG dependencies. Many of them asked for this feature. 
https://issues.apache.org/jira/browse/AIRFLOW-2279
https://issues.apache.org/jira/browse/AIRFLOW-1414
https://issues.apache.org/jira/browse/AIRFLOW-1446
https://issues.apache.org/jira/browse/AIRFLOW-4005
https://www.mikulskibartosz.name/using-sensors-in-airflow/
https://forum.astronomer.io/t/dependencies-across-dags/332
https://geoffruddock.com/how-to-use-external-task-sensor-in-airflow/
https://stackoverflow.com/questions/38022323/how-to-set-dependencies-between-dags-in-airflow
https://issues.apache.org/jira/browse/AIRFLOW-1825

There was an inactive PR https://github.com/apache/airflow/pull/2444 trying to implement this feature. However it was abandoned. And I feel my approach is simpler and more flexible. And it does not need UI changes.

### Tests

- [x] My PR adds the following unit tests __OR__ does not need testing for this extremely good reason:
Tests added to test_external_task_sensor.py

### Commits

- [x] My commits all reference Jira issues in their subject lines, and I have squashed multiple commits if they address the same issue. In addition, my commits follow the guidelines from "[How to write a good git commit message](http://chris.beams.io/posts/git-commit/)":
  1. Subject is separated from body by a blank line
  1. Subject is limited to 50 characters (not including Jira issue reference)
  1. Subject does not end with a period
  1. Subject uses the imperative mood ("add", not "adding")
  1. Body wraps at 72 characters
  1. Body explains "what" and "why", not "how"

### Documentation

- [x] In case of new functionality, my PR adds documentation that describes how to use it.
  - All the public functions and the classes in the PR contain docstrings that explain what it does
  - If you implement backwards incompatible changes, please leave a note in the [Updating.md](https://github.com/apache/airflow/blob/master/UPDATING.md) so we can assign it to a appropriate release

                </div></div></li><li><div><div><b>title:</b> [AIRFLOW-2279] Clear tasks across DAGs if marked by ExternalTaskMarker
                </div><div><b>body:</b> Make sure you have checked _all_ steps below.

### Jira

- [x] My PR addresses the following [Airflow Jira](https://issues.apache.org/jira/browse/AIRFLOW/) issues and references them in the PR title. 
  - https://issues.apache.org/jira/browse/AIRFLOW-2279

### Description

- [x] Here are some details about my PR, including screenshots of any UI changes:
There's an apparent need for a way to clear tasks across DAGs when there are dependencies set up by `ExternalTaskSensor`. This PR adds an `ExternalTaskMarker` to indicate such a need. When `ExternalTaskMarker` is used, the "Clear" action by the user will look for the external tasks recursively and clear them. There's no need to change the UI because the "Recursive" option in the Clear form fits this nicely. 

This is primarily addressing AIRFLOW-2279. However, there are various other users in the community using `ExternalTaskSensor` to set up cross-DAG dependencies. Many of them asked for this feature. 
https://issues.apache.org/jira/browse/AIRFLOW-2279
https://issues.apache.org/jira/browse/AIRFLOW-1414
https://issues.apache.org/jira/browse/AIRFLOW-1446
https://issues.apache.org/jira/browse/AIRFLOW-4005
https://www.mikulskibartosz.name/using-sensors-in-airflow/
https://forum.astronomer.io/t/dependencies-across-dags/332
https://geoffruddock.com/how-to-use-external-task-sensor-in-airflow/
https://stackoverflow.com/questions/38022323/how-to-set-dependencies-between-dags-in-airflow
https://issues.apache.org/jira/browse/AIRFLOW-1825

There was an inactive PR https://github.com/apache/airflow/pull/2444 trying to implement this feature. However it was abandoned. And I feel my approach is simpler and more flexible. And it does not need UI changes.

### Tests

- [x] My PR adds the following unit tests __OR__ does not need testing for this extremely good reason:
Tests added to test_external_task_sensor.py

### Commits

- [x] My commits all reference Jira issues in their subject lines, and I have squashed multiple commits if they address the same issue. In addition, my commits follow the guidelines from "[How to write a good git commit message](http://chris.beams.io/posts/git-commit/)":
  1. Subject is separated from body by a blank line
  1. Subject is limited to 50 characters (not including Jira issue reference)
  1. Subject does not end with a period
  1. Subject uses the imperative mood ("add", not "adding")
  1. Body wraps at 72 characters
  1. Body explains "what" and "why", not "how"

### Documentation

- [x] In case of new functionality, my PR adds documentation that describes how to use it.
  - All the public functions and the classes in the PR contain docstrings that explain what it does
  - If you implement backwards incompatible changes, please leave a note in the [Updating.md](https://github.com/apache/airflow/blob/master/UPDATING.md) so we can assign it to a appropriate release

                </div></div></li><li><div><div><b>title:</b> [AIRFLOW-2279] Clear tasks across DAGs if marked by ExternalTaskMarker
                </div><div><b>body:</b> Make sure you have checked _all_ steps below.

### Jira

- [x] My PR addresses the following [Airflow Jira](https://issues.apache.org/jira/browse/AIRFLOW/) issues and references them in the PR title. 
  - https://issues.apache.org/jira/browse/AIRFLOW-2279

### Description

- [x] Here are some details about my PR, including screenshots of any UI changes:
There's an apparent need for a way to clear tasks across DAGs when there are dependencies set up by `ExternalTaskSensor`. This PR adds an `ExternalTaskMarker` to indicate such a need. When `ExternalTaskMarker` is used, the "Clear" action by the user will look for the external tasks recursively and clear them. There's no need to change the UI because the "Recursive" option in the Clear form fits this nicely. 

This is primarily addressing AIRFLOW-2279. However, there are various other users in the community using `ExternalTaskSensor` to set up cross-DAG dependencies. Many of them asked for this feature. 
https://issues.apache.org/jira/browse/AIRFLOW-2279
https://issues.apache.org/jira/browse/AIRFLOW-1414
https://issues.apache.org/jira/browse/AIRFLOW-1446
https://issues.apache.org/jira/browse/AIRFLOW-4005
https://www.mikulskibartosz.name/using-sensors-in-airflow/
https://forum.astronomer.io/t/dependencies-across-dags/332
https://geoffruddock.com/how-to-use-external-task-sensor-in-airflow/
https://stackoverflow.com/questions/38022323/how-to-set-dependencies-between-dags-in-airflow
https://issues.apache.org/jira/browse/AIRFLOW-1825

There was an inactive PR https://github.com/apache/airflow/pull/2444 trying to implement this feature. However it was abandoned. And I feel my approach is simpler and more flexible. And it does not need UI changes.

### Tests

- [x] My PR adds the following unit tests __OR__ does not need testing for this extremely good reason:
Tests added to test_external_task_sensor.py

### Commits

- [x] My commits all reference Jira issues in their subject lines, and I have squashed multiple commits if they address the same issue. In addition, my commits follow the guidelines from "[How to write a good git commit message](http://chris.beams.io/posts/git-commit/)":
  1. Subject is separated from body by a blank line
  1. Subject is limited to 50 characters (not including Jira issue reference)
  1. Subject does not end with a period
  1. Subject uses the imperative mood ("add", not "adding")
  1. Body wraps at 72 characters
  1. Body explains "what" and "why", not "how"

### Documentation

- [x] In case of new functionality, my PR adds documentation that describes how to use it.
  - All the public functions and the classes in the PR contain docstrings that explain what it does
  - If you implement backwards incompatible changes, please leave a note in the [Updating.md](https://github.com/apache/airflow/blob/master/UPDATING.md) so we can assign it to a appropriate release

                </div><div><b>label:</b> code-design
                </div></div></li><li><div><div><b>title:</b> [AIRFLOW-2279] Clear tasks across DAGs if marked by ExternalTaskMarker
                </div><div><b>body:</b> Make sure you have checked _all_ steps below.

### Jira

- [x] My PR addresses the following [Airflow Jira](https://issues.apache.org/jira/browse/AIRFLOW/) issues and references them in the PR title. 
  - https://issues.apache.org/jira/browse/AIRFLOW-2279

### Description

- [x] Here are some details about my PR, including screenshots of any UI changes:
There's an apparent need for a way to clear tasks across DAGs when there are dependencies set up by `ExternalTaskSensor`. This PR adds an `ExternalTaskMarker` to indicate such a need. When `ExternalTaskMarker` is used, the "Clear" action by the user will look for the external tasks recursively and clear them. There's no need to change the UI because the "Recursive" option in the Clear form fits this nicely. 

This is primarily addressing AIRFLOW-2279. However, there are various other users in the community using `ExternalTaskSensor` to set up cross-DAG dependencies. Many of them asked for this feature. 
https://issues.apache.org/jira/browse/AIRFLOW-2279
https://issues.apache.org/jira/browse/AIRFLOW-1414
https://issues.apache.org/jira/browse/AIRFLOW-1446
https://issues.apache.org/jira/browse/AIRFLOW-4005
https://www.mikulskibartosz.name/using-sensors-in-airflow/
https://forum.astronomer.io/t/dependencies-across-dags/332
https://geoffruddock.com/how-to-use-external-task-sensor-in-airflow/
https://stackoverflow.com/questions/38022323/how-to-set-dependencies-between-dags-in-airflow
https://issues.apache.org/jira/browse/AIRFLOW-1825

There was an inactive PR https://github.com/apache/airflow/pull/2444 trying to implement this feature. However it was abandoned. And I feel my approach is simpler and more flexible. And it does not need UI changes.

### Tests

- [x] My PR adds the following unit tests __OR__ does not need testing for this extremely good reason:
Tests added to test_external_task_sensor.py

### Commits

- [x] My commits all reference Jira issues in their subject lines, and I have squashed multiple commits if they address the same issue. In addition, my commits follow the guidelines from "[How to write a good git commit message](http://chris.beams.io/posts/git-commit/)":
  1. Subject is separated from body by a blank line
  1. Subject is limited to 50 characters (not including Jira issue reference)
  1. Subject does not end with a period
  1. Subject uses the imperative mood ("add", not "adding")
  1. Body wraps at 72 characters
  1. Body explains "what" and "why", not "how"

### Documentation

- [x] In case of new functionality, my PR adds documentation that describes how to use it.
  - All the public functions and the classes in the PR contain docstrings that explain what it does
  - If you implement backwards incompatible changes, please leave a note in the [Updating.md](https://github.com/apache/airflow/blob/master/UPDATING.md) so we can assign it to a appropriate release

                </div></div></li><li><div><div><b>title:</b> [AIRFLOW-2279] Clear tasks across DAGs if marked by ExternalTaskMarker
                </div><div><b>body:</b> Make sure you have checked _all_ steps below.

### Jira

- [x] My PR addresses the following [Airflow Jira](https://issues.apache.org/jira/browse/AIRFLOW/) issues and references them in the PR title. 
  - https://issues.apache.org/jira/browse/AIRFLOW-2279

### Description

- [x] Here are some details about my PR, including screenshots of any UI changes:
There's an apparent need for a way to clear tasks across DAGs when there are dependencies set up by `ExternalTaskSensor`. This PR adds an `ExternalTaskMarker` to indicate such a need. When `ExternalTaskMarker` is used, the "Clear" action by the user will look for the external tasks recursively and clear them. There's no need to change the UI because the "Recursive" option in the Clear form fits this nicely. 

This is primarily addressing AIRFLOW-2279. However, there are various other users in the community using `ExternalTaskSensor` to set up cross-DAG dependencies. Many of them asked for this feature. 
https://issues.apache.org/jira/browse/AIRFLOW-2279
https://issues.apache.org/jira/browse/AIRFLOW-1414
https://issues.apache.org/jira/browse/AIRFLOW-1446
https://issues.apache.org/jira/browse/AIRFLOW-4005
https://www.mikulskibartosz.name/using-sensors-in-airflow/
https://forum.astronomer.io/t/dependencies-across-dags/332
https://geoffruddock.com/how-to-use-external-task-sensor-in-airflow/
https://stackoverflow.com/questions/38022323/how-to-set-dependencies-between-dags-in-airflow
https://issues.apache.org/jira/browse/AIRFLOW-1825

There was an inactive PR https://github.com/apache/airflow/pull/2444 trying to implement this feature. However it was abandoned. And I feel my approach is simpler and more flexible. And it does not need UI changes.

### Tests

- [x] My PR adds the following unit tests __OR__ does not need testing for this extremely good reason:
Tests added to test_external_task_sensor.py

### Commits

- [x] My commits all reference Jira issues in their subject lines, and I have squashed multiple commits if they address the same issue. In addition, my commits follow the guidelines from "[How to write a good git commit message](http://chris.beams.io/posts/git-commit/)":
  1. Subject is separated from body by a blank line
  1. Subject is limited to 50 characters (not including Jira issue reference)
  1. Subject does not end with a period
  1. Subject uses the imperative mood ("add", not "adding")
  1. Body wraps at 72 characters
  1. Body explains "what" and "why", not "how"

### Documentation

- [x] In case of new functionality, my PR adds documentation that describes how to use it.
  - All the public functions and the classes in the PR contain docstrings that explain what it does
  - If you implement backwards incompatible changes, please leave a note in the [Updating.md](https://github.com/apache/airflow/blob/master/UPDATING.md) so we can assign it to a appropriate release

                </div></div></li><li><div><div><b>title:</b> [AIRFLOW-2279] Clear tasks across DAGs if marked by ExternalTaskMarker
                </div><div><b>body:</b> Make sure you have checked _all_ steps below.

### Jira

- [x] My PR addresses the following [Airflow Jira](https://issues.apache.org/jira/browse/AIRFLOW/) issues and references them in the PR title. 
  - https://issues.apache.org/jira/browse/AIRFLOW-2279

### Description

- [x] Here are some details about my PR, including screenshots of any UI changes:
There's an apparent need for a way to clear tasks across DAGs when there are dependencies set up by `ExternalTaskSensor`. This PR adds an `ExternalTaskMarker` to indicate such a need. When `ExternalTaskMarker` is used, the "Clear" action by the user will look for the external tasks recursively and clear them. There's no need to change the UI because the "Recursive" option in the Clear form fits this nicely. 

This is primarily addressing AIRFLOW-2279. However, there are various other users in the community using `ExternalTaskSensor` to set up cross-DAG dependencies. Many of them asked for this feature. 
https://issues.apache.org/jira/browse/AIRFLOW-2279
https://issues.apache.org/jira/browse/AIRFLOW-1414
https://issues.apache.org/jira/browse/AIRFLOW-1446
https://issues.apache.org/jira/browse/AIRFLOW-4005
https://www.mikulskibartosz.name/using-sensors-in-airflow/
https://forum.astronomer.io/t/dependencies-across-dags/332
https://geoffruddock.com/how-to-use-external-task-sensor-in-airflow/
https://stackoverflow.com/questions/38022323/how-to-set-dependencies-between-dags-in-airflow
https://issues.apache.org/jira/browse/AIRFLOW-1825

There was an inactive PR https://github.com/apache/airflow/pull/2444 trying to implement this feature. However it was abandoned. And I feel my approach is simpler and more flexible. And it does not need UI changes.

### Tests

- [x] My PR adds the following unit tests __OR__ does not need testing for this extremely good reason:
Tests added to test_external_task_sensor.py

### Commits

- [x] My commits all reference Jira issues in their subject lines, and I have squashed multiple commits if they address the same issue. In addition, my commits follow the guidelines from "[How to write a good git commit message](http://chris.beams.io/posts/git-commit/)":
  1. Subject is separated from body by a blank line
  1. Subject is limited to 50 characters (not including Jira issue reference)
  1. Subject does not end with a period
  1. Subject uses the imperative mood ("add", not "adding")
  1. Body wraps at 72 characters
  1. Body explains "what" and "why", not "how"

### Documentation

- [x] In case of new functionality, my PR adds documentation that describes how to use it.
  - All the public functions and the classes in the PR contain docstrings that explain what it does
  - If you implement backwards incompatible changes, please leave a note in the [Updating.md](https://github.com/apache/airflow/blob/master/UPDATING.md) so we can assign it to a appropriate release

                </div></div></li><li><div><div><b>title:</b> [AIRFLOW-2279] Clear tasks across DAGs if marked by ExternalTaskMarker
                </div><div><b>body:</b> Make sure you have checked _all_ steps below.

### Jira

- [x] My PR addresses the following [Airflow Jira](https://issues.apache.org/jira/browse/AIRFLOW/) issues and references them in the PR title. 
  - https://issues.apache.org/jira/browse/AIRFLOW-2279

### Description

- [x] Here are some details about my PR, including screenshots of any UI changes:
There's an apparent need for a way to clear tasks across DAGs when there are dependencies set up by `ExternalTaskSensor`. This PR adds an `ExternalTaskMarker` to indicate such a need. When `ExternalTaskMarker` is used, the "Clear" action by the user will look for the external tasks recursively and clear them. There's no need to change the UI because the "Recursive" option in the Clear form fits this nicely. 

This is primarily addressing AIRFLOW-2279. However, there are various other users in the community using `ExternalTaskSensor` to set up cross-DAG dependencies. Many of them asked for this feature. 
https://issues.apache.org/jira/browse/AIRFLOW-2279
https://issues.apache.org/jira/browse/AIRFLOW-1414
https://issues.apache.org/jira/browse/AIRFLOW-1446
https://issues.apache.org/jira/browse/AIRFLOW-4005
https://www.mikulskibartosz.name/using-sensors-in-airflow/
https://forum.astronomer.io/t/dependencies-across-dags/332
https://geoffruddock.com/how-to-use-external-task-sensor-in-airflow/
https://stackoverflow.com/questions/38022323/how-to-set-dependencies-between-dags-in-airflow
https://issues.apache.org/jira/browse/AIRFLOW-1825

There was an inactive PR https://github.com/apache/airflow/pull/2444 trying to implement this feature. However it was abandoned. And I feel my approach is simpler and more flexible. And it does not need UI changes.

### Tests

- [x] My PR adds the following unit tests __OR__ does not need testing for this extremely good reason:
Tests added to test_external_task_sensor.py

### Commits

- [x] My commits all reference Jira issues in their subject lines, and I have squashed multiple commits if they address the same issue. In addition, my commits follow the guidelines from "[How to write a good git commit message](http://chris.beams.io/posts/git-commit/)":
  1. Subject is separated from body by a blank line
  1. Subject is limited to 50 characters (not including Jira issue reference)
  1. Subject does not end with a period
  1. Subject uses the imperative mood ("add", not "adding")
  1. Body wraps at 72 characters
  1. Body explains "what" and "why", not "how"

### Documentation

- [x] In case of new functionality, my PR adds documentation that describes how to use it.
  - All the public functions and the classes in the PR contain docstrings that explain what it does
  - If you implement backwards incompatible changes, please leave a note in the [Updating.md](https://github.com/apache/airflow/blob/master/UPDATING.md) so we can assign it to a appropriate release

                </div><div><b>label:</b> code-design
                </div></div></li><li><div><div><b>title:</b> [AIRFLOW-2279] Clear tasks across DAGs if marked by ExternalTaskMarker
                </div><div><b>body:</b> Make sure you have checked _all_ steps below.

### Jira

- [x] My PR addresses the following [Airflow Jira](https://issues.apache.org/jira/browse/AIRFLOW/) issues and references them in the PR title. 
  - https://issues.apache.org/jira/browse/AIRFLOW-2279

### Description

- [x] Here are some details about my PR, including screenshots of any UI changes:
There's an apparent need for a way to clear tasks across DAGs when there are dependencies set up by `ExternalTaskSensor`. This PR adds an `ExternalTaskMarker` to indicate such a need. When `ExternalTaskMarker` is used, the "Clear" action by the user will look for the external tasks recursively and clear them. There's no need to change the UI because the "Recursive" option in the Clear form fits this nicely. 

This is primarily addressing AIRFLOW-2279. However, there are various other users in the community using `ExternalTaskSensor` to set up cross-DAG dependencies. Many of them asked for this feature. 
https://issues.apache.org/jira/browse/AIRFLOW-2279
https://issues.apache.org/jira/browse/AIRFLOW-1414
https://issues.apache.org/jira/browse/AIRFLOW-1446
https://issues.apache.org/jira/browse/AIRFLOW-4005
https://www.mikulskibartosz.name/using-sensors-in-airflow/
https://forum.astronomer.io/t/dependencies-across-dags/332
https://geoffruddock.com/how-to-use-external-task-sensor-in-airflow/
https://stackoverflow.com/questions/38022323/how-to-set-dependencies-between-dags-in-airflow
https://issues.apache.org/jira/browse/AIRFLOW-1825

There was an inactive PR https://github.com/apache/airflow/pull/2444 trying to implement this feature. However it was abandoned. And I feel my approach is simpler and more flexible. And it does not need UI changes.

### Tests

- [x] My PR adds the following unit tests __OR__ does not need testing for this extremely good reason:
Tests added to test_external_task_sensor.py

### Commits

- [x] My commits all reference Jira issues in their subject lines, and I have squashed multiple commits if they address the same issue. In addition, my commits follow the guidelines from "[How to write a good git commit message](http://chris.beams.io/posts/git-commit/)":
  1. Subject is separated from body by a blank line
  1. Subject is limited to 50 characters (not including Jira issue reference)
  1. Subject does not end with a period
  1. Subject uses the imperative mood ("add", not "adding")
  1. Body wraps at 72 characters
  1. Body explains "what" and "why", not "how"

### Documentation

- [x] In case of new functionality, my PR adds documentation that describes how to use it.
  - All the public functions and the classes in the PR contain docstrings that explain what it does
  - If you implement backwards incompatible changes, please leave a note in the [Updating.md](https://github.com/apache/airflow/blob/master/UPDATING.md) so we can assign it to a appropriate release

                </div></div></li></ol></div><div><b>github_pulls_comments:</b> <ol><li><div>
                @yuqian90 there is a problem with the order of your imports the test is failing due to it
              </div></li><li><div>
                &gt; @yuqian90 there is a problem with the order of your imports the test is failing due to it

Thanks @OmerJog. sorry i missed that static check in my own testing. I'll fix the import order in a week's time after my vacation. In the meantime, if there are any comments on the idea or the code changes, pls let me know, I'll address those too.
              </div></li><li><div>
                # [Codecov](https://codecov.io/gh/apache/airflow/pull/6633?src=pr&amp;el=h1) Report
&gt; Merging [#6633](https://codecov.io/gh/apache/airflow/pull/6633?src=pr&amp;el=desc) into [master](https://codecov.io/gh/apache/airflow/commit/fe20ef6147f157b7c963ad46e13aff7c16458632?src=pr&amp;el=desc) will **increase** coverage by `&lt;.01%`.
&gt; The diff coverage is `85.96%`.

[![Impacted file tree graph](https://codecov.io/gh/apache/airflow/pull/6633/graphs/tree.svg?width=650&amp;token=WdLKlKHOAU&amp;height=150&amp;src=pr)](https://codecov.io/gh/apache/airflow/pull/6633?src=pr&amp;el=tree)

```diff
@@            Coverage Diff             @@
##           master    #6633      +/-   ##
==========================================
+ Coverage   85.15%   85.15%   +&lt;.01%     
==========================================
  Files         680      681       +1     
  Lines       38824    38880      +56     
==========================================
+ Hits        33061    33110      +49     
- Misses       5763     5770       +7
```


| [Impacted Files](https://codecov.io/gh/apache/airflow/pull/6633?src=pr&amp;el=tree) | Coverage  | |
|---|---|---|
| [...w/example\_dags/example\_external\_task\_marker\_dag.py](https://codecov.io/gh/apache/airflow/pull/6633/diff?src=pr&amp;el=tree#diff-YWlyZmxvdy9leGFtcGxlX2RhZ3MvZXhhbXBsZV9leHRlcm5hbF90YXNrX21hcmtlcl9kYWcucHk=) | `100% &lt;100%&gt; ()` | |
| [airflow/www/views.py](https://codecov.io/gh/apache/airflow/pull/6633/diff?src=pr&amp;el=tree#diff-YWlyZmxvdy93d3cvdmlld3MucHk=) | `75.88% &lt;50%&gt; (-0.13%)` | :arrow_down: |
| [airflow/sensors/external\_task\_sensor.py](https://codecov.io/gh/apache/airflow/pull/6633/diff?src=pr&amp;el=tree#diff-YWlyZmxvdy9zZW5zb3JzL2V4dGVybmFsX3Rhc2tfc2Vuc29yLnB5) | `85.52% &lt;84.21%&gt; (-0.44%)` | :arrow_down: |
| [airflow/models/dag.py](https://codecov.io/gh/apache/airflow/pull/6633/diff?src=pr&amp;el=tree#diff-YWlyZmxvdy9tb2RlbHMvZGFnLnB5) | `90.6% &lt;90%&gt; (-0.02%)` | :arrow_down: |
| [airflow/contrib/operators/ssh\_operator.py](https://codecov.io/gh/apache/airflow/pull/6633/diff?src=pr&amp;el=tree#diff-YWlyZmxvdy9jb250cmliL29wZXJhdG9ycy9zc2hfb3BlcmF0b3IucHk=) | `84.61% &lt;0%&gt; (+1.28%)` | :arrow_up: |

------

[Continue to review full report at Codecov](https://codecov.io/gh/apache/airflow/pull/6633?src=pr&amp;el=continue).
&gt; **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta)
&gt; ` = absolute &lt;relative&gt; (impact)`, ` = not affected`, `? = missing data`
&gt; Powered by [Codecov](https://codecov.io/gh/apache/airflow/pull/6633?src=pr&amp;el=footer). Last update [fe20ef6...1e06025](https://codecov.io/gh/apache/airflow/pull/6633?src=pr&amp;el=lastupdated). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments).

              </div></li><li><div>
                @kaxil @OmerJog the failing static check has been fixed and all tests passed. Pls let me know what you think about the PR.
              </div></li><li><div><div><b>body:</b> Since I'm still waiting for reviews, I improved the error handling a bit. Now if the DAG is misconfigured with cyclic dependencies, or if the user is clearing too many levels of transitive dependencies set up by `ExternalTaskMarker` and `ExternalTaskSensor` pairs, the user gets an error message on the Web UI rather than a stack trace.


                </div><div><b>label:</b> code-design
                </div></div></li><li><div>
                &gt; Can we add a section with example somwhere in docs too in https://github.com/apache/airflow/blob/master/docs/concepts.rst or https://github.com/apache/airflow/tree/master/docs/howto

Thanks @kaxil. @ashb  also suggested separately to add a doc page. I have added a documentation page for ExternalTaskSensor and ExternalTaskMarker. Here's a [preview](https://github.com/yuqian90/airflow/blob/external_task_sensor_marker/docs/howto/operator/external.rst)
              </div></li><li><div>
                Thanks @kaxil. I've made the changes you suggested. Pls take another look.
              </div></li><li><div>
                Thanks @yuqian90 - Good Work  
              </div></li><li><div>
                &gt; Thanks @yuqian90 - Good Work 

Thank you @kaxil ! 

When I tested this patch in our own production environment, I noticed that merging the change on top of 1.10.7 requires some special care mostly because www and www_rbac are in two separate directories. Pls let me know if I should put up a PR against v1-10-test too. i'm more than happy to do that.
              </div></li></ol></div><div><b>github_pulls_reviews:</b> <ol><li><div><div><b>body:</b> This should subclass DummyOperator then (because in future we will likely make the scheduler never bother trying to execute DummyOperator tasks.)
                </div><div><b>label:</b> code-design
                </div></div></li><li><div>
                Thanks. That's a good point. I'll change this to a subclass of `DummyOperator`.
              </div></li><li><div>
                Isn't `ti.operator` a class? So this is basically doing `if Class() == "Class"` isn't it?
              </div></li><li><div><div><b>body:</b> I looked into taskinstance.py. TaskInstance.operator is a String stored in the database. It's assigned the name of the class during its construction.
```
operator = Column(String(1000))
```

However, you have a point that this line is a little awkward. Is there a better way to say "if this taskinstance is created from a instance of `ExternalTaskMarker`" ?
                </div><div><b>label:</b> code-design
                </div></div></li><li><div>
                `isinstance(ti.task, ExternalTaskMarker)` -- make sure that the import for this is "delayed" until it's needed, i.e. somewhere in "this" block. (not the loop, but the "if clearing these dags")

@kaxil Which of these is better from a Dag Serialization PoV? Doesn't matter right? 
              </div></li><li><div><div><b>body:</b> Hi @ashb I tried the following:

```
isinstance(ti.task, ExternalTaskMarker)
```

Unfortunately I realized that ti.task is not set if `TaskInstance` is not created from the constructor `__init__`. 
```
E.g. the following raises `AttributeError` in this scope.
(Pdb++) p ti.task
*** AttributeError: 'TaskInstance' object has no attribute 'task'
(Pdb++) p isinstance(ti.task, ExternalTaskMarker)
*** AttributeError: 'TaskInstance' object has no attribute 'task'

This works:
(Pdb++) p ti.operator
'ExternalTaskMarker'
```

If `isinstance` is preferred, one other way do it is something like this:

```
task = self.get_task(ti.task_id)

if isinstance(task, ExternalTaskMarker):
    if recursion_depth == 0:
        # Maximum recursion depth allowed is the recursion_depth of the first
        # ExternalTaskMarker in the tasks to be cleared.
        max_recursion_depth = task.recursion_depth
    ...
```

This always gets the task object from the dag, even when it's not needed. So it's likely slightly slower than checking the value of `ti.operator`. We should only do it if there's a strong reason.

@ashb  @kaxil what do you think?
                </div><div><b>label:</b> code-design
                </div></div></li><li><div>
                Probably stick with it as you have it then?
              </div></li><li><div>
                @ashb  Sure, will do. I have also moved the `import ExternalTaskMarker` inline into the `if` block like you recommended. Thank you!
              </div></li><li><div><div><b>body:</b> This block needs to move to Line 175
                </div><div><b>label:</b> code-design
                </div></div></li><li><div>
                ```suggestion
        :param external_dag_id: The dag_id that contains the task you want to wait for
        :type external_dag_id: str
        :param external_task_id: The task_id that contains the task you want to wait for.
        :type external_task_id: str
        :param execution_date: The execution_date of the task that you want to wait for.
        :type execution_date: str or datetime.datetime
        :param recursion_depth: The maximum level of transitive dependencies allowed. Default is 10.
            This is mostly used for preventing cyclic dependencies. It is fine to increase
            this number if necessary. However, too many levels of transitive dependencies will make
            it slower to clear tasks in the web UI.
        """
```
              </div></li><li><div>
                Thanks for pointing out. I made this change as suggested. 
              </div></li><li><div>
                Let's change filename to `airflow/example_dags/example_external_task_marker_dag.py`
              </div></li><li><div><div><b>body:</b> Although it is redundant but that is the convention of other dags too
                </div><div><b>label:</b> code-design
                </div></div></li><li><div>
                let's use the time object instead of parsing it from string
              </div></li><li><div>
                Can we not directly do `ti.render_templates` here?
              </div></li><li><div>
                Where is `instance` used?
              </div></li><li><div><div><b>body:</b> You are right it's cleaner to call `ti.render_template()` (after setting `ti.task` to task).
                </div><div><b>label:</b> code-design
                </div></div></li></ol></div><div><b>jira_issues:</b> <ol><li><div><div><b>summary:</b> Clearing Tasks Across DAGs
                </div><div><b>description:</b> At Stripe, we commonly have discrete dags that depend on each other by leveraging ExternalTaskSensors. We also find ourselves routinely wanting to not only clear tasks and their downstream&nbsp;tasks in a particular dag, but also their&nbsp;downstream tasks in their dependent dags (linked by ExternalTaskSensors).&nbsp;

We currently have extended Airflow to handle this by modifying the webapp and cli tool to optionally clear&nbsp;dependent tasks across multiple&nbsp;dags (see attached screenshot).&nbsp;

We want to open the floor for discussion with the larger Airflow community about the usage of ExternalTaskSensors and specifically how to handle clearing across dags. We are interested in learning more about the accepted practices in this regard, and are very open/willing to contribute in this area if there is interest!
                </div></div></li><li><div><div><b>summary:</b> Clearing Tasks Across DAGs
                </div><div><b>description:</b> At Stripe, we commonly have discrete dags that depend on each other by leveraging ExternalTaskSensors. We also find ourselves routinely wanting to not only clear tasks and their downstream&nbsp;tasks in a particular dag, but also their&nbsp;downstream tasks in their dependent dags (linked by ExternalTaskSensors).&nbsp;

We currently have extended Airflow to handle this by modifying the webapp and cli tool to optionally clear&nbsp;dependent tasks across multiple&nbsp;dags (see attached screenshot).&nbsp;

We want to open the floor for discussion with the larger Airflow community about the usage of ExternalTaskSensors and specifically how to handle clearing across dags. We are interested in learning more about the accepted practices in this regard, and are very open/willing to contribute in this area if there is interest!
                </div></div></li><li><div><div><b>summary:</b> Clearing Tasks Across DAGs
                </div><div><b>description:</b> At Stripe, we commonly have discrete dags that depend on each other by leveraging ExternalTaskSensors. We also find ourselves routinely wanting to not only clear tasks and their downstream&nbsp;tasks in a particular dag, but also their&nbsp;downstream tasks in their dependent dags (linked by ExternalTaskSensors).&nbsp;

We currently have extended Airflow to handle this by modifying the webapp and cli tool to optionally clear&nbsp;dependent tasks across multiple&nbsp;dags (see attached screenshot).&nbsp;

We want to open the floor for discussion with the larger Airflow community about the usage of ExternalTaskSensors and specifically how to handle clearing across dags. We are interested in learning more about the accepted practices in this regard, and are very open/willing to contribute in this area if there is interest!
                </div></div></li><li><div><div><b>summary:</b> Clearing Tasks Across DAGs
                </div><div><b>description:</b> At Stripe, we commonly have discrete dags that depend on each other by leveraging ExternalTaskSensors. We also find ourselves routinely wanting to not only clear tasks and their downstream&nbsp;tasks in a particular dag, but also their&nbsp;downstream tasks in their dependent dags (linked by ExternalTaskSensors).&nbsp;

We currently have extended Airflow to handle this by modifying the webapp and cli tool to optionally clear&nbsp;dependent tasks across multiple&nbsp;dags (see attached screenshot).&nbsp;

We want to open the floor for discussion with the larger Airflow community about the usage of ExternalTaskSensors and specifically how to handle clearing across dags. We are interested in learning more about the accepted practices in this regard, and are very open/willing to contribute in this area if there is interest!
                </div></div></li><li><div><div><b>summary:</b> Clearing Tasks Across DAGs
                </div><div><b>description:</b> At Stripe, we commonly have discrete dags that depend on each other by leveraging ExternalTaskSensors. We also find ourselves routinely wanting to not only clear tasks and their downstream&nbsp;tasks in a particular dag, but also their&nbsp;downstream tasks in their dependent dags (linked by ExternalTaskSensors).&nbsp;

We currently have extended Airflow to handle this by modifying the webapp and cli tool to optionally clear&nbsp;dependent tasks across multiple&nbsp;dags (see attached screenshot).&nbsp;

We want to open the floor for discussion with the larger Airflow community about the usage of ExternalTaskSensors and specifically how to handle clearing across dags. We are interested in learning more about the accepted practices in this regard, and are very open/willing to contribute in this area if there is interest!
                </div></div></li><li><div><div><b>summary:</b> Clearing Tasks Across DAGs
                </div><div><b>description:</b> At Stripe, we commonly have discrete dags that depend on each other by leveraging ExternalTaskSensors. We also find ourselves routinely wanting to not only clear tasks and their downstream&nbsp;tasks in a particular dag, but also their&nbsp;downstream tasks in their dependent dags (linked by ExternalTaskSensors).&nbsp;

We currently have extended Airflow to handle this by modifying the webapp and cli tool to optionally clear&nbsp;dependent tasks across multiple&nbsp;dags (see attached screenshot).&nbsp;

We want to open the floor for discussion with the larger Airflow community about the usage of ExternalTaskSensors and specifically how to handle clearing across dags. We are interested in learning more about the accepted practices in this regard, and are very open/willing to contribute in this area if there is interest!
                </div></div></li></ol></div><div><b>jira_issues_comments:</b> <ol><li><div>
                At Dropbox, we have the&nbsp;exact same need. We were going to embark on building this, but perhaps it would make sense to use your patch as a starting point?

One hard requirement we have is the ability to limit the number of tasks cleared when doing a cross-DAG clear. At Dropbox, a lot of the tasks we run are *very* data- and compute- intensive, so if we (for example) cleared 10,000 tasks accidentally, it would be difficult to recover from.

Another aspect of this is the time window of the ExternalTaskSensor  for example if I have a task that runs at time&nbsp;_t_&nbsp;in dag A&nbsp;and depends on the set of tasks in another dag B between [_t - 7, t_), then clearing the task at time&nbsp;_t - 4_ in dag B should also clear the task at time&nbsp;_t_ in dag A. Does your patch do this already?
              </div></li><li><div>
                I'm in the process of working on something I call ClearTaskOperator. In fact, I already have a working PR. I was using it for a different purpose (rerunning completed tasks). However, the exact same operator can be used to achieve the intention of [~asoni-stripe] .

[https://github.com/apache/airflow/pull/6392]

&nbsp;

For example, if we want to make sure when task_A on dag1 is cleared, it always clears a task_B on a dag2, we can do make the dag1 look like this:
{code:python}
task_A &gt;&gt; clear_Task_B
{code}
&nbsp;

where
{code:python}
clear_Task_B = ClearTaskOperator(external_task_id="task_B", external_dag_id="dag2")
{code}
So the change is actually very simple, just adding a new operator, without even touching the core Airflow code.

I saw [~gsilk] has an interesting requirement that I did not consider when coming up with the PR, that is to limit the number tasks cleared at the same time. But adding this is trivial because it is just an additional check in the execute() function.

And some other improvements I can think of for the PR is to make it behave like an ExternalTaskSensor, i.e. it only clears the target tasks if they are done. If the target tasks are still running, it'll just wait and reschedule itself for a later time to try clearing them again.

If there are interest in this new operator or these additional features, pls mention that on my PR and I'll continue to develop it to make it better and hopefully get more support from upstream.
              </div></li><li><div>
                yuqian90 commented on pull request #6633: [AIRFLOW-2279] Clear tasks across DAGs if marked by ExternalTaskMarker
URL: https://github.com/apache/airflow/pull/6633
 
 
   Make sure you have checked _all_ steps below.
   
   ### Jira
   
   - [ ] My PR addresses the following [Airflow Jira](https://issues.apache.org/jira/browse/AIRFLOW/) issues and references them in the PR title. 
     - https://issues.apache.org/jira/browse/AIRFLOW-2279
   
   ### Description
   
   - [ ] Here are some details about my PR, including screenshots of any UI changes:
   There's a clear need for having a way to clear tasks across DAGs when there are dependencies set up by ExternalTaskSensor. This PR adds an ExternalTaskMarker to indicate such need. And when ExternalTaskMarker is used, the "Clear" action by the user will look for the external tasks recursively and clear them. There's no need to change the UI because the "Recursive" option in the Clear form fits this nicely. 
   
   This is primarily addressing AIRFLOW-2279. However, there are various other users in the community using ExternalTaskSensor to set up cross-DAG dependencies and many of them asked for this kind of feature. 
   https://issues.apache.org/jira/browse/AIRFLOW-2279
   https://issues.apache.org/jira/browse/AIRFLOW-1414
   https://issues.apache.org/jira/browse/AIRFLOW-1446
   https://issues.apache.org/jira/browse/AIRFLOW-4005
   https://www.mikulskibartosz.name/using-sensors-in-airflow/
   https://forum.astronomer.io/t/dependencies-across-dags/332
   https://geoffruddock.com/how-to-use-external-task-sensor-in-airflow/
   https://stackoverflow.com/questions/38022323/how-to-set-dependencies-between-dags-in-airflow
   https://issues.apache.org/jira/browse/AIRFLOW-1825
   
   This inactive PR tried to implement this feature. However it was abandoned. And I feel my approach is simpler and more flexible. And it does not need UI changes.
   https://github.com/apache/airflow/pull/2444
   
   ### Tests
   
   - [ ] My PR adds the following unit tests __OR__ does not need testing for this extremely good reason:
   Tests added to test_external_task_sensor.py
   
   ### Commits
   
   - [ ] My commits all reference Jira issues in their subject lines, and I have squashed multiple commits if they address the same issue. In addition, my commits follow the guidelines from "[How to write a good git commit message](http://chris.beams.io/posts/git-commit/)":
     1. Subject is separated from body by a blank line
     1. Subject is limited to 50 characters (not including Jira issue reference)
     1. Subject does not end with a period
     1. Subject uses the imperative mood ("add", not "adding")
     1. Body wraps at 72 characters
     1. Body explains "what" and "why", not "how"
   
   ### Documentation
   
   - [ ] In case of new functionality, my PR adds documentation that describes how to use it.
     - All the public functions and the classes in the PR contain docstrings that explain what it does
     - If you implement backwards incompatible changes, please leave a note in the [Updating.md](https://github.com/apache/airflow/blob/master/UPDATING.md) so we can assign it to a appropriate release
   
 
----------------------------------------------------------------
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.
 
For queries about this service, please contact Infrastructure at:
users@infra.apache.org

              </div></li><li><div>
                kaxil commented on pull request #6633: [AIRFLOW-2279] Clear tasks across DAGs if marked by ExternalTaskMarker
URL: https://github.com/apache/airflow/pull/6633
 
 
   
 
----------------------------------------------------------------
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.
 
For queries about this service, please contact Infrastructure at:
users@infra.apache.org

              </div></li><li><div>
                Commit d7499b11d2bb2dc78dcee4b02c6388dfea6a2c3a in airflow's branch refs/heads/master from yuqian90
[ https://gitbox.apache.org/repos/asf?p=airflow.git;h=d7499b1 ]

[AIRFLOW-2279] Clear tasks across DAGs if marked by ExternalTaskMarker (#6633)


              </div></li><li><div>
                yuqian90 commented on pull request #7139: [AIRFLOW-2279] Clear tasks across DAGs if marked by ExternalTaskMarker
URL: https://github.com/apache/airflow/pull/7139
 
 
   This change was already merged into master. I'm creating this PR to help committers merge into v1-10-test.
   
   ---
   Issue link: WILL BE INSERTED BY [boring-cyborg](https://github.com/kaxil/boring-cyborg)
   
   - [ ] Description above provides context of the change
   - [ ] Commit message/PR title starts with `[AIRFLOW-NNNN]`. AIRFLOW-NNNN = JIRA ID&lt;sup&gt;*&lt;/sup&gt;
   - [ ] Unit tests coverage for changes (not needed for documentation changes)
   - [ ] Commits follow "[How to write a good git commit message](http://chris.beams.io/posts/git-commit/)"
   - [ ] Relevant documentation is updated including usage instructions.
   - [ ] I will engage committers as explained in [Contribution Workflow Example](https://github.com/apache/airflow/blob/master/CONTRIBUTING.rst#contribution-workflow-example).
   
   &lt;sup&gt;*&lt;/sup&gt; For document-only changes commit message can start with `[AIRFLOW-XXXX]`.
   
   ---
   In case of fundamental code change, Airflow Improvement Proposal ([AIP](https://cwiki.apache.org/confluence/display/AIRFLOW/Airflow+Improvements+Proposals)) is needed.
   In case of a new dependency, check compliance with the [ASF 3rd Party License Policy](https://www.apache.org/legal/resolved.html#category-x).
   In case of backwards incompatible changes please leave a note in [UPDATING.md](https://github.com/apache/airflow/blob/master/UPDATING.md).
   Read the [Pull Request Guidelines](https://github.com/apache/airflow/blob/master/CONTRIBUTING.rst#pull-request-guidelines) for more information.
   
 
----------------------------------------------------------------
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.
 
For queries about this service, please contact Infrastructure at:
users@infra.apache.org

              </div></li><li><div>
                Commit 14111b4bddbaa7c7085a25cdfe923f88219e1582 in airflow's branch refs/heads/v1-10-test from Qian Yu
[ https://gitbox.apache.org/repos/asf?p=airflow.git;h=14111b4 ]

[AIRFLOW-2279] Clear tasks across DAGs if marked by ExternalTaskMarker (#6633)

              </div></li><li><div>
                kaxil commented on pull request #7139: [AIRFLOW-2279] Clear tasks across DAGs if marked by ExternalTaskMarker
URL: https://github.com/apache/airflow/pull/7139
 
 
   
 
----------------------------------------------------------------
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.
 
For queries about this service, please contact Infrastructure at:
users@infra.apache.org

              </div></li></ol></div></div></html>