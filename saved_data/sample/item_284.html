<!DOCTYPE html><html><div class="item-title">
        Item 284
      </div> <div class="item-details"><div><b>git_comments:</b> <ol><li><div><div><b>comment:</b>  TODO: Do we really need to init cluster communication? 
                </div><div><b>label:</b> code-design
                </div></div></li></ol></div><div><b>git_commits:</b> <ol><li><div><div><b>summary:</b> [TS-845] make proxy.config.cluster.ethernet_interface default to lo/lo0
                </div><div><b>message:</b> [TS-845] make proxy.config.cluster.ethernet_interface default to lo/lo0

lo on linux and lo0 on bsd derivatives. it does no effect when you
really want to setup the cluster type=1, in that case you will need
to change the interface to a real interface like eth0. this patch
will just make it is safe to remove the whole cluster config block
from records.config if you like, and don't drive the newbie crazy
when they copy the records.config to another system where there is
no eth0 but bonding0.
we may need to rework the whole ClusterComunication system initialize
when we have someone cleanup the mgmt/web2(the webui).

git-svn-id: https://svn.apache.org/repos/asf/trafficserver/traffic/trunk@1137894 13f79535-47bb-0310-9956-ffa450edef68

                </div></div></li></ol></div><div><b>github_issues:</b> <ol></ol></div><div><b>github_issues_comments:</b> <ol></ol></div><div><b>github_pulls:</b> <ol></ol></div><div><b>github_pulls_comments:</b> <ol></ol></div><div><b>github_pulls_reviews:</b> <ol></ol></div><div><b>jira_issues:</b> <ol><li><div><div><b>summary:</b> invalid setting of proxy.config.cluster.ethernet_interface will prevent traffc_manager from starting
                </div><div><b>description:</b> when you set an invalid interface in proxy.config.cluster.ethernet_interface, it will just crash.

{code}
[Jun 20 15:31:15.350] Manager {140230882367264} FATAL: [LocalManager::initCCom] Unable to find network interface eth5.  Exiting...
[Jun 20 15:31:15.350] Manager {140230882367264} FATAL:  (last system error 2: No such file or directory)
[Jun 20 15:31:15.351] Manager {140230882367264} NOTE: [LocalManager::mgmtShutdown] Executing shutdown request.
[Jun 20 15:31:15.351] Manager {140230882367264} NOTE: [LocalManager::processShutdown] Executing process shutdown request.
{code}
                </div><div><b>label:</b> code-design
                </div></div></li><li><div><div><b>summary:</b> invalid setting of proxy.config.cluster.ethernet_interface will prevent traffc_manager from starting
                </div><div><b>description:</b> when you set an invalid interface in proxy.config.cluster.ethernet_interface, it will just crash.

{code}
[Jun 20 15:31:15.350] Manager {140230882367264} FATAL: [LocalManager::initCCom] Unable to find network interface eth5.  Exiting...
[Jun 20 15:31:15.350] Manager {140230882367264} FATAL:  (last system error 2: No such file or directory)
[Jun 20 15:31:15.351] Manager {140230882367264} NOTE: [LocalManager::mgmtShutdown] Executing shutdown request.
[Jun 20 15:31:15.351] Manager {140230882367264} NOTE: [LocalManager::processShutdown] Executing process shutdown request.
{code}
                </div><div><b>label:</b> test
                </div></div></li><li><div><div><b>summary:</b> invalid setting of proxy.config.cluster.ethernet_interface will prevent traffc_manager from starting
                </div><div><b>description:</b> when you set an invalid interface in proxy.config.cluster.ethernet_interface, it will just crash.

{code}
[Jun 20 15:31:15.350] Manager {140230882367264} FATAL: [LocalManager::initCCom] Unable to find network interface eth5.  Exiting...
[Jun 20 15:31:15.350] Manager {140230882367264} FATAL:  (last system error 2: No such file or directory)
[Jun 20 15:31:15.351] Manager {140230882367264} NOTE: [LocalManager::mgmtShutdown] Executing shutdown request.
[Jun 20 15:31:15.351] Manager {140230882367264} NOTE: [LocalManager::processShutdown] Executing process shutdown request.
{code}
                </div></div></li><li><div><div><b>summary:</b> invalid setting of proxy.config.cluster.ethernet_interface will prevent traffc_manager from starting
                </div><div><b>description:</b> when you set an invalid interface in proxy.config.cluster.ethernet_interface, it will just crash.

{code}
[Jun 20 15:31:15.350] Manager {140230882367264} FATAL: [LocalManager::initCCom] Unable to find network interface eth5.  Exiting...
[Jun 20 15:31:15.350] Manager {140230882367264} FATAL:  (last system error 2: No such file or directory)
[Jun 20 15:31:15.351] Manager {140230882367264} NOTE: [LocalManager::mgmtShutdown] Executing shutdown request.
[Jun 20 15:31:15.351] Manager {140230882367264} NOTE: [LocalManager::processShutdown] Executing process shutdown request.
{code}
                </div></div></li><li><div><div><b>summary:</b> invalid setting of proxy.config.cluster.ethernet_interface will prevent traffc_manager from starting
                </div><div><b>description:</b> when you set an invalid interface in proxy.config.cluster.ethernet_interface, it will just crash.

{code}
[Jun 20 15:31:15.350] Manager {140230882367264} FATAL: [LocalManager::initCCom] Unable to find network interface eth5.  Exiting...
[Jun 20 15:31:15.350] Manager {140230882367264} FATAL:  (last system error 2: No such file or directory)
[Jun 20 15:31:15.351] Manager {140230882367264} NOTE: [LocalManager::mgmtShutdown] Executing shutdown request.
[Jun 20 15:31:15.351] Manager {140230882367264} NOTE: [LocalManager::processShutdown] Executing process shutdown request.
{code}
                </div></div></li><li><div><div><b>summary:</b> invalid setting of proxy.config.cluster.ethernet_interface will prevent traffc_manager from starting
                </div><div><b>description:</b> when you set an invalid interface in proxy.config.cluster.ethernet_interface, it will just crash.

{code}
[Jun 20 15:31:15.350] Manager {140230882367264} FATAL: [LocalManager::initCCom] Unable to find network interface eth5.  Exiting...
[Jun 20 15:31:15.350] Manager {140230882367264} FATAL:  (last system error 2: No such file or directory)
[Jun 20 15:31:15.351] Manager {140230882367264} NOTE: [LocalManager::mgmtShutdown] Executing shutdown request.
[Jun 20 15:31:15.351] Manager {140230882367264} NOTE: [LocalManager::processShutdown] Executing process shutdown request.
{code}
                </div></div></li></ol></div><div><b>jira_issues_comments:</b> <ol><li><div><div><b>body:</b> set the default cluster interface to system default LOOPBACK virtual network interface, this is a fast fix for this bug, and we may need to rework the whole ClusterComunication system initialize when we have someone cleanup the mgmt/web2(the webui).
                </div><div><b>label:</b> code-design
                </div></div></li><li><div><div><b>body:</b> Seems reasonable to me, assuming clustering still works with the interface set to lo / lo0 (I have not tested that).
                </div><div><b>label:</b> test
                </div></div></li><li><div>
                yeah, it does no effect when you really want to setup the cluster type=1, in that case you will need to change the interface to a real interface like eth0. this patch will just make it is safe to remove the whole cluster config block from records.config if you like, and don't drive the newbie crazy when they copy the records.config to another system where there is no eth0 but bonding0 :D


              </div></li><li><div>
                fixed, and I don't want it to be backported to 3.0, as we'll do more cluster networking enhancement later
              </div></li></ol></div></div></html>