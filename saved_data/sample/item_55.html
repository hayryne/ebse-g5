<!DOCTYPE html><html><div class="item-title">
        Item 55
      </div> <div class="item-details"><div><b>git_comments:</b> <ol></ol></div><div><b>git_commits:</b> <ol><li><div><div><b>summary:</b> KAFKA-8417: Remove redundant network definition --net=host when starting testing docker containers (#6797)
                </div><div><b>message:</b> KAFKA-8417: Remove redundant network definition --net=host when starting testing docker containers (#6797)

Reviewers: Colin P. McCabe &lt;cmccabe@apache.org&gt;
                </div></div></li></ol></div><div><b>github_issues:</b> <ol></ol></div><div><b>github_issues_comments:</b> <ol></ol></div><div><b>github_pulls:</b> <ol><li><div><div><b>title:</b> KAFKA-8417: Remove redundant network definition --net=host when starting testing docker containers
                </div><div><b>body:</b> * Remove non-user-defined network --net=host which is redundant when starting system test docker containers

* Tested by running a round of system tests locally and on jenkins

### Committer Checklist (excluded from commit message)
- [ ] Verify design and implementation 
- [ ] Verify test coverage and CI build status
- [ ] Verify documentation (including upgrade notes)

                </div></div></li></ol></div><div><b>github_pulls_comments:</b> <ol><li><div>
                @cmccabe seems non-user-defined network `host` is not strictly required. 
If you agree, consider backporting as far back as it makes sense. It fails in recent docker versions (such as docker engine: `Engine: 19.03.0-beta3`) 
Thanks!
              </div></li><li><div>
                LGTM
              </div></li><li><div>
                There's no reason to wait for Jenkins here since this has no impact on the Java or Scala code (it is unchanged).  Will commit.
              </div></li><li><div>
                Backported to 2.3
              </div></li><li><div>
                Cherry-picked the original commit to `2.2, 2.1, and 2.0` branches too, since it's useful to users that work on these branches still. It merged cleanly. 
              </div></li></ol></div><div><b>github_pulls_reviews:</b> <ol></ol></div><div><b>jira_issues:</b> <ol><li><div><div><b>summary:</b> Remove redundant network definition --net=host when starting testing docker containers
                </div><div><b>description:</b> The switches {{--net}} and {{--network}} are equivalent in docker, with the latter being preferred.&nbsp;

(see&nbsp;[https://github.com/docker/cli/blob/master/cli/command/container/opts.go]&nbsp;where currently there's the comment:&nbsp;_// We allow for both "--net" and "--network", although the latter is the recommended way._)

However, in recent Docker versions, defining both as follows:&nbsp;
{{--net=host --network ducknet}}

fails with error:&nbsp;

{{docker: conflicting options: cannot attach both user-defined and non-user-defined network-modes.}}

Removing {{--net=host}} and keeping only the user-defined network should fix the issue.&nbsp;
                </div></div></li></ol></div><div><b>jira_issues_comments:</b> <ol><li><div>
                kkonstantine commented on pull request #6797: KAFKA-8417: Remove redundant network definition --net=host when starting testing docker containers
URL: https://github.com/apache/kafka/pull/6797
 
 
   * Remove non-user-defined network --net=host which is redundant when starting system test docker containers
   
   * Tested by running a round of system tests locally and on jenkins
   
   ### Committer Checklist (excluded from commit message)
   - [ ] Verify design and implementation 
   - [ ] Verify test coverage and CI build status
   - [ ] Verify documentation (including upgrade notes)
   
 
----------------------------------------------------------------
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.
 
For queries about this service, please contact Infrastructure at:
users@infra.apache.org

              </div></li><li><div>
                cmccabe commented on pull request #6797: KAFKA-8417: Remove redundant network definition --net=host when starting testing docker containers
URL: https://github.com/apache/kafka/pull/6797
 
 
   
 
----------------------------------------------------------------
This is an automated message from the Apache Git Service.
To respond to the message, please log on to GitHub and use the
URL above to go to the specific comment.
 
For queries about this service, please contact Infrastructure at:
users@infra.apache.org

              </div></li></ol></div></div></html>