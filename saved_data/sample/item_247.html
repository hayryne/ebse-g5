<!DOCTYPE html><html><div class="item-title">
        Item 247
      </div> <div class="item-details"><div><b>git_comments:</b> <ol><li><div>
                 workaround for RAT-158 
              </div></li><li><div>
                 Checks for whitespace                               
 See http://checkstyle.sf.net/config_whitespace.html 
              </div></li><li><div>
                 needs extra, because Eclipse formatter ignores the ending left brace 
              </div></li></ol></div><div><b>git_commits:</b> <ol><li><div><div><b>summary:</b> NIFI-271 left some important items of the boat last commit
                </div><div><b>message:</b> NIFI-271 left some important items of the boat last commit

                </div></div></li></ol></div><div><b>github_issues:</b> <ol></ol></div><div><b>github_issues_comments:</b> <ol></ol></div><div><b>github_pulls:</b> <ol></ol></div><div><b>github_pulls_comments:</b> <ol></ol></div><div><b>github_pulls_reviews:</b> <ol></ol></div><div><b>jira_issues:</b> <ol><li><div><div><b>summary:</b> factor out a released common parent pom
                </div><div><b>description:</b> Arguably, there are a number of pieces of configuration and taste that are in common between the 'nifi' and the 'maven-plugins' tree. If we wanted to apply DRY to this, we would add a 'parent' directory, put a pom in there, and release _that_ first. 

Or, on the other hand, we might feel that this is overkill. I don't think it's a good idea to go here for 0.0.1 of anything, so I'm just writing this for future digestion.

This parent pom should enforce certain conventions/formatting/etc.  to help make merging/diffs/reviews easier.

                </div></div></li></ol></div><div><b>jira_issues_comments:</b> <ol><li><div>
                Benson - would the nifi-parent be a peer of 'nifi' and 'nifi-nar-maven-plugin'?

This seems straightforward to do just want to make sure I have your idea/implications fully understood.

Thanks
Joe


              </div></li><li><div>
                Proposal:
1) Do what Benson said.
2) In that nifi-parent ensure checkstyle is always run and thus
consistent across any nifi item.  Fail the build if any violations.
3) In that nifi-parent ensure check-licenses is always run and if any
fails - fail the build.

Commentary:
- This is not as forgiving as Sean suggested but it also does not
preclude us from doing the QC bot to check higher order items.
- This is more in-line with Adam's suggestion but gives the
contributor direct feedback on what is wrong that they can resolve on
their own without us rejecting their PR.  This I am guessing was
Adam's real intent anyway.
- I will go through an make sure all existing code is in-line with the
checkstyle form that we will create.  That will require very loud
music and good drinks but whatever - about as much fun as it was
getting all the licensing squared away.

              </div></li><li><div>
                Commit 5fe5190ece55aec047c45628cdf519f331f6f66e in incubator-nifi's branch refs/heads/NIFI-271 from [~joewitt]
[ https://git-wip-us.apache.org/repos/asf?p=incubator-nifi.git;h=5fe5190 ]

NIFI-271 initial move with everything as-was except now we have a nifi-parent.  Will add checkstyle/license check to build process soon

              </div></li><li><div>
                On branch (pushed to origin) NIFI-271 you can see the initial 'nifi-parent' which is a peer of 'nifi' and 'nifi-nar-maven-plugin'

Then identified things which should be in parent, removed them from nifi and nif-nar-maven-plugin.  Clean-build-all locally and looks good.

I'll start adjusting the parent to support enforcing consistent checkstyle and to always do the license check.

Please provide feedback of any concerns.
              </div></li><li><div>
                Looks good here.  Good coverage of the items used throughout functionally.
              </div></li><li><div>
                I have adopted the checkstyle conventions of Accumulo exactly as they had them.  Our discussion on the mailing lists suggests that we all had a shared interest not in the holy war of formatting desires but in the 'consistency'.  So this addresses that.
              </div></li><li><div>
                Commit 748d48de76f9b39529da3c3c3ac9d14cdc567bef in incubator-nifi's branch refs/heads/NIFI-271 from [~joewitt]
[ https://git-wip-us.apache.org/repos/asf?p=incubator-nifi.git;h=748d48d ]

NIFI-271 added checkstyle and license checks as default parts of build

              </div></li><li><div>
                will hold here as going the full way will *severely* alter the fun of merging in existing efforts.  There is at least one extremely large branch outstanding that matt/mark are working NIFI-250.  So holding for that.  
              </div></li><li><div>
                this will be too disruptive to do until nifi 250 is merged to develop
              </div></li><li><div>
                Commit d63ed4875d17c68e6e7e78a832971cde03c873fa in incubator-nifi's branch refs/heads/NIFI-271 from [~joewitt]
[ https://git-wip-us.apache.org/repos/asf?p=incubator-nifi.git;h=d63ed48 ]

NIFI-271 left some important items of the boat last commit

              </div></li><li><div>
                Commit d696ba53ca7fb24fe586042518540948df60591e in incubator-nifi's branch refs/heads/NIFI-271 from [~joewitt]
[ https://git-wip-us.apache.org/repos/asf?p=incubator-nifi.git;h=d696ba5 ]

NIFI-271 initial move with everything as-was except now we have a nifi-parent.  Will add checkstyle/license check to build process soon

              </div></li><li><div>
                Commit be5d13ec3b36850f1bf6d51db2d7147457994d2a in incubator-nifi's branch refs/heads/NIFI-271 from [~joewitt]
[ https://git-wip-us.apache.org/repos/asf?p=incubator-nifi.git;h=be5d13e ]

NIFI-271 added checkstyle and license checks as default parts of build

              </div></li><li><div>
                Commit 3c3306b7111d186526c80122da5536da2a58cef6 in incubator-nifi's branch refs/heads/NIFI-271 from [~joewitt]
[ https://git-wip-us.apache.org/repos/asf?p=incubator-nifi.git;h=3c3306b ]

NIFI-271 left some important items of the boat last commit

              </div></li><li><div>
                Commit 8a296aacc956cf967406626e9ce0ae296b71c4e2 in incubator-nifi's branch refs/heads/NIFI-271 from [~joewitt]
[ https://git-wip-us.apache.org/repos/asf?p=incubator-nifi.git;h=8a296aa ]

NIFI-271 Merged with latest develop.  Rebase seemed to dangerous in this case.  Does not build yet.

              </div></li><li><div>
                Commit 9faaef8cfae703c5b3a77796620c03787767cc28 in incubator-nifi's branch refs/heads/NIFI-271 from [~joewitt]
[ https://git-wip-us.apache.org/repos/asf?p=incubator-nifi.git;h=9faaef8 ]

NIFI-271 checkpoint push because there are so many changes.  Long way to go but got through dto library

              </div></li><li><div>
                Commit fe8e30a03414f0c3d454b165063e308e692ab77f in incubator-nifi's branch refs/heads/NIFI-271 from [~joewitt]
[ https://git-wip-us.apache.org/repos/asf?p=incubator-nifi.git;h=fe8e30a ]

NIFI-271 removed a checkstyle file that was mistakenly added

              </div></li><li><div>
                Commit bcb3ca8f9886dca675e4b3a895abf83501435eed in incubator-nifi's branch refs/heads/NIFI-271 from [~joewitt]
[ https://git-wip-us.apache.org/repos/asf?p=incubator-nifi.git;h=bcb3ca8 ]

NIFI-271 got through nifi-api

              </div></li><li><div>
                Commit 6d728406de755ce2d9d655890aa2012895382b59 in incubator-nifi's branch refs/heads/NIFI-271 from [~joewitt]
[ https://git-wip-us.apache.org/repos/asf?p=incubator-nifi.git;h=6d72840 ]

Merge branch 'develop' into NIFI-271

              </div></li><li><div>
                Commit afb4fe52b9c7f9527ad6c2aa7e4c4f86994bccbb in incubator-nifi's branch refs/heads/NIFI-271 from [~joewitt]
[ https://git-wip-us.apache.org/repos/asf?p=incubator-nifi.git;h=afb4fe5 ]

NIFI-271 checkpoint

              </div></li><li><div>
                Commit b612b6bcd9f2f29a4466360d5fbbeccee62ae650 in incubator-nifi's branch refs/heads/NIFI-271 from [~joewitt]
[ https://git-wip-us.apache.org/repos/asf?p=incubator-nifi.git;h=b612b6b ]

NIFI-271 checkpoint

              </div></li><li><div>
                Commit 9dda16c995ba55b8025506a12b0844031f5efcf0 in incubator-nifi's branch refs/heads/NIFI-271 from [~joewitt]
[ https://git-wip-us.apache.org/repos/asf?p=incubator-nifi.git;h=9dda16c ]

NIFI-271 checkpoint

              </div></li><li><div>
                ok NIFI-271 as pushed remote should be in decent shape
it will take a while longer to get it so that we always run checkstyle
but i will keep working those formatting/javadoc tweaks over the days.  Before we do the 0.1.0 release we need to update the new 'nifi-parent' to always run checkstyle.  Right now it is activated as a profile.  It just has to be activated manually right now so the normal build process will work.

this should let the various outstanding patches/PRs go through .  Don't want to hold folks up too long
              </div></li><li><div>
                If you wanna watch the build fail run this:

    mvn -T 1C clean install -Pcheckstyle

once i can get a full clean build with that command i'll make the execution of checkstyle automatic for all builds
              </div></li><li><div>
                With the associated instructions, was able to confirm build is good and the subsequent failure with the provided instructions.  Moving on to performing a review of the changes.


              </div></li><li><div>
                Commit 1367b39b5bf27189228fc5150bde8ccd7b9f1825 in incubator-nifi's branch refs/heads/develop from [~aldrin]
[ https://git-wip-us.apache.org/repos/asf?p=incubator-nifi.git;h=1367b39 ]

Merge remote-tracking branch 'origin/NIFI-271' into develop

              </div></li><li><div>
                Needed to remove a remnant listing of the nifi-nar-maven-plugin from nifi-parent/pom.xml

Reviewed code changes and pushed the code to the repository.  Will send a note out to the dev list to highlight the changes with this new structure and call out this ticket.
              </div></li><li><div>
                ok now that it is moved into develop i'm gonna keep up the fight on a local branch.

thanks
              </div></li><li><div>
                Commit a53cc3d707c735a42f025c883065b848490ea4db in incubator-nifi's branch refs/heads/develop from [~joewitt]
[ https://git-wip-us.apache.org/repos/asf?p=incubator-nifi.git;h=a53cc3d ]

NIFI-271 more cleanup

              </div></li><li><div>
                [~mcgilman] Patch looks fine, +1
              </div></li><li><div>
                Commit 7678dd907b209ab4825b08938687602f68e8a1b5 in incubator-nifi's branch refs/heads/develop from [~mcgilman]
[ https://git-wip-us.apache.org/repos/asf?p=incubator-nifi.git;h=7678dd9 ]

NIFI-271:
- If a module has custom rat plugin configuration it overrides the global configuration. Need to copy over any required items.
              </div></li><li><div>
                [~aldrin] thanks for the email to the dev list regarding this update.  However, building with the checkstyle profile from the latest develop branch currently fails on the nifi-framework module.  Is this expected?

{code}
[ERROR] Failed to execute goal org.apache.rat:apache-rat-plugin:0.11:check (check-licenses) on project nifi-framework: Too many files with unapproved license: 30
{code}
              </div></li><li><div>
                Hi [~brianghig],

Yes, this is a work in progress and we will work to bring it up to speed.  The intent was meant as a way for people to check their items upon submission, but there may be issues with lack of sufficient granularity to run this on a per module basis.

              </div></li><li><div>
                Thanks!  Turns out Rat is picking up all of my Eclipse project files that were generated when I imported those modules.  So, false alarm from me, but I'm going to look into adding those files and directories to the filter (at least locally).
              </div></li><li><div>
                Sounds good.  This seems to be pretty commonplace as similar items have to be performed for Netbeans as well.  If you're able to summarize all those nicely, it would be a welcomed contribution. 
              </div></li><li><div>
                Adding patch to exclude Eclipse project files from Apache Rat configuration.
Exclusions include:
* .project
* .settings
* .classpath

Other exclusions exist (for example, see GitHub's [gitignore project|https://github.com/github/gitignore]), but this is a step in the right direction.
              </div></li><li><div>
                Brian: We should not need this we think...

For RAT exclusions we think the default settings should be sufficient:

http://creadur.apache.org/rat/apache-rat-plugin/check-mojo.html#useEclipseDefaultExcludes

Do you think the plugin was not doing what it advertises to do?
              </div></li><li><div>
                all: Unless there is objection i will continue the labor intensive fun of moving comments around to satisfy the checkstyle.  It is not thoughtful work at this point.  Should something come up that is i'll request another review.  But given the existing reviews/discussion i am going to keep working it and committing until resolved and we have checkstyle on by default.
              </div></li><li><div>
                Commit d68f71b126c58112070d81f14e804497f9649e5b in incubator-nifi's branch refs/heads/develop from [~joewitt]
[ https://git-wip-us.apache.org/repos/asf?p=incubator-nifi.git;h=d68f71b ]

NIFI-271

              </div></li><li><div>
                +1 matt to latest patch
              </div></li><li><div>
                Commit 8fa012c266657c0bfc55d1077b338fe201122594 in incubator-nifi's branch refs/heads/develop from [~mcgilman]
[ https://git-wip-us.apache.org/repos/asf?p=incubator-nifi.git;h=8fa012c ]

NIFI-271:
- Adding a profile to disable rat check in development mode.
              </div></li><li><div>
                Commit c14b2cebf8e28d898c39acd661e5923f81c1e5e9 in incubator-nifi's branch refs/heads/develop from [~joewitt]
[ https://git-wip-us.apache.org/repos/asf?p=incubator-nifi.git;h=c14b2ce ]

NIFI-271

              </div></li><li><div>
                Commit 5a559e455761666fc3e1680a3dad934b58d687f2 in incubator-nifi's branch refs/heads/develop from [~joewitt]
[ https://git-wip-us.apache.org/repos/asf?p=incubator-nifi.git;h=5a559e4 ]

NIFI-271

              </div></li><li><div>
                Commit 90ae022e54f23537c7d619ae404c467371e2a0d4 in incubator-nifi's branch refs/heads/develop from [~joewitt]
[ https://git-wip-us.apache.org/repos/asf?p=incubator-nifi.git;h=90ae022 ]

NIFI-271

              </div></li><li><div>
                Commit 269e25e9934ca54277f016bdb5a1589bbe021a76 in incubator-nifi's branch refs/heads/develop from [~joewitt]
[ https://git-wip-us.apache.org/repos/asf?p=incubator-nifi.git;h=269e25e ]

NIFI-271

              </div></li><li><div>
                Commit e93c82919135badd3ed1f5759c61f30c4883eb58 in incubator-nifi's branch refs/heads/develop from [~joewitt]
[ https://git-wip-us.apache.org/repos/asf?p=incubator-nifi.git;h=e93c829 ]

NIFI-271

              </div></li><li><div>
                Commit b2a1f5217dd89e8133887d691e56483e9f0e4214 in incubator-nifi's branch refs/heads/develop from [~joewitt]
[ https://git-wip-us.apache.org/repos/asf?p=incubator-nifi.git;h=b2a1f52 ]

NIFI-271

              </div></li><li><div>
                Commit 8f2502c4e476ba3ce00943d9d9f777b0637c1114 in incubator-nifi's branch refs/heads/develop from [~joewitt]
[ https://git-wip-us.apache.org/repos/asf?p=incubator-nifi.git;h=8f2502c ]

NIFI-271

              </div></li><li><div>
                Commit 87e829682fc5a62a2b56e83c98a8be114de9efdb in incubator-nifi's branch refs/heads/develop from [~joewitt]
[ https://git-wip-us.apache.org/repos/asf?p=incubator-nifi.git;h=87e8296 ]

NIFI-271

              </div></li><li><div>
                Just throwing this out there in case others run into this issue... when I first pulled in the latest from upstream/develop and ran a build, the rat plugin failed similarly to what Brian described above. 

After looking into it, it was failing on some directories that had actually been deleted (or maybe moved) but were left over in my fork. Doing "git clean -f -d ." removed those directories and then everything was good.
              </div></li><li><div>
                Commit 548188939c44ed02d8b0ef8e0bbd4513afaade60 in incubator-nifi's branch refs/heads/develop from [~joewitt]
[ https://git-wip-us.apache.org/repos/asf?p=incubator-nifi.git;h=5481889 ]

NIFI-271 chipping away - more work left in standard bundle

              </div></li><li><div>
                [~bbende]: good call. I ran into this myself. Thanks for pointing it out!
              </div></li><li><div>
                Commit d29a2d688e437bae42c12115768cdb038b7406c5 in incubator-nifi's branch refs/heads/develop from [~joewitt]
[ https://git-wip-us.apache.org/repos/asf?p=incubator-nifi.git;h=d29a2d6 ]

NIFI-271

              </div></li><li><div>
                Commit 6a706458d093af061e6b957d99de3ca1bc1f4c30 in incubator-nifi's branch refs/heads/develop from [~joewitt]
[ https://git-wip-us.apache.org/repos/asf?p=incubator-nifi.git;h=6a70645 ]

NIFI-271

              </div></li><li><div>
                Commit 9a3b6bed62e9962ff97f2c76055cd4d49705ff89 in incubator-nifi's branch refs/heads/develop from [~joewitt]
[ https://git-wip-us.apache.org/repos/asf?p=incubator-nifi.git;h=9a3b6be ]

NIFI-271

              </div></li><li><div>
                Commit 10860944d14cc4ddb0805b4085b401ae6dc195b2 in incubator-nifi's branch refs/heads/develop from [~joewitt]
[ https://git-wip-us.apache.org/repos/asf?p=incubator-nifi.git;h=1086094 ]

NIFI-271

              </div></li><li><div>
                Commit 21209b2341533bfd16e751a98d0dc65da8eee45b in incubator-nifi's branch refs/heads/develop from [~joewitt]
[ https://git-wip-us.apache.org/repos/asf?p=incubator-nifi.git;h=21209b2 ]

NIFI-271

              </div></li><li><div>
                Commit e811929f5913586b38f5f95d321623da2f07b64a in incubator-nifi's branch refs/heads/develop from [~joewitt]
[ https://git-wip-us.apache.org/repos/asf?p=incubator-nifi.git;h=e811929 ]

NIFI-271

              </div></li><li><div>
                Commit 1eb4387dbe8964862316d9a2ce2e999651e2124b in incubator-nifi's branch refs/heads/develop from [~joewitt]
[ https://git-wip-us.apache.org/repos/asf?p=incubator-nifi.git;h=1eb4387 ]

NIFI-271

              </div></li><li><div>
                Getting feedback from aldrin piri, matt gilman, and mark payne that RAT is causing builds to be quite long now.  Moving it back to a profile for activation.  It is something that must be done as part of the release process and we can document it as a contribution/review step as well.
              </div></li><li><div>
                Commit a52cf52948d3774f07f8713c5010ee4d7d768a75 in incubator-nifi's branch refs/heads/develop from [~joewitt]
[ https://git-wip-us.apache.org/repos/asf?p=incubator-nifi.git;h=a52cf52 ]

NIFI-271

              </div></li><li><div>
                Commit e1160f5932b59eedf738eca18b8031a58385ca16 in incubator-nifi's branch refs/heads/develop from [~joewitt]
[ https://git-wip-us.apache.org/repos/asf?p=incubator-nifi.git;h=e1160f5 ]

NIFI-271

              </div></li><li><div>
                Commit 525ce7fb2db5c039c3b5d1c36085953f6ca9af10 in incubator-nifi's branch refs/heads/develop from [~joewitt]
[ https://git-wip-us.apache.org/repos/asf?p=incubator-nifi.git;h=525ce7f ]

NIFI-271

              </div></li><li><div>
                Commit e627482734ab701bd0ccc5b5f389340df8ed90f4 in incubator-nifi's branch refs/heads/develop from [~joewitt]
[ https://git-wip-us.apache.org/repos/asf?p=incubator-nifi.git;h=e627482 ]

NIFI-271

              </div></li><li><div>
                forgot to include findbugs and potentially pmd
              </div></li><li><div>
                Commit 6c3256e00a2c10f6968aef65cfec90557f8cfab2 in incubator-nifi's branch refs/heads/develop from [~joewitt]
[ https://git-wip-us.apache.org/repos/asf?p=incubator-nifi.git;h=6c3256e ]

NIFI-271 findbugs is now available by activating the findbugs profile.  Not making required because we need to work down a lot of warnings

              </div></li><li><div>
                Commit 6c3256e00a2c10f6968aef65cfec90557f8cfab2 in incubator-nifi's branch refs/heads/NIFI-292 from [~joewitt]
[ https://git-wip-us.apache.org/repos/asf?p=incubator-nifi.git;h=6c3256e ]

NIFI-271 findbugs is now available by activating the findbugs profile.  Not making required because we need to work down a lot of warnings

              </div></li></ol></div></div></html>