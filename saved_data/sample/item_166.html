<!DOCTYPE html><html><div class="item-title">
        Item 166
      </div> <div class="item-details"><div><b>git_comments:</b> <ol></ol></div><div><b>git_commits:</b> <ol><li><div><div><b>summary:</b> HADOOP-8244. Improve comments on ByteBufferReadable.read. Contributed by Henry Robinson.
                </div><div><b>message:</b> HADOOP-8244. Improve comments on ByteBufferReadable.read. Contributed by Henry Robinson.

(svn merge -c 1309625 from trunk)


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/branch-2@1348209 13f79535-47bb-0310-9956-ffa450edef68

                </div></div></li></ol></div><div><b>github_issues:</b> <ol></ol></div><div><b>github_issues_comments:</b> <ol></ol></div><div><b>github_pulls:</b> <ol></ol></div><div><b>github_pulls_comments:</b> <ol></ol></div><div><b>github_pulls_reviews:</b> <ol></ol></div><div><b>jira_issues:</b> <ol><li><div><div><b>summary:</b> Improve comments on ByteBufferReadable.read
                </div><div><b>description:</b> There are a couple of ways in which the comment on ByteBufferReadable.read can be improved. Since this is a public-facing API with potentially many implementations, it's worth taking the time to get it right.

* We should describe what can become of the byte buffer state in the case of an exception (is the limit changed? where's the position?). For the DFSInputStream implementation, position and limit are unchanged if there is an error, but I don't think that's the right think to mandate for all implementations. 
* We should mention explicitly that 0-byte reads are legitimate - this is particularly important in light of HDFS-3110 which detects support for direct reads by issuing a 0-byte read from libhdfs. 
                </div></div></li></ol></div><div><b>jira_issues_comments:</b> <ol><li><div>
                Patch against trunk. No tests included, because it's a doc update.
              </div></li><li><div><div><b>body:</b> -1 overall.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12521203/HADOOP-8244.0.patch
  against trunk revision .

    +1 @author.  The patch does not contain any @author tags.

    -1 tests included.  The patch doesn't appear to include any new or modified tests.
                        Please justify why no new tests are needed for this patch.
                        Also please list what manual steps were performed to verify this patch.

    +1 javadoc.  The javadoc tool did not generate any warning messages.

    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.

    +1 eclipse:eclipse.  The patch built with eclipse:eclipse.

    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.

    +1 release audit.  The applied patch does not increase the total number of release audit warnings.

    -1 core tests.  The patch failed these unit tests:
                  org.apache.hadoop.fs.viewfs.TestViewFsTrash

    +1 contrib tests.  The patch passed contrib unit tests.

Test results: https://builds.apache.org/job/PreCommit-HADOOP-Build/816//testReport/
Console output: https://builds.apache.org/job/PreCommit-HADOOP-Build/816//console

This message is automatically generated.
                </div><div><b>label:</b> code-design
                </div></div></li><li><div>
                I'm going to go out on a limb and say the test failure is not as a result of this patch :)
              </div></li><li><div>
                Patch looks pretty good to me, Henry. One little comment:

# "After the call, buf.position() and buf.limit() should be unchanged..." - perhaps change this to "after a successful call" ?
              </div></li><li><div>
                Seems reasonable - patch includes Aaron's suggested rewording. 
              </div></li><li><div>
                +1, the patch looks good to me. I'm going to commit this momentarily.
              </div></li><li><div>
                I've just committed this to trunk. Thanks a lot for the contribution, Hank.
              </div></li><li><div><div><b>body:</b> -1 overall.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12521416/HADOOP-8244.1.patch
  against trunk revision .

    +1 @author.  The patch does not contain any @author tags.

    -1 tests included.  The patch doesn't appear to include any new or modified tests.
                        Please justify why no new tests are needed for this patch.
                        Also please list what manual steps were performed to verify this patch.

    +1 javadoc.  The javadoc tool did not generate any warning messages.

    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.

    +1 eclipse:eclipse.  The patch built with eclipse:eclipse.

    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.

    +1 release audit.  The applied patch does not increase the total number of release audit warnings.

    -1 core tests.  The patch failed these unit tests:
                  org.apache.hadoop.fs.viewfs.TestViewFsTrash

    +1 contrib tests.  The patch passed contrib unit tests.

Test results: https://builds.apache.org/job/PreCommit-HADOOP-Build/821//testReport/
Console output: https://builds.apache.org/job/PreCommit-HADOOP-Build/821//console

This message is automatically generated.
                </div><div><b>label:</b> code-design
                </div></div></li><li><div>
                Integrated in Hadoop-Mapreduce-trunk-Commit #2011 (See [https://builds.apache.org/job/Hadoop-Mapreduce-trunk-Commit/2011/])
    HADOOP-8244. Improve comments on ByteBufferReadable.read. Contributed by Henry Robinson. (Revision 1309625)

     Result = SUCCESS
atm : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;view=rev&amp;rev=1309625
Files : 
* /hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt
* /hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/ByteBufferReadable.java

              </div></li><li><div>
                Integrated in Hadoop-Hdfs-trunk-Commit #2074 (See [https://builds.apache.org/job/Hadoop-Hdfs-trunk-Commit/2074/])
    HADOOP-8244. Improve comments on ByteBufferReadable.read. Contributed by Henry Robinson. (Revision 1309625)

     Result = SUCCESS
atm : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;view=rev&amp;rev=1309625
Files : 
* /hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt
* /hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/ByteBufferReadable.java

              </div></li><li><div>
                Integrated in Hadoop-Common-trunk-Commit #1999 (See [https://builds.apache.org/job/Hadoop-Common-trunk-Commit/1999/])
    HADOOP-8244. Improve comments on ByteBufferReadable.read. Contributed by Henry Robinson. (Revision 1309625)

     Result = SUCCESS
atm : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;view=rev&amp;rev=1309625
Files : 
* /hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt
* /hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/ByteBufferReadable.java

              </div></li><li><div>
                Integrated in Hadoop-Hdfs-trunk #1006 (See [https://builds.apache.org/job/Hadoop-Hdfs-trunk/1006/])
    HADOOP-8244. Improve comments on ByteBufferReadable.read. Contributed by Henry Robinson. (Revision 1309625)

     Result = FAILURE
atm : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;view=rev&amp;rev=1309625
Files : 
* /hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt
* /hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/ByteBufferReadable.java

              </div></li><li><div>
                Integrated in Hadoop-Mapreduce-trunk #1041 (See [https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1041/])
    HADOOP-8244. Improve comments on ByteBufferReadable.read. Contributed by Henry Robinson. (Revision 1309625)

     Result = SUCCESS
atm : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;view=rev&amp;rev=1309625
Files : 
* /hadoop/common/trunk/hadoop-common-project/hadoop-common/CHANGES.txt
* /hadoop/common/trunk/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/ByteBufferReadable.java

              </div></li><li><div>
                Committed to branch-2 as well.
              </div></li></ol></div></div></html>