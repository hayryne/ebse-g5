<!DOCTYPE html><html><div class="item-title">
        Item 175
      </div> <div class="item-details"><div><b>git_comments:</b> <ol><li><div>
                 Non-nice easymock mock will fail on any call
              </div></li><li><div>
                *
     * Just check the string split behaviour on various feature strings.
     
              </div></li><li><div>
                *
     * A list of URLs referencing feature repositories that will be added
     * to the karaf instance started by this goal.
     
              </div></li><li><div>
                 Use Object as the service type and use reflection when calling the service,
 because the returned services use the OSGi classloader
              </div></li><li><div>
                *
     * Comma-separated list of features to install.
     
              </div></li></ol></div><div><b>git_commits:</b> <ol><li><div><div><b>summary:</b> [KARAF-5104] This closes #318
                </div><div><b>message:</b> [KARAF-5104] This closes #318

                </div></div></li></ol></div><div><b>github_issues:</b> <ol></ol></div><div><b>github_issues_comments:</b> <ol></ol></div><div><b>github_pulls:</b> <ol><li><div><div><b>title:</b> A fix to KARAF-5104 karaf:run should support a features set
                </div><div><b>body:</b> This pull request is a fix to [KARAF-5104](https://issues.apache.org/jira/browse/KARAF-5104)

This change adds:

1. A parameter to set a list of URLs to feature repositories to add to the karaf started by karaf:run
2. A parameter containing a comma separated list of features to install in the karaf started by karaf:run
3. If karaf:run is set up to deploy the current project artifact and if the current project has packaging pom and an attached file with classifier "features" and type "xml", that attachment will be installed as a feature repository in the karaf started by the karaf:run goal

Even if you decide not to take this change, you might consider the first commit of this pull request, because that is just as-is unit tests of the RunMojo.deploy(BundleContext) method.
                </div></div></li><li><div><div><b>title:</b> A fix to KARAF-5104 karaf:run should support a features set
                </div><div><b>body:</b> This pull request is a fix to [KARAF-5104](https://issues.apache.org/jira/browse/KARAF-5104)

This change adds:

1. A parameter to set a list of URLs to feature repositories to add to the karaf started by karaf:run
2. A parameter containing a comma separated list of features to install in the karaf started by karaf:run
3. If karaf:run is set up to deploy the current project artifact and if the current project has packaging pom and an attached file with classifier "features" and type "xml", that attachment will be installed as a feature repository in the karaf started by the karaf:run goal

Even if you decide not to take this change, you might consider the first commit of this pull request, because that is just as-is unit tests of the RunMojo.deploy(BundleContext) method.
                </div><div><b>label:</b> documentation
                </div></div></li><li><div><div><b>title:</b> A fix to KARAF-5104 karaf:run should support a features set
                </div><div><b>body:</b> This pull request is a fix to [KARAF-5104](https://issues.apache.org/jira/browse/KARAF-5104)

This change adds:

1. A parameter to set a list of URLs to feature repositories to add to the karaf started by karaf:run
2. A parameter containing a comma separated list of features to install in the karaf started by karaf:run
3. If karaf:run is set up to deploy the current project artifact and if the current project has packaging pom and an attached file with classifier "features" and type "xml", that attachment will be installed as a feature repository in the karaf started by the karaf:run goal

Even if you decide not to take this change, you might consider the first commit of this pull request, because that is just as-is unit tests of the RunMojo.deploy(BundleContext) method.
                </div></div></li><li><div><div><b>title:</b> A fix to KARAF-5104 karaf:run should support a features set
                </div><div><b>body:</b> This pull request is a fix to [KARAF-5104](https://issues.apache.org/jira/browse/KARAF-5104)

This change adds:

1. A parameter to set a list of URLs to feature repositories to add to the karaf started by karaf:run
2. A parameter containing a comma separated list of features to install in the karaf started by karaf:run
3. If karaf:run is set up to deploy the current project artifact and if the current project has packaging pom and an attached file with classifier "features" and type "xml", that attachment will be installed as a feature repository in the karaf started by the karaf:run goal

Even if you decide not to take this change, you might consider the first commit of this pull request, because that is just as-is unit tests of the RunMojo.deploy(BundleContext) method.
                </div></div></li><li><div><div><b>title:</b> A fix to KARAF-5104 karaf:run should support a features set
                </div><div><b>body:</b> This pull request is a fix to [KARAF-5104](https://issues.apache.org/jira/browse/KARAF-5104)

This change adds:

1. A parameter to set a list of URLs to feature repositories to add to the karaf started by karaf:run
2. A parameter containing a comma separated list of features to install in the karaf started by karaf:run
3. If karaf:run is set up to deploy the current project artifact and if the current project has packaging pom and an attached file with classifier "features" and type "xml", that attachment will be installed as a feature repository in the karaf started by the karaf:run goal

Even if you decide not to take this change, you might consider the first commit of this pull request, because that is just as-is unit tests of the RunMojo.deploy(BundleContext) method.
                </div></div></li><li><div><div><b>title:</b> A fix to KARAF-5104 karaf:run should support a features set
                </div><div><b>body:</b> This pull request is a fix to [KARAF-5104](https://issues.apache.org/jira/browse/KARAF-5104)

This change adds:

1. A parameter to set a list of URLs to feature repositories to add to the karaf started by karaf:run
2. A parameter containing a comma separated list of features to install in the karaf started by karaf:run
3. If karaf:run is set up to deploy the current project artifact and if the current project has packaging pom and an attached file with classifier "features" and type "xml", that attachment will be installed as a feature repository in the karaf started by the karaf:run goal

Even if you decide not to take this change, you might consider the first commit of this pull request, because that is just as-is unit tests of the RunMojo.deploy(BundleContext) method.
                </div><div><b>label:</b> code-design
                </div></div></li><li><div><div><b>title:</b> A fix to KARAF-5104 karaf:run should support a features set
                </div><div><b>body:</b> This pull request is a fix to [KARAF-5104](https://issues.apache.org/jira/browse/KARAF-5104)

This change adds:

1. A parameter to set a list of URLs to feature repositories to add to the karaf started by karaf:run
2. A parameter containing a comma separated list of features to install in the karaf started by karaf:run
3. If karaf:run is set up to deploy the current project artifact and if the current project has packaging pom and an attached file with classifier "features" and type "xml", that attachment will be installed as a feature repository in the karaf started by the karaf:run goal

Even if you decide not to take this change, you might consider the first commit of this pull request, because that is just as-is unit tests of the RunMojo.deploy(BundleContext) method.
                </div></div></li></ol></div><div><b>github_pulls_comments:</b> <ol><li><div>
                R: @jbonofre
              </div></li><li><div><div><b>body:</b> I will update the user guide accordingly.
                </div><div><b>label:</b> documentation
                </div></div></li></ol></div><div><b>github_pulls_reviews:</b> <ol><li><div>
                Why this sleep of 1s ?
              </div></li><li><div>
                I used my own application to test it and my own application triggers [KARAF-5174](https://issues.apache.org/jira/browse/KARAF-5174). In addition to the uninstall problem there is a startup problem seen in the karaf.log if the features are loaded together (the derby driver fails to be able to create the memory database), but if the liquibase-core feature is installed _before_ the database feature there are no such issues in the karaf.log.

I saw something similar in the karaf.log when running karaf:run on my app, so I tried the 1s sleep to simulate what I do manually at the karaf console.  But it didn't make any difference.  So feel free to drop the sleep if it doesn't make sense.
              </div></li><li><div><div><b>body:</b> Fair enough, let's keep like this as a first step. We will improve later. Thanks.
                </div><div><b>label:</b> code-design
                </div></div></li></ol></div><div><b>jira_issues:</b> <ol><li><div><div><b>summary:</b> karaf:run should support a features set
                </div><div><b>description:</b> Now, {{karaf:run}} can automatically install a bundle in started Karaf instance. The goal should be able to support features XML descriptors and a set of features.
                </div></div></li><li><div><div><b>summary:</b> karaf:run should support a features set
                </div><div><b>description:</b> Now, {{karaf:run}} can automatically install a bundle in started Karaf instance. The goal should be able to support features XML descriptors and a set of features.
                </div></div></li><li><div><div><b>summary:</b> karaf:run should support a features set
                </div><div><b>description:</b> Now, {{karaf:run}} can automatically install a bundle in started Karaf instance. The goal should be able to support features XML descriptors and a set of features.
                </div></div></li><li><div><div><b>summary:</b> karaf:run should support a features set
                </div><div><b>description:</b> Now, {{karaf:run}} can automatically install a bundle in started Karaf instance. The goal should be able to support features XML descriptors and a set of features.
                </div></div></li><li><div><div><b>summary:</b> karaf:run should support a features set
                </div><div><b>description:</b> Now, {{karaf:run}} can automatically install a bundle in started Karaf instance. The goal should be able to support features XML descriptors and a set of features.
                </div></div></li></ol></div><div><b>jira_issues_comments:</b> <ol><li><div>
                GitHub user steinarb opened a pull request:

    https://github.com/apache/karaf/pull/318

    A fix to KARAF-5104 karaf:run should support a features set

    This pull request is a fix to [KARAF-5104](https://issues.apache.org/jira/browse/KARAF-5104)
    
    This change adds:
    
    1. A parameter to set a list of URLs to feature repositories to add to the karaf started by karaf:run
    2. A parameter containing a comma separated list of features to install in the karaf started by karaf:run
    3. If karaf:run is set up to deploy the current project artifact and if the current project has packaging pom and an attached file with classifier "features" and type "xml", that attachment will be installed as a feature repository in the karaf started by the karaf:run goal
    
    Even if you decide not to take this change, you might consider the first commit of this pull request, because that is just as-is unit tests of the RunMojo.deploy(BundleContext) method.

You can merge this pull request into a Git repository by running:

    $ git pull https://github.com/steinarb/karaf master

Alternatively you can review and apply these changes as the patch at:

    https://github.com/apache/karaf/pull/318.patch

To close this pull request, make a commit to your master/trunk branch
with (at least) the following in the commit message:

    This closes #318
    
----
commit 484b5615ba66359337ffb8aa171df5186b7921fd
Author: Steinar Bang &lt;sb@dod.no&gt;
Date:   2017-06-10T18:44:10Z

    Add as-is test for RunMojo.deploy(BundleContext).

commit 53587ba5dcb4e78e5af54447ed98d15aae1da2c6
Author: Steinar Bang &lt;sb@dod.no&gt;
Date:   2017-06-10T23:42:23Z

    KARAF-5104 Use attachment of type "xml" with classifier "features" as feature repository of the karaf instance started by the karaf:run goal.

commit 6857832fb957ad908cf3a73126d60eb72f54ecff
Author: Steinar Bang &lt;sb@dod.no&gt;
Date:   2017-06-11T17:51:17Z

    KARAF-5104 Add a feature list parameter that will be installed in the karaf instance started by the karaf:run goal.

commit 43795d304689e516ea2ec3b7293f4ac77bb79b0c
Author: Steinar Bang &lt;sb@dod.no&gt;
Date:   2017-06-11T19:18:06Z

    KARAF-5104 Add a parameter for feature repositories that will be installed in the karaf instance deployed by the karaf:run goal.
    
    The feature repositories are installed before the features.

commit 3ec1f5cad7990da455312749a7c5f119797ff46e
Author: Steinar Bang &lt;sb@dod.no&gt;
Date:   2017-06-12T16:35:36Z

    KARAF-5104 The karaf:run goal can use the feature repositories and features independent of whether the current target is a feature repository or not.

commit 3d2e5a3360b95a457fcde3c8b4532e8267da258a
Author: Steinar Bang &lt;sb@dod.no&gt;
Date:   2017-06-12T17:08:26Z

    KARAF-5104 Wait 1 second between each feature install in the karaf:run maven goal.

----

              </div></li><li><div>
                Commit a6cd700cda63db128d0622fc89073162e967c3bd in karaf's branch refs/heads/master from [~sb@dod.no]
[ https://git-wip-us.apache.org/repos/asf?p=karaf.git;h=a6cd700 ]

[KARAF-5104] Add feature support in karaf:run mojo

              </div></li><li><div>
                Commit ffe593555dad8b94399667f8e5c9474554965cdb in karaf's branch refs/heads/master from [~jbonofre]
[ https://git-wip-us.apache.org/repos/asf?p=karaf.git;h=ffe5935 ]

[KARAF-5104] This closes #318

              </div></li><li><div>
                Github user asfgit closed the pull request at:

    https://github.com/apache/karaf/pull/318

              </div></li><li><div>
                Commit de932d3348c20f4cd143ff560612658e93f55aa7 in karaf's branch refs/heads/karaf-4.1.x from [~sb@dod.no]
[ https://git-wip-us.apache.org/repos/asf?p=karaf.git;h=de932d3 ]

[KARAF-5104] Add feature support in karaf:run mojo

              </div></li></ol></div></div></html>