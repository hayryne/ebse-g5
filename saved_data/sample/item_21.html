<!DOCTYPE html><html><div class="item-title">
        Item 21
      </div> <div class="item-details"><div><b>git_comments:</b> <ol></ol></div><div><b>git_commits:</b> <ol><li><div><div><b>summary:</b> HBASE-5279 NPE in Master after upgrading to 0.92.0
                </div><div><b>message:</b> HBASE-5279 NPE in Master after upgrading to 0.92.0

git-svn-id: https://svn.apache.org/repos/asf/hbase/trunk@1245767 13f79535-47bb-0310-9956-ffa450edef68

                </div></div></li></ol></div><div><b>github_issues:</b> <ol></ol></div><div><b>github_issues_comments:</b> <ol></ol></div><div><b>github_pulls:</b> <ol></ol></div><div><b>github_pulls_comments:</b> <ol></ol></div><div><b>github_pulls_reviews:</b> <ol></ol></div><div><b>jira_issues:</b> <ol><li><div><div><b>summary:</b> NPE in Master after upgrading to 0.92.0
                </div><div><b>description:</b> I have upgraded my environment from 0.90.4 to 0.92.0

after the table migration I get the following error in the master (permanent)

{noformat}
2012-01-25 18:23:48,648 FATAL master-namenode,60000,1327512209588 org.apache.hadoop.hbase.master.HMaster - Unhandled exception. Starting shutdown.
java.lang.NullPointerException
        at org.apache.hadoop.hbase.master.AssignmentManager.rebuildUserRegions(AssignmentManager.java:2190)
        at org.apache.hadoop.hbase.master.AssignmentManager.joinCluster(AssignmentManager.java:323)
        at org.apache.hadoop.hbase.master.HMaster.finishInitialization(HMaster.java:501)
        at org.apache.hadoop.hbase.master.HMaster.run(HMaster.java:326)
        at java.lang.Thread.run(Thread.java:662)
2012-01-25 18:23:48,650 INFO namenode,60000,1327512209588 org.apache.hadoop.hbase.master.HMaster - Aborting
{noformat}

I think that's because I had a hard crash in the cluster a while ago - and the following WARN since then

{noformat}
2012-01-25 21:20:47,121 WARN namenode,60000,1327513078123-CatalogJanitor org.apache.hadoop.hbase.master.CatalogJanitor - REGIONINFO_QUALIFIER is empty in keyvalues={emails,,xxx./info:server/1314336400471/Put/vlen=38, emails,,1314189353300.xxx./info:serverstartcode/1314336400471/Put/vlen=8}
{noformat}

my patch was simple to go around the NPE (as the other code around the lines)
but I don't know if that's correct

                </div></div></li><li><div><div><b>summary:</b> NPE in Master after upgrading to 0.92.0
                </div><div><b>description:</b> I have upgraded my environment from 0.90.4 to 0.92.0

after the table migration I get the following error in the master (permanent)

{noformat}
2012-01-25 18:23:48,648 FATAL master-namenode,60000,1327512209588 org.apache.hadoop.hbase.master.HMaster - Unhandled exception. Starting shutdown.
java.lang.NullPointerException
        at org.apache.hadoop.hbase.master.AssignmentManager.rebuildUserRegions(AssignmentManager.java:2190)
        at org.apache.hadoop.hbase.master.AssignmentManager.joinCluster(AssignmentManager.java:323)
        at org.apache.hadoop.hbase.master.HMaster.finishInitialization(HMaster.java:501)
        at org.apache.hadoop.hbase.master.HMaster.run(HMaster.java:326)
        at java.lang.Thread.run(Thread.java:662)
2012-01-25 18:23:48,650 INFO namenode,60000,1327512209588 org.apache.hadoop.hbase.master.HMaster - Aborting
{noformat}

I think that's because I had a hard crash in the cluster a while ago - and the following WARN since then

{noformat}
2012-01-25 21:20:47,121 WARN namenode,60000,1327513078123-CatalogJanitor org.apache.hadoop.hbase.master.CatalogJanitor - REGIONINFO_QUALIFIER is empty in keyvalues={emails,,xxx./info:server/1314336400471/Put/vlen=38, emails,,1314189353300.xxx./info:serverstartcode/1314336400471/Put/vlen=8}
{noformat}

my patch was simple to go around the NPE (as the other code around the lines)
but I don't know if that's correct

                </div></div></li><li><div><div><b>summary:</b> NPE in Master after upgrading to 0.92.0
                </div><div><b>description:</b> I have upgraded my environment from 0.90.4 to 0.92.0

after the table migration I get the following error in the master (permanent)

{noformat}
2012-01-25 18:23:48,648 FATAL master-namenode,60000,1327512209588 org.apache.hadoop.hbase.master.HMaster - Unhandled exception. Starting shutdown.
java.lang.NullPointerException
        at org.apache.hadoop.hbase.master.AssignmentManager.rebuildUserRegions(AssignmentManager.java:2190)
        at org.apache.hadoop.hbase.master.AssignmentManager.joinCluster(AssignmentManager.java:323)
        at org.apache.hadoop.hbase.master.HMaster.finishInitialization(HMaster.java:501)
        at org.apache.hadoop.hbase.master.HMaster.run(HMaster.java:326)
        at java.lang.Thread.run(Thread.java:662)
2012-01-25 18:23:48,650 INFO namenode,60000,1327512209588 org.apache.hadoop.hbase.master.HMaster - Aborting
{noformat}

I think that's because I had a hard crash in the cluster a while ago - and the following WARN since then

{noformat}
2012-01-25 21:20:47,121 WARN namenode,60000,1327513078123-CatalogJanitor org.apache.hadoop.hbase.master.CatalogJanitor - REGIONINFO_QUALIFIER is empty in keyvalues={emails,,xxx./info:server/1314336400471/Put/vlen=38, emails,,1314189353300.xxx./info:serverstartcode/1314336400471/Put/vlen=8}
{noformat}

my patch was simple to go around the NPE (as the other code around the lines)
but I don't know if that's correct

                </div></div></li><li><div><div><b>summary:</b> NPE in Master after upgrading to 0.92.0
                </div><div><b>description:</b> I have upgraded my environment from 0.90.4 to 0.92.0

after the table migration I get the following error in the master (permanent)

{noformat}
2012-01-25 18:23:48,648 FATAL master-namenode,60000,1327512209588 org.apache.hadoop.hbase.master.HMaster - Unhandled exception. Starting shutdown.
java.lang.NullPointerException
        at org.apache.hadoop.hbase.master.AssignmentManager.rebuildUserRegions(AssignmentManager.java:2190)
        at org.apache.hadoop.hbase.master.AssignmentManager.joinCluster(AssignmentManager.java:323)
        at org.apache.hadoop.hbase.master.HMaster.finishInitialization(HMaster.java:501)
        at org.apache.hadoop.hbase.master.HMaster.run(HMaster.java:326)
        at java.lang.Thread.run(Thread.java:662)
2012-01-25 18:23:48,650 INFO namenode,60000,1327512209588 org.apache.hadoop.hbase.master.HMaster - Aborting
{noformat}

I think that's because I had a hard crash in the cluster a while ago - and the following WARN since then

{noformat}
2012-01-25 21:20:47,121 WARN namenode,60000,1327513078123-CatalogJanitor org.apache.hadoop.hbase.master.CatalogJanitor - REGIONINFO_QUALIFIER is empty in keyvalues={emails,,xxx./info:server/1314336400471/Put/vlen=38, emails,,1314189353300.xxx./info:serverstartcode/1314336400471/Put/vlen=8}
{noformat}

my patch was simple to go around the NPE (as the other code around the lines)
but I don't know if that's correct

                </div></div></li><li><div><div><b>summary:</b> NPE in Master after upgrading to 0.92.0
                </div><div><b>description:</b> I have upgraded my environment from 0.90.4 to 0.92.0

after the table migration I get the following error in the master (permanent)

{noformat}
2012-01-25 18:23:48,648 FATAL master-namenode,60000,1327512209588 org.apache.hadoop.hbase.master.HMaster - Unhandled exception. Starting shutdown.
java.lang.NullPointerException
        at org.apache.hadoop.hbase.master.AssignmentManager.rebuildUserRegions(AssignmentManager.java:2190)
        at org.apache.hadoop.hbase.master.AssignmentManager.joinCluster(AssignmentManager.java:323)
        at org.apache.hadoop.hbase.master.HMaster.finishInitialization(HMaster.java:501)
        at org.apache.hadoop.hbase.master.HMaster.run(HMaster.java:326)
        at java.lang.Thread.run(Thread.java:662)
2012-01-25 18:23:48,650 INFO namenode,60000,1327512209588 org.apache.hadoop.hbase.master.HMaster - Aborting
{noformat}

I think that's because I had a hard crash in the cluster a while ago - and the following WARN since then

{noformat}
2012-01-25 21:20:47,121 WARN namenode,60000,1327513078123-CatalogJanitor org.apache.hadoop.hbase.master.CatalogJanitor - REGIONINFO_QUALIFIER is empty in keyvalues={emails,,xxx./info:server/1314336400471/Put/vlen=38, emails,,1314189353300.xxx./info:serverstartcode/1314336400471/Put/vlen=8}
{noformat}

my patch was simple to go around the NPE (as the other code around the lines)
but I don't know if that's correct

                </div><div><b>label:</b> code-design
                </div></div></li><li><div><div><b>summary:</b> NPE in Master after upgrading to 0.92.0
                </div><div><b>description:</b> I have upgraded my environment from 0.90.4 to 0.92.0

after the table migration I get the following error in the master (permanent)

{noformat}
2012-01-25 18:23:48,648 FATAL master-namenode,60000,1327512209588 org.apache.hadoop.hbase.master.HMaster - Unhandled exception. Starting shutdown.
java.lang.NullPointerException
        at org.apache.hadoop.hbase.master.AssignmentManager.rebuildUserRegions(AssignmentManager.java:2190)
        at org.apache.hadoop.hbase.master.AssignmentManager.joinCluster(AssignmentManager.java:323)
        at org.apache.hadoop.hbase.master.HMaster.finishInitialization(HMaster.java:501)
        at org.apache.hadoop.hbase.master.HMaster.run(HMaster.java:326)
        at java.lang.Thread.run(Thread.java:662)
2012-01-25 18:23:48,650 INFO namenode,60000,1327512209588 org.apache.hadoop.hbase.master.HMaster - Aborting
{noformat}

I think that's because I had a hard crash in the cluster a while ago - and the following WARN since then

{noformat}
2012-01-25 21:20:47,121 WARN namenode,60000,1327513078123-CatalogJanitor org.apache.hadoop.hbase.master.CatalogJanitor - REGIONINFO_QUALIFIER is empty in keyvalues={emails,,xxx./info:server/1314336400471/Put/vlen=38, emails,,1314189353300.xxx./info:serverstartcode/1314336400471/Put/vlen=8}
{noformat}

my patch was simple to go around the NPE (as the other code around the lines)
but I don't know if that's correct

                </div></div></li><li><div><div><b>summary:</b> NPE in Master after upgrading to 0.92.0
                </div><div><b>description:</b> I have upgraded my environment from 0.90.4 to 0.92.0

after the table migration I get the following error in the master (permanent)

{noformat}
2012-01-25 18:23:48,648 FATAL master-namenode,60000,1327512209588 org.apache.hadoop.hbase.master.HMaster - Unhandled exception. Starting shutdown.
java.lang.NullPointerException
        at org.apache.hadoop.hbase.master.AssignmentManager.rebuildUserRegions(AssignmentManager.java:2190)
        at org.apache.hadoop.hbase.master.AssignmentManager.joinCluster(AssignmentManager.java:323)
        at org.apache.hadoop.hbase.master.HMaster.finishInitialization(HMaster.java:501)
        at org.apache.hadoop.hbase.master.HMaster.run(HMaster.java:326)
        at java.lang.Thread.run(Thread.java:662)
2012-01-25 18:23:48,650 INFO namenode,60000,1327512209588 org.apache.hadoop.hbase.master.HMaster - Aborting
{noformat}

I think that's because I had a hard crash in the cluster a while ago - and the following WARN since then

{noformat}
2012-01-25 21:20:47,121 WARN namenode,60000,1327513078123-CatalogJanitor org.apache.hadoop.hbase.master.CatalogJanitor - REGIONINFO_QUALIFIER is empty in keyvalues={emails,,xxx./info:server/1314336400471/Put/vlen=38, emails,,1314189353300.xxx./info:serverstartcode/1314336400471/Put/vlen=8}
{noformat}

my patch was simple to go around the NPE (as the other code around the lines)
but I don't know if that's correct

                </div></div></li><li><div><div><b>summary:</b> NPE in Master after upgrading to 0.92.0
                </div><div><b>description:</b> I have upgraded my environment from 0.90.4 to 0.92.0

after the table migration I get the following error in the master (permanent)

{noformat}
2012-01-25 18:23:48,648 FATAL master-namenode,60000,1327512209588 org.apache.hadoop.hbase.master.HMaster - Unhandled exception. Starting shutdown.
java.lang.NullPointerException
        at org.apache.hadoop.hbase.master.AssignmentManager.rebuildUserRegions(AssignmentManager.java:2190)
        at org.apache.hadoop.hbase.master.AssignmentManager.joinCluster(AssignmentManager.java:323)
        at org.apache.hadoop.hbase.master.HMaster.finishInitialization(HMaster.java:501)
        at org.apache.hadoop.hbase.master.HMaster.run(HMaster.java:326)
        at java.lang.Thread.run(Thread.java:662)
2012-01-25 18:23:48,650 INFO namenode,60000,1327512209588 org.apache.hadoop.hbase.master.HMaster - Aborting
{noformat}

I think that's because I had a hard crash in the cluster a while ago - and the following WARN since then

{noformat}
2012-01-25 21:20:47,121 WARN namenode,60000,1327513078123-CatalogJanitor org.apache.hadoop.hbase.master.CatalogJanitor - REGIONINFO_QUALIFIER is empty in keyvalues={emails,,xxx./info:server/1314336400471/Put/vlen=38, emails,,1314189353300.xxx./info:serverstartcode/1314336400471/Put/vlen=8}
{noformat}

my patch was simple to go around the NPE (as the other code around the lines)
but I don't know if that's correct

                </div></div></li><li><div><div><b>summary:</b> NPE in Master after upgrading to 0.92.0
                </div><div><b>description:</b> I have upgraded my environment from 0.90.4 to 0.92.0

after the table migration I get the following error in the master (permanent)

{noformat}
2012-01-25 18:23:48,648 FATAL master-namenode,60000,1327512209588 org.apache.hadoop.hbase.master.HMaster - Unhandled exception. Starting shutdown.
java.lang.NullPointerException
        at org.apache.hadoop.hbase.master.AssignmentManager.rebuildUserRegions(AssignmentManager.java:2190)
        at org.apache.hadoop.hbase.master.AssignmentManager.joinCluster(AssignmentManager.java:323)
        at org.apache.hadoop.hbase.master.HMaster.finishInitialization(HMaster.java:501)
        at org.apache.hadoop.hbase.master.HMaster.run(HMaster.java:326)
        at java.lang.Thread.run(Thread.java:662)
2012-01-25 18:23:48,650 INFO namenode,60000,1327512209588 org.apache.hadoop.hbase.master.HMaster - Aborting
{noformat}

I think that's because I had a hard crash in the cluster a while ago - and the following WARN since then

{noformat}
2012-01-25 21:20:47,121 WARN namenode,60000,1327513078123-CatalogJanitor org.apache.hadoop.hbase.master.CatalogJanitor - REGIONINFO_QUALIFIER is empty in keyvalues={emails,,xxx./info:server/1314336400471/Put/vlen=38, emails,,1314189353300.xxx./info:serverstartcode/1314336400471/Put/vlen=8}
{noformat}

my patch was simple to go around the NPE (as the other code around the lines)
but I don't know if that's correct

                </div></div></li></ol></div><div><b>jira_issues_comments:</b> <ol><li><div>
                Skipping should be fine.  You have a scan of .META. from before upgrade?

Are you up now?
              </div></li><li><div>
                unfortunately I have no scan from .META. from before the upgrade.
but with this patch I am up now :-)
              </div></li><li><div>
                Consider this for inclusion in 0.92.1
              </div></li><li><div>
                Version of patch that will work w/ hadoopqa
              </div></li><li><div><div><b>body:</b> -1 overall.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12515016/HBASE-5279-v2.patch
  against trunk revision .

    +1 @author.  The patch does not contain any @author tags.

    -1 tests included.  The patch doesn't appear to include any new or modified tests.
                        Please justify why no new tests are needed for this patch.
                        Also please list what manual steps were performed to verify this patch.

    -1 javadoc.  The javadoc tool appears to have generated -136 warning messages.

    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.

    -1 findbugs.  The patch appears to introduce 158 new Findbugs (version 1.3.9) warnings.

    +1 release audit.  The applied patch does not increase the total number of release audit warnings.

     -1 core tests.  The patch failed these unit tests:
                       org.apache.hadoop.hbase.mapreduce.TestImportTsv
                  org.apache.hadoop.hbase.mapred.TestTableMapReduce
                  org.apache.hadoop.hbase.mapreduce.TestHFileOutputFormat

Test results: https://builds.apache.org/job/PreCommit-HBASE-Build/982//testReport/
Findbugs warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/982//artifact/trunk/patchprocess/newPatchFindbugsWarnings.html
Console output: https://builds.apache.org/job/PreCommit-HBASE-Build/982//console

This message is automatically generated.
                </div><div><b>label:</b> code-design
                </div></div></li><li><div>
                Committed to 0.92 and to TRUNK.  Thanks for the patch Tobias.
              </div></li><li><div>
                Integrated in HBase-0.92 #288 (See [https://builds.apache.org/job/HBase-0.92/288/])
    HBASE-5279 NPE in Master after upgrading to 0.92.0 (Revision 1245769)

     Result = SUCCESS
stack : 
Files : 
* /hbase/branches/0.92/CHANGES.txt
* /hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/catalog/MetaReader.java
* /hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/master/AssignmentManager.java

              </div></li><li><div>
                Integrated in HBase-TRUNK-security #114 (See [https://builds.apache.org/job/HBase-TRUNK-security/114/])
    HBASE-5279 NPE in Master after upgrading to 0.92.0 -- REVERT OVERCOMMIT TO HREGION (Revision 1245768)
HBASE-5279 NPE in Master after upgrading to 0.92.0 (Revision 1245767)

     Result = FAILURE
stack : 
Files : 
* /hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java

stack : 
Files : 
* /hbase/trunk/src/main/java/org/apache/hadoop/hbase/catalog/MetaReader.java
* /hbase/trunk/src/main/java/org/apache/hadoop/hbase/master/AssignmentManager.java
* /hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java

              </div></li><li><div>
                Integrated in HBase-TRUNK #2665 (See [https://builds.apache.org/job/HBase-TRUNK/2665/])
    HBASE-5279 NPE in Master after upgrading to 0.92.0 -- REVERT OVERCOMMIT TO HREGION (Revision 1245768)
HBASE-5279 NPE in Master after upgrading to 0.92.0 (Revision 1245767)

     Result = FAILURE
stack : 
Files : 
* /hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java

stack : 
Files : 
* /hbase/trunk/src/main/java/org/apache/hadoop/hbase/catalog/MetaReader.java
* /hbase/trunk/src/main/java/org/apache/hadoop/hbase/master/AssignmentManager.java
* /hbase/trunk/src/main/java/org/apache/hadoop/hbase/regionserver/HRegion.java

              </div></li><li><div>
                Integrated in HBase-0.92-security #91 (See [https://builds.apache.org/job/HBase-0.92-security/91/])
    HBASE-5279 NPE in Master after upgrading to 0.92.0 (Revision 1245769)

     Result = FAILURE
stack : 
Files : 
* /hbase/branches/0.92/CHANGES.txt
* /hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/catalog/MetaReader.java
* /hbase/branches/0.92/src/main/java/org/apache/hadoop/hbase/master/AssignmentManager.java

              </div></li><li><div>
                This issue was closed as part of a bulk closing operation on 2015-11-20. All issues that have been resolved and where all fixVersions have been released have been closed (following discussions on the mailing list).
              </div></li></ol></div></div></html>