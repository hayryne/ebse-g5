<!DOCTYPE html><html><div class="item-title">
        Item 141
      </div> <div class="item-details"><div><b>git_comments:</b> <ol></ol></div><div><b>git_commits:</b> <ol><li><div><div><b>summary:</b> HDFS-2373. Commands using webhdfs and hftp print unnecessary debug info on the console with security enabled. Contributed by Arpit Gupta.
                </div><div><b>message:</b> HDFS-2373. Commands using webhdfs and hftp print unnecessary debug info on the console with security enabled. Contributed by Arpit Gupta.



git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1176654 13f79535-47bb-0310-9956-ffa450edef68

                </div></div></li></ol></div><div><b>github_issues:</b> <ol></ol></div><div><b>github_issues_comments:</b> <ol></ol></div><div><b>github_pulls:</b> <ol></ol></div><div><b>github_pulls_comments:</b> <ol></ol></div><div><b>github_pulls_reviews:</b> <ol></ol></div><div><b>jira_issues:</b> <ol><li><div><div><b>summary:</b> Commands using webhdfs and hftp print unnecessary debug information on the console with security enabled
                </div><div><b>description:</b> run an hdfs command using either hftp or webhdfs and it prints the following line to the console (system out)

Retrieving token from: https://NN_HOST:50470/getDelegationToken


Probably in the code where we get the delegation token. This should be removed as people using the dfs commands to get a handle to the content such as dfs -cat will now get an extra line that is not part of the actual content. This should either be only in the log or not logged at all.
                </div></div></li></ol></div><div><b>jira_issues_comments:</b> <ol><li><div>
                attached a patch for 20 security branch. trunk does not have the statement. Changed 20s to LOG.debug instead of System.out
              </div></li><li><div>
                -1 overall.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12496638/HDFS-2373.20s.patch
  against trunk revision .

    +1 @author.  The patch does not contain any @author tags.

    -1 tests included.  The patch doesn't appear to include any new or modified tests.
                        Please justify why no new tests are needed for this patch.
                        Also please list what manual steps were performed to verify this patch.

    -1 patch.  The patch command could not apply the patch.

Console output: https://builds.apache.org/job/PreCommit-HDFS-Build/1296//console

This message is automatically generated.
              </div></li><li><div>
                - There are quite a few System.out.println(..) in DelegationTokenFetcher.  I think all of them should change to LOG.debug(..).
- Should check LOG.isDebugEnabled() before calling LOG.debug(..).
- Need a patch for trunk.
              </div></li><li><div>
                Thanks for the input Nicholas. I have made the changes and attached a patch for trunk. I added an additional debug statement which was there in 20 security but not in trunk.
              </div></li><li><div><div><b>body:</b> Updated the patch one of the braces was not aligned
                </div><div><b>label:</b> code-design
                </div></div></li><li><div>
                updated patch for 20 security
              </div></li><li><div><div><b>body:</b> -1 overall.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12496718/HDFS-2373.20s-1.patch
  against trunk revision .

    +1 @author.  The patch does not contain any @author tags.

    -1 tests included.  The patch doesn't appear to include any new or modified tests.
                        Please justify why no new tests are needed for this patch.
                        Also please list what manual steps were performed to verify this patch.

    -1 patch.  The patch command could not apply the patch.

Console output: https://builds.apache.org/job/PreCommit-HDFS-Build/1301//console

This message is automatically generated.
                </div><div><b>label:</b> test
                </div></div></li><li><div>
                uploading the trunk patch again so that is the latest one used by hadoopqa
              </div></li><li><div><div><b>body:</b> -1 overall.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12496709/HDFS-2373.patch
  against trunk revision .

    +1 @author.  The patch does not contain any @author tags.

    -1 tests included.  The patch doesn't appear to include any new or modified tests.
                        Please justify why no new tests are needed for this patch.
                        Also please list what manual steps were performed to verify this patch.

    +1 javadoc.  The javadoc tool did not generate any warning messages.

    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.

    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.

    +1 release audit.  The applied patch does not increase the total number of release audit warnings.

    -1 core tests.  The patch failed these unit tests:
                  org.apache.hadoop.hdfs.TestDfsOverAvroRpc
                  org.apache.hadoop.hdfs.server.blockmanagement.TestHost2NodesMap
                  org.apache.hadoop.hdfs.server.datanode.TestReplicasMap

    +1 contrib tests.  The patch passed contrib unit tests.

Test results: https://builds.apache.org/job/PreCommit-HDFS-Build/1300//testReport/
Console output: https://builds.apache.org/job/PreCommit-HDFS-Build/1300//console

This message is automatically generated.
                </div><div><b>label:</b> code-design
                </div></div></li><li><div>
                trying to get hudson to pick the correct file.
              </div></li><li><div>
                submitting patch again, hoping it picks the latest file.
              </div></li><li><div><div><b>body:</b> -1 overall.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12496767/HDFS-2373-1.patch
  against trunk revision .

    +1 @author.  The patch does not contain any @author tags.

    -1 tests included.  The patch doesn't appear to include any new or modified tests.
                        Please justify why no new tests are needed for this patch.
                        Also please list what manual steps were performed to verify this patch.

    +1 javadoc.  The javadoc tool did not generate any warning messages.

    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.

    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.

    +1 release audit.  The applied patch does not increase the total number of release audit warnings.

    -1 core tests.  The patch failed these unit tests:
                  org.apache.hadoop.hdfs.TestDfsOverAvroRpc
                  org.apache.hadoop.hdfs.server.blockmanagement.TestHost2NodesMap
                  org.apache.hadoop.hdfs.server.datanode.TestReplicasMap

    +1 contrib tests.  The patch passed contrib unit tests.

Test results: https://builds.apache.org/job/PreCommit-HDFS-Build/1302//testReport/
Console output: https://builds.apache.org/job/PreCommit-HDFS-Build/1302//console

This message is automatically generated.
                </div><div><b>label:</b> code-design
                </div></div></li><li><div><div><b>body:</b> -1 overall.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12496769/HDFS-2373.patch
  against trunk revision .

    +1 @author.  The patch does not contain any @author tags.

    -1 tests included.  The patch doesn't appear to include any new or modified tests.
                        Please justify why no new tests are needed for this patch.
                        Also please list what manual steps were performed to verify this patch.

    +1 javadoc.  The javadoc tool did not generate any warning messages.

    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.

    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.

    +1 release audit.  The applied patch does not increase the total number of release audit warnings.

    -1 core tests.  The patch failed these unit tests:
                  org.apache.hadoop.hdfs.TestDfsOverAvroRpc
                  org.apache.hadoop.hdfs.server.blockmanagement.TestHost2NodesMap
                  org.apache.hadoop.hdfs.TestDFSUpgrade

    +1 contrib tests.  The patch passed contrib unit tests.

Test results: https://builds.apache.org/job/PreCommit-HDFS-Build/1303//testReport/
Console output: https://builds.apache.org/job/PreCommit-HDFS-Build/1303//console

This message is automatically generated.
                </div><div><b>label:</b> code-design
                </div></div></li><li><div>
                no tests added as just changed System.out to LOG.debug. Test failures are not related to this jira.
              </div></li><li><div>
                +1 for both 205 and trunk patch.
              </div></li><li><div>
                I committed the patch to 0.20.205, 0.20-security and trunk. Thank you Arpit.
              </div></li><li><div>
                Integrated in Hadoop-Common-trunk-Commit #967 (See [https://builds.apache.org/job/Hadoop-Common-trunk-Commit/967/])
    HDFS-2373. Commands using webhdfs and hftp print unnecessary debug info on the console with security enabled. Contributed by Arpit Gupta.

suresh : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;view=rev&amp;rev=1176654
Files : 
* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt
* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/tools/DelegationTokenFetcher.java

              </div></li><li><div>
                Integrated in Hadoop-Hdfs-trunk-Commit #1045 (See [https://builds.apache.org/job/Hadoop-Hdfs-trunk-Commit/1045/])
    HDFS-2373. Commands using webhdfs and hftp print unnecessary debug info on the console with security enabled. Contributed by Arpit Gupta.

suresh : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;view=rev&amp;rev=1176654
Files : 
* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt
* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/tools/DelegationTokenFetcher.java

              </div></li><li><div>
                Integrated in Hadoop-Mapreduce-trunk-Commit #988 (See [https://builds.apache.org/job/Hadoop-Mapreduce-trunk-Commit/988/])
    HDFS-2373. Commands using webhdfs and hftp print unnecessary debug info on the console with security enabled. Contributed by Arpit Gupta.

suresh : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;view=rev&amp;rev=1176654
Files : 
* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt
* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/tools/DelegationTokenFetcher.java

              </div></li><li><div>
                Integrated in Hadoop-Hdfs-trunk #814 (See [https://builds.apache.org/job/Hadoop-Hdfs-trunk/814/])
    HDFS-2373. Commands using webhdfs and hftp print unnecessary debug info on the console with security enabled. Contributed by Arpit Gupta.

suresh : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;view=rev&amp;rev=1176654
Files : 
* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt
* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/tools/DelegationTokenFetcher.java

              </div></li><li><div>
                Integrated in Hadoop-Mapreduce-trunk #844 (See [https://builds.apache.org/job/Hadoop-Mapreduce-trunk/844/])
    HDFS-2373. Commands using webhdfs and hftp print unnecessary debug info on the console with security enabled. Contributed by Arpit Gupta.

suresh : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;view=rev&amp;rev=1176654
Files : 
* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt
* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/tools/DelegationTokenFetcher.java

              </div></li><li><div>
                Closed upon release of 0.20.205.0
              </div></li><li><div>
                Good candidate for merging to branch 23.
              </div></li><li><div>
                in case someone goes back and spelunks on this issue like I have been:  this was never committed to 0.23 or any of its descendents.  parts have been incorporated via other patches, but not everything.  so yes, this patch has been sitting committed in trunk but unreleased for ~4.5 years...

              </div></li></ol></div></div></html>