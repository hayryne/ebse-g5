<!DOCTYPE html><html><div class="item-title">
        Item 162
      </div> <div class="item-details"><div><b>git_comments:</b> <ol></ol></div><div><b>git_commits:</b> <ol><li><div><div><b>summary:</b> YARN-82. Correct the fix version in CHANGES.txt
                </div><div><b>message:</b> YARN-82. Correct the fix version in CHANGES.txt


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1388340 13f79535-47bb-0310-9956-ffa450edef68

                </div></div></li></ol></div><div><b>github_issues:</b> <ol></ol></div><div><b>github_issues_comments:</b> <ol></ol></div><div><b>github_pulls:</b> <ol></ol></div><div><b>github_pulls_comments:</b> <ol></ol></div><div><b>github_pulls_reviews:</b> <ol></ol></div><div><b>jira_issues:</b> <ol><li><div><div><b>summary:</b> YARN local-dirs defaults to /tmp/nm-local-dir
                </div><div><b>description:</b> {{yarn.nodemanager.local-dirs}} defaults to {{/tmp/nm-local-dir}}.  It should be {hadoop.tmp.dir}/nm-local-dir or similar.  Among other problems, this can prevent multiple test clusters from starting on the same machine.

Thanks to Hemanth Yamijala for reporting this issue.
                </div><div><b>label:</b> code-design
                </div></div></li><li><div><div><b>summary:</b> YARN local-dirs defaults to /tmp/nm-local-dir
                </div><div><b>description:</b> {{yarn.nodemanager.local-dirs}} defaults to {{/tmp/nm-local-dir}}.  It should be {hadoop.tmp.dir}/nm-local-dir or similar.  Among other problems, this can prevent multiple test clusters from starting on the same machine.

Thanks to Hemanth Yamijala for reporting this issue.
                </div></div></li><li><div><div><b>summary:</b> YARN local-dirs defaults to /tmp/nm-local-dir
                </div><div><b>description:</b> {{yarn.nodemanager.local-dirs}} defaults to {{/tmp/nm-local-dir}}.  It should be {hadoop.tmp.dir}/nm-local-dir or similar.  Among other problems, this can prevent multiple test clusters from starting on the same machine.

Thanks to Hemanth Yamijala for reporting this issue.
                </div></div></li><li><div><div><b>summary:</b> YARN local-dirs defaults to /tmp/nm-local-dir
                </div><div><b>description:</b> {{yarn.nodemanager.local-dirs}} defaults to {{/tmp/nm-local-dir}}.  It should be {hadoop.tmp.dir}/nm-local-dir or similar.  Among other problems, this can prevent multiple test clusters from starting on the same machine.

Thanks to Hemanth Yamijala for reporting this issue.
                </div></div></li><li><div><div><b>summary:</b> YARN local-dirs defaults to /tmp/nm-local-dir
                </div><div><b>description:</b> {{yarn.nodemanager.local-dirs}} defaults to {{/tmp/nm-local-dir}}.  It should be {hadoop.tmp.dir}/nm-local-dir or similar.  Among other problems, this can prevent multiple test clusters from starting on the same machine.

Thanks to Hemanth Yamijala for reporting this issue.
                </div></div></li><li><div><div><b>summary:</b> YARN local-dirs defaults to /tmp/nm-local-dir
                </div><div><b>description:</b> {{yarn.nodemanager.local-dirs}} defaults to {{/tmp/nm-local-dir}}.  It should be {hadoop.tmp.dir}/nm-local-dir or similar.  Among other problems, this can prevent multiple test clusters from starting on the same machine.

Thanks to Hemanth Yamijala for reporting this issue.
                </div></div></li><li><div><div><b>summary:</b> YARN local-dirs defaults to /tmp/nm-local-dir
                </div><div><b>description:</b> {{yarn.nodemanager.local-dirs}} defaults to {{/tmp/nm-local-dir}}.  It should be {hadoop.tmp.dir}/nm-local-dir or similar.  Among other problems, this can prevent multiple test clusters from starting on the same machine.

Thanks to Hemanth Yamijala for reporting this issue.
                </div></div></li><li><div><div><b>summary:</b> YARN local-dirs defaults to /tmp/nm-local-dir
                </div><div><b>description:</b> {{yarn.nodemanager.local-dirs}} defaults to {{/tmp/nm-local-dir}}.  It should be {hadoop.tmp.dir}/nm-local-dir or similar.  Among other problems, this can prevent multiple test clusters from starting on the same machine.

Thanks to Hemanth Yamijala for reporting this issue.
                </div></div></li><li><div><div><b>summary:</b> YARN local-dirs defaults to /tmp/nm-local-dir
                </div><div><b>description:</b> {{yarn.nodemanager.local-dirs}} defaults to {{/tmp/nm-local-dir}}.  It should be {hadoop.tmp.dir}/nm-local-dir or similar.  Among other problems, this can prevent multiple test clusters from starting on the same machine.

Thanks to Hemanth Yamijala for reporting this issue.
                </div></div></li><li><div><div><b>summary:</b> YARN local-dirs defaults to /tmp/nm-local-dir
                </div><div><b>description:</b> {{yarn.nodemanager.local-dirs}} defaults to {{/tmp/nm-local-dir}}.  It should be {hadoop.tmp.dir}/nm-local-dir or similar.  Among other problems, this can prevent multiple test clusters from starting on the same machine.

Thanks to Hemanth Yamijala for reporting this issue.
                </div></div></li><li><div><div><b>summary:</b> YARN local-dirs defaults to /tmp/nm-local-dir
                </div><div><b>description:</b> {{yarn.nodemanager.local-dirs}} defaults to {{/tmp/nm-local-dir}}.  It should be {hadoop.tmp.dir}/nm-local-dir or similar.  Among other problems, this can prevent multiple test clusters from starting on the same machine.

Thanks to Hemanth Yamijala for reporting this issue.
                </div></div></li><li><div><div><b>summary:</b> YARN local-dirs defaults to /tmp/nm-local-dir
                </div><div><b>description:</b> {{yarn.nodemanager.local-dirs}} defaults to {{/tmp/nm-local-dir}}.  It should be {hadoop.tmp.dir}/nm-local-dir or similar.  Among other problems, this can prevent multiple test clusters from starting on the same machine.

Thanks to Hemanth Yamijala for reporting this issue.
                </div></div></li><li><div><div><b>summary:</b> YARN local-dirs defaults to /tmp/nm-local-dir
                </div><div><b>description:</b> {{yarn.nodemanager.local-dirs}} defaults to {{/tmp/nm-local-dir}}.  It should be {hadoop.tmp.dir}/nm-local-dir or similar.  Among other problems, this can prevent multiple test clusters from starting on the same machine.

Thanks to Hemanth Yamijala for reporting this issue.
                </div></div></li><li><div><div><b>summary:</b> YARN local-dirs defaults to /tmp/nm-local-dir
                </div><div><b>description:</b> {{yarn.nodemanager.local-dirs}} defaults to {{/tmp/nm-local-dir}}.  It should be {hadoop.tmp.dir}/nm-local-dir or similar.  Among other problems, this can prevent multiple test clusters from starting on the same machine.

Thanks to Hemanth Yamijala for reporting this issue.
                </div></div></li><li><div><div><b>summary:</b> YARN local-dirs defaults to /tmp/nm-local-dir
                </div><div><b>description:</b> {{yarn.nodemanager.local-dirs}} defaults to {{/tmp/nm-local-dir}}.  It should be {hadoop.tmp.dir}/nm-local-dir or similar.  Among other problems, this can prevent multiple test clusters from starting on the same machine.

Thanks to Hemanth Yamijala for reporting this issue.
                </div></div></li></ol></div><div><b>jira_issues_comments:</b> <ol><li><div><div><b>body:</b> +1, can one of you take a stab at it. While you are at it, can you please also address any other hard-coded temp paths like this? Thanks.
                </div><div><b>label:</b> code-design
                </div></div></li><li><div>
                Let's be careful, we don't need to introduce explicit deps on configs from HDFS/MR. Let's keep a separate namespace.
              </div></li><li><div>
                bq. Let's be careful, we don't need to introduce explicit deps on configs from HDFS/MR. Let's keep a separate namespace.
Thanks for the idea, Arun. Can you suggest a good name or existing variable I should depend on?
              </div></li><li><div>
                Arun, assume it is ok to add deps on configs in Common (i.e core-site), but not with Mapreduce/HDFS. Is that correct ?
              </div></li><li><div>
                Hemanth - yes, agreed.

Btw, great to see you around! :)
              </div></li><li><div>
                Andy, I have a patch for this. Is it OK if I assign this JIRA to myself and upload the same ?
              </div></li><li><div>
                Attaching a patch which seems to work for me. Andy / others, would be good if you can review and let me know if its ok.

I've changed the following two properties in the patch:
yarn.nodemanager.local-dirs now points to ${hadoop.tmp.dir}/nm-local-dir
yarn.nodemanager.log-dirs now points to ${yarn.log.dir}/nm-logs.

The latter is an incompatible change. The default value was /tmp/logs. However, since this was logs, I thought it was better to default to yarn.log.dir. Let me know if this is fine.

The other directory based configuration is yarn.nodemanager.remote-app-log-dir. However, since this is a location on HDFS typically, it seems better not to default it to variables that point to local logs.
              </div></li><li><div>
                bq. Andy, I have a patch for this. Is it OK if I assign this JIRA to myself and upload the same ?

Definitely! Thanks for the patch.

+1, I agree with the change to yarn.log.dir.  Someone who understands the YARN requirements should review as well.
              </div></li><li><div>
                Thanks for the patch, Hemanth.
              </div></li><li><div>
                log-dirs could be ${yarn.log.dir}/app-logs or even ${yarn.log.dir}/userlogs like in 1.0 ?, since the property is used to configure the log location for containers run on behalf of a user.
              </div></li><li><div>
                Modified the patch per Sid's comments. I have changed the default to userlogs - to be similar to what was there in 1.x. 
              </div></li><li><div>
                +1. Committing this. Thanks for the patch Hemanth, and Andy for the review.
              </div></li><li><div>
                Integrated in Hadoop-Hdfs-trunk-Commit #2814 (See [https://builds.apache.org/job/Hadoop-Hdfs-trunk-Commit/2814/])
    YARN-82. Change the default local and log dirs to be based on hadoop.tmp.dir and yarn.log.dir. (Contributed by Hemanth Yamijala) (Revision 1388339)

     Result = SUCCESS
sseth : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;view=rev&amp;rev=1388339
Files : 
* /hadoop/common/trunk/hadoop-yarn-project/CHANGES.txt
* /hadoop/common/trunk/hadoop-yarn-project/hadoop-yarn/hadoop-yarn-common/src/main/resources/yarn-default.xml

              </div></li><li><div>
                Integrated in Hadoop-Common-trunk-Commit #2752 (See [https://builds.apache.org/job/Hadoop-Common-trunk-Commit/2752/])
    YARN-82. Correct the fix version in CHANGES.txt (Revision 1388340)
YARN-82. Change the default local and log dirs to be based on hadoop.tmp.dir and yarn.log.dir. (Contributed by Hemanth Yamijala) (Revision 1388339)

     Result = SUCCESS
sseth : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;view=rev&amp;rev=1388340
Files : 
* /hadoop/common/trunk/hadoop-yarn-project/CHANGES.txt

sseth : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;view=rev&amp;rev=1388339
Files : 
* /hadoop/common/trunk/hadoop-yarn-project/CHANGES.txt
* /hadoop/common/trunk/hadoop-yarn-project/hadoop-yarn/hadoop-yarn-common/src/main/resources/yarn-default.xml

              </div></li><li><div>
                Integrated in Hadoop-Hdfs-trunk-Commit #2815 (See [https://builds.apache.org/job/Hadoop-Hdfs-trunk-Commit/2815/])
    YARN-82. Correct the fix version in CHANGES.txt (Revision 1388340)

     Result = SUCCESS
sseth : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;view=rev&amp;rev=1388340
Files : 
* /hadoop/common/trunk/hadoop-yarn-project/CHANGES.txt

              </div></li><li><div>
                Integrated in Hadoop-Mapreduce-trunk-Commit #2774 (See [https://builds.apache.org/job/Hadoop-Mapreduce-trunk-Commit/2774/])
    YARN-82. Correct the fix version in CHANGES.txt (Revision 1388340)
YARN-82. Change the default local and log dirs to be based on hadoop.tmp.dir and yarn.log.dir. (Contributed by Hemanth Yamijala) (Revision 1388339)

     Result = FAILURE
sseth : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;view=rev&amp;rev=1388340
Files : 
* /hadoop/common/trunk/hadoop-yarn-project/CHANGES.txt

sseth : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;view=rev&amp;rev=1388339
Files : 
* /hadoop/common/trunk/hadoop-yarn-project/CHANGES.txt
* /hadoop/common/trunk/hadoop-yarn-project/hadoop-yarn/hadoop-yarn-common/src/main/resources/yarn-default.xml

              </div></li><li><div>
                Integrated in Hadoop-Hdfs-trunk #1172 (See [https://builds.apache.org/job/Hadoop-Hdfs-trunk/1172/])
    YARN-82. Correct the fix version in CHANGES.txt (Revision 1388340)
YARN-82. Change the default local and log dirs to be based on hadoop.tmp.dir and yarn.log.dir. (Contributed by Hemanth Yamijala) (Revision 1388339)

     Result = SUCCESS
sseth : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;view=rev&amp;rev=1388340
Files : 
* /hadoop/common/trunk/hadoop-yarn-project/CHANGES.txt

sseth : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;view=rev&amp;rev=1388339
Files : 
* /hadoop/common/trunk/hadoop-yarn-project/CHANGES.txt
* /hadoop/common/trunk/hadoop-yarn-project/hadoop-yarn/hadoop-yarn-common/src/main/resources/yarn-default.xml

              </div></li><li><div>
                Integrated in Hadoop-Mapreduce-trunk #1203 (See [https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1203/])
    YARN-82. Correct the fix version in CHANGES.txt (Revision 1388340)
YARN-82. Change the default local and log dirs to be based on hadoop.tmp.dir and yarn.log.dir. (Contributed by Hemanth Yamijala) (Revision 1388339)

     Result = SUCCESS
sseth : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;view=rev&amp;rev=1388340
Files : 
* /hadoop/common/trunk/hadoop-yarn-project/CHANGES.txt

sseth : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;view=rev&amp;rev=1388339
Files : 
* /hadoop/common/trunk/hadoop-yarn-project/CHANGES.txt
* /hadoop/common/trunk/hadoop-yarn-project/hadoop-yarn/hadoop-yarn-common/src/main/resources/yarn-default.xml

              </div></li><li><div>
                [~adi2]&nbsp;me facing same issue ...&nbsp;[https://stackoverflow.com/questions/58852570/set-checkpointlocation-is-not-reflecting-when-run-the-spark-job-in-cluster-m]&nbsp;what should be done to fix it.
              </div></li></ol></div></div></html>