<!DOCTYPE html><html><div class="item-title">
        Item 224
      </div> <div class="item-details"><div><b>git_comments:</b> <ol><li><div>
                

    Licensed to the Apache Software Foundation (ASF) under one
    or more contributor license agreements.  See the NOTICE file
    distributed with this work for additional information
    regarding copyright ownership.  The ASF licenses this file
    to you under the Apache License, Version 2.0 (the
    "License"); you may not use this file except in compliance
    with the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing,
    software distributed under the License is distributed on an
    "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, either express or implied.  See the License for the
    specific language governing permissions and limitations
    under the License.


              </div></li><li><div>
                

    Licensed to the Apache Software Foundation (ASF) under one
    or more contributor license agreements.  See the NOTICE file
    distributed with this work for additional information
    regarding copyright ownership.  The ASF licenses this file
    to you under the Apache License, Version 2.0 (the
    "License"); you may not use this file except in compliance
    with the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing,
    software distributed under the License is distributed on an
    "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, either express or implied.  See the License for the
    specific language governing permissions and limitations
    under the License.


              </div></li><li><div>
                NOI18N
NOI18N
NOI18N
NOI18N
              </div></li><li><div>
                *
 *
 * @author Tomas Zezula
 
              </div></li><li><div>
                
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * "License"); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied.  See the License for the
 * specific language governing permissions and limitations
 * under the License.
 
              </div></li><li><div>
                XXX: warn?
              </div></li><li><div>
                
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * "License"); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied.  See the License for the
 * specific language governing permissions and limitations
 * under the License.
 
              </div></li><li><div>
                 NOI18N
 NOI18N
              </div></li><li><div>
                 body\\n\" + \" \")\n"
              </div></li><li><div>
                
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * "License"); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied.  See the License for the
 * specific language governing permissions and limitations
 * under the License.
 
              </div></li><li><div>
                 body\\n\" + \"  \")\n"
              </div></li></ol></div><div><b>git_commits:</b> <ol><li><div><div><b>summary:</b> Supporting HTML/Java API/UI constructs in the editor (#380)
                </div><div><b>message:</b> Supporting HTML/Java API/UI constructs in the editor (#380)

OK, thanks, looks good, merging.
                </div></div></li></ol></div><div><b>github_issues:</b> <ol></ol></div><div><b>github_issues_comments:</b> <ol></ol></div><div><b>github_pulls:</b> <ol><li><div><div><b>title:</b> Supporting HTML/Java API/UI constructs in the editor
                </div><div><b>body:</b> My attempt to address [#206](https://issues.apache.org/jira/browse/NETBEANS-206):
* offer hints for convert JSNI syntax (courtesy of @jlahoda)
* render JavaScript syntax inside of `@JavaScriptBody`'s `body` string (courtesy of @tzezula)

                </div></div></li><li><div><div><b>title:</b> Supporting HTML/Java API/UI constructs in the editor
                </div><div><b>body:</b> My attempt to address [#206](https://issues.apache.org/jira/browse/NETBEANS-206):
* offer hints for convert JSNI syntax (courtesy of @jlahoda)
* render JavaScript syntax inside of `@JavaScriptBody`'s `body` string (courtesy of @tzezula)

                </div></div></li><li><div><div><b>title:</b> Supporting HTML/Java API/UI constructs in the editor
                </div><div><b>body:</b> My attempt to address [#206](https://issues.apache.org/jira/browse/NETBEANS-206):
* offer hints for convert JSNI syntax (courtesy of @jlahoda)
* render JavaScript syntax inside of `@JavaScriptBody`'s `body` string (courtesy of @tzezula)

                </div></div></li></ol></div><div><b>github_pulls_comments:</b> <ol></ol></div><div><b>github_pulls_reviews:</b> <ol><li><div>
                This is called, but even if the JavaScript support is installed, I don't see any coloring in the `body="...."` section. Can you advice what is wrong, @tzezula, thanks.
              </div></li></ol></div><div><b>jira_issues:</b> <ol><li><div><div><b>summary:</b> Please add support for JSNI
                </div><div><b>description:</b> I figured out that you will add support for Mixed development support between C/C++ and Java in netbeans 8.1: http://wiki.netbeans.org/NewAndNoteworthyNB81. I really like that for JNI and JNA but what about mixed development support for Java and Javascript like GWT and the JSNI functions? I have to use GWT in our company and it is really hard to find out errors when you only see commented methods like:

{code}
public static native void alert(String msg) /*-{
  $wnd.alert(msg);
}-*/;
{code}


I know there is a plugin called GWT4NB but for now, I don't see any benefits to use this. Here is a description for JSNI: http://www.gwtproject.org/doc/latest/DevGuideCodingBasicsJSNI.html

This would be a big enhancement to have syntax highlighting, navigation to JS files like with C/C++ and Java, have code completion, and so on.


Regards

Chris
                </div></div></li></ol></div><div><b>jira_issues_comments:</b> <ol><li><div><div><b>body:</b> I added it here as a pull request: https://github.com/ksfreitas/gwt4nb/pull/41 I don't know whether JSNI will be used in other cases except GWT. If so, it would be good to implement direct into the IDE instead of the GWT plugin.

It would be good to have this, because it would make the work with HTML4J even better. Now you use an annotation with string inside, which is very failure tolerant and not good practice IMHO.
                </div><div><b>label:</b> code-design
                </div></div></li><li><div>
                It should looks like this: https://github.com/ksfreitas/gwt4nb/issues/36#issuecomment-255379539
              </div></li><li><div><div><b>body:</b> I thought JSNI was being deprecated in favor of JSInterop. Is JSNI really used nowadays?
                </div><div><b>label:</b> code-design
                </div></div></li><li><div><div><b>body:</b> Not everyone is using the newest GWT version. Yes JSNI is deprecated when JsInterop was coming, but it came in 2.7 I think. JSNI could be really an enhancement for HTML4J from [~jtulach]. The thing is, as you can see the code it makes the code much cleaner and better to write, instead of having the JS code inside a string with breaks in the annotation. But this could be an other topic. I had to use an old GWT version where JsInterop wasn't there.
                </div><div><b>label:</b> code-design
                </div></div></li><li><div>
                So this is better to read and write:

{code}
    @JavaScriptBody(args = { "name", "value" }, javacall = true)
    private static native void exposeModel(String name, NbScratchFileViewModel value) /*-{
        window[name] = {
            setExt: function(ext, languageName) {
                value.@org.chrisle.netbeans.plugins.nbscratchfile.NbScratchFileViewModel::setExt(Ljava/lang/String;Ljava/lang/String;)(ext, languageName);
            },
            getColor: function(colorString, brighter) {
                return value.@org.chrisle.netbeans.plugins.nbscratchfile.NbScratchFileViewModel::getColor(Ljava/lang/String;Ljava/lang/Boolean;)(colorString, brighter);
            }
        };
    }-*/
{code}

than this:

{code}
    @JavaScriptBody(args = { "name", "value" }, javacall = true, body = "\n"
        + "window[name] = {"
            + "setExt : function(ext, languageName) {\n"
            + "  value.@org.chrisle.netbeans.plugins.nbscratchfile.NbScratchFileViewModel::setExt(Ljava/lang/String;Ljava/lang/String;)(ext, languageName);\n"
            + "},\n"
            + "getColor : function(colorString, brighter) {\n"
            + "  return value.@org.chrisle.netbeans.plugins.nbscratchfile.NbScratchFileViewModel::getColor(Ljava/lang/String;Ljava/lang/Boolean;)(colorString, brighter);\n"
            + "}\n"
        + "};"
    )
    private static native void exposeModel(String name, NbScratchFileViewModel value);
{code}
              </div></li><li><div>
                Sure this is a explicit case for HTML4J but the first code example is also a valid GWT example (Without the JavaScriptBody annotation).
              </div></li><li><div>
                As far as HTML/Java goes, then I think my answer to these ideas has already been given: In January 2014 I wrote http://wiki.apidesign.org/wiki/MigrateFromGWT. The primary difference is that the `@JavaScriptBody` annotation has to be inserted into bytecode - e.g. it cannot be just a comment like JSNI. Yes, there there can be a syntax support, hint/conversion tool in the IDE and [~jlahoda] and [~tzezula] wrote one - here is [the code|https://github.com/apache/incubator-netbeans/compare/master...JaroslavTulach:jtulach/EditorJavaJS].
              </div></li><li><div>
                I can work on integrating [the code|https://github.com/apache/incubator-netbeans/compare/master...JaroslavTulach:jtulach/EditorJavaJS]&nbsp;into main code base. If done, would that be enough to resolve this bug?
              </div></li><li><div>
                For me, as the code will provide syntax highlighting and full code completion for JS then yes. The other thing, that I can covert JSNI to JavaScriptBody is a nice to have too. So yes, you can resolve the ticket and I can test it whether it fulfills my expectations :)
              </div></li><li><div>
                I've created [https://github.com/apache/incubator-netbeans/pull/380] - I wanted to add you as reviewer, [~Chrizzly], but you don't seem to be registered as available reviewer. Anyway some testing/comments are always welcomed.
              </div></li><li><div>
                Yes, I think I'm not a reviewer. Regardless, I will have a look :). Thx for the work.
              </div></li><li><div>
                As I see it correctly JSNI is still not possible, right? I mean this ticket was for adding JS syntax highlighting and code completion to

{code:java}
/*-{ ... }-*/
{code}

&nbsp;

So I had a look and you only implemented the stuff for the `@JavaScriptBody` annotation and the convert hint from JSNI to JavaScriptBody. But, indepdendent from HTML4J, JSNI is needed e.g. GWT &lt; 2.7, so this functionality should still be exist in NetBeans. Your functionality will only add JS syntax hightlighting and code completion to the annotation, which is also good, but the initial topic of this ticket is: Add support for JSNI. Or am I wrong?

&nbsp;

Cheers

Chris

&nbsp;
              </div></li><li><div>
                The coloring in strings shall be fixed by [https://github.com/apache/incubator-netbeans/pull/431]

When I asked whether integrating my code into NetBeans codebase is enough to close this issue, I got a reply, that it is. However according to Chris's latest comment, I cannot close this bug, unless JSNI coloring is provided as well. I am not going to do it. Thus I am unassigning myself from this issue.
              </div></li><li><div>
                So the original ticket, this one, was requestion JSNI support. So what you did is adding the coloring for the annotation and a new hint for converting from JSNO to the annotation.

So if you don't want to add JSNI support as well, because this is what I was asking for, is it correct, that I can reuse your file: https://github.com/JaroslavTulach/incubator-netbeans/blob/07f96ca1d7842aaa3a766ad3227316a239a40b25/html.editor/src/org/netbeans/modules/html/editor/embedding/JsEmbeddingProvider.java and change the code to and the name like JSNIEmbeddingProvilder.java to my needs? Like to search for  {code}/*-{ ... }-*/{code}
right [~jtulach]?
              </div></li><li><div>
                Reusing already written code as well as existing tests shall be possible.
              </div></li></ol></div></div></html>