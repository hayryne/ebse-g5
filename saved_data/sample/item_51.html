<!DOCTYPE html><html><div class="item-title">
        Item 51
      </div> <div class="item-details"><div><b>git_comments:</b> <ol><li><div>
                 Produce a tests jar so that avatica-server/pom.xml can reference for suite.
           TODO: remove after moving over to annotation-based TestSuite definitions. 
              </div></li><li><div>
                 Make sure that there are no dependencies on other calcite modules,
         or on libraries other than Jackson. 
              </div></li><li><div>
                 Sorted by groupId, artifactId; avatica dependencies first. 
              </div></li><li><div>
                 Apache 18 has 2.10.3, need 2.10.4 for [MJAVADOC-442]. 
              </div></li><li><div>
                 We support guava versions as old as 14.0.1 (the version used by Hive)
         but prefer more recent versions. 
              </div></li><li><div>
                 Tell Maven that it's OK that we're not attached to the parent directory 
              </div></li><li><div>
                 override default version 2.8 for access to additional config settings 
              </div></li></ol></div><div><b>git_commits:</b> <ol><li><div><div><b>summary:</b> [CALCITE-1717] Remove Calcite code and lift avatica
                </div><div><b>message:</b> [CALCITE-1717] Remove Calcite code and lift avatica

* Update .travis.yml
* Update source URLs in site
* Fix Github references across markdown files
* Update the README with the right travis badge
* Blog post for the new repo

Closes apache/calcite-avatica#1

                </div></div></li></ol></div><div><b>github_issues:</b> <ol></ol></div><div><b>github_issues_comments:</b> <ol></ol></div><div><b>github_pulls:</b> <ol><li><div><div><b>title:</b> Requested merge of OPTIQ-247, 324,326,325,323,322,321
                </div><div><b>body:</b> 
                </div></div></li></ol></div><div><b>github_pulls_comments:</b> <ol></ol></div><div><b>github_pulls_reviews:</b> <ol></ol></div><div><b>jira_issues:</b> <ol><li><div><div><b>summary:</b> Move Avatica into its own git repository
                </div><div><b>description:</b> Move Avatica into its own git repository.
                </div></div></li></ol></div><div><b>jira_issues_comments:</b> <ol><li><div>
                Here are the details of what I think we would need to do and what would fundamentally change in our current workflow:

* Push {{HEAD}} from calcite.git to calcite-avatica.git
* {{git rm}} all of the children of calcite-avatica.git except for {{avatica}}
* {{git mv avatica/* .}}
* {{git rm avatica}} from calcite.git

* Update Avatica website to deploy into it's own {{_site/target}} instead of {{../_site/target}}
* Create news article for Avatica and Calcite websites (let people know -- in addition to an email)

I think that's it.
              </div></li><li><div>
                A few more:
* Give avatica its own .gitattributes, .gitignore etc.
* Remove avatica files from the calcite repo
* Update travis and other CI
* Revise avatica's README.md if necessary
* Search and replace "https://github.com/apache/calcite" in .md files. For example history.md currently it points to tags like https://github.com/apache/calcite/releases/tag/calcite-avatica-1.9.0

This can (and I think should) happen after calcite-1.12 and before avatica-1.10.
              </div></li><li><div><div><b>body:</b> Good list, Julian! Think of any more?

Given the lack of objections so far, do you think we need more formality on doing the above? I had initially agreed with your assessment to vote, but now think it might be unnecessary since I believe the only individual to have disagreed with this plan before was yourself :)

Ideally, I could get to this over the weekend.
                </div><div><b>label:</b> code-design
                </div></div></li><li><div>
                I think we need more process than we give to a regular commit (i.e. a couple of emails and a few comments on a JIRA) because this decision is difficult to undo. I think a lazy consensus vote thread is appropriate. Even though, yes, I foresee no objections.
              </div></li><li><div>
                And by the way, on the thread, you should ask people to make no further commits to avatica until we have a decision. It would be nice to make a clean break following the calcite release. 
              </div></li><li><div>
                https://lists.apache.org/thread.html/510bd4664fbca24654efeffd366d8fca38b926f43409ca38c58e08b0@%3Cdev.calcite.apache.org%3E
              </div></li><li><div>
                GitHub user joshelser opened a pull request:

    https://github.com/apache/calcite-avatica/pull/1

    CALCITE-1717 Add Avatica and remove the rest of Calcite

    

You can merge this pull request into a Git repository by running:

    $ git pull https://github.com/joshelser/calcite-avatica 1717-avatica-repo-update

Alternatively you can review and apply these changes as the patch at:

    https://github.com/apache/calcite-avatica/pull/1.patch

To close this pull request, make a commit to your master/trunk branch
with (at least) the following in the commit message:

    This closes #1
    
----
commit 031212540d81f13b23f2b40ef342c6b94b5cc702
Author: Josh Elser &lt;elserj@apache.org&gt;
Date:   2017-03-30T21:47:08Z

    [CALCITE-1717] Remove Calcite code and lift avatica

commit 3f0f4f97ee5b72fba977a578b3ebbdf6985bd92d
Author: Josh Elser &lt;elserj@apache.org&gt;
Date:   2017-03-30T21:47:21Z

    [CALCITE-1717] Update .travis.yml

commit 546b3e3451e70c89735759235c267732b2d3b219
Author: Josh Elser &lt;elserj@apache.org&gt;
Date:   2017-03-30T22:32:38Z

    [CALCITE-1717] Update source URLs in site

commit 084b2085c6e8563fa0518b9327dbebdbc3321b0b
Author: Josh Elser &lt;elserj@apache.org&gt;
Date:   2017-03-30T22:38:56Z

    [CALCITE-1717] Fix Github references across markdown files

commit 0e98f17b0d566fea325644fdce7138e00a79b4b1
Author: Josh Elser &lt;elserj@apache.org&gt;
Date:   2017-03-30T22:49:05Z

    [CALCITE-1717] Update the README with the right travis badge
    
    Switched it to my account for now, can move it back to Julian's when
    he gets his account updated.

commit 101b60607d7ede18745f31a7a383b76009b2eefe
Author: Josh Elser &lt;elserj@apache.org&gt;
Date:   2017-03-31T18:03:08Z

    [CALCITE-1717] Blog post for the new repo

----

              </div></li><li><div>
                [~julianhyde]: two PRs if you have the time to look them over:

https://github.com/apache/calcite/pull/417
https://github.com/apache/calcite-avatica/pull/1

I've already pushed the current HEAD to calcite-avatica as well as the relevant tags (e.g. calcite-avatica-* and the calcite/optiq tags before we separated the two maven builds)
              </div></li><li><div>
                Github user julianhyde commented on a diff in the pull request:

    https://github.com/apache/calcite-avatica/pull/1#discussion_r109268544
  
    --- Diff: .travis.yml ---
    @@ -28,11 +28,11 @@ branches:
         - /^branch-.*$/
         - /^[0-9]+-.*$/
     install:
    -  - cd avatica &amp;&amp; mvn install -DskipTests=true -Dmaven.javadoc.skip=true -B -V &amp;&amp; cd ..
    --- End diff --
    
    also need to change line 2 "See https://travis-ci.org/apache/calcite"

              </div></li><li><div>
                Github user julianhyde commented on the issue:

    https://github.com/apache/calcite-avatica/pull/1
  
    Builds fine. Tests pass. Intellij loads up fine.
    
    * In pom.xml, change connection and developerConnection to scm:git:https://git-wip-us.apache.org/repos/asf/calcite.git - otherwise release build will fail.
    
    * A few occurrences of "calcite dependencies first" in `pom.xml` files.
    
    * There's a `.gitignore` under tck that I'm not sure is still required.
    
    * A few updates needed in `howto.md`, e.g. `git tag -d apache-calcite-X.Y.Z` (but `dist/dev/calcite` is still fine)


              </div></li><li><div>
                Alright, I think this is all done. Thanks for your help, Julian!
              </div></li><li><div>
                Github user asfgit closed the pull request at:

    https://github.com/apache/calcite-avatica/pull/1

              </div></li><li><div>
                Forgot to tag the commits:

https://git-wip-us.apache.org/repos/asf?p=calcite.git;a=commit;h=5289d343fb9eb2f54233f0bc54b2672023f4de14

https://git-wip-us.apache.org/repos/asf?p=calcite-avatica.git;a=commit;h=fc7b26c8b8545f4b969108cb3d8e8064d870a09c
https://git-wip-us.apache.org/repos/asf?p=calcite-avatica.git;a=commit;h=511910559b4e6343ac134ff50d193f5f8c4bfac0
              </div></li><li><div>
                Resolved in release avatica-1.10.0 (2017-05-30).
              </div></li></ol></div></div></html>