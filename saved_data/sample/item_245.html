<!DOCTYPE html><html><div class="item-title">
        Item 245
      </div> <div class="item-details"><div><b>git_comments:</b> <ol><li><div>
                
 * Licensed to the Apache Software Foundation (ASF) under one or more
 * contributor license agreements.  See the NOTICE file distributed with
 * this work for additional information regarding copyright ownership.
 * The ASF licenses this file to You under the Apache License, Version 2.0
 * (the "License"); you may not use this file except in compliance with
 * the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 
              </div></li></ol></div><div><b>git_commits:</b> <ol><li><div><div><b>summary:</b> Adding support for using an HTTP proxy with AWS processors.
                </div><div><b>message:</b> Adding support for using an HTTP proxy with AWS processors.

This closes #209

Signed-off-by: Aldrin Piri &lt;aldrin@apache.org&gt;

                </div></div></li></ol></div><div><b>github_issues:</b> <ol></ol></div><div><b>github_issues_comments:</b> <ol></ol></div><div><b>github_pulls:</b> <ol><li><div><div><b>title:</b> Added support for using proxy for aws processors
                </div><div><b>body:</b> Added http proxy support for aws processors

                </div></div></li></ol></div><div><b>github_pulls_comments:</b> <ol><li><div>
                Explicitly check that proxy host and port are both specified based on comments (rather than using xor operator)

              </div></li><li><div>
                M Singh  on dev@nifi.apache.org replies:
Hi:
I've corrected the logic based on your comments.
Thanks
Mans=20

```
On Tuesday, February 9, 2016 11:46 AM, jskora &lt;git@git.apache.org&gt; wrot=
```

e:
=20

 Github user jskora commented on a diff in the pull request:

=C2=A0 =C2=A0 https://github.com/apache/nifi/pull/209#discussion_r52362955
=C2=A0=20
=C2=A0 =C2=A0 --- Diff: nifi-nar-bundles/nifi-aws-bundle/nifi-aws-processor=

## s/src/main/java/org/apache/nifi/processors/aws/AbstractAWSProcessor.java --=

=C2=A0 =C2=A0 @@ -161,6 +180,12 @@ private static AllowableValue createAllo=
wableValue(final Regions regions) {
=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 problems.add(new Va=
lidationResult.Builder().input("Access Key").valid(false).explanation("Cann=
ot set both Credentials File and Secret Key/Access Key").build());
=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 }
=C2=A0 =C2=A0=20
=C2=A0 =C2=A0 +=C2=A0 =C2=A0 =C2=A0 =C2=A0 final boolean proxyHostSet =3D v=
alidationContext.getProperty(PROXY_HOST).isSet();
=C2=A0 =C2=A0 +=C2=A0 =C2=A0 =C2=A0 =C2=A0 final boolean proxyHostPortSet =
=3D validationContext.getProperty(PROXY_HOST_PORT).isSet();
=C2=A0 =C2=A0 +=C2=A0 =C2=A0 =C2=A0 =C2=A0 if (proxyHostSet ^ proxyHostPort=
Set ) {
=C2=A0 =C2=A0 --- End diff --
=C2=A0 =C2=A0=20
=C2=A0 =C2=A0 The [Java operators](https://docs.oracle.com/javase/tutorial/=
java/nutsandbolts/opsummary.html) consider the XOR operator ("^") to be a b=
itwise operator not a conditional logic operator.=C2=A0 Even if it works co=
rrectly on this line, I think it would be more clear and less likely to be =
misinterpreted if the logical expressions were spelled out explicitly.
=C2=A0 =C2=A0 `=C2=A0 =C2=A0 =C2=A0 =C2=A0 if ((proxyHostSet &amp;&amp; !proxyHostP=
ortSet) || (!proxyHostSet &amp;&amp; proxyHostPortSet)) {`

              </div></li><li><div>
                M Singh  on dev@nifi.apache.org replies:
Hi:
I've corrected the logic based on your comments.
Thanks
Mans=20

```
On Tuesday, February 9, 2016 11:46 AM, jskora &lt;git@git.apache.org&gt; wrot=
```

e:
=20

 Github user jskora commented on a diff in the pull request:

=C2=A0 =C2=A0 https://github.com/apache/nifi/pull/209#discussion_r52362955
=C2=A0=20
=C2=A0 =C2=A0 --- Diff: nifi-nar-bundles/nifi-aws-bundle/nifi-aws-processor=

## s/src/main/java/org/apache/nifi/processors/aws/AbstractAWSProcessor.java --=

=C2=A0 =C2=A0 @@ -161,6 +180,12 @@ private static AllowableValue createAllo=
wableValue(final Regions regions) {
=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 problems.add(new Va=
lidationResult.Builder().input("Access Key").valid(false).explanation("Cann=
ot set both Credentials File and Secret Key/Access Key").build());
=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 }
=C2=A0 =C2=A0=20
=C2=A0 =C2=A0 +=C2=A0 =C2=A0 =C2=A0 =C2=A0 final boolean proxyHostSet =3D v=
alidationContext.getProperty(PROXY_HOST).isSet();
=C2=A0 =C2=A0 +=C2=A0 =C2=A0 =C2=A0 =C2=A0 final boolean proxyHostPortSet =
=3D validationContext.getProperty(PROXY_HOST_PORT).isSet();
=C2=A0 =C2=A0 +=C2=A0 =C2=A0 =C2=A0 =C2=A0 if (proxyHostSet ^ proxyHostPort=
Set ) {
=C2=A0 =C2=A0 --- End diff --
=C2=A0 =C2=A0=20
=C2=A0 =C2=A0 The [Java operators](https://docs.oracle.com/javase/tutorial/=
java/nutsandbolts/opsummary.html) consider the XOR operator ("^") to be a b=
itwise operator not a conditional logic operator.=C2=A0 Even if it works co=
rrectly on this line, I think it would be more clear and less likely to be =
misinterpreted if the logical expressions were spelled out explicitly.
=C2=A0 =C2=A0 `=C2=A0 =C2=A0 =C2=A0 =C2=A0 if ((proxyHostSet &amp;&amp; !proxyHostP=
ortSet) || (!proxyHostSet &amp;&amp; proxyHostPortSet)) {`

              </div></li><li><div>
                Looks good based on the code.  I can't test it today, but I might be able to later this week.

              </div></li><li><div>
                @mans2singh @jskora 
Was able to test against S3 using squid proxy and verify this worked as intended.  Will get merged into master.  Thanks for the contribution!

              </div></li><li><div>
                BTW - I had a combined request for kinesis + proxy - if you would like to review - https://github.com/apache/nifi/pull/213

              </div></li><li><div>
                @mans2singh Yep, saw it.

              </div></li><li><div>
                Is there a version of the aws proxy that is compatible with  0.5.1 ?

              </div></li><li><div>
                @pljplj Not sure about an alternative means of using the proxy, but this particular patch is scheduled for 0.6.0 given its feature bearing nature.

              </div></li></ol></div><div><b>github_pulls_reviews:</b> <ol><li><div>
                The [Java operators](https://docs.oracle.com/javase/tutorial/java/nutsandbolts/opsummary.html) consider the XOR operator ("^") to be a bitwise operator not a conditional logic operator.  Even if it works correctly on this line, I think it would be more clear and less likely to be misinterpreted if the logical expressions were spelled out explicitly.
`if ((proxyHostSet &amp;&amp; !proxyHostPortSet) || (!proxyHostSet &amp;&amp; proxyHostPortSet)) {`

              </div></li><li><div>
                @mans2singh One quick note, do you mind if I convert this validator to the StandardValidators.PORT_VALIDATOR?

              </div></li><li><div>
                @apiri - You are absolutely right on that.  Please go ahead and let me know if there is anything else required from me.
Thanks

              </div></li></ol></div><div><b>jira_issues:</b> <ol></ol></div><div><b>jira_issues_comments:</b> <ol></ol></div></div></html>