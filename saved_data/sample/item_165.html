<!DOCTYPE html><html><div class="item-title">
        Item 165
      </div> <div class="item-details"><div><b>git_comments:</b> <ol><li><div>
                *
   * Constructor with host, name, offset, length and corrupt flag
   
              </div></li><li><div>
                *
   * Constructor with host, name, network topology, offset, length 
   * and corrupt flag
   
              </div></li><li><div>
                *
   * Set the corrupt flag.
   
              </div></li><li><div>
                *
   * Get the corrupt flag.
   
              </div></li></ol></div><div><b>git_commits:</b> <ol><li><div><div><b>summary:</b> commit 8cd52ca083d83a7ea14fc899a9c1c2d2cde15e14
                </div><div><b>message:</b> commit 8cd52ca083d83a7ea14fc899a9c1c2d2cde15e14
Author: Hairong Kuang &lt;hairong@apache.org&gt;
Date:   Wed Nov 17 05:29:00 2010 +0000

    HADOOP-7013. Add boolean field isCorrupt to BlockLocation. Contributed by Patrick Kling.
    
    
    git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1035923 13f79535-47bb-0310-9956-ffa450edef68


git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/yahoo-merge@1079134 13f79535-47bb-0310-9956-ffa450edef68

                </div></div></li></ol></div><div><b>github_issues:</b> <ol></ol></div><div><b>github_issues_comments:</b> <ol></ol></div><div><b>github_pulls:</b> <ol></ol></div><div><b>github_pulls_comments:</b> <ol></ol></div><div><b>github_pulls_reviews:</b> <ol></ol></div><div><b>jira_issues:</b> <ol><li><div><div><b>summary:</b> Add boolean field isCorrupt to BlockLocation
                </div><div><b>description:</b> This is needed to allow DFSClient.getBlockLocations to notify the calling application when returning a BlockLocation that corresponds to a corrupt block. Currently, this happens when there are no uncorrupted replicas of a requested block.
                </div></div></li></ol></div><div><b>jira_issues_comments:</b> <ol><li><div>
                Review board: https://reviews.apache.org/r/26/
              </div></li><li><div><div><b>body:</b> The patch looks good except for an incompatible change.

BlockLocation is not used in any wire-protocol, but for some reason it is Writable. So if by any chance somebody serialize this object in a file etc, then this patch makes it incompatible.

I would suggest that this patch does not change the serialization format. Since Hadoop does not use it over the wire, it won't do any harm.
                </div><div><b>label:</b> code-design
                </div></div></li><li><div>
                On a second thought, Hadoop does not have a story for Writable backward compatibility yet. So this patch does not need to take care of this either. Instead we could simply mark this jira as incompatible.

So a +1 from me.
              </div></li><li><div>
                ant test-path results:
{code}
     [exec] -1 overall.  
     [exec] 
     [exec]     +1 @author.  The patch does not contain any @author tags.
     [exec] 
     [exec]     -1 tests included.  The patch doesn't appear to include any new or modified tests.
     [exec]                         Please justify why no new tests are needed for this patch.
     [exec]                         Also please list what manual steps were performed to verify this patch.
     [exec] 
     [exec]     +1 javadoc.  The javadoc tool did not generate any warning messages.
     [exec] 
     [exec]     +1 javac.  The applied patch does not increase the total number of javac compiler warnings.
     [exec] 
     [exec]     -1 findbugs.  The patch appears to introduce 2 new Findbugs warnings.
     [exec] 
     [exec]     +1 release audit.  The applied patch does not increase the total number of release audit warnings.
     [exec] 
     [exec]     +1 system test framework.  The patch passed system test framework compile.
{code}

Tests are included with HDFS-1483. The findbugs warning are not caused by this patch (see MAPREDUCE-2172 for details).
              </div></li><li><div>
                +1

Patch looks good to me.
              </div></li><li><div>
                I've just committed this. Thanks, Patrick!
              </div></li><li><div>
                Integrated in Hadoop-Common-trunk-Commit #428 (See [https://hudson.apache.org/hudson/job/Hadoop-Common-trunk-Commit/428/])
    HADOOP-7013. Add boolean field isCorrupt to BlockLocation. Contributed by Patrick Kling.

              </div></li><li><div>
                Integrated in Hadoop-Common-trunk #515 (See [https://hudson.apache.org/hudson/job/Hadoop-Common-trunk/515/])
    HADOOP-7013. Add boolean field isCorrupt to BlockLocation. Contributed by Patrick Kling.

              </div></li></ol></div></div></html>