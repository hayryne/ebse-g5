<!DOCTYPE html><html><div class="item-title">
        Item 299
      </div> <div class="item-details"><div><b>git_comments:</b> <ol></ol></div><div><b>git_commits:</b> <ol><li><div><div><b>summary:</b> BROOKLYN-32: Remove MaxMind GeoIP source code
                </div><div><b>message:</b> BROOKLYN-32: Remove MaxMind GeoIP source code

MaxMind GeoIP package license is LGPL2.1, which is incompatible with the
Apache license, therefore we need to remove it.

                </div></div></li></ol></div><div><b>github_issues:</b> <ol></ol></div><div><b>github_issues_comments:</b> <ol></ol></div><div><b>github_pulls:</b> <ol></ol></div><div><b>github_pulls_comments:</b> <ol></ol></div><div><b>github_pulls_reviews:</b> <ol></ol></div><div><b>jira_issues:</b> <ol><li><div><div><b>summary:</b> Maxmind GeoIP is LGPL2.1, needs to be removed
                </div><div><b>description:</b> whole of /brooklyn-core/src-3rd/maxmind is LGPL2.1
./core/src/3rd/maxmind/GeoIPJava-1.2.8/
                </div><div><b>label:</b> code-design
                </div></div></li><li><div><div><b>summary:</b> Maxmind GeoIP is LGPL2.1, needs to be removed
                </div><div><b>description:</b> whole of /brooklyn-core/src-3rd/maxmind is LGPL2.1
./core/src/3rd/maxmind/GeoIPJava-1.2.8/
                </div></div></li><li><div><div><b>summary:</b> Maxmind GeoIP is LGPL2.1, needs to be removed
                </div><div><b>description:</b> whole of /brooklyn-core/src-3rd/maxmind is LGPL2.1
./core/src/3rd/maxmind/GeoIPJava-1.2.8/
                </div><div><b>label:</b> code-design
                </div></div></li></ol></div><div><b>jira_issues_comments:</b> <ol><li><div>
                GitHub user richardcloudsoft opened a pull request:

    https://github.com/apache/incubator-brooklyn/pull/140

    BROOKLYN-32: remove LGPLed MaxMind GeoIP

    Brooklyn `core` embeds a copy of MaxMind GeoIP Java library. This is licensed under LGPL2.1, which is incompatible with the Apache license - therefore it is not suitable to be part of Brooklyn core. This PR makes the removal, and changes the default GeoIP lookup to use the "utrace" service instead.
    
    Note that it is possible to create a new project that includes just the MaxMind GeoIP dependency and the Brooklyn HostGeoLookup class, and users could install that module themselves, if they want to use MaxMind GeoIP. That is outside the scope of this PR.

You can merge this pull request into a Git repository by running:

    $ git pull https://github.com/richardcloudsoft/incubator-brooklyn BROOKLYN-32-remove-MaxMind

Alternatively you can review and apply these changes as the patch at:

    https://github.com/apache/incubator-brooklyn/pull/140.patch

To close this pull request, make a commit to your master/trunk branch
with (at least) the following in the commit message:

    This closes #140
    
----
commit a0f4a8944c1153483bd51e9f85d38df76b2aebe1
Author: Richard Downer &lt;richard@apache.org&gt;
Date:   2014-09-02T16:16:23Z

    BROOKLYN-32: change geo lookup to utrace
    
    MaxMind GeoIP package license is LGPL2.1, which is incompatible with the
    Apache license, therefore we need to remove it.

commit a775711e55f36fc17efdf4ccce6ce778ba38c2c7
Author: Richard Downer &lt;richard@apache.org&gt;
Date:   2014-09-02T16:20:56Z

    BROOKLYN-32: Remove MaxMindHostGeoLookup class
    
    MaxMind GeoIP package license is LGPL2.1, which is incompatible with the
    Apache license, therefore we need to remove it.

commit c1b3e88046b88d39b0f717d9faf6e6faab30ba5f
Author: Richard Downer &lt;richard@apache.org&gt;
Date:   2014-09-02T16:23:52Z

    BROOKLYN-32: Remove MaxMind GeoIP source code
    
    MaxMind GeoIP package license is LGPL2.1, which is incompatible with the
    Apache license, therefore we need to remove it.

----

              </div></li><li><div>
                Github user ahgittin commented on the pull request:

    https://github.com/apache/incubator-brooklyn/pull/140#issuecomment-54182683
  
    have you looked at:  https://github.com/maxmind/GeoIP2-java  ?
    
    the new @maxmind v2 is Apache licensed and mvn/github.  it will require some code changes but maybe not that much?  i talked with them 1 year ago asking them for this -- thrilled to see this now!
    
    as i recall, Utrace had pretty low token limits so we can end up with spurious failures so i'd prefer maxmind v2.

              </div></li><li><div>
                Github user richardcloudsoft commented on the pull request:

    https://github.com/apache/incubator-brooklyn/pull/140#issuecomment-54183371
  
    @ahgittin, would you be prepared to accept this PR now (so we can resolve the release blocker BROOKLYN-32), and we'll add MaxMind v2 later? Or do you consider the unreliability of Utrace to also be a release blocker?

              </div></li><li><div>
                Github user ahgittin commented on the pull request:

    https://github.com/apache/incubator-brooklyn/pull/140#issuecomment-54183565
  
    sounds like you want this accepted now :) -- go for it.
    
    but let's update to maxmind asap.

              </div></li><li><div>
                Github user grkvlt commented on the pull request:

    https://github.com/apache/incubator-brooklyn/pull/140#issuecomment-54183641
  
    +1 on changing to new @maxmind v2 client, but agree with @richardcloudsoft that getting the release unblocked is a priority

              </div></li><li><div>
                Github user richardcloudsoft commented on the pull request:

    https://github.com/apache/incubator-brooklyn/pull/140#issuecomment-54184263
  
    Thanks all. I have raised BROOKLYN-60 to add an integration for GeoIP v2.
    I will proceed with merging this change now.

              </div></li><li><div>
                Github user asfgit closed the pull request at:

    https://github.com/apache/incubator-brooklyn/pull/140

              </div></li><li><div><div><b>body:</b> Removed problematic code from repo. Brooklyn now uses `utrace` to perform IP geolocation.

Note BROOKLYN-60 as a potential long-term solution.
                </div><div><b>label:</b> code-design
                </div></div></li><li><div>
                GitHub user ahgittin opened a pull request:

    https://github.com/apache/incubator-brooklyn/pull/142

    add maxmind v2 (now ASL licensed) in preference to Utrace

    update to https://github.com/apache/incubator-brooklyn/pull/140 re BROOKLYN-32

You can merge this pull request into a Git repository by running:

    $ git pull https://github.com/ahgittin/incubator-brooklyn maxmind2

Alternatively you can review and apply these changes as the patch at:

    https://github.com/apache/incubator-brooklyn/pull/142.patch

To close this pull request, make a commit to your master/trunk branch
with (at least) the following in the commit message:

    This closes #142
    
----
commit a64e2835bb676cb71e33604e1a1423e66fe385a4
Author: Alex Heneveld &lt;alex.heneveld@cloudsoftcorp.com&gt;
Date:   2014-09-02T20:03:27Z

    add maxmind v2 (now ASL licensed) in preference to Utrace, but with fallback to Utrace if maxmind not installed

----

              </div></li><li><div>
                Github user asfgit closed the pull request at:

    https://github.com/apache/incubator-brooklyn/pull/142

              </div></li></ol></div></div></html>