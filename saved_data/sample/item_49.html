<!DOCTYPE html><html><div class="item-title">
        Item 49
      </div> <div class="item-details"><div><b>git_comments:</b> <ol><li><div>
                * SQL parse tree node to represent {@code SET} and {@code RESET} statements. 
              </div></li><li><div>
                
 * Licensed to the Apache Software Foundation (ASF) under one or more
 * contributor license agreements.  See the NOTICE file distributed with
 * this work for additional information regarding copyright ownership.
 * The ASF licenses this file to you under the Apache License, Version 2.0
 * (the "License"); you may not use this file except in compliance with
 * the License.  You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 
              </div></li><li><div>
                 End SqlDropObject.java
              </div></li><li><div>
                * Perform a DFS(Depth-First-Search) to find the PipelineOptions config. 
              </div></li></ol></div><div><b>git_commits:</b> <ol><li><div><div><b>summary:</b> Merge pull request #5592: [BEAM-3773] [SQL] Add support for setting PipelineOptions
                </div><div><b>message:</b> Merge pull request #5592: [BEAM-3773] [SQL] Add support for setting PipelineOptions

[BEAM-3773] [SQL] Add support for setting PipelineOptions
                </div></div></li></ol></div><div><b>github_issues:</b> <ol></ol></div><div><b>github_issues_comments:</b> <ol></ol></div><div><b>github_pulls:</b> <ol><li><div><div><b>title:</b> [BEAM-3773] [SQL] Add support for setting PipelineOptions
                </div><div><b>body:</b> Add support for setting PipelineOptions for pure SQL pipelines.

------------------------

Follow this checklist to help us incorporate your contribution quickly and easily:

 - [X] Format the pull request title like `[BEAM-XXX] Fixes bug in ApproximateQuantiles`, where you replace `BEAM-XXX` with the appropriate JIRA issue, if applicable. This will automatically link the pull request to the issue.
 - [ ] If this contribution is large, please file an Apache [Individual Contributor License Agreement](https://www.apache.org/licenses/icla.pdf).

It will help us expedite review of your Pull Request if you tag someone (e.g. `@username`) to look at it.

                </div></div></li><li><div><div><b>title:</b> [BEAM-3773] [SQL] Add support for setting PipelineOptions
                </div><div><b>body:</b> Add support for setting PipelineOptions for pure SQL pipelines.

------------------------

Follow this checklist to help us incorporate your contribution quickly and easily:

 - [X] Format the pull request title like `[BEAM-XXX] Fixes bug in ApproximateQuantiles`, where you replace `BEAM-XXX` with the appropriate JIRA issue, if applicable. This will automatically link the pull request to the issue.
 - [ ] If this contribution is large, please file an Apache [Individual Contributor License Agreement](https://www.apache.org/licenses/icla.pdf).

It will help us expedite review of your Pull Request if you tag someone (e.g. `@username`) to look at it.

                </div></div></li><li><div><div><b>title:</b> [BEAM-3773] [SQL] Add support for setting PipelineOptions
                </div><div><b>body:</b> Add support for setting PipelineOptions for pure SQL pipelines.

------------------------

Follow this checklist to help us incorporate your contribution quickly and easily:

 - [X] Format the pull request title like `[BEAM-XXX] Fixes bug in ApproximateQuantiles`, where you replace `BEAM-XXX` with the appropriate JIRA issue, if applicable. This will automatically link the pull request to the issue.
 - [ ] If this contribution is large, please file an Apache [Individual Contributor License Agreement](https://www.apache.org/licenses/icla.pdf).

It will help us expedite review of your Pull Request if you tag someone (e.g. `@username`) to look at it.

                </div></div></li><li><div><div><b>title:</b> [BEAM-3773] [SQL] Add support for setting PipelineOptions
                </div><div><b>body:</b> Add support for setting PipelineOptions for pure SQL pipelines.

------------------------

Follow this checklist to help us incorporate your contribution quickly and easily:

 - [X] Format the pull request title like `[BEAM-XXX] Fixes bug in ApproximateQuantiles`, where you replace `BEAM-XXX` with the appropriate JIRA issue, if applicable. This will automatically link the pull request to the issue.
 - [ ] If this contribution is large, please file an Apache [Individual Contributor License Agreement](https://www.apache.org/licenses/icla.pdf).

It will help us expedite review of your Pull Request if you tag someone (e.g. `@username`) to look at it.

                </div></div></li><li><div><div><b>title:</b> [BEAM-3773] [SQL] Add support for setting PipelineOptions
                </div><div><b>body:</b> Add support for setting PipelineOptions for pure SQL pipelines.

------------------------

Follow this checklist to help us incorporate your contribution quickly and easily:

 - [X] Format the pull request title like `[BEAM-XXX] Fixes bug in ApproximateQuantiles`, where you replace `BEAM-XXX` with the appropriate JIRA issue, if applicable. This will automatically link the pull request to the issue.
 - [ ] If this contribution is large, please file an Apache [Individual Contributor License Agreement](https://www.apache.org/licenses/icla.pdf).

It will help us expedite review of your Pull Request if you tag someone (e.g. `@username`) to look at it.

                </div></div></li><li><div><div><b>title:</b> [BEAM-3773] [SQL] Add support for setting PipelineOptions
                </div><div><b>body:</b> Add support for setting PipelineOptions for pure SQL pipelines.

------------------------

Follow this checklist to help us incorporate your contribution quickly and easily:

 - [X] Format the pull request title like `[BEAM-XXX] Fixes bug in ApproximateQuantiles`, where you replace `BEAM-XXX` with the appropriate JIRA issue, if applicable. This will automatically link the pull request to the issue.
 - [ ] If this contribution is large, please file an Apache [Individual Contributor License Agreement](https://www.apache.org/licenses/icla.pdf).

It will help us expedite review of your Pull Request if you tag someone (e.g. `@username`) to look at it.

                </div></div></li><li><div><div><b>title:</b> [BEAM-3773] [SQL] Add support for setting PipelineOptions
                </div><div><b>body:</b> Add support for setting PipelineOptions for pure SQL pipelines.

------------------------

Follow this checklist to help us incorporate your contribution quickly and easily:

 - [X] Format the pull request title like `[BEAM-XXX] Fixes bug in ApproximateQuantiles`, where you replace `BEAM-XXX` with the appropriate JIRA issue, if applicable. This will automatically link the pull request to the issue.
 - [ ] If this contribution is large, please file an Apache [Individual Contributor License Agreement](https://www.apache.org/licenses/icla.pdf).

It will help us expedite review of your Pull Request if you tag someone (e.g. `@username`) to look at it.

                </div></div></li><li><div><div><b>title:</b> [BEAM-3773] [SQL] Add support for setting PipelineOptions
                </div><div><b>body:</b> Add support for setting PipelineOptions for pure SQL pipelines.

------------------------

Follow this checklist to help us incorporate your contribution quickly and easily:

 - [X] Format the pull request title like `[BEAM-XXX] Fixes bug in ApproximateQuantiles`, where you replace `BEAM-XXX` with the appropriate JIRA issue, if applicable. This will automatically link the pull request to the issue.
 - [ ] If this contribution is large, please file an Apache [Individual Contributor License Agreement](https://www.apache.org/licenses/icla.pdf).

It will help us expedite review of your Pull Request if you tag someone (e.g. `@username`) to look at it.

                </div><div><b>label:</b> code-design
                </div></div></li><li><div><div><b>title:</b> [BEAM-3773] [SQL] Add support for setting PipelineOptions
                </div><div><b>body:</b> Add support for setting PipelineOptions for pure SQL pipelines.

------------------------

Follow this checklist to help us incorporate your contribution quickly and easily:

 - [X] Format the pull request title like `[BEAM-XXX] Fixes bug in ApproximateQuantiles`, where you replace `BEAM-XXX` with the appropriate JIRA issue, if applicable. This will automatically link the pull request to the issue.
 - [ ] If this contribution is large, please file an Apache [Individual Contributor License Agreement](https://www.apache.org/licenses/icla.pdf).

It will help us expedite review of your Pull Request if you tag someone (e.g. `@username`) to look at it.

                </div><div><b>label:</b> test
                </div></div></li><li><div><div><b>title:</b> [BEAM-3773] [SQL] Add support for setting PipelineOptions
                </div><div><b>body:</b> Add support for setting PipelineOptions for pure SQL pipelines.

------------------------

Follow this checklist to help us incorporate your contribution quickly and easily:

 - [X] Format the pull request title like `[BEAM-XXX] Fixes bug in ApproximateQuantiles`, where you replace `BEAM-XXX` with the appropriate JIRA issue, if applicable. This will automatically link the pull request to the issue.
 - [ ] If this contribution is large, please file an Apache [Individual Contributor License Agreement](https://www.apache.org/licenses/icla.pdf).

It will help us expedite review of your Pull Request if you tag someone (e.g. `@username`) to look at it.

                </div></div></li><li><div><div><b>title:</b> [BEAM-3773] [SQL] Add support for setting PipelineOptions
                </div><div><b>body:</b> Add support for setting PipelineOptions for pure SQL pipelines.

------------------------

Follow this checklist to help us incorporate your contribution quickly and easily:

 - [X] Format the pull request title like `[BEAM-XXX] Fixes bug in ApproximateQuantiles`, where you replace `BEAM-XXX` with the appropriate JIRA issue, if applicable. This will automatically link the pull request to the issue.
 - [ ] If this contribution is large, please file an Apache [Individual Contributor License Agreement](https://www.apache.org/licenses/icla.pdf).

It will help us expedite review of your Pull Request if you tag someone (e.g. `@username`) to look at it.

                </div></div></li><li><div><div><b>title:</b> [BEAM-3773] [SQL] Add support for setting PipelineOptions
                </div><div><b>body:</b> Add support for setting PipelineOptions for pure SQL pipelines.

------------------------

Follow this checklist to help us incorporate your contribution quickly and easily:

 - [X] Format the pull request title like `[BEAM-XXX] Fixes bug in ApproximateQuantiles`, where you replace `BEAM-XXX` with the appropriate JIRA issue, if applicable. This will automatically link the pull request to the issue.
 - [ ] If this contribution is large, please file an Apache [Individual Contributor License Agreement](https://www.apache.org/licenses/icla.pdf).

It will help us expedite review of your Pull Request if you tag someone (e.g. `@username`) to look at it.

                </div></div></li><li><div><div><b>title:</b> [BEAM-3773] [SQL] Add support for setting PipelineOptions
                </div><div><b>body:</b> Add support for setting PipelineOptions for pure SQL pipelines.

------------------------

Follow this checklist to help us incorporate your contribution quickly and easily:

 - [X] Format the pull request title like `[BEAM-XXX] Fixes bug in ApproximateQuantiles`, where you replace `BEAM-XXX` with the appropriate JIRA issue, if applicable. This will automatically link the pull request to the issue.
 - [ ] If this contribution is large, please file an Apache [Individual Contributor License Agreement](https://www.apache.org/licenses/icla.pdf).

It will help us expedite review of your Pull Request if you tag someone (e.g. `@username`) to look at it.

                </div></div></li><li><div><div><b>title:</b> [BEAM-3773] [SQL] Add support for setting PipelineOptions
                </div><div><b>body:</b> Add support for setting PipelineOptions for pure SQL pipelines.

------------------------

Follow this checklist to help us incorporate your contribution quickly and easily:

 - [X] Format the pull request title like `[BEAM-XXX] Fixes bug in ApproximateQuantiles`, where you replace `BEAM-XXX` with the appropriate JIRA issue, if applicable. This will automatically link the pull request to the issue.
 - [ ] If this contribution is large, please file an Apache [Individual Contributor License Agreement](https://www.apache.org/licenses/icla.pdf).

It will help us expedite review of your Pull Request if you tag someone (e.g. `@username`) to look at it.

                </div></div></li><li><div><div><b>title:</b> [BEAM-3773] [SQL] Add support for setting PipelineOptions
                </div><div><b>body:</b> Add support for setting PipelineOptions for pure SQL pipelines.

------------------------

Follow this checklist to help us incorporate your contribution quickly and easily:

 - [X] Format the pull request title like `[BEAM-XXX] Fixes bug in ApproximateQuantiles`, where you replace `BEAM-XXX` with the appropriate JIRA issue, if applicable. This will automatically link the pull request to the issue.
 - [ ] If this contribution is large, please file an Apache [Individual Contributor License Agreement](https://www.apache.org/licenses/icla.pdf).

It will help us expedite review of your Pull Request if you tag someone (e.g. `@username`) to look at it.

                </div></div></li><li><div><div><b>title:</b> [BEAM-3773] [SQL] Add support for setting PipelineOptions
                </div><div><b>body:</b> Add support for setting PipelineOptions for pure SQL pipelines.

------------------------

Follow this checklist to help us incorporate your contribution quickly and easily:

 - [X] Format the pull request title like `[BEAM-XXX] Fixes bug in ApproximateQuantiles`, where you replace `BEAM-XXX` with the appropriate JIRA issue, if applicable. This will automatically link the pull request to the issue.
 - [ ] If this contribution is large, please file an Apache [Individual Contributor License Agreement](https://www.apache.org/licenses/icla.pdf).

It will help us expedite review of your Pull Request if you tag someone (e.g. `@username`) to look at it.

                </div><div><b>label:</b> code-design
                </div></div></li><li><div><div><b>title:</b> [BEAM-3773] [SQL] Add support for setting PipelineOptions
                </div><div><b>body:</b> Add support for setting PipelineOptions for pure SQL pipelines.

------------------------

Follow this checklist to help us incorporate your contribution quickly and easily:

 - [X] Format the pull request title like `[BEAM-XXX] Fixes bug in ApproximateQuantiles`, where you replace `BEAM-XXX` with the appropriate JIRA issue, if applicable. This will automatically link the pull request to the issue.
 - [ ] If this contribution is large, please file an Apache [Individual Contributor License Agreement](https://www.apache.org/licenses/icla.pdf).

It will help us expedite review of your Pull Request if you tag someone (e.g. `@username`) to look at it.

                </div></div></li><li><div><div><b>title:</b> [BEAM-3773] [SQL] Add support for setting PipelineOptions
                </div><div><b>body:</b> Add support for setting PipelineOptions for pure SQL pipelines.

------------------------

Follow this checklist to help us incorporate your contribution quickly and easily:

 - [X] Format the pull request title like `[BEAM-XXX] Fixes bug in ApproximateQuantiles`, where you replace `BEAM-XXX` with the appropriate JIRA issue, if applicable. This will automatically link the pull request to the issue.
 - [ ] If this contribution is large, please file an Apache [Individual Contributor License Agreement](https://www.apache.org/licenses/icla.pdf).

It will help us expedite review of your Pull Request if you tag someone (e.g. `@username`) to look at it.

                </div></div></li><li><div><div><b>title:</b> [BEAM-3773] [SQL] Add support for setting PipelineOptions
                </div><div><b>body:</b> Add support for setting PipelineOptions for pure SQL pipelines.

------------------------

Follow this checklist to help us incorporate your contribution quickly and easily:

 - [X] Format the pull request title like `[BEAM-XXX] Fixes bug in ApproximateQuantiles`, where you replace `BEAM-XXX` with the appropriate JIRA issue, if applicable. This will automatically link the pull request to the issue.
 - [ ] If this contribution is large, please file an Apache [Individual Contributor License Agreement](https://www.apache.org/licenses/icla.pdf).

It will help us expedite review of your Pull Request if you tag someone (e.g. `@username`) to look at it.

                </div></div></li><li><div><div><b>title:</b> [BEAM-3773] [SQL] Add support for setting PipelineOptions
                </div><div><b>body:</b> Add support for setting PipelineOptions for pure SQL pipelines.

------------------------

Follow this checklist to help us incorporate your contribution quickly and easily:

 - [X] Format the pull request title like `[BEAM-XXX] Fixes bug in ApproximateQuantiles`, where you replace `BEAM-XXX` with the appropriate JIRA issue, if applicable. This will automatically link the pull request to the issue.
 - [ ] If this contribution is large, please file an Apache [Individual Contributor License Agreement](https://www.apache.org/licenses/icla.pdf).

It will help us expedite review of your Pull Request if you tag someone (e.g. `@username`) to look at it.

                </div></div></li><li><div><div><b>title:</b> [BEAM-3773] [SQL] Add support for setting PipelineOptions
                </div><div><b>body:</b> Add support for setting PipelineOptions for pure SQL pipelines.

------------------------

Follow this checklist to help us incorporate your contribution quickly and easily:

 - [X] Format the pull request title like `[BEAM-XXX] Fixes bug in ApproximateQuantiles`, where you replace `BEAM-XXX` with the appropriate JIRA issue, if applicable. This will automatically link the pull request to the issue.
 - [ ] If this contribution is large, please file an Apache [Individual Contributor License Agreement](https://www.apache.org/licenses/icla.pdf).

It will help us expedite review of your Pull Request if you tag someone (e.g. `@username`) to look at it.

                </div></div></li><li><div><div><b>title:</b> [BEAM-3773] [SQL] Add support for setting PipelineOptions
                </div><div><b>body:</b> Add support for setting PipelineOptions for pure SQL pipelines.

------------------------

Follow this checklist to help us incorporate your contribution quickly and easily:

 - [X] Format the pull request title like `[BEAM-XXX] Fixes bug in ApproximateQuantiles`, where you replace `BEAM-XXX` with the appropriate JIRA issue, if applicable. This will automatically link the pull request to the issue.
 - [ ] If this contribution is large, please file an Apache [Individual Contributor License Agreement](https://www.apache.org/licenses/icla.pdf).

It will help us expedite review of your Pull Request if you tag someone (e.g. `@username`) to look at it.

                </div></div></li><li><div><div><b>title:</b> [BEAM-3773] [SQL] Add support for setting PipelineOptions
                </div><div><b>body:</b> Add support for setting PipelineOptions for pure SQL pipelines.

------------------------

Follow this checklist to help us incorporate your contribution quickly and easily:

 - [X] Format the pull request title like `[BEAM-XXX] Fixes bug in ApproximateQuantiles`, where you replace `BEAM-XXX` with the appropriate JIRA issue, if applicable. This will automatically link the pull request to the issue.
 - [ ] If this contribution is large, please file an Apache [Individual Contributor License Agreement](https://www.apache.org/licenses/icla.pdf).

It will help us expedite review of your Pull Request if you tag someone (e.g. `@username`) to look at it.

                </div></div></li><li><div><div><b>title:</b> [BEAM-3773] [SQL] Add support for setting PipelineOptions
                </div><div><b>body:</b> Add support for setting PipelineOptions for pure SQL pipelines.

------------------------

Follow this checklist to help us incorporate your contribution quickly and easily:

 - [X] Format the pull request title like `[BEAM-XXX] Fixes bug in ApproximateQuantiles`, where you replace `BEAM-XXX` with the appropriate JIRA issue, if applicable. This will automatically link the pull request to the issue.
 - [ ] If this contribution is large, please file an Apache [Individual Contributor License Agreement](https://www.apache.org/licenses/icla.pdf).

It will help us expedite review of your Pull Request if you tag someone (e.g. `@username`) to look at it.

                </div></div></li><li><div><div><b>title:</b> [BEAM-3773] [SQL] Add support for setting PipelineOptions
                </div><div><b>body:</b> Add support for setting PipelineOptions for pure SQL pipelines.

------------------------

Follow this checklist to help us incorporate your contribution quickly and easily:

 - [X] Format the pull request title like `[BEAM-XXX] Fixes bug in ApproximateQuantiles`, where you replace `BEAM-XXX` with the appropriate JIRA issue, if applicable. This will automatically link the pull request to the issue.
 - [ ] If this contribution is large, please file an Apache [Individual Contributor License Agreement](https://www.apache.org/licenses/icla.pdf).

It will help us expedite review of your Pull Request if you tag someone (e.g. `@username`) to look at it.

                </div></div></li><li><div><div><b>title:</b> [BEAM-3773] [SQL] Add support for setting PipelineOptions
                </div><div><b>body:</b> Add support for setting PipelineOptions for pure SQL pipelines.

------------------------

Follow this checklist to help us incorporate your contribution quickly and easily:

 - [X] Format the pull request title like `[BEAM-XXX] Fixes bug in ApproximateQuantiles`, where you replace `BEAM-XXX` with the appropriate JIRA issue, if applicable. This will automatically link the pull request to the issue.
 - [ ] If this contribution is large, please file an Apache [Individual Contributor License Agreement](https://www.apache.org/licenses/icla.pdf).

It will help us expedite review of your Pull Request if you tag someone (e.g. `@username`) to look at it.

                </div></div></li></ol></div><div><b>github_pulls_comments:</b> <ol><li><div>
                R: @kennknowles 
cc: @akedin @XuMingmin @xumingming 
              </div></li><li><div>
                run go precommit
              </div></li><li><div>
                This should now handle BeamSqlCli as well. I also fixed the spotless test failure.
              </div></li><li><div>
                @XuMingmin where are we with this? Do you still have concerns? If you do, are you available for a meeting next week to discuss?
              </div></li><li><div>
                @apilloud let's have a 30-minutes call to sync-up some details, want to make sure that the change can work with `BeamSqlCli` vs JDBC, PCollectionTable vs KafkaTable etc.  
              </div></li></ol></div><div><b>github_pulls_reviews:</b> <ol><li><div>
                Seems an unrelated change about DDL table type? And we don't provide a way to register customized `type` as an `SimpleIdentifier`
              </div></li><li><div><div><b>body:</b> It really seems like `PipelineOptionsFactory` should own this... in fact this makes sense as the primary entry point there, with `--` stripping being just some convenience method.
                </div><div><b>label:</b> code-design
                </div></div></li><li><div><div><b>body:</b> I suppose we can't test other values until we have a packaging story?
                </div><div><b>label:</b> test
                </div></div></li><li><div>
                SET/UNSET should be supported already, can you verify that?
              </div></li><li><div>
                I would suggest to have `pipelineOptions` on system/session level. Think about that the query has multiple tables, for join, what if they have different settings?
              </div></li><li><div>
                I mean the parser supports SET/UNSET(RESET?) syntax, although it's ignored in Beam implementation.
              </div></li><li><div>
                I can pull this out into a separate PR if you wish. We don't currently register `type` with the parser, but that isn't a problem because the parser performs no validation on `SimpleIdentifier`. This just enables us to use unquoted types. For example `TYPE text` instead of `TYPE 'text'`.
              </div></li><li><div>
                The parser does support SET/UNSET/RESET, however it can not execute or plan the resulting `SqlSetOption`. This is  a copy and paste of the calcite parser config with `SqlSetOption` replaced with `SqlSetOptionBeam`.
              </div></li><li><div>
                What do you mean by having `pipelineOptions` on the system/session level? These concepts aren't really different in Beam, there isn't a persistent system that can be configured separately from the session.

You can have multiple different `pipelineOptions` for tables if you have multiple schema. However that isn't supported and you'll find that the default `getPipelineOptions` asserts that every table has the same `pipelineOptions` map. As long as your tables are all on the same schema, they will have the same `pipelineOptions`.

If your question is why they are plumbed through here, that is because we don't have a single system level config that can be accessed from the BeamEnumerableConverter in every possible environment.
              </div></li><li><div><div><b>body:</b> I looked into this and spent a few hours prototyping, but gave up after finding the scope of work involved is non-trivial. `PipelineOptionsFactory` will require a significant refactor to get this done right.
                </div><div><b>label:</b> code-design
                </div></div></li><li><div>
                A packaging story is part of it. Other runners also require a full integration test as well, they can't just spin up in memory.
              </div></li><li><div>
                let's remove it from this PR for more visibility of what's changed. IMO `TYPE text instead of TYPE 'text'` is a confused point, if it doesn't support `TYPE jdbc`, `TYPE kafka`, or `TYPE mytable`.
              </div></li><li><div>
                I suppose this is about CLI part, and `BeamSqlCli` is the main point. --Pls correct me if any mis-understand since I see the test code uses `JdbcDriver`. In the prior way, you could extend  `execute` method to support `SqlSetOption` directly.

Ps, my CLI(a bash script which invokes BeamSqlCli) looks like:
```
CLI= BeamSqlCli.new
loop:
  EXPLAIN ...
  | (INSERT... ) SELECT ...
  | CREATE TABLE ...
  | SET/UNSET ...
  | EXIT
```
              </div></li><li><div>
                There was a discussion before to expose `BeamSqlEnv` in `BeamRelNode` or `BeamRelNode.toPTransform()`. This may be an option to have SET in session level. 
              </div></li><li><div>
                Ok, dropping this and adding it to #5601 
              </div></li><li><div>
                The JDBC path gives us no way to extend execute. When accessing Beam SQL through that path all outputs from the parser must be self executing, which `SqlSetOptionBeam` is. Are you already using `SET/RESET` for something?
              </div></li><li><div>
                I remember a discussion about removing `BeamSqlEnv` and replacing it with `meta/store` and `CalciteSchema` (which is implemented by `BeamCalciteSchema`), is that the one? I'm still not following how the concepts of system and session apply here.
              </div></li><li><div>
                That's the thread. My though of `pipelineOptions on session` level is, only keep `pipelineOptions` in `BeamCalciteSchema`, and expose `BeamCalciteSchema` where is needed. 
I use `BeamSqlCli` on version 2.4.0, it refers to [these lines](https://github.com/apilloud/beam/blob/9c1cd62cdf568cdd3ebb87f44771ded298984fde/sdks/java/extensions/sql/src/main/java/org/apache/beam/sdk/extensions/sql/BeamSqlCli.java#L58-L63). 
              </div></li><li><div>
                That is basically what is done here. I think you are wondering how to get it into `BeamSqlCli`? I'm out of the office today (and possibly tomorrow) but I'll get that added to this PR.

I think you might like the JDBC interface we've been working on. It can run queries like `BeamSqlCli` but can also give you output, for example row count on INSERT INTO or actual rows on SELECT queries.
              </div></li></ol></div><div><b>jira_issues:</b> <ol><li><div><div><b>summary:</b> [SQL] Investigate JDBC interface for Beam SQL
                </div><div><b>description:</b> JDBC allows integration with a lot of third-party tools, e.g [Zeppelin|https://zeppelin.apache.org/docs/0.7.0/manual/interpreters.html], [sqlline|https://github.com/julianhyde/sqlline]. We should look into how feasible it is to&nbsp;implement a JDBC&nbsp;interface for Beam SQL
                </div></div></li></ol></div><div><b>jira_issues_comments:</b> <ol><li><div>
                Raw Beam JDBC Prototype:&nbsp;[https://github.com/akedin/beam/commit/096ca8d7185af6b6a01f8231cf85c40fa221051a]

[~apilloud] is looking at Calcite Avatica integration: [https://calcite.apache.org/avatica/docs/]&nbsp;

&nbsp;
              </div></li><li><div>
                JDBC Driver Implemented on top of Avatica
              </div></li></ol></div></div></html>