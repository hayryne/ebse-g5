<!DOCTYPE html><html><div class="item-title">
        Item 82
      </div> <div class="item-details"><div><b>git_comments:</b> <ol><li><div>
                this permissions HTTP method does not match this rule. try other rules
              </div></li><li><div>
                check global permissions.
              </div></li><li><div>
                *
   * This checks for the defaults available other rules for the keys
   
              </div></li><li><div>
                
 * Licensed to the Apache Software Foundation (ASF) under one or more
 * contributor license agreements.  See the NOTICE file distributed with
 * this work for additional information regarding copyright ownership.
 * The ASF licenses this file to You under the Apache License, Version 2.0
 * (the "License"); you may not use this file except in compliance with
 * the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 
              </div></li><li><div>
                this resource needs a principal but the request has come without
any credential.
              </div></li><li><div>
                *
   * read a key value as a set. if the value is a single string ,
   * return a singleton set
   *
   * @param m   the map from which to lookup
   * @param key the key with which to do lookup
   
              </div></li><li><div>
                this is to do optimized lookup of permissions for a given collection/path
              </div></li><li><div>
                check permissions for each collection
              </div></li><li><div>
                no role is assigned permission.That means everybody is allowed to access
              </div></li><li><div>
                
 * Licensed to the Apache Software Foundation (ASF) under one or more
 * contributor license agreements.  See the NOTICE file distributed with
 * this work for additional information regarding copyright ownership.
 * The ASF licenses this file to You under the Apache License, Version 2.0
 * (the "License"); you may not use this file except in compliance with
 * the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 
              </div></li></ol></div><div><b>git_commits:</b> <ol><li><div><div><b>summary:</b> SOLR-7838: An authorizationPlugin interface where the access control rules are stored/managed in ZooKeeper
                </div><div><b>message:</b> SOLR-7838: An authorizationPlugin interface where the access control rules are stored/managed in ZooKeeper

git-svn-id: https://svn.apache.org/repos/asf/lucene/dev/trunk@1694553 13f79535-47bb-0310-9956-ffa450edef68

                </div></div></li></ol></div><div><b>github_issues:</b> <ol></ol></div><div><b>github_issues_comments:</b> <ol></ol></div><div><b>github_pulls:</b> <ol></ol></div><div><b>github_pulls_comments:</b> <ol></ol></div><div><b>github_pulls_reviews:</b> <ol></ol></div><div><b>jira_issues:</b> <ol><li><div><div><b>summary:</b> Implement a RuleBasedAuthorizationPlugin
                </div><div><b>description:</b> h2. authorization plugin

This would store the roles of various users and their privileges in ZK

sample authorization.json

{code:javascript}
{
  "authorization": {
    "class": "solr.ZKAuthorization",
   "user-role" :{
  "john" : ["admin", "guest"]
  "tom" : 'dev'
   }
    "permissions": [
       {"name":"collection-edit",
         "role": "admin" 
       },
       {"name":"coreadmin",
         "role":"admin"
       },
       {"name": "mycoll_update",
        "collection": "mycoll",
        "path":["/update/*"],
        "role": ["guest","admin"]
      }]
    }
  }
}
{code} 
This also supports editing of the configuration through APIs
Example 1: add or remove roles

{code}
curl --user solr:SolrRocks http://localhost:8983/solr/admin/authorization -H 'Content-type:application/json' -d '{ 
  "set-user-role": {"tom":["admin","dev"},
"set-user-role": {"harry":null}
}'
{code}
 

Example 2: add or remove permissions


{code}
curl --user solr:SolrRocks http://localhost:8983/solr/admin/authorization -H 'Content-type:application/json'-d '{ 

  "set-permission": { "name":"a-custom-permission-name",
                      "collection":"gettingstarted",
                      "path":"/handler-name",
                      "before": "name-of-another-permission"
   },

 "delete-permission":"permission-name"

}'
{code}
Use the 'before' property to re-order your permissions

Example 3: Restrict collection admin operations (writes only) to be performed by an admin only

{code}
curl --user solr:SolrRocks http://localhost:8983/solr/admin/authorization -H 'Content-type:application/json' -d '{
"set-permission" : {"name":"collection-admin-edit", "role":"admin"}}'

{code}
                </div></div></li><li><div><div><b>summary:</b> Implement a RuleBasedAuthorizationPlugin
                </div><div><b>description:</b> h2. authorization plugin

This would store the roles of various users and their privileges in ZK

sample authorization.json

{code:javascript}
{
  "authorization": {
    "class": "solr.ZKAuthorization",
   "user-role" :{
  "john" : ["admin", "guest"]
  "tom" : 'dev'
   }
    "permissions": [
       {"name":"collection-edit",
         "role": "admin" 
       },
       {"name":"coreadmin",
         "role":"admin"
       },
       {"name": "mycoll_update",
        "collection": "mycoll",
        "path":["/update/*"],
        "role": ["guest","admin"]
      }]
    }
  }
}
{code} 
This also supports editing of the configuration through APIs
Example 1: add or remove roles

{code}
curl --user solr:SolrRocks http://localhost:8983/solr/admin/authorization -H 'Content-type:application/json' -d '{ 
  "set-user-role": {"tom":["admin","dev"},
"set-user-role": {"harry":null}
}'
{code}
 

Example 2: add or remove permissions


{code}
curl --user solr:SolrRocks http://localhost:8983/solr/admin/authorization -H 'Content-type:application/json'-d '{ 

  "set-permission": { "name":"a-custom-permission-name",
                      "collection":"gettingstarted",
                      "path":"/handler-name",
                      "before": "name-of-another-permission"
   },

 "delete-permission":"permission-name"

}'
{code}
Use the 'before' property to re-order your permissions

Example 3: Restrict collection admin operations (writes only) to be performed by an admin only

{code}
curl --user solr:SolrRocks http://localhost:8983/solr/admin/authorization -H 'Content-type:application/json' -d '{
"set-permission" : {"name":"collection-admin-edit", "role":"admin"}}'

{code}
                </div></div></li><li><div><div><b>summary:</b> Implement a RuleBasedAuthorizationPlugin
                </div><div><b>description:</b> h2. authorization plugin

This would store the roles of various users and their privileges in ZK

sample authorization.json

{code:javascript}
{
  "authorization": {
    "class": "solr.ZKAuthorization",
   "user-role" :{
  "john" : ["admin", "guest"]
  "tom" : 'dev'
   }
    "permissions": [
       {"name":"collection-edit",
         "role": "admin" 
       },
       {"name":"coreadmin",
         "role":"admin"
       },
       {"name": "mycoll_update",
        "collection": "mycoll",
        "path":["/update/*"],
        "role": ["guest","admin"]
      }]
    }
  }
}
{code} 
This also supports editing of the configuration through APIs
Example 1: add or remove roles

{code}
curl --user solr:SolrRocks http://localhost:8983/solr/admin/authorization -H 'Content-type:application/json' -d '{ 
  "set-user-role": {"tom":["admin","dev"},
"set-user-role": {"harry":null}
}'
{code}
 

Example 2: add or remove permissions


{code}
curl --user solr:SolrRocks http://localhost:8983/solr/admin/authorization -H 'Content-type:application/json'-d '{ 

  "set-permission": { "name":"a-custom-permission-name",
                      "collection":"gettingstarted",
                      "path":"/handler-name",
                      "before": "name-of-another-permission"
   },

 "delete-permission":"permission-name"

}'
{code}
Use the 'before' property to re-order your permissions

Example 3: Restrict collection admin operations (writes only) to be performed by an admin only

{code}
curl --user solr:SolrRocks http://localhost:8983/solr/admin/authorization -H 'Content-type:application/json' -d '{
"set-permission" : {"name":"collection-admin-edit", "role":"admin"}}'

{code}
                </div></div></li><li><div><div><b>summary:</b> Implement a RuleBasedAuthorizationPlugin
                </div><div><b>description:</b> h2. authorization plugin

This would store the roles of various users and their privileges in ZK

sample authorization.json

{code:javascript}
{
  "authorization": {
    "class": "solr.ZKAuthorization",
   "user-role" :{
  "john" : ["admin", "guest"]
  "tom" : 'dev'
   }
    "permissions": [
       {"name":"collection-edit",
         "role": "admin" 
       },
       {"name":"coreadmin",
         "role":"admin"
       },
       {"name": "mycoll_update",
        "collection": "mycoll",
        "path":["/update/*"],
        "role": ["guest","admin"]
      }]
    }
  }
}
{code} 
This also supports editing of the configuration through APIs
Example 1: add or remove roles

{code}
curl --user solr:SolrRocks http://localhost:8983/solr/admin/authorization -H 'Content-type:application/json' -d '{ 
  "set-user-role": {"tom":["admin","dev"},
"set-user-role": {"harry":null}
}'
{code}
 

Example 2: add or remove permissions


{code}
curl --user solr:SolrRocks http://localhost:8983/solr/admin/authorization -H 'Content-type:application/json'-d '{ 

  "set-permission": { "name":"a-custom-permission-name",
                      "collection":"gettingstarted",
                      "path":"/handler-name",
                      "before": "name-of-another-permission"
   },

 "delete-permission":"permission-name"

}'
{code}
Use the 'before' property to re-order your permissions

Example 3: Restrict collection admin operations (writes only) to be performed by an admin only

{code}
curl --user solr:SolrRocks http://localhost:8983/solr/admin/authorization -H 'Content-type:application/json' -d '{
"set-permission" : {"name":"collection-admin-edit", "role":"admin"}}'

{code}
                </div></div></li><li><div><div><b>summary:</b> Implement a RuleBasedAuthorizationPlugin
                </div><div><b>description:</b> h2. authorization plugin

This would store the roles of various users and their privileges in ZK

sample authorization.json

{code:javascript}
{
  "authorization": {
    "class": "solr.ZKAuthorization",
   "user-role" :{
  "john" : ["admin", "guest"]
  "tom" : 'dev'
   }
    "permissions": [
       {"name":"collection-edit",
         "role": "admin" 
       },
       {"name":"coreadmin",
         "role":"admin"
       },
       {"name": "mycoll_update",
        "collection": "mycoll",
        "path":["/update/*"],
        "role": ["guest","admin"]
      }]
    }
  }
}
{code} 
This also supports editing of the configuration through APIs
Example 1: add or remove roles

{code}
curl --user solr:SolrRocks http://localhost:8983/solr/admin/authorization -H 'Content-type:application/json' -d '{ 
  "set-user-role": {"tom":["admin","dev"},
"set-user-role": {"harry":null}
}'
{code}
 

Example 2: add or remove permissions


{code}
curl --user solr:SolrRocks http://localhost:8983/solr/admin/authorization -H 'Content-type:application/json'-d '{ 

  "set-permission": { "name":"a-custom-permission-name",
                      "collection":"gettingstarted",
                      "path":"/handler-name",
                      "before": "name-of-another-permission"
   },

 "delete-permission":"permission-name"

}'
{code}
Use the 'before' property to re-order your permissions

Example 3: Restrict collection admin operations (writes only) to be performed by an admin only

{code}
curl --user solr:SolrRocks http://localhost:8983/solr/admin/authorization -H 'Content-type:application/json' -d '{
"set-permission" : {"name":"collection-admin-edit", "role":"admin"}}'

{code}
                </div><div><b>label:</b> code-design
                </div></div></li><li><div><div><b>summary:</b> Implement a RuleBasedAuthorizationPlugin
                </div><div><b>description:</b> h2. authorization plugin

This would store the roles of various users and their privileges in ZK

sample authorization.json

{code:javascript}
{
  "authorization": {
    "class": "solr.ZKAuthorization",
   "user-role" :{
  "john" : ["admin", "guest"]
  "tom" : 'dev'
   }
    "permissions": [
       {"name":"collection-edit",
         "role": "admin" 
       },
       {"name":"coreadmin",
         "role":"admin"
       },
       {"name": "mycoll_update",
        "collection": "mycoll",
        "path":["/update/*"],
        "role": ["guest","admin"]
      }]
    }
  }
}
{code} 
This also supports editing of the configuration through APIs
Example 1: add or remove roles

{code}
curl --user solr:SolrRocks http://localhost:8983/solr/admin/authorization -H 'Content-type:application/json' -d '{ 
  "set-user-role": {"tom":["admin","dev"},
"set-user-role": {"harry":null}
}'
{code}
 

Example 2: add or remove permissions


{code}
curl --user solr:SolrRocks http://localhost:8983/solr/admin/authorization -H 'Content-type:application/json'-d '{ 

  "set-permission": { "name":"a-custom-permission-name",
                      "collection":"gettingstarted",
                      "path":"/handler-name",
                      "before": "name-of-another-permission"
   },

 "delete-permission":"permission-name"

}'
{code}
Use the 'before' property to re-order your permissions

Example 3: Restrict collection admin operations (writes only) to be performed by an admin only

{code}
curl --user solr:SolrRocks http://localhost:8983/solr/admin/authorization -H 'Content-type:application/json' -d '{
"set-permission" : {"name":"collection-admin-edit", "role":"admin"}}'

{code}
                </div></div></li><li><div><div><b>summary:</b> Implement a RuleBasedAuthorizationPlugin
                </div><div><b>description:</b> h2. authorization plugin

This would store the roles of various users and their privileges in ZK

sample authorization.json

{code:javascript}
{
  "authorization": {
    "class": "solr.ZKAuthorization",
   "user-role" :{
  "john" : ["admin", "guest"]
  "tom" : 'dev'
   }
    "permissions": [
       {"name":"collection-edit",
         "role": "admin" 
       },
       {"name":"coreadmin",
         "role":"admin"
       },
       {"name": "mycoll_update",
        "collection": "mycoll",
        "path":["/update/*"],
        "role": ["guest","admin"]
      }]
    }
  }
}
{code} 
This also supports editing of the configuration through APIs
Example 1: add or remove roles

{code}
curl --user solr:SolrRocks http://localhost:8983/solr/admin/authorization -H 'Content-type:application/json' -d '{ 
  "set-user-role": {"tom":["admin","dev"},
"set-user-role": {"harry":null}
}'
{code}
 

Example 2: add or remove permissions


{code}
curl --user solr:SolrRocks http://localhost:8983/solr/admin/authorization -H 'Content-type:application/json'-d '{ 

  "set-permission": { "name":"a-custom-permission-name",
                      "collection":"gettingstarted",
                      "path":"/handler-name",
                      "before": "name-of-another-permission"
   },

 "delete-permission":"permission-name"

}'
{code}
Use the 'before' property to re-order your permissions

Example 3: Restrict collection admin operations (writes only) to be performed by an admin only

{code}
curl --user solr:SolrRocks http://localhost:8983/solr/admin/authorization -H 'Content-type:application/json' -d '{
"set-permission" : {"name":"collection-admin-edit", "role":"admin"}}'

{code}
                </div></div></li><li><div><div><b>summary:</b> Implement a RuleBasedAuthorizationPlugin
                </div><div><b>description:</b> h2. authorization plugin

This would store the roles of various users and their privileges in ZK

sample authorization.json

{code:javascript}
{
  "authorization": {
    "class": "solr.ZKAuthorization",
   "user-role" :{
  "john" : ["admin", "guest"]
  "tom" : 'dev'
   }
    "permissions": [
       {"name":"collection-edit",
         "role": "admin" 
       },
       {"name":"coreadmin",
         "role":"admin"
       },
       {"name": "mycoll_update",
        "collection": "mycoll",
        "path":["/update/*"],
        "role": ["guest","admin"]
      }]
    }
  }
}
{code} 
This also supports editing of the configuration through APIs
Example 1: add or remove roles

{code}
curl --user solr:SolrRocks http://localhost:8983/solr/admin/authorization -H 'Content-type:application/json' -d '{ 
  "set-user-role": {"tom":["admin","dev"},
"set-user-role": {"harry":null}
}'
{code}
 

Example 2: add or remove permissions


{code}
curl --user solr:SolrRocks http://localhost:8983/solr/admin/authorization -H 'Content-type:application/json'-d '{ 

  "set-permission": { "name":"a-custom-permission-name",
                      "collection":"gettingstarted",
                      "path":"/handler-name",
                      "before": "name-of-another-permission"
   },

 "delete-permission":"permission-name"

}'
{code}
Use the 'before' property to re-order your permissions

Example 3: Restrict collection admin operations (writes only) to be performed by an admin only

{code}
curl --user solr:SolrRocks http://localhost:8983/solr/admin/authorization -H 'Content-type:application/json' -d '{
"set-permission" : {"name":"collection-admin-edit", "role":"admin"}}'

{code}
                </div></div></li><li><div><div><b>summary:</b> Implement a RuleBasedAuthorizationPlugin
                </div><div><b>description:</b> h2. authorization plugin

This would store the roles of various users and their privileges in ZK

sample authorization.json

{code:javascript}
{
  "authorization": {
    "class": "solr.ZKAuthorization",
   "user-role" :{
  "john" : ["admin", "guest"]
  "tom" : 'dev'
   }
    "permissions": [
       {"name":"collection-edit",
         "role": "admin" 
       },
       {"name":"coreadmin",
         "role":"admin"
       },
       {"name": "mycoll_update",
        "collection": "mycoll",
        "path":["/update/*"],
        "role": ["guest","admin"]
      }]
    }
  }
}
{code} 
This also supports editing of the configuration through APIs
Example 1: add or remove roles

{code}
curl --user solr:SolrRocks http://localhost:8983/solr/admin/authorization -H 'Content-type:application/json' -d '{ 
  "set-user-role": {"tom":["admin","dev"},
"set-user-role": {"harry":null}
}'
{code}
 

Example 2: add or remove permissions


{code}
curl --user solr:SolrRocks http://localhost:8983/solr/admin/authorization -H 'Content-type:application/json'-d '{ 

  "set-permission": { "name":"a-custom-permission-name",
                      "collection":"gettingstarted",
                      "path":"/handler-name",
                      "before": "name-of-another-permission"
   },

 "delete-permission":"permission-name"

}'
{code}
Use the 'before' property to re-order your permissions

Example 3: Restrict collection admin operations (writes only) to be performed by an admin only

{code}
curl --user solr:SolrRocks http://localhost:8983/solr/admin/authorization -H 'Content-type:application/json' -d '{
"set-permission" : {"name":"collection-admin-edit", "role":"admin"}}'

{code}
                </div></div></li><li><div><div><b>summary:</b> Implement a RuleBasedAuthorizationPlugin
                </div><div><b>description:</b> h2. authorization plugin

This would store the roles of various users and their privileges in ZK

sample authorization.json

{code:javascript}
{
  "authorization": {
    "class": "solr.ZKAuthorization",
   "user-role" :{
  "john" : ["admin", "guest"]
  "tom" : 'dev'
   }
    "permissions": [
       {"name":"collection-edit",
         "role": "admin" 
       },
       {"name":"coreadmin",
         "role":"admin"
       },
       {"name": "mycoll_update",
        "collection": "mycoll",
        "path":["/update/*"],
        "role": ["guest","admin"]
      }]
    }
  }
}
{code} 
This also supports editing of the configuration through APIs
Example 1: add or remove roles

{code}
curl --user solr:SolrRocks http://localhost:8983/solr/admin/authorization -H 'Content-type:application/json' -d '{ 
  "set-user-role": {"tom":["admin","dev"},
"set-user-role": {"harry":null}
}'
{code}
 

Example 2: add or remove permissions


{code}
curl --user solr:SolrRocks http://localhost:8983/solr/admin/authorization -H 'Content-type:application/json'-d '{ 

  "set-permission": { "name":"a-custom-permission-name",
                      "collection":"gettingstarted",
                      "path":"/handler-name",
                      "before": "name-of-another-permission"
   },

 "delete-permission":"permission-name"

}'
{code}
Use the 'before' property to re-order your permissions

Example 3: Restrict collection admin operations (writes only) to be performed by an admin only

{code}
curl --user solr:SolrRocks http://localhost:8983/solr/admin/authorization -H 'Content-type:application/json' -d '{
"set-permission" : {"name":"collection-admin-edit", "role":"admin"}}'

{code}
                </div></div></li><li><div><div><b>summary:</b> Implement a RuleBasedAuthorizationPlugin
                </div><div><b>description:</b> h2. authorization plugin

This would store the roles of various users and their privileges in ZK

sample authorization.json

{code:javascript}
{
  "authorization": {
    "class": "solr.ZKAuthorization",
   "user-role" :{
  "john" : ["admin", "guest"]
  "tom" : 'dev'
   }
    "permissions": [
       {"name":"collection-edit",
         "role": "admin" 
       },
       {"name":"coreadmin",
         "role":"admin"
       },
       {"name": "mycoll_update",
        "collection": "mycoll",
        "path":["/update/*"],
        "role": ["guest","admin"]
      }]
    }
  }
}
{code} 
This also supports editing of the configuration through APIs
Example 1: add or remove roles

{code}
curl --user solr:SolrRocks http://localhost:8983/solr/admin/authorization -H 'Content-type:application/json' -d '{ 
  "set-user-role": {"tom":["admin","dev"},
"set-user-role": {"harry":null}
}'
{code}
 

Example 2: add or remove permissions


{code}
curl --user solr:SolrRocks http://localhost:8983/solr/admin/authorization -H 'Content-type:application/json'-d '{ 

  "set-permission": { "name":"a-custom-permission-name",
                      "collection":"gettingstarted",
                      "path":"/handler-name",
                      "before": "name-of-another-permission"
   },

 "delete-permission":"permission-name"

}'
{code}
Use the 'before' property to re-order your permissions

Example 3: Restrict collection admin operations (writes only) to be performed by an admin only

{code}
curl --user solr:SolrRocks http://localhost:8983/solr/admin/authorization -H 'Content-type:application/json' -d '{
"set-permission" : {"name":"collection-admin-edit", "role":"admin"}}'

{code}
                </div></div></li><li><div><div><b>summary:</b> Implement a RuleBasedAuthorizationPlugin
                </div><div><b>description:</b> h2. authorization plugin

This would store the roles of various users and their privileges in ZK

sample authorization.json

{code:javascript}
{
  "authorization": {
    "class": "solr.ZKAuthorization",
   "user-role" :{
  "john" : ["admin", "guest"]
  "tom" : 'dev'
   }
    "permissions": [
       {"name":"collection-edit",
         "role": "admin" 
       },
       {"name":"coreadmin",
         "role":"admin"
       },
       {"name": "mycoll_update",
        "collection": "mycoll",
        "path":["/update/*"],
        "role": ["guest","admin"]
      }]
    }
  }
}
{code} 
This also supports editing of the configuration through APIs
Example 1: add or remove roles

{code}
curl --user solr:SolrRocks http://localhost:8983/solr/admin/authorization -H 'Content-type:application/json' -d '{ 
  "set-user-role": {"tom":["admin","dev"},
"set-user-role": {"harry":null}
}'
{code}
 

Example 2: add or remove permissions


{code}
curl --user solr:SolrRocks http://localhost:8983/solr/admin/authorization -H 'Content-type:application/json'-d '{ 

  "set-permission": { "name":"a-custom-permission-name",
                      "collection":"gettingstarted",
                      "path":"/handler-name",
                      "before": "name-of-another-permission"
   },

 "delete-permission":"permission-name"

}'
{code}
Use the 'before' property to re-order your permissions

Example 3: Restrict collection admin operations (writes only) to be performed by an admin only

{code}
curl --user solr:SolrRocks http://localhost:8983/solr/admin/authorization -H 'Content-type:application/json' -d '{
"set-permission" : {"name":"collection-admin-edit", "role":"admin"}}'

{code}
                </div></div></li><li><div><div><b>summary:</b> Implement a RuleBasedAuthorizationPlugin
                </div><div><b>description:</b> h2. authorization plugin

This would store the roles of various users and their privileges in ZK

sample authorization.json

{code:javascript}
{
  "authorization": {
    "class": "solr.ZKAuthorization",
   "user-role" :{
  "john" : ["admin", "guest"]
  "tom" : 'dev'
   }
    "permissions": [
       {"name":"collection-edit",
         "role": "admin" 
       },
       {"name":"coreadmin",
         "role":"admin"
       },
       {"name": "mycoll_update",
        "collection": "mycoll",
        "path":["/update/*"],
        "role": ["guest","admin"]
      }]
    }
  }
}
{code} 
This also supports editing of the configuration through APIs
Example 1: add or remove roles

{code}
curl --user solr:SolrRocks http://localhost:8983/solr/admin/authorization -H 'Content-type:application/json' -d '{ 
  "set-user-role": {"tom":["admin","dev"},
"set-user-role": {"harry":null}
}'
{code}
 

Example 2: add or remove permissions


{code}
curl --user solr:SolrRocks http://localhost:8983/solr/admin/authorization -H 'Content-type:application/json'-d '{ 

  "set-permission": { "name":"a-custom-permission-name",
                      "collection":"gettingstarted",
                      "path":"/handler-name",
                      "before": "name-of-another-permission"
   },

 "delete-permission":"permission-name"

}'
{code}
Use the 'before' property to re-order your permissions

Example 3: Restrict collection admin operations (writes only) to be performed by an admin only

{code}
curl --user solr:SolrRocks http://localhost:8983/solr/admin/authorization -H 'Content-type:application/json' -d '{
"set-permission" : {"name":"collection-admin-edit", "role":"admin"}}'

{code}
                </div></div></li><li><div><div><b>summary:</b> Implement a RuleBasedAuthorizationPlugin
                </div><div><b>description:</b> h2. authorization plugin

This would store the roles of various users and their privileges in ZK

sample authorization.json

{code:javascript}
{
  "authorization": {
    "class": "solr.ZKAuthorization",
   "user-role" :{
  "john" : ["admin", "guest"]
  "tom" : 'dev'
   }
    "permissions": [
       {"name":"collection-edit",
         "role": "admin" 
       },
       {"name":"coreadmin",
         "role":"admin"
       },
       {"name": "mycoll_update",
        "collection": "mycoll",
        "path":["/update/*"],
        "role": ["guest","admin"]
      }]
    }
  }
}
{code} 
This also supports editing of the configuration through APIs
Example 1: add or remove roles

{code}
curl --user solr:SolrRocks http://localhost:8983/solr/admin/authorization -H 'Content-type:application/json' -d '{ 
  "set-user-role": {"tom":["admin","dev"},
"set-user-role": {"harry":null}
}'
{code}
 

Example 2: add or remove permissions


{code}
curl --user solr:SolrRocks http://localhost:8983/solr/admin/authorization -H 'Content-type:application/json'-d '{ 

  "set-permission": { "name":"a-custom-permission-name",
                      "collection":"gettingstarted",
                      "path":"/handler-name",
                      "before": "name-of-another-permission"
   },

 "delete-permission":"permission-name"

}'
{code}
Use the 'before' property to re-order your permissions

Example 3: Restrict collection admin operations (writes only) to be performed by an admin only

{code}
curl --user solr:SolrRocks http://localhost:8983/solr/admin/authorization -H 'Content-type:application/json' -d '{
"set-permission" : {"name":"collection-admin-edit", "role":"admin"}}'

{code}
                </div></div></li><li><div><div><b>summary:</b> Implement a RuleBasedAuthorizationPlugin
                </div><div><b>description:</b> h2. authorization plugin

This would store the roles of various users and their privileges in ZK

sample authorization.json

{code:javascript}
{
  "authorization": {
    "class": "solr.ZKAuthorization",
   "user-role" :{
  "john" : ["admin", "guest"]
  "tom" : 'dev'
   }
    "permissions": [
       {"name":"collection-edit",
         "role": "admin" 
       },
       {"name":"coreadmin",
         "role":"admin"
       },
       {"name": "mycoll_update",
        "collection": "mycoll",
        "path":["/update/*"],
        "role": ["guest","admin"]
      }]
    }
  }
}
{code} 
This also supports editing of the configuration through APIs
Example 1: add or remove roles

{code}
curl --user solr:SolrRocks http://localhost:8983/solr/admin/authorization -H 'Content-type:application/json' -d '{ 
  "set-user-role": {"tom":["admin","dev"},
"set-user-role": {"harry":null}
}'
{code}
 

Example 2: add or remove permissions


{code}
curl --user solr:SolrRocks http://localhost:8983/solr/admin/authorization -H 'Content-type:application/json'-d '{ 

  "set-permission": { "name":"a-custom-permission-name",
                      "collection":"gettingstarted",
                      "path":"/handler-name",
                      "before": "name-of-another-permission"
   },

 "delete-permission":"permission-name"

}'
{code}
Use the 'before' property to re-order your permissions

Example 3: Restrict collection admin operations (writes only) to be performed by an admin only

{code}
curl --user solr:SolrRocks http://localhost:8983/solr/admin/authorization -H 'Content-type:application/json' -d '{
"set-permission" : {"name":"collection-admin-edit", "role":"admin"}}'

{code}
                </div></div></li><li><div><div><b>summary:</b> Implement a RuleBasedAuthorizationPlugin
                </div><div><b>description:</b> h2. authorization plugin

This would store the roles of various users and their privileges in ZK

sample authorization.json

{code:javascript}
{
  "authorization": {
    "class": "solr.ZKAuthorization",
   "user-role" :{
  "john" : ["admin", "guest"]
  "tom" : 'dev'
   }
    "permissions": [
       {"name":"collection-edit",
         "role": "admin" 
       },
       {"name":"coreadmin",
         "role":"admin"
       },
       {"name": "mycoll_update",
        "collection": "mycoll",
        "path":["/update/*"],
        "role": ["guest","admin"]
      }]
    }
  }
}
{code} 
This also supports editing of the configuration through APIs
Example 1: add or remove roles

{code}
curl --user solr:SolrRocks http://localhost:8983/solr/admin/authorization -H 'Content-type:application/json' -d '{ 
  "set-user-role": {"tom":["admin","dev"},
"set-user-role": {"harry":null}
}'
{code}
 

Example 2: add or remove permissions


{code}
curl --user solr:SolrRocks http://localhost:8983/solr/admin/authorization -H 'Content-type:application/json'-d '{ 

  "set-permission": { "name":"a-custom-permission-name",
                      "collection":"gettingstarted",
                      "path":"/handler-name",
                      "before": "name-of-another-permission"
   },

 "delete-permission":"permission-name"

}'
{code}
Use the 'before' property to re-order your permissions

Example 3: Restrict collection admin operations (writes only) to be performed by an admin only

{code}
curl --user solr:SolrRocks http://localhost:8983/solr/admin/authorization -H 'Content-type:application/json' -d '{
"set-permission" : {"name":"collection-admin-edit", "role":"admin"}}'

{code}
                </div></div></li><li><div><div><b>summary:</b> Implement a RuleBasedAuthorizationPlugin
                </div><div><b>description:</b> h2. authorization plugin

This would store the roles of various users and their privileges in ZK

sample authorization.json

{code:javascript}
{
  "authorization": {
    "class": "solr.ZKAuthorization",
   "user-role" :{
  "john" : ["admin", "guest"]
  "tom" : 'dev'
   }
    "permissions": [
       {"name":"collection-edit",
         "role": "admin" 
       },
       {"name":"coreadmin",
         "role":"admin"
       },
       {"name": "mycoll_update",
        "collection": "mycoll",
        "path":["/update/*"],
        "role": ["guest","admin"]
      }]
    }
  }
}
{code} 
This also supports editing of the configuration through APIs
Example 1: add or remove roles

{code}
curl --user solr:SolrRocks http://localhost:8983/solr/admin/authorization -H 'Content-type:application/json' -d '{ 
  "set-user-role": {"tom":["admin","dev"},
"set-user-role": {"harry":null}
}'
{code}
 

Example 2: add or remove permissions


{code}
curl --user solr:SolrRocks http://localhost:8983/solr/admin/authorization -H 'Content-type:application/json'-d '{ 

  "set-permission": { "name":"a-custom-permission-name",
                      "collection":"gettingstarted",
                      "path":"/handler-name",
                      "before": "name-of-another-permission"
   },

 "delete-permission":"permission-name"

}'
{code}
Use the 'before' property to re-order your permissions

Example 3: Restrict collection admin operations (writes only) to be performed by an admin only

{code}
curl --user solr:SolrRocks http://localhost:8983/solr/admin/authorization -H 'Content-type:application/json' -d '{
"set-permission" : {"name":"collection-admin-edit", "role":"admin"}}'

{code}
                </div></div></li><li><div><div><b>summary:</b> Implement a RuleBasedAuthorizationPlugin
                </div><div><b>description:</b> h2. authorization plugin

This would store the roles of various users and their privileges in ZK

sample authorization.json

{code:javascript}
{
  "authorization": {
    "class": "solr.ZKAuthorization",
   "user-role" :{
  "john" : ["admin", "guest"]
  "tom" : 'dev'
   }
    "permissions": [
       {"name":"collection-edit",
         "role": "admin" 
       },
       {"name":"coreadmin",
         "role":"admin"
       },
       {"name": "mycoll_update",
        "collection": "mycoll",
        "path":["/update/*"],
        "role": ["guest","admin"]
      }]
    }
  }
}
{code} 
This also supports editing of the configuration through APIs
Example 1: add or remove roles

{code}
curl --user solr:SolrRocks http://localhost:8983/solr/admin/authorization -H 'Content-type:application/json' -d '{ 
  "set-user-role": {"tom":["admin","dev"},
"set-user-role": {"harry":null}
}'
{code}
 

Example 2: add or remove permissions


{code}
curl --user solr:SolrRocks http://localhost:8983/solr/admin/authorization -H 'Content-type:application/json'-d '{ 

  "set-permission": { "name":"a-custom-permission-name",
                      "collection":"gettingstarted",
                      "path":"/handler-name",
                      "before": "name-of-another-permission"
   },

 "delete-permission":"permission-name"

}'
{code}
Use the 'before' property to re-order your permissions

Example 3: Restrict collection admin operations (writes only) to be performed by an admin only

{code}
curl --user solr:SolrRocks http://localhost:8983/solr/admin/authorization -H 'Content-type:application/json' -d '{
"set-permission" : {"name":"collection-admin-edit", "role":"admin"}}'

{code}
                </div></div></li></ol></div><div><b>jira_issues_comments:</b> <ol><li><div>
                Commit 1694553 from [~noble.paul] in branch 'dev/trunk'
[ https://svn.apache.org/r1694553 ]

SOLR-7838: An authorizationPlugin interface where the access control rules are stored/managed in ZooKeeper
              </div></li><li><div>
                Commit 1694554 from [~noble.paul] in branch 'dev/trunk'
[ https://svn.apache.org/r1694554 ]

SOLR-7838: CHANGES
              </div></li><li><div>
                Commit 1694557 from [~noble.paul] in branch 'dev/branches/branch_5x'
[ https://svn.apache.org/r1694557 ]

SOLR-7838: An authorizationPlugin interface where the access control rules are stored/managed in ZooKeeper
              </div></li><li><div>
                Commit 1694559 from [~noble.paul] in branch 'dev/branches/branch_5x'
[ https://svn.apache.org/r1694559 ]

SOLR-7838: Predicate is not available in Java 7
              </div></li><li><div><div><b>body:</b> What's this? A JIRA without description. Commits without fixVersion and Assignee. No clue on how to use it... No attached patches or discussion of solution before commit.

PS: I have not looked at the code, so the committed stuff may be perfectly OK and wanted. Just felt like giving a friendly reminder about working "[The Apache-Way|http://theapacheway.com/]".
                </div><div><b>label:</b> code-design
                </div></div></li><li><div>
                Sorry for the trouble. The description is same as that in SOLR-7692 (the parent ticket) other committers insisted on splitting this into multiple pieces. So I just  created a ticket for committing stuff. I'll copy the description over 
              </div></li><li><div>
                Cool, I did not notice the parent when I wrote the comment, it all makes sense now. Sorry for jumping to conclusions :(
              </div></li><li><div>
                Commit 1694864 from [~noble.paul] in branch 'dev/branches/lucene_solr_5_3'
[ https://svn.apache.org/r1694864 ]

SOLR-7757: Improved security framework where security components can be edited/reloaded, Solr now watches /security.json. Components can choose to make their config editable, SOLR-7838: An authorizationPlugin interface where the access control rules are stored/managed in ZooKeeper , SOLR-7837: An AuthenticationPlugin which implements the HTTP BasicAuth protocol and stores credentials securely in ZooKeeper
              </div></li><li><div>
                Sorry to be so late in reviewing this. One thing that I noticed was that the "permissions" section (both in security.json and in the output of /admin/authorization) is a JSON object but order is very important here. Now some JSON parsers adhere to JSON standard (keys in map/object are unordered) and some do not. But if we do not change this from a object/map to an array before the release, there'd be no way to change it in a back-compatible manner later.

I'd vote to delay the release by a day or two and fix this now.
              </div></li><li><div>
                need to fix the syntax as per the feedback
              </div></li><li><div>
                Commit 1695308 from [~noble.paul] in branch 'dev/trunk'
[ https://svn.apache.org/r1695308 ]

SOLR-7838: changed the permissions froma map to an array so that order is obvious
              </div></li><li><div>
                Commit 1695324 from [~noble.paul] in branch 'dev/branches/branch_5x'
[ https://svn.apache.org/r1695324 ]

SOLR-7838: changed the permissions froma map to an array so that order is obvious
              </div></li><li><div>
                Commit 1695325 from [~noble.paul] in branch 'dev/branches/branch_5x'
[ https://svn.apache.org/r1695325 ]

SOLR-7838: changed the permissions froma map to an array so that order is obvious
              </div></li><li><div>
                Commit 1695330 from [~noble.paul] in branch 'dev/branches/lucene_solr_5_3'
[ https://svn.apache.org/r1695330 ]

SOLR-7838: changed the permissions from a map to an array so that order is obvious
              </div></li><li><div>
                Commit 1695331 from [~noble.paul] in branch 'dev/branches/lucene_solr_5_3'
[ https://svn.apache.org/r1695331 ]

SOLR-7838: changed the permissions from a map to an array so that order is obvious
              </div></li><li><div>
                Bulk close for 5.3.0 release
              </div></li></ol></div></div></html>