<!DOCTYPE html><html><div class="item-title">
        Item 82
      </div> <div class="item-details"><div><b>git_comments:</b> <ol><li><div>
                 Oracle JDK 
 Oracle JRE 
 Apple JDK 
              </div></li><li><div>
                 detect bootclasspath from given bootjdk path (including crazy AppleJDK special case) 
              </div></li></ol></div><div><b>git_commits:</b> <ol><li><div><div><b>summary:</b> Backport this to 4.6, so we can be sure that next release has correct version and bootclasspath for "nice" javadocs:
                </div><div><b>message:</b> Backport this to 4.6, so we can be sure that next release has correct version and bootclasspath for "nice" javadocs:
Merged revision(s) 1547347 from lucene/dev/branches/branch_4x:
LUCENE-5355: Add support for -Dbootjdk to point to a separate JAVA_HOME that is used to generate javadocs; validate the -Dbootclasspath to point to a valid rt.jar

git-svn-id: https://svn.apache.org/repos/asf/lucene/dev/branches/lucene_solr_4_6@1559597 13f79535-47bb-0310-9956-ffa450edef68

                </div></div></li></ol></div><div><b>github_issues:</b> <ol></ol></div><div><b>github_issues_comments:</b> <ol></ol></div><div><b>github_pulls:</b> <ol></ol></div><div><b>github_pulls_comments:</b> <ol></ol></div><div><b>github_pulls_reviews:</b> <ol></ol></div><div><b>jira_issues:</b> <ol><li><div><div><b>summary:</b> Add more support to validate the -Dbootclasspath given for javadocs generate
                </div><div><b>description:</b> When Simon created the nice looking javadocs for LuSolr 4.6, he just copypasted the command line from http://wiki.apache.org/lucene-java/HowToGenerateNiceJavadocs

Unfortunately this does not work with AppleJDK6, because it has no rt.jar! The rt.jar file is there in a completely different directory and is named classes.jar. I had a similar problem when I wanted to regenerate the Javadocs on my Linux box, but specified {{-Dbootclasspath}} with shell specials (e.g., {{~}} for homedir).

This patch will assist the user and will "validate" the given bootclasspath, so it points to a JAR file that actually contains the runtime. Also to make life easier, instead of {{-Dbootclasspath}} you can set {{-Dbootjdk}} to the JDK homefolder (same like JAVA_HOME) and ANT will figure out if it is Apple or Oracle or maybe only a JRE.

In the meantime, I regenerated the 4.6 Javadocs with correct bootclasspath.
                </div></div></li></ol></div><div><b>jira_issues_comments:</b> <ol><li><div>
                Patch.
              </div></li><li><div>
                Did you mean to leave a commented out echo?
+1 otherwise.
              </div></li><li><div>
                I left the comment intentionally in, because I used it to debug. I can remove it before committing.
              </div></li><li><div>
                this patch just means you give the JAVA_HOME instead of having to supply the full path to the runtime jar right?

+1
              </div></li><li><div>
                YES: {{ant documentation -Dbootjdk=/path/to/jdk6}}
              </div></li><li><div>
                Maybe another name for the property? It was just my first idea.
              </div></li><li><div><div><b>body:</b> I think the name is fine: we can just edit the HowToGenerateNiceJavadocs to reflect it. By the time someone has reached this point in the release process (5 beers?), they are hopefully copy-pasting to avoid typos anyway.
                </div><div><b>label:</b> documentation
                </div></div></li><li><div>
                Commit 1547346 from [~thetaphi] in branch 'dev/trunk'
[ https://svn.apache.org/r1547346 ]

LUCENE-5355: Add support for -Dbootjdk to point to a separate JAVA_HOME that is used to generate javadocs; validate the -Dbootclasspath to point to a valid rt.jar
              </div></li><li><div>
                Commit 1547347 from [~thetaphi] in branch 'dev/branches/branch_4x'
[ https://svn.apache.org/r1547347 ]

Merged revision(s) 1547346 from lucene/dev/trunk:
LUCENE-5355: Add support for -Dbootjdk to point to a separate JAVA_HOME that is used to generate javadocs; validate the -Dbootclasspath to point to a valid rt.jar
              </div></li><li><div>
                Commit 1559597 from [~thetaphi] in branch 'dev/branches/lucene_solr_4_6'
[ https://svn.apache.org/r1559597 ]

Backport this to 4.6, so we can be sure that next release has correct version and bootclasspath for "nice" javadocs:
Merged revision(s) 1547347 from lucene/dev/branches/branch_4x:
LUCENE-5355: Add support for -Dbootjdk to point to a separate JAVA_HOME that is used to generate javadocs; validate the -Dbootclasspath to point to a valid rt.jar
              </div></li></ol></div></div></html>