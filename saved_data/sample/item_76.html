<!DOCTYPE html><html><div class="item-title">
        Item 76
      </div> <div class="item-details"><div><b>git_comments:</b> <ol><li><div>
                 The JVM likes to wrap our helpful SolrExceptions in things like
 "InvocationTargetException" that have no useful getMessage
              </div></li><li><div>
                *
   * Gets and returns the {@link #VERSION_FIELD} from the specified 
   * schema, after verifying that it is indexed, stored, and single-valued.  
   * If any of these pre-conditions are not met, it throws a SolrException 
   * with a user suitable message indicating the problem.
   
              </div></li><li><div>
                 :TODO: neccessary until SOLR-3699 is fixed
              </div></li></ol></div><div><b>git_commits:</b> <ol><li><div><div><b>summary:</b> SOLR-3746: Proper error reporting if updateLog is configured w/o necessary _version_ field in schema.xml (merge r1375674)
                </div><div><b>message:</b> SOLR-3746: Proper error reporting if updateLog is configured w/o necessary _version_ field in schema.xml (merge r1375674)

git-svn-id: https://svn.apache.org/repos/asf/lucene/dev/branches/branch_4x@1375690 13f79535-47bb-0310-9956-ffa450edef68

                </div></div></li></ol></div><div><b>github_issues:</b> <ol></ol></div><div><b>github_issues_comments:</b> <ol></ol></div><div><b>github_pulls:</b> <ol></ol></div><div><b>github_pulls_comments:</b> <ol></ol></div><div><b>github_pulls_reviews:</b> <ol></ol></div><div><b>jira_issues:</b> <ol><li><div><div><b>summary:</b> updateLog should fail to init if there is no _version_ field in schema.xml
                </div><div><b>description:</b> Per irc conversation with yonik, it's not clear if updateLog works correctly in all situations if there is no {{\_version\_}} field in the schema...

* it's certainly not tested
* SOLR-3432 makes it clear there are at least some problematic sitautions

For these reasons, updateLog initialization should fail fast with a clear error if there is no {{\_version\_}} field in the schema.

(we can always relax this restriction later if people write the code/tests for it)
                </div><div><b>label:</b> documentation
                </div></div></li><li><div><div><b>summary:</b> updateLog should fail to init if there is no _version_ field in schema.xml
                </div><div><b>description:</b> Per irc conversation with yonik, it's not clear if updateLog works correctly in all situations if there is no {{\_version\_}} field in the schema...

* it's certainly not tested
* SOLR-3432 makes it clear there are at least some problematic sitautions

For these reasons, updateLog initialization should fail fast with a clear error if there is no {{\_version\_}} field in the schema.

(we can always relax this restriction later if people write the code/tests for it)
                </div></div></li><li><div><div><b>summary:</b> updateLog should fail to init if there is no _version_ field in schema.xml
                </div><div><b>description:</b> Per irc conversation with yonik, it's not clear if updateLog works correctly in all situations if there is no {{\_version\_}} field in the schema...

* it's certainly not tested
* SOLR-3432 makes it clear there are at least some problematic sitautions

For these reasons, updateLog initialization should fail fast with a clear error if there is no {{\_version\_}} field in the schema.

(we can always relax this restriction later if people write the code/tests for it)
                </div></div></li><li><div><div><b>summary:</b> updateLog should fail to init if there is no _version_ field in schema.xml
                </div><div><b>description:</b> Per irc conversation with yonik, it's not clear if updateLog works correctly in all situations if there is no {{\_version\_}} field in the schema...

* it's certainly not tested
* SOLR-3432 makes it clear there are at least some problematic sitautions

For these reasons, updateLog initialization should fail fast with a clear error if there is no {{\_version\_}} field in the schema.

(we can always relax this restriction later if people write the code/tests for it)
                </div></div></li><li><div><div><b>summary:</b> updateLog should fail to init if there is no _version_ field in schema.xml
                </div><div><b>description:</b> Per irc conversation with yonik, it's not clear if updateLog works correctly in all situations if there is no {{\_version\_}} field in the schema...

* it's certainly not tested
* SOLR-3432 makes it clear there are at least some problematic sitautions

For these reasons, updateLog initialization should fail fast with a clear error if there is no {{\_version\_}} field in the schema.

(we can always relax this restriction later if people write the code/tests for it)
                </div><div><b>label:</b> test
                </div></div></li><li><div><div><b>summary:</b> updateLog should fail to init if there is no _version_ field in schema.xml
                </div><div><b>description:</b> Per irc conversation with yonik, it's not clear if updateLog works correctly in all situations if there is no {{\_version\_}} field in the schema...

* it's certainly not tested
* SOLR-3432 makes it clear there are at least some problematic sitautions

For these reasons, updateLog initialization should fail fast with a clear error if there is no {{\_version\_}} field in the schema.

(we can always relax this restriction later if people write the code/tests for it)
                </div></div></li></ol></div><div><b>jira_issues_comments:</b> <ol><li><div><div><b>body:</b> fix formatting of description
                </div><div><b>label:</b> documentation
                </div></div></li><li><div>
                patch updating the VersionInfo class to throw an exception if the version field doesn't exist, and a test proving that this now causes SolrCore to fail to initialize if updateLog is configured but there is no version field.

(This also fixes some places in SolrCore where helpful error messages from plugin initialization were being hidden by getting wrapped in InvocationTargetException)
              </div></li><li><div>
                Committed revision 1375674.
Committed revision 1375690.

              </div></li><li><div>
                Closed after release.
              </div></li></ol></div></div></html>