<!DOCTYPE html><html><div class="item-title">
        Item 34
      </div> <div class="item-details"><div><b>git_comments:</b> <ol></ol></div><div><b>git_commits:</b> <ol><li><div><div><b>summary:</b> HBASE-970 Update the copy/rename scripts to go against change API
                </div><div><b>message:</b> HBASE-970 Update the copy/rename scripts to go against change API

git-svn-id: https://svn.apache.org/repos/asf/hadoop/hbase/trunk@708979 13f79535-47bb-0310-9956-ffa450edef68

                </div></div></li></ol></div><div><b>github_issues:</b> <ol></ol></div><div><b>github_issues_comments:</b> <ol></ol></div><div><b>github_pulls:</b> <ol></ol></div><div><b>github_pulls_comments:</b> <ol></ol></div><div><b>github_pulls_reviews:</b> <ol></ol></div><div><b>jira_issues:</b> <ol><li><div><div><b>summary:</b> Update the copy/rename scripts to go against change API
                </div><div><b>description:</b> 
                </div></div></li></ol></div><div><b>jira_issues_comments:</b> <ol><li><div>
                Committed.
              </div></li><li><div><div><b>body:</b> rename_table.rb does not work. 

I made a table and put some data. when i used rename_table.rb to rename the table, it does not work.
The directory, has new name, is created and the old datas are removed from HDFS. But I can not find the table, has new name, form hbase shell.

I've got some worning messages. 

bash# hbase org.jruby.Main rename_table.rb tTest tTest3
09/06/08 11:59:15 INFO regionserver.HLog: HLog configuration: blocksize=67108864, maxlogentries=100000, flushlogentries=100, optionallogflushinternal=10000ms
09/06/08 11:59:15 INFO regionserver.HLog: New log writer: /user/root/log_1244429955523/hlog.dat.1244429955540
09/06/08 11:59:15 INFO util.NativeCodeLoader: Loaded the native-hadoop library
09/06/08 11:59:15 INFO zlib.ZlibFactory: Successfully loaded &amp; initialized native-zlib library
09/06/08 11:59:15 INFO compress.CodecPool: Got brand-new decompressor
09/06/08 11:59:15 INFO compress.CodecPool: Got brand-new decompressor
09/06/08 11:59:15 INFO compress.CodecPool: Got brand-new decompressor
09/06/08 11:59:15 INFO compress.CodecPool: Got brand-new decompressor
09/06/08 11:59:15 INFO regionserver.HRegion: region -ROOT-,,0/70236052 available
09/06/08 11:59:15 INFO regionserver.HRegion: starting  compaction on region -ROOT-,,0
09/06/08 11:59:15 INFO regionserver.HRegion: compaction completed on region -ROOT-,,0 in 0sec
09/06/08 11:59:15 INFO rename_table: Scanning .META.,,1
09/06/08 11:59:15 INFO regionserver.HRegion: region .META.,,1/1028785192 available
09/06/08 11:59:15 INFO regionserver.HRegion: starting  compaction on region .META.,,1
09/06/08 11:59:15 INFO regionserver.HRegion: compaction completed on region .META.,,1 in 0sec
09/06/08 11:59:15 INFO rename_table: Renaming hdfs://nozino:9000/hbase/tTest/1674338366 as hdfs://nozino:9000/hbase/tTest3/286899439
09/06/08 11:59:15 INFO rename_table: Removing tTest,,1244429417400 from .META.
09/06/08 11:59:15 INFO regionserver.HRegion: Closed -ROOT-,,0
09/06/08 11:59:15 INFO regionserver.HRegion: Closed .META.,,1
rename_table.rb:135: wrong # of arguments(2 for 4) (ArgumentError)
	from file:/usr/local/hbase-0.19.3/lib/jruby-complete-1.1.6.jar!/META-INF/jruby.home/lib/ruby/site_ruby/1.8/builtin/java/collections.rb:47:in `call'
	from file:/usr/local/hbase-0.19.3/lib/jruby-complete-1.1.6.jar!/META-INF/jruby.home/lib/ruby/site_ruby/1.8/builtin/java/collections.rb:47:in `each'
	from rename_table.rb:100

                </div><div><b>label:</b> code-design
                </div></div></li><li><div>
                The scripts have gone stale.  The API has changed on them.  If you can't figure it out yourself, I'll take a look later.  Thanks for reporting the issue.
              </div></li><li><div>
                Why do these need to be scripts anyways? I think we should move this functionality into HBaseAdmin (or something else appropriate) and make it a part of the regular shell so that there won't be anymore disconnect between Java API and these operations.
              </div></li><li><div>
                Agree Nitay.  Scripts were just some hackups I checked into bin until we were able to get functionality into HBA.
              </div></li></ol></div></div></html>