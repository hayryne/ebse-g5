<!DOCTYPE html><html><div class="item-title">
        Item 267
      </div> <div class="item-details"><div><b>git_comments:</b> <ol></ol></div><div><b>git_commits:</b> <ol><li><div><div><b>summary:</b> [HUDI-1233] Deltastreamer Kafka consumption delay reporting indicators (#2074)
                </div><div><b>message:</b> [HUDI-1233] Deltastreamer Kafka consumption delay reporting indicators (#2074)


                </div></div></li></ol></div><div><b>github_issues:</b> <ol></ol></div><div><b>github_issues_comments:</b> <ol></ol></div><div><b>github_pulls:</b> <ol><li><div><div><b>title:</b> [HUDI-1233] Deltastreamer Kafka consumption delay reporting indicators
                </div><div><b>body:</b> ## *Tips*
- *Thank you very much for contributing to Apache Hudi.*
- *Please review https://hudi.apache.org/contributing.html before opening a pull request.*

## What is the purpose of the pull request

Currently hudi-deltastreamer does not report the indicator of Kafka data consumption delay, I suggest that this function can be added

## Committer checklist

 - [ ] Has a corresponding JIRA in PR title &amp; commit
 
 - [ ] Commit message is descriptive of the change
 
 - [ ] CI is green

 - [ ] Necessary doc changes done or have another open PR
       
 - [ ] For large changes, please consider breaking it into sub-tasks under an umbrella JIRA.
                </div></div></li></ol></div><div><b>github_pulls_comments:</b> <ol><li><div>
                ![1](https://user-images.githubusercontent.com/25769285/92343761-32515200-f0f7-11ea-8229-014d267e5021.png)

              </div></li><li><div>
                @yanghua   @vinothchandar   Please help with suggestions
              </div></li><li><div>
                @liujinhui1994 The CI build failed, please check it.
              </div></li><li><div>
                @liujinhui1994 You should fix the conflicts and let the Travis pass.
              </div></li><li><div>
                @yanghua  please help review
              </div></li><li><div>
                @wangxianghu Can you help to review this PR firstly?
              </div></li><li><div>
                @liujinhui1994 When you are ready, ping me, please.
              </div></li><li><div>
                Please help review @yanghua 
              </div></li></ol></div><div><b>github_pulls_reviews:</b> <ol><li><div>
                Why two empty lines? 
              </div></li><li><div><div><b>body:</b> Replace class name  with `XXX.class.getName()` should be better
                </div><div><b>label:</b> code-design
                </div></div></li><li><div>
                @liujinhui1994 thanks for your contribution, I left some comments you can consider. 
              </div></li><li><div>
                OK, all right
              </div></li><li><div>
                It seems we can use the same metric in one `sync` loop.  how about initializing it at the begging(in `DeltaSync` ) and deliver it to the source constructor?
              </div></li><li><div><div><b>body:</b> This is also a way. Currently non-kafka souce has not used metic, so I made a judgment and only passed metic when kafka souce 
                </div><div><b>label:</b> code-design
                </div></div></li><li><div>
                Move this check into `UtilHelpers#createSource`?  use different constructor according to source type
this can avoid checking two times
              </div></li><li><div><div><b>body:</b> Why change this indent?
                </div><div><b>label:</b> code-design
                </div></div></li><li><div><div><b>body:</b> The first indent is correct?
                </div><div><b>label:</b> code-design
                </div></div></li><li><div>
                `delayOffectCalculation ` -&gt; `delayOffsetCalculation `?
              </div></li></ol></div><div><b>jira_issues:</b> <ol><li><div><div><b>summary:</b> deltastreamer Kafka consumption delay reporting indicators
                </div><div><b>description:</b> currently hudi-deltastreamer does not report the indicator of Kafka data consumption delay, I suggest that this function can be added
                </div></div></li></ol></div><div><b>jira_issues_comments:</b> <ol><li><div>
                yes. we also need to revisit if there is a different mechanism we can use for spark kafka reading, that will get this easily?&nbsp;

we can use this Jira to flesh out a plan.&nbsp;
              </div></li><li><div>
                Currently I use the result of consumer.endOffsets-checkpointOffsets&nbsp; as the Kafka delay
 [~vinoth]
              </div></li><li><div>
                Implemented via master branch:&nbsp;20b9b399c980270afdd60cc5fbce783c700a8376
              </div></li></ol></div></div></html>