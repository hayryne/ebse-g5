<!DOCTYPE html><html><div class="item-title">
        Item 14
      </div> <div class="item-details"><div><b>git_comments:</b> <ol><li><div>
                 noop
              </div></li></ol></div><div><b>git_commits:</b> <ol><li><div><div><b>summary:</b> CAMEL-8332: Init using doStart/doStop instead of synchronized code.
                </div><div><b>message:</b> CAMEL-8332: Init using doStart/doStop instead of synchronized code.

                </div></div></li></ol></div><div><b>github_issues:</b> <ol></ol></div><div><b>github_issues_comments:</b> <ol></ol></div><div><b>github_pulls:</b> <ol></ol></div><div><b>github_pulls_comments:</b> <ol></ol></div><div><b>github_pulls_reviews:</b> <ol></ol></div><div><b>jira_issues:</b> <ol><li><div><div><b>summary:</b> Add component implementation to camel-dozer module
                </div><div><b>description:</b> The camel-dozer component does not actually provide a Camel component implementation today.  Rather, it provides a converter loader which can be used in combination with a set of Dozer mapping files to register a global set of converters within a CamelContext.  This issue proposes the addition of a full-blown component implementation within camel-dozer.  Advantages of this approach include:

* The ability to manage Dozer mapping configuration on a per-endpoint basis vs. global configuration via the converter registry.
* Dozer handles direct field assignment quite well, but does not provide other common mapping functions OOTB.  Camel can enrich Dozer via standard Dozer extensions, e.g.
** Mapping constant values to target fields
** Support for lookup tables, using the source value as the key
** Convenience transformations for mappings (e.g. trim spaces, convertToLowerCase, regular expression evaluation)
** Allow Camel message/exchange headers to be mapped to target fields
* The ability to surround dozer mappings with data formats to support a single, any-to-any transformation endpoint

Here's an example of what the endpoint configuration would look like.
{noformat}
dozer:mytransform?mappingFile=dozerBeanMapping.xml&amp;marshalId=json&amp;unmarshalId=jaxb&amp;targetModel=example.MyObject
{noformat}

An initial implementation of this component is available as a PR against the Camel GitHub repository.  Unit tests in the PR provide examples of various transformation use cases.  Many, but not all, of the features listed above are implemented already.  I can file follow-up JIRAs for additional features I have in mind.  I will also post a link to the PR and the topic branch in the issue comments.
                </div></div></li></ol></div><div><b>jira_issues_comments:</b> <ol><li><div>
                GitHub user kcbabo opened a pull request:

    https://github.com/apache/camel/pull/389

    CAMEL-8332: Add component implementation to camel-dozer module

    Proposed implementation of CAMEL-8332.
    
    https://issues.apache.org/jira/browse/CAMEL-8332

You can merge this pull request into a Git repository by running:

    $ git pull https://github.com/kcbabo/camel CAMEL-8332

Alternatively you can review and apply these changes as the patch at:

    https://github.com/apache/camel/pull/389.patch

To close this pull request, make a commit to your master/trunk branch
with (at least) the following in the commit message:

    This closes #389
    
----
commit 655f845a6a70f7c22ec86a95d265dd64b1220300
Author: Keith Babo &lt;kbabo@redhat.com&gt;
Date:   2015-02-04T15:31:14Z

    CAMEL-8332: Add component implementation to camel-dozer module

----

              </div></li><li><div>
                Thanks for the PR.

              </div></li><li><div>
                We need to add a little bit of documentation about the new dozer component on this page
https://cwiki.apache.org/confluence/display/CAMEL/Dozer+Type+Conversion

Keith can you help?
              </div></li><li><div>
                Absolutely.  Looks like I don't have permissions to edit the Wiki though.  I'm on the list of received ICLAs, so I guess it's just a matter of giving my login (kcbabo) edit privs.  Should I send an email to camel-dev requesting access?
              </div></li><li><div>
                Great, I just granted your user karma to edit wiki
              </div></li><li><div>
                Github user kcbabo closed the pull request at:

    https://github.com/apache/camel/pull/389

              </div></li><li><div>
                Keith any last chance for code changes.

Also would be good if you get the chance to update the docs. Though that can also slip post the release, but ideally better to have the docs ready when its released.
              </div></li><li><div>
                Hey Claus - completed all of the changes I want to see, but haven't submitted a PR yet as I want to add a few more tests.  Here's the branch for reference:
https://github.com/kcbabo/camel/tree/more-dozer

Updates include:
* Added a new converter which allows the user to evaluate an expression using Camel language support and assign it to an output field.
* Enabled javax.el support to allow variables to be used in mappings.
* Added the ability to specify a context id via a message header or endpoint parameter to take advantage of context-based mappings in Dozer.
* Users can specify the name of a DozerBeanMapperConfiguration bean instead of a Dozer mapping file to allow for fine-grained configuration of the Dozer environment.
* The sourceModel option is actually used now and targetModel is marked as required.

Should I open a new JIRA for these updates or just submit another PR against CAMEL-8332?  I will have the tests done and the PR ready tomorrow.
              </div></li><li><div>
                Create a new PR in github and its okay to use this ticket number in the git commit message.
              </div></li><li><div>
                Hi Keith

We would need the PR by tomorrow morning so please try to make this. The doc changes can come later.
              </div></li><li><div>
                GitHub user kcbabo opened a pull request:

    https://github.com/apache/camel/pull/415

    CAMEL-8332: Additional features for camel-dozer component

    This commit includes the following changes:
    * Added a new converter which allows the user to evaluate an expression using Camel language support and assign it to an output field.
    * Enabled javax.el support to allow variables to be used in mappings.
    * Users can specify the name of a DozerBeanMapperConfiguration bean instead of a Dozer mapping file to allow for fine-grained configuration of the Dozer environment.
    * The sourceModel option is actually used now and targetModel is marked as required.

You can merge this pull request into a Git repository by running:

    $ git pull https://github.com/kcbabo/camel CAMEL-8332_2

Alternatively you can review and apply these changes as the patch at:

    https://github.com/apache/camel/pull/415.patch

To close this pull request, make a commit to your master/trunk branch
with (at least) the following in the commit message:

    This closes #415
    
----
commit ed680e0c640178a68c8e761a5eabb15fe45791c2
Author: Keith Babo &lt;kbabo@redhat.com&gt;
Date:   2015-03-02T02:53:44Z

    CAMEL-8332: Additional features for camel-dozer component
    
    This commit includes the following changes:
    * Added a new converter which allows the user to evaluate an expression using Camel language support and assign it to an output field.
    * Enabled javax.el support to allow variables to be used in mappings.
    * Users can specify the name of a DozerBeanMapperConfiguration bean instead of a Dozer mapping file to allow for fine-grained configuration of the Dozer environment.
    * The sourceModel option is actually used now and targetModel is marked as required.

----

              </div></li><li><div>
                PR has been submitted.  Please note that the name of my topic branch is CAMEL-8332_2.
https://github.com/apache/camel/pull/415
              </div></li><li><div>
                Thanks the PR has been merged and pushed. 
              </div></li><li><div>
                Thanks, Claus.  Dozer component documentation has been updated and I have updated the link on the components page to point to the new page:
http://camel.apache.org/dozer.html
              </div></li><li><div>
                Github user kcbabo closed the pull request at:

    https://github.com/apache/camel/pull/415

              </div></li></ol></div></div></html>