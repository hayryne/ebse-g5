<!DOCTYPE html><html><div class="item-title">
        Item 109
      </div> <div class="item-details"><div><b>git_comments:</b> <ol></ol></div><div><b>git_commits:</b> <ol><li><div><div><b>summary:</b> SAMZA-426; support 32 bit JVMs when running tests
                </div><div><b>message:</b> SAMZA-426; support 32 bit JVMs when running tests

                </div></div></li></ol></div><div><b>github_issues:</b> <ol></ol></div><div><b>github_issues_comments:</b> <ol></ol></div><div><b>github_pulls:</b> <ol></ol></div><div><b>github_pulls_comments:</b> <ol></ol></div><div><b>github_pulls_reviews:</b> <ol></ol></div><div><b>jira_issues:</b> <ol><li><div><div><b>summary:</b> Samza tests fail on 32-bit JVMs
                </div><div><b>description:</b> Samza uses -d64 in some of its test options in build.gradle. When building on a 32-bit JVM, the JVM is unable to start for the tests, and the build fails. We should remove -d64 so that Samza can be built on 32-bit JVMs.
                </div></div></li></ol></div><div><b>jira_issues_comments:</b> <ol><li><div><div><b>body:</b> Just removing "-d64" flag may not be sufficient. We may need to the reduce the heap memory. Currently minHeapSize ,  maxHeapSize configured to "2560m".  With this settings, we will get OutOfMemory Exception on 32bit jvm.

I was able to run the tests with 1.5G heap memory on 32bit jvm. Can we reduce the heap memory settings also?
                </div><div><b>label:</b> code-design
                </div></div></li><li><div>
                Good point. Yes, let's reduce them to 1.5G. 

I believe some of the tests GC heavily with less RAM, but I think they still do it at 2.5G as well, so dropping more shouldn't matter. We used to run with 4G of memory on those tests, but Travis CI has a max heap limit of ~2.5G.
              </div></li><li><div>
                Attaching a patch. All tests are successful. 
I am  getting error when I try to upload this patch to RB.
              </div></li><li><div>
                +1 Merged and committed. Ran {{bin/check-all.sh}} locally. Thanks [~omkreddy]!
              </div></li></ol></div></div></html>