<!DOCTYPE html><html><div class="item-title">
        Item 60
      </div> <div class="item-details"><div><b>git_comments:</b> <ol><li><div>
                 Reduces inflected verbs and adjectives to their base/dictionary forms (辞書形) 
              </div></li><li><div>
                 Kuromoji Japanese morphological analyzer/tokenizer (JapaneseTokenizer)
           Kuromoji has a search mode (default) that does segmentation useful for search.  A heuristic
           is used to segment compounds into its parts and the compound itself is kept as synonym.
           Valid values for attribute mode are:
              search: segmentation useful for search with synonyms compounds (default)
           For some applications it might be good to use search mode for indexing and normal mode for
           queries to reduce recall and prevent parts of compounds from being matched and highlighted.
           Use &lt;analyzer type="index"&gt; and &lt;analyzer type="query"&gt; for this and mode normal in query.

           Kuromoji also has a convenient user dictionary feature that allows overriding the statistical
           model with your own entries for segmentation, part-of-speech tags and readings without a need
           to specify weights.  Notice that user dictionaries have not been subject to extensive testing.

           User dictionary attributes are:
                     userDictionary: user dictionary filename
             userDictionaryEncoding: user dictionary encoding (default is UTF-8)

           See lang/userdict_ja.txt for a sample user dictionary file.

           See http://wiki.apache.org/solr/JapaneseLanguageSupport for more on Japanese language support.
        &lt;!--&lt;tokenizer class="solr.JapaneseTokenizerFactory" mode="search" userDictionary="lang/userdict_ja.txt"/&gt;
              </div></li></ol></div><div><b>git_commits:</b> <ol><li><div><div><b>summary:</b> Backport of SOLR-3276 (fix Kuromoji config, etc.)
                </div><div><b>message:</b> Backport of SOLR-3276 (fix Kuromoji config, etc.)

git-svn-id: https://svn.apache.org/repos/asf/lucene/dev/branches/branch_3x@1306524 13f79535-47bb-0310-9956-ffa450edef68

                </div></div></li></ol></div><div><b>github_issues:</b> <ol></ol></div><div><b>github_issues_comments:</b> <ol></ol></div><div><b>github_pulls:</b> <ol></ol></div><div><b>github_pulls_comments:</b> <ol></ol></div><div><b>github_pulls_reviews:</b> <ol></ol></div><div><b>jira_issues:</b> <ol><li><div><div><b>summary:</b> Fix attribute conventions for JapaneseTokenizerFactory and add important information to schema.xml
                </div><div><b>description:</b> The description of the {{ja_text}} field type in {{schema.xml}} is incomplete, doesn't describe user dictionaries and lacks a reference to the wiki page with extensive Japanese language support details ([http://wiki.apache.org/solr/JapaneseLanguageSupport] - currently a placeholder page).

The attribute convention used by {{JapaneseTokenizerFactory}} doesn't comply with the standards and used {{user-dictionary}} and {{user-dictionary-encoding}} instead of {{userDictionary}} and {{userDictionaryEncoding}}.

These changes are low risk and it would be a shame to not get this right in 3.6 with all the work done on Japanese.

Patch coming up shortly.  I really hope it's okay to commit this.
                </div></div></li></ol></div><div><b>jira_issues_comments:</b> <ol><li><div>
                I'll review your patch when its ready, but conceptually I don't see any issue with this.

I don't have any issue at all with documentation, test, or bug fixes. We shouldn't be
adding any new features at this point though.

Just mark any issues you find like this as blocker and give extra time to review since we are in freeze.

Its definitely helpful to be finding and fixing this stuff *before* the release candidate
because it saves us all time.

Thanks!
              </div></li><li><div>
                patch looks good. thanks for catching all this stuff.
              </div></li><li><div>
                looks good! Die, System.out, die! The new attributes are more "xml-compatible".
              </div></li><li><div><div><b>body:</b> Fixed a typo.
                </div><div><b>label:</b> documentation
                </div></div></li><li><div>
                Thanks a lot, Robert and Uwe!

This is a summary of the changes:

* Improvements to {{schema.xml}}
** Improved description of {{text_ja}} and {{JapaneseAnalyzer}} to explain synonym compounds
** Added a brief description of user dictionaries and a commented out sample tokenizer entry
** Added a mention on using different segmentation modes for index and query, but no elaborate config
** Added a wiki reference to the Japanese language support (currently a placeholder)
* Fixed user dictionary attribute naming conventions for {{JapaneseTokenizerFactory}}.  Attributes are now {{userDictionary}} and {{userDictionaryEncoding}} (was {{user-dictionary}} and {{user-ictionary-encoding}}
* Added a sample user dictionary file to {{solr/example/solr/conf/lang/userdict_ja.txt}} with format details, which is referenced from the commented out example in {{schema.xml}}.
* Changed Kuromoji to Japanese naming in {{stopwords.txt}} and {{stoptags.txt}}.  (Need a {{sync-analyzers}} in {{solr}} prior to commit)
* Replaced a one-liner of code, I've changed a {{System.out.println}} in {{UserDictionary}} to throw a {{RuntimeException}} with a proper error message in case user dictionary parsing fails, and tested this manually. 

If you claim that there's been some scope-creep in this patch, I can't argue with that. :)  
              </div></li><li><div>
                I'll commit this shortly.
              </div></li><li><div>
                Committed revision 1306476 to {{trunk}}.  Backporting to {{branch_3x}}.
              </div></li><li><div>
                Committed revision 1306524 to {{branch_3x}}.

Thanks again for reviewing, Robert and Uwe!
              </div></li></ol></div></div></html>