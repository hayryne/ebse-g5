<!DOCTYPE html><html><div class="item-title">
        Item 319
      </div> <div class="item-details"><div><b>git_comments:</b> <ol><li><div>
                 Should not set trusted=true in configSet
              </div></li></ol></div><div><b>git_commits:</b> <ol><li><div><div><b>summary:</b> SOLR-14907: Adding V2 API for ConfigSet Upload. (#1996)
                </div><div><b>message:</b> SOLR-14907: Adding V2 API for ConfigSet Upload. (#1996)


                </div></div></li></ol></div><div><b>github_issues:</b> <ol></ol></div><div><b>github_issues_comments:</b> <ol></ol></div><div><b>github_pulls:</b> <ol><li><div><div><b>title:</b> SOLR-14907: Adding V2 API for ConfigSet Upload.
                </div><div><b>body:</b> https://issues.apache.org/jira/browse/SOLR-14907

Adding v2 APIs.
                </div></div></li></ol></div><div><b>github_pulls_comments:</b> <ol><li><div>
                Are there any concerns now that the API has been sorted?
              </div></li><li><div>
                LGTM
              </div></li></ol></div><div><b>github_pulls_reviews:</b> <ol><li><div>
                Let's use a proper REST mechanism here

`path ="/cluster/configs/{configname}/*`
              </div></li><li><div>
                same as above
              </div></li><li><div>
                Would you be ok with `/cluster/configs/{configname}/files/*`? That's very restful, since it would be updating the `*` `file` under the `{configname}` `config`
              </div></li><li><div>
                I've updated the PR to reflect this new API.
              </div></li><li><div>
                I'm Ok with both

`/cluster/configs/{configname}/files/*`

and

`/cluster/configs/{configname}/*`


@janhoy @dsmiley @sigram  WDYT?


              </div></li><li><div>
                I don't see the point of the "/files/" component of the path.  The files within the configSet are directly in it, so I think it should be that way.  I think of this very much like a file in a folder, where the folder is the configSet.

Just checking that we support nested structure within the configSet?
              </div></li><li><div>
                We do support the nested structure.

The `/files/` part defines what the * after it is, and allows us to extend in the future. For example possible adding a `/cluster/configs/{configname}/properties` PUT action to update the properties for that config. It fits pretty well in the [guidelines](https://restfulapi.net/resource-naming/).

It's not that important to me though if y'all agree with taking it out.
              </div></li><li><div>
                &gt;Just checking that we support nested structure within the configSet?

We could. But, I'm OK to add support for that later
              </div></li><li><div>
                To support properties manipulation in the future, I think that could be done via a POST to the particular path to the properties file in the configSet (I forget if it exists already or maybe should be exactly params.json) with commands in the JSON to delete/set/update etc.
              </div></li><li><div>
                Ok sounds good, that would certainly work. I'll take out the `/files/` part of the path, and update the PR and Jira.
              </div></li><li><div>
                Can we just use a boolean here?
              </div></li><li><div>
                I'm not a REST specialist but I think I would prefer to leave the `files` component of the path in. Wouldn't this allow changing other things in the future and make the API more self describing?

Would it really be easy to add it later?
If we wanted to add properties for example, how to tell if `/cluster/configs/{configname}/properties/whatever` is a property `whatever` or if `properties/whatever` is actually a file?
              </div></li><li><div>
                Also "file" is a pretty generic abstraction that can represent many things (a schema, properties, synonyms etc). We might eventually want to address such ressources by what they actually are (schema, properties, synonyms) rather than by the way in which they are stored (files).
              </div></li><li><div>
                I agree @murblanc, it lets us future-proof the API even if we don't have current plans on expanding beyond files. 
              </div></li><li><div>
                All very debatable of course.  Removing "/files/" doesn't prevent expanding beyond files, it's just that, for example, if we add a POST to say /configsetname/properties then we can't have a file named simply "properties".  I will shed no tear  over this loss :-).  I like the simplicity of not having the needless "/files/".  
              </div></li><li><div>
                @dsmiley, can users of Solr pick random names for some ConfigSet files? I believe code will be easier to understand/maintain if we don't have to parse file names to detect if they are files or some other form of separator (and then the API would be inconsistent: files will not have its `/files` segment in the path whereas properties will be defined after `/properties`).

Examples in [https://restfulapi.net/resource-naming/](https://restfulapi.net/resource-naming/) would be a vote for keeping `/files` in the path IMO.
              </div></li><li><div>
                People can add basically whatever named files they want and reference them from the primary config files (e.g. solrconfig.xml).  This discussion is similar to field naming in our schema.  Some names are special, like `_version_`.  If you try to have your own field named as such, then you're asking for trouble.  Likewise, we might suggest that users avoid file names with a leading underscore.  Simple enough and keeps the "/files" verbosity out.  Also there is a difference in HTTP verbs... in this issue here we're using PUT to put a file.  But for an interactive editing of config elements, that would use POST.
              </div></li></ol></div><div><b>jira_issues:</b> <ol></ol></div><div><b>jira_issues_comments:</b> <ol></ol></div></div></html>