<!DOCTYPE html><html><div class="item-title">
        Item 274
      </div> <div class="item-details"><div><b>git_comments:</b> <ol><li><div>
                 Retrieve the database metadata
              </div></li><li><div>
                 Same as above, but lookup by position
              </div></li><li><div>
                 Lookup column by name, this should return null but not throw an exception
              </div></li><li><div>
                 Iterate through metadata columns to find 'COLUMN_NAME' == 'REMARKS'
              </div></li></ol></div><div><b>git_commits:</b> <ol><li><div><div><b>summary:</b> PHOENIX-1659 PhoenixDatabaseMetaData.getColumns does not return REMARKS column
                </div><div><b>message:</b> PHOENIX-1659 PhoenixDatabaseMetaData.getColumns does not return REMARKS column

                </div></div></li></ol></div><div><b>github_issues:</b> <ol></ol></div><div><b>github_issues_comments:</b> <ol></ol></div><div><b>github_pulls:</b> <ol></ol></div><div><b>github_pulls_comments:</b> <ol></ol></div><div><b>github_pulls_reviews:</b> <ol></ol></div><div><b>jira_issues:</b> <ol><li><div><div><b>summary:</b> PhoenixDatabaseMetaData.getColumns does not return REMARKS column
                </div><div><b>description:</b> I am attempting to use phoenix as a jdbc input for MyBatis, and I am getting errors when loading the meta data for table columns because the value of the REMARKS column is not returned by the query issued in 

PhoenixDatabaseMetaData.getColumns
                </div></div></li><li><div><div><b>summary:</b> PhoenixDatabaseMetaData.getColumns does not return REMARKS column
                </div><div><b>description:</b> I am attempting to use phoenix as a jdbc input for MyBatis, and I am getting errors when loading the meta data for table columns because the value of the REMARKS column is not returned by the query issued in 

PhoenixDatabaseMetaData.getColumns
                </div></div></li><li><div><div><b>summary:</b> PhoenixDatabaseMetaData.getColumns does not return REMARKS column
                </div><div><b>description:</b> I am attempting to use phoenix as a jdbc input for MyBatis, and I am getting errors when loading the meta data for table columns because the value of the REMARKS column is not returned by the query issued in 

PhoenixDatabaseMetaData.getColumns
                </div></div></li><li><div><div><b>summary:</b> PhoenixDatabaseMetaData.getColumns does not return REMARKS column
                </div><div><b>description:</b> I am attempting to use phoenix as a jdbc input for MyBatis, and I am getting errors when loading the meta data for table columns because the value of the REMARKS column is not returned by the query issued in 

PhoenixDatabaseMetaData.getColumns
                </div></div></li><li><div><div><b>summary:</b> PhoenixDatabaseMetaData.getColumns does not return REMARKS column
                </div><div><b>description:</b> I am attempting to use phoenix as a jdbc input for MyBatis, and I am getting errors when loading the meta data for table columns because the value of the REMARKS column is not returned by the query issued in 

PhoenixDatabaseMetaData.getColumns
                </div></div></li><li><div><div><b>summary:</b> PhoenixDatabaseMetaData.getColumns does not return REMARKS column
                </div><div><b>description:</b> I am attempting to use phoenix as a jdbc input for MyBatis, and I am getting errors when loading the meta data for table columns because the value of the REMARKS column is not returned by the query issued in 

PhoenixDatabaseMetaData.getColumns
                </div><div><b>label:</b> code-design
                </div></div></li><li><div><div><b>summary:</b> PhoenixDatabaseMetaData.getColumns does not return REMARKS column
                </div><div><b>description:</b> I am attempting to use phoenix as a jdbc input for MyBatis, and I am getting errors when loading the meta data for table columns because the value of the REMARKS column is not returned by the query issued in 

PhoenixDatabaseMetaData.getColumns
                </div></div></li><li><div><div><b>summary:</b> PhoenixDatabaseMetaData.getColumns does not return REMARKS column
                </div><div><b>description:</b> I am attempting to use phoenix as a jdbc input for MyBatis, and I am getting errors when loading the meta data for table columns because the value of the REMARKS column is not returned by the query issued in 

PhoenixDatabaseMetaData.getColumns
                </div></div></li><li><div><div><b>summary:</b> PhoenixDatabaseMetaData.getColumns does not return REMARKS column
                </div><div><b>description:</b> I am attempting to use phoenix as a jdbc input for MyBatis, and I am getting errors when loading the meta data for table columns because the value of the REMARKS column is not returned by the query issued in 

PhoenixDatabaseMetaData.getColumns
                </div></div></li><li><div><div><b>summary:</b> PhoenixDatabaseMetaData.getColumns does not return REMARKS column
                </div><div><b>description:</b> I am attempting to use phoenix as a jdbc input for MyBatis, and I am getting errors when loading the meta data for table columns because the value of the REMARKS column is not returned by the query issued in 

PhoenixDatabaseMetaData.getColumns
                </div></div></li><li><div><div><b>summary:</b> PhoenixDatabaseMetaData.getColumns does not return REMARKS column
                </div><div><b>description:</b> I am attempting to use phoenix as a jdbc input for MyBatis, and I am getting errors when loading the meta data for table columns because the value of the REMARKS column is not returned by the query issued in 

PhoenixDatabaseMetaData.getColumns
                </div></div></li><li><div><div><b>summary:</b> PhoenixDatabaseMetaData.getColumns does not return REMARKS column
                </div><div><b>description:</b> I am attempting to use phoenix as a jdbc input for MyBatis, and I am getting errors when loading the meta data for table columns because the value of the REMARKS column is not returned by the query issued in 

PhoenixDatabaseMetaData.getColumns
                </div></div></li><li><div><div><b>summary:</b> PhoenixDatabaseMetaData.getColumns does not return REMARKS column
                </div><div><b>description:</b> I am attempting to use phoenix as a jdbc input for MyBatis, and I am getting errors when loading the meta data for table columns because the value of the REMARKS column is not returned by the query issued in 

PhoenixDatabaseMetaData.getColumns
                </div><div><b>label:</b> test
                </div></div></li><li><div><div><b>summary:</b> PhoenixDatabaseMetaData.getColumns does not return REMARKS column
                </div><div><b>description:</b> I am attempting to use phoenix as a jdbc input for MyBatis, and I am getting errors when loading the meta data for table columns because the value of the REMARKS column is not returned by the query issued in 

PhoenixDatabaseMetaData.getColumns
                </div><div><b>label:</b> test
                </div></div></li><li><div><div><b>summary:</b> PhoenixDatabaseMetaData.getColumns does not return REMARKS column
                </div><div><b>description:</b> I am attempting to use phoenix as a jdbc input for MyBatis, and I am getting errors when loading the meta data for table columns because the value of the REMARKS column is not returned by the query issued in 

PhoenixDatabaseMetaData.getColumns
                </div></div></li><li><div><div><b>summary:</b> PhoenixDatabaseMetaData.getColumns does not return REMARKS column
                </div><div><b>description:</b> I am attempting to use phoenix as a jdbc input for MyBatis, and I am getting errors when loading the meta data for table columns because the value of the REMARKS column is not returned by the query issued in 

PhoenixDatabaseMetaData.getColumns
                </div></div></li><li><div><div><b>summary:</b> PhoenixDatabaseMetaData.getColumns does not return REMARKS column
                </div><div><b>description:</b> I am attempting to use phoenix as a jdbc input for MyBatis, and I am getting errors when loading the meta data for table columns because the value of the REMARKS column is not returned by the query issued in 

PhoenixDatabaseMetaData.getColumns
                </div></div></li></ol></div><div><b>jira_issues_comments:</b> <ol><li><div>
                This bug should be fixed as the bug goes against the java api standard as to what columns should (at minimum) be returned and in what order. The fact that REMARKS column is missing causes grief to generic java JDBC programs (like ours) that go against many different vendor JDBC drivers. 
              </div></li><li><div>
                I've done some work with metadata compatibility with other JDBC tooling, but haven't run into any with the REMARKS column before.

Looking at:
http://docs.oracle.com/javase/7/docs/api/java/sql/DatabaseMetaData.html

It specifies that the 'REMARKS' column may be null. Is it possible this is a bug in MyBatis, expecting this field to always be present?

              </div></li><li><div>
                Question: It specifies that the 'REMARKS' column may be null. Is it possible this is a bug in MyBatis, expecting this field to always be present?

Response: It means that the ResultSet can return a NULL for the REMARKS column (ie is NULLABLE). It does not mean that the column should not be in the ResultSet.  A JDBC driver provider should return as a minimum the answer set columns as described by getColumns(). However, they are free to add additional columns to the resultset after the last defined column (IS_GENERATEDCOLUMN).
              </div></li><li><div>
                Add the 'REMARKS' column to the getColumns() call with a unit test in QueryDatabaseMetaDataIT.java.
              </div></li><li><div>
                This passes the unit tests and the QueryDatabaseMetaDataIT integration test for me. My machine got through 213 tests in the integration suite before going to sleep on me, but it hasn't had a full run yet.
              </div></li><li><div><div><b>body:</b> +1. Thanks for the patch, [~jmahonin]. Minor nit when you commit: add an assertion too that rs.getString(12) and rs.getString("REMARKS") both don't throw and return null.
                </div><div><b>label:</b> code-design
                </div></div></li><li><div>
                Updated patch with tests to ensure lookup by column name / position return null instead of throwing exceptions
              </div></li><li><div>
                +1. This can get checked into all 4.x and 4.4 branches (and master too, of course). Thanks for the contribution, [~jmahonin] - this will be a good test of your new commit rights.
              </div></li><li><div>
                Pushed to master, 4.4 and 4.x branches. Hopefully I didn't mess anything up!
              </div></li><li><div>
                FAILURE: Integrated in Phoenix-master #802 (See [https://builds.apache.org/job/Phoenix-master/802/])
PHOENIX-1659 PhoenixDatabaseMetaData.getColumns does not return REMARKS column (jmahonin: rev d02b3610991616ab3920d40d719c9000601d8722)
* phoenix-core/src/main/java/org/apache/phoenix/jdbc/PhoenixDatabaseMetaData.java
* phoenix-core/src/it/java/org/apache/phoenix/end2end/QueryDatabaseMetaDataIT.java

              </div></li><li><div>
                It looks like there's an issue with the flume integration, and reverting locally indicates it is introduced by this patch. I'm digging through now, but I don't see anything obvious sticking out yet. If anyone a bit more familiar with the module has any suggestions, I'm all ears.
              </div></li><li><div>
                Adjust COLUMN_FAMILY_POSITION in QueryUtil to account for new REMARKS column.

Both org.apache.phoenix.flume.serializer.BaseEventSerializer and org.apache.phoenix.util.CSVCommonsLoader referred to the field. Integration tests for each component are passing with this patch.
              </div></li><li><div>
                +1. Thanks for the quick follow up, [~jmahonin].
              </div></li><li><div>
                FAILURE: Integrated in Phoenix-master #804 (See [https://builds.apache.org/job/Phoenix-master/804/])
PHOENIX-1659 PhoenixDatabaseMetaData.getColumns does not return REMARKS column (jmahonin: rev 83b8db4def81d9a7fc959de116edbaa1a265bf18)
* phoenix-core/src/main/java/org/apache/phoenix/util/QueryUtil.java

              </div></li><li><div><div><b>body:</b> What's the protocol for resolving? These changes are pushed in, but the builds and build server, have been flaky for a while. Am I OK to resolve this, or should I park it and wait until we get some clean builds out?
                </div><div><b>label:</b> test
                </div></div></li><li><div><div><b>body:</b> Go ahead and resolve it. We're getting a handle on the build flakiness shortly.
                </div><div><b>label:</b> test
                </div></div></li><li><div>
                Bulk close of all issues that has been resolved in a released version. 
              </div></li></ol></div></div></html>