<!DOCTYPE html><html><div class="item-title">
        Item 332
      </div> <div class="item-details"><div><b>git_comments:</b> <ol><li><div>
                 who sets this? netty? what a piece of crap
              </div></li></ol></div><div><b>git_commits:</b> <ol><li><div><div><b>summary:</b> LUCENE-5376: move the hack wtf into one place
                </div><div><b>message:</b> LUCENE-5376: move the hack wtf into one place

git-svn-id: https://svn.apache.org/repos/asf/lucene/dev/branches/lucene5376@1553499 13f79535-47bb-0310-9956-ffa450edef68

                </div></div></li></ol></div><div><b>github_issues:</b> <ol></ol></div><div><b>github_issues_comments:</b> <ol></ol></div><div><b>github_pulls:</b> <ol></ol></div><div><b>github_pulls_comments:</b> <ol></ol></div><div><b>github_pulls_reviews:</b> <ol></ol></div><div><b>jira_issues:</b> <ol><li><div><div><b>summary:</b> Add a demo search server
                </div><div><b>description:</b> I think it'd be useful to have a "demo" search server for Lucene.

Rather than being fully featured, like Solr, it would be minimal, just wrapping the existing Lucene modules to show how you can make use of these features in a server setting.

The purpose is to demonstrate how one can build a minimal search server on top of APIs like SearchManager, SearcherLifetimeManager, etc.

This is also useful for finding rough edges / issues in Lucene's APIs that make building a server unnecessarily hard.

I don't think it should have back compatibility promises (except Lucene's index back compatibility), so it's free to improve as Lucene's APIs change.

As a starting point, I'll post what I built for the "eating your own dog food" search app for Lucene's &amp; Solr's jira issues http://jirasearch.mikemccandless.com (blog: http://blog.mikemccandless.com/2013/05/eating-dog-food-with-lucene.html ). It uses Netty to expose basic indexing &amp; searching APIs via JSON, but it's very rough (lots nocommits).

                </div></div></li></ol></div><div><b>jira_issues_comments:</b> <ol><li><div>
                I'm attaching the current sources (tgz archive)... they are standalone now but to add it into Lucene I think we should put it under lucene/demo or lucene/server or something.

It uses "custom" (Python) build scripts, because I became frustrated with ant; after extracting, {{python3 build.py test}} should run the tests.

These are just the sources for the server side of the http://jirasearch.mikemccandless.com app.

There are many issues to fix, e.g. cut back to ant (there are some old ant build scripts there), use only one JSON parser (it uses two now), but it does support a number of basic indexing/search APIs: add/update document/s, bulk add/update documents, suggest, search/After, block joins, highlighting, live field values, snapshots, basic index statistics (for diagnostics).

It has limited support for "plugins", but I'm tempted to remove that before committing.  The only plugin it has now is Tika, to crack binary documents into text for indexing.
              </div></li><li><div>
                +1, it will be great to have an 'active' demo to show the features :)

I think we should remove those hardcoded classpaths, e.g. in post.py:30?

And will this demo be expected to be the same as jirasearch? Will we need further configuration to get the demo webside working? For example I cannot find search.py in the sourcecodes.

              </div></li><li><div>
                Thanks Han.

bq. I think we should remove those hardcoded classpaths, e.g. in post.py:30?

Good catch, I'll fix that ... that's a minimal example of how to issue commands to the server to create an index and register a few fields, from a Python client.

bq. And will this demo be expected to be the same as jirasearch? Will we need further configuration to get the demo webside working? For example I cannot find search.py in the sourcecodes.

These sources are just for the server side; I didn't include the jirasearch UI/indexing sources.  But I agree it would be useful to have that too, i.e. an example search app/UI that runs against this server.  I'll think about how to fold it in ...
              </div></li><li><div>
                I think there are plenty of lucene-based search servers already in existence... We shouldn't bloat lucene/solr even further by adding yet another.  Something like this belongs as a separate project (collaborate on github with whoever else wants to build/maintain this).
              </div></li><li><div>
                Commit 1553272 from [~rcmuir] in branch 'dev/branches/lucene5376'
[ https://svn.apache.org/r1553272 ]

LUCENE-5376: mike's tgz as-is to branch
              </div></li><li><div>
                Commit 1553275 from [~rcmuir] in branch 'dev/branches/lucene5376'
[ https://svn.apache.org/r1553275 ]

LUCENE-5376: fixup the ant/ivy a bit
              </div></li><li><div>
                Commit 1553282 from [~rcmuir] in branch 'dev/branches/lucene5376'
[ https://svn.apache.org/r1553282 ]

LUCENE-5376: fix compile
              </div></li><li><div>
                Commit 1553283 from [~rcmuir] in branch 'dev/branches/lucene5376'
[ https://svn.apache.org/r1553283 ]

LUCENE-5376: add svn:ignore
              </div></li><li><div>
                Commit 1553287 from [~rcmuir] in branch 'dev/branches/lucene5376'
[ https://svn.apache.org/r1553287 ]

LUCENE-5376: get tests passing
              </div></li><li><div>
                Commit 1553288 from [~rcmuir] in branch 'dev/branches/lucene5376'
[ https://svn.apache.org/r1553288 ]

LUCENE-5376: use consistent dependencies versions, dont download the internet
              </div></li><li><div>
                Commit 1553289 from [~rcmuir] in branch 'dev/branches/lucene5376'
[ https://svn.apache.org/r1553289 ]

LUCENE-5376: clean up some forbidden apis
              </div></li><li><div>
                Commit 1553291 from [~rcmuir] in branch 'dev/branches/lucene5376'
[ https://svn.apache.org/r1553291 ]

LUCENE-5376: get ant javados passing
              </div></li><li><div>
                Commit 1553294 from [~rcmuir] in branch 'dev/branches/lucene5376'
[ https://svn.apache.org/r1553294 ]

LUCENE-5376: fix documentation-lint, rat-sources, remove python build, remove plugin (it can be a separate module?)
              </div></li><li><div>
                Commit 1553297 from [~rcmuir] in branch 'dev/branches/lucene5376'
[ https://svn.apache.org/r1553297 ]

LUCENE-5376: minimize jdocs deps, nuke unused imports
              </div></li><li><div>
                Commit 1553300 from [~rcmuir] in branch 'dev/branches/lucene5376'
[ https://svn.apache.org/r1553300 ]

LUCENE-5376: clean up forbidden system outs / logging
              </div></li><li><div>
                Commit 1553301 from [~rcmuir] in branch 'dev/branches/lucene5376'
[ https://svn.apache.org/r1553301 ]

LUCENE-5376: remove code duplication
              </div></li><li><div>
                bq. I think we should put it under lucene/demo or lucene/server or something.

I think we should put it under lucene/server. We can have the JIRA search example (or a simpler one) under demo if we really want to, but I think a LuceneServer is a good component by itself. First, we never know what it will turn out into, what APIs will be developed etc. Also, it would be nice to see clean examples of distributed search (simple, facet, spatial) as well as suggest (maybe even distributed suggest). So +1 for adding it as a new module.
              </div></li><li><div>
                This is a good idea.  I was thinking of having a suggest demo in the lucene demo package! But this would be a good place to put it. I will look into the suggest stuff after a week or so.
              </div></li><li><div>
                Commit 1553379 from [~mikemccand] in branch 'dev/branches/lucene5376'
[ https://svn.apache.org/r1553379 ]

LUCENE-5376: try to address nocommit...
              </div></li><li><div>
                Commit 1553384 from [~rcmuir] in branch 'dev/branches/lucene5376'
[ https://svn.apache.org/r1553384 ]

LUCENE-5376: remove crazy use of jackson for pretty-printing. jackson only used in the indexing api now
              </div></li><li><div>
                I created 'lucene5376' branch (https://svn.apache.org/repos/asf/lucene/dev/branches/lucene5376) with the patch and cleaned up the build and so on.

notes/questions:
* i removed the tika plugin (for now). is this ok? we can make it a separate module?
* which json parser to keep? jackson is only used rarely, i assume this is the one to remove? We just have to change the indexing code now to remove those jars.
* forbidden-apis was angry about the SOPs. i tried to figure out which ones were intentional and which ones were not. you can see the list of files exempted in build.xml.
* javadocs-lint is working but angry because mostly all javadocs (package.html's, class docs) are missing. this seems to need some help.
* TestPlugins is disabled, but i think we can fix it if we build a .zip on-the-fly, pulling in MockPlugin.class and other files  with .getResourceAsStream? Uwe will love this.

              </div></li><li><div>
                bq. i removed the tika plugin (for now). is this ok? we can make it a separate module?

That's fine ... let's leave it for later?

bq. which json parser to keep? jackson is only used rarely, i assume this is the one to remove? We just have to change the indexing code now to remove those jars.

I had to add jackson for streaming / incremental parsing for the bulk APIs ... I think (not sure!) that we should just move to jackson for everything, but I haven't started that yet.  I'll look into it.

bq. forbidden-apis was angry about the SOPs. i tried to figure out which ones were intentional and which ones were not. you can see the list of files exempted in build.xml.

Thanks for fixing!

bq. javadocs-lint is working but angry because mostly all javadocs (package.html's, class docs) are missing. this seems to need some help.

I'll work on this.

bq. TestPlugins is disabled, but i think we can fix it if we build a .zip on-the-fly, pulling in MockPlugin.class and other files with .getResourceAsStream? Uwe will love this.

That sounds great!

Thanks Rob.
              </div></li><li><div>
                {quote}
I had to add jackson for streaming / incremental parsing for the bulk APIs ... I think (not sure!) that we should just move to jackson for everything, but I haven't started that yet. I'll look into it.
{quote}

OK, I may have sent this in the wrong direction with my latest commit, so just back it out if you want to move to jackson. I assumed the opposite, since jackson was only used in a few places. I will say I do prefer the simpler underengineered api of the json-smart vs the ... no comment... jackson, even if it has less features. Reminds me of HttpURLConnection vs httpclient.

              </div></li><li><div>
                Commit 1553403 from [~rcmuir] in branch 'dev/branches/lucene5376'
[ https://svn.apache.org/r1553403 ]

LUCENE-5376: fix and re-enable test
              </div></li><li><div>
                Commit 1553477 from [~mikemccand] in branch 'dev/branches/lucene5376'
[ https://svn.apache.org/r1553477 ]

LUCENE-5376: javadocs
              </div></li><li><div>
                Commit 1553486 from [~rcmuir] in branch 'dev/branches/lucene5376'
[ https://svn.apache.org/r1553486 ]

LUCENE-5376: javadocs fixes
              </div></li><li><div>
                Commit 1553499 from [~rcmuir] in branch 'dev/branches/lucene5376'
[ https://svn.apache.org/r1553499 ]

LUCENE-5376: move the hack wtf into one place
              </div></li><li><div>
                Commit 1553500 from [~rcmuir] in branch 'dev/branches/lucene5376'
[ https://svn.apache.org/r1553500 ]

LUCENE-5376: don't create and destroy dirs in the CWD
              </div></li><li><div>
                Commit 1553670 from [~mikemccand] in branch 'dev/branches/lucene5376'
[ https://svn.apache.org/r1553670 ]

LUCENE-5376: javadocs
              </div></li><li><div>
                Commit 1553821 from [~mikemccand] in branch 'dev/branches/lucene5376'
[ https://svn.apache.org/r1553821 ]

LUCENE-5376: javadocs
              </div></li><li><div>
                Commit 1554012 from [~mikemccand] in branch 'dev/branches/lucene5376'
[ https://svn.apache.org/r1554012 ]

LUCENE-5376: documentation-lint finally passes (method level)
              </div></li><li><div>
                Commit 1554013 from [~mikemccand] in branch 'dev/branches/lucene5376'
[ https://svn.apache.org/r1554013 ]

LUCENE-5376: simplify sync'd code
              </div></li><li><div>
                Commit 1554020 from [~mikemccand] in branch 'dev/branches/lucene5376'
[ https://svn.apache.org/r1554020 ]

LUCENE-5376: clean up / document addDocument code
              </div></li><li><div>
                Commit 1554022 from [~mikemccand] in branch 'dev/branches/lucene5376'
[ https://svn.apache.org/r1554022 ]

LUCENE-5376: rename singleValued -&gt; multiValued
              </div></li><li><div>
                Commit 1554207 from [~mikemccand] in branch 'dev/branches/lucene5376'
[ https://svn.apache.org/r1554207 ]

LUCENE-5376, LUCENE-5251: expose DocumentDictionary (to build suggestor from stored documents) in demo server
              </div></li><li><div>
                Commit 1554409 from [~mikemccand] in branch 'dev/branches/lucene5376'
[ https://svn.apache.org/r1554409 ]

LUCENE-5294, LUCENE-5376: in Lucene demo server, support building suggester where weight is an expression
              </div></li><li><div>
                Commit 1555341 from [~mikemccand] in branch 'dev/branches/lucene5376'
[ https://svn.apache.org/r1555341 ]

LUCENE-5376: test sugar: insert the current index name to outgoing requests to make writing tests easier
              </div></li><li><div>
                Commit 1555629 from [~mikemccand] in branch 'dev/branches/lucene5376'
[ https://svn.apache.org/r1555629 ]

LUCENE-5376: sync trunk changes, cutover to new facets APIs, simplify search handler
              </div></li><li><div>
                Commit 1555726 from [~mikemccand] in branch 'dev/branches/lucene5376'
[ https://svn.apache.org/r1555726 ]

LUCENE-5376: consolidate logic to pull the searcher from indexGen, version, snapshot or current
              </div></li><li><div>
                Commit 1556045 from [~mikemccand] in branch 'dev/branches/lucene5376'
[ https://svn.apache.org/r1556045 ]

LUCENE-4795, LUCENE-5376: expose SortedSetDocValuesFacets in lucene server
              </div></li><li><div>
                Commit 1556508 from [~mikemccand] in branch 'dev/branches/lucene5376'
[ https://svn.apache.org/r1556508 ]

LUCENE-5207, LUCENE-5376: add expressions support to lucene server, so you can define a virtual field from any JS expression and then sort by that field or retrieve its values for all hits
              </div></li><li><div>
                Commit 1556546 from [~mikemccand] in branch 'dev/branches/lucene5376'
[ https://svn.apache.org/r1556546 ]

LUCENE-5376: turn on scoring when sorting by field if any of the sort fields or retrieved fields require scores, e.g. when they are an expression field that uses _score
              </div></li><li><div>
                Commit 1556555 from [~mikemccand] in branch 'dev/branches/lucene5376'
[ https://svn.apache.org/r1556555 ]

LUCENE-5376: don't need to make ScoreValueSource public
              </div></li><li><div>
                Commit 1556564 from [~mikemccand] in branch 'dev/branches/lucene5376'
[ https://svn.apache.org/r1556564 ]

LUCENE-5376: add another expression test case; add nocommit for bcp47 cutover
              </div></li><li><div>
                Commit 1556620 from [~mikemccand] in branch 'dev/branches/lucene5376'
[ https://svn.apache.org/r1556620 ]

LUCENE-5376: also allow dynamic expression per-request
              </div></li><li><div>
                Commit 1556627 from [~mikemccand] in branch 'dev/branches/lucene5376'
[ https://svn.apache.org/r1556627 ]

LUCENE-5376: remove recency blending hack: just use expressions instead
              </div></li><li><div>
                Commit 1556775 from [~mikemccand] in branch 'dev/branches/lucene5376'
[ https://svn.apache.org/r1556775 ]

LUCENE-5376: allow setting norms format, including compressed norms
              </div></li><li><div>
                Commit 1556786 from [~mikemccand] in branch 'dev/branches/lucene5376'
[ https://svn.apache.org/r1556786 ]

LUCENE-4906, LUCENE-5376: using the expert 'render to Object' APIs in PostingsHighlighter to render directly to JSONArray in lucene server
              </div></li><li><div>
                Commit 1557073 from [~mikemccand] in branch 'dev/branches/lucene5376'
[ https://svn.apache.org/r1557073 ]

LUCENE-5336, LUCENE-5376: expose SimpleQueryParser in lucene server
              </div></li><li><div>
                Commit 1557517 from [~mikemccand] in branch 'dev/branches/lucene5376'
[ https://svn.apache.org/r1557517 ]

LUCENE-5376: expose control over underlying facet index field, fix some nocommits
              </div></li><li><div>
                Commit 1557694 from [~mikemccand] in branch 'dev/branches/lucene5376'
[ https://svn.apache.org/r1557694 ]

LUCENE-5376: fix nocommits, add tests, get RAMDir indices working more correctly; rename 'index' param to 'search' when registering a field
              </div></li><li><div>
                Commit 1557855 from [~mikemccand] in branch 'dev/branches/lucene5376'
[ https://svn.apache.org/r1557855 ]

LUCENE-5376: all custom Directory implementations accessible in CP; always return suggest count from buildSuggest; fix highlighting in AnalyzingInfixSuggster to render strait to JSONObject; add HTTP compression nocommits
              </div></li><li><div>
                Commit 1557868 from [~mikemccand] in branch 'dev/branches/lucene5376'
[ https://svn.apache.org/r1557868 ]

LUCENE-5376: add merge max MB/sec rate limiting
              </div></li><li><div>
                Commit 1559196 from [~mikemccand] in branch 'dev/branches/lucene5376'
[ https://svn.apache.org/r1559196 ]

LUCENE-5376, LUCENE-5399: add missingLast support to lucene server
              </div></li><li><div>
                LUCENE-5404 adds support for counting # of entries a lookup was built with and returns it on the build command, Dictionary uses InputIterator instead of BytesRefIterator among other things. I think it will get rid of some nocommits here?
              </div></li><li><div>
                bq. LUCENE-5404 adds support for counting # of entries a lookup was built with and returns it on the build command, Dictionary uses InputIterator instead of BytesRefIterator among other things. I think it will get rid of some nocommits here?

Wow, super, this will fix a few nocommits in the server.  Thanks Areek, I'll have a look!
              </div></li><li><div>
                Commit 1559524 from [~mikemccand] in branch 'dev/branches/lucene5376'
[ https://svn.apache.org/r1559524 ]

LUCENE-5376: cutover to analysis factories to create tokenizer and token filters; still need char filters &amp; whole analyzers
              </div></li><li><div>
                Commit 1559542 from [~mikemccand] in branch 'dev/branches/lucene5376'
[ https://svn.apache.org/r1559542 ]

LUCENE-5376: always throw unchecked cause of the InvocationTargetException
              </div></li><li><div>
                Commit 1559670 from [~mikemccand] in branch 'dev/branches/lucene5376'
[ https://svn.apache.org/r1559670 ]

LUCENE-5376: get 'file-like resources' working with char filters, fix nocommits, tests, clean up the analysis factory code
              </div></li><li><div>
                Commit 1559805 from [~mikemccand] in branch 'dev/branches/lucene5376'
[ https://svn.apache.org/r1559805 ]

LUCENE-5376: show how to do distance drill down with lucene server; clean up some tests
              </div></li><li><div>
                Commit 1559973 from [~mikemccand] in branch 'dev/branches/lucene5376'
[ https://svn.apache.org/r1559973 ]

LUCENE-5376: add search timeout (TimeLimitingCollector)
              </div></li><li><div>
                Commit 1559984 from [~mikemccand] in branch 'dev/branches/lucene5376'
[ https://svn.apache.org/r1559984 ]

LUCENE-5376: finish the simple distance range facets example; fix pre-existing bug when range facet filters are used with drill sideways
              </div></li><li><div>
                Commit 1560946 from [~mikemccand] in branch 'dev/branches/lucene5376'
[ https://svn.apache.org/r1560946 ]

LUCENE-5376: improve comments / nocommits
              </div></li><li><div>
                Commit 1561524 from [~mikemccand] in branch 'dev/branches/lucene5376'
[ https://svn.apache.org/r1561524 ]

LUCENE-5376: add some nocommits; cutover another pretty-print from jackson to json-smart; small simplification to replication
              </div></li><li><div>
                Commit 1561529 from [~mikemccand] in branch 'dev/branches/lucene5376'
[ https://svn.apache.org/r1561529 ]

LUCENE-5376: relax type DocsEnum -&gt; DocIdSetIterator; fix typos
              </div></li><li><div>
                Hello.

I have checked out this branch and did in the lucene directory an 
ant clean package-zip
The build was successful and many artefacts were created including:

- lucene-xml-query-demo.war
- lucene-demo-5.0-SNAPSHOT.jar
- lucene-server-5.0-SNAPSHOT.jar

I dropped the war into a fresh jetty 9 install and jetty was not happy (see stacktrace below).

My questions is:
- How the demo and the new server package fit together?
- How to run the demo?

Thanks.

{code}
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
        at java.lang.reflect.Method.invoke(Unknown Source)
        at org.eclipse.jetty.start.Main.invokeMain(Main.java:297)
        at org.eclipse.jetty.start.Main.start(Main.java:724)
        at org.eclipse.jetty.start.Main.main(Main.java:103)
        2014-01-27 22:21:36.288:WARN:lucene-xml-query-demo:main: unavailable
        javax.servlet.UnavailableException: org.apache.lucene.xmlparser.webdemo.FormBasedXmlQueryDemo
        at org.eclipse.jetty.servlet.BaseHolder.doStart(BaseHolder.java:102)
        at org.eclipse.jetty.servlet.ServletHolder.doStart(ServletHolder.java:294)
{code}
              </div></li><li><div>
                Hi Arcadius, the server is currently not a webapp; you don't drop it into any web container to run it.

Instead, its a standalone app, using Netty for the HTTP interface; run it like this:

{noformat}
    java -cp ... org.apache.lucene.server.Server -port NNNN -stateDir /path/to/dir
{noformat}

You'll need to put a bunch of Lucene's JARs on the classpath since the server exposes most of Lucene's modules (grouping, joins, analysis, highlighter, facets, queries, queryparser, suggest, expressions), as well as the jars under lucene/server/lib after you've run "ant resolve".
              </div></li><li><div>
                Commit 1562403 from [~mikemccand] in branch 'dev/branches/lucene5376'
[ https://svn.apache.org/r1562403 ]

LUCENE-5376: sync trunk
              </div></li><li><div>
                Commit 1563180 from [~mikemccand] in branch 'dev/branches/lucene5376'
[ https://svn.apache.org/r1563180 ]

LUCENE-5415,LUCENE-5376: get MultiTermQuery highlighting working; fix compilation errors
              </div></li><li><div>
                Commit 1563248 from [~mikemccand] in branch 'dev/branches/lucene5376'
[ https://svn.apache.org/r1563248 ]

LUCENE-5376: merge trunk
              </div></li><li><div>
                Commit 1564769 from [~mikemccand] in branch 'dev/branches/lucene5376'
[ https://svn.apache.org/r1564769 ]

LUCENE-5376: minor cleanups in replication
              </div></li><li><div>
                Commit 1565184 from [~mikemccand] in branch 'dev/branches/lucene5376'
[ https://svn.apache.org/r1565184 ]

LUCENE-5376: merge trunk
              </div></li><li><div>
                Commit 1565325 from [~mikemccand] in branch 'dev/branches/lucene5376'
[ https://svn.apache.org/r1565325 ]

LUCENE-5376: add some more test cases for dynamic expressions; clean up test code
              </div></li><li><div>
                Commit 1566454 from [~mikemccand] in branch 'dev/branches/lucene5376'
[ https://svn.apache.org/r1566454 ]

LUCENE-5376: sync trunk
              </div></li><li><div>
                Commit 1572063 from [~mikemccand] in branch 'dev/branches/lucene5376'
[ https://svn.apache.org/r1572063 ]

LUCENE-5376: sync trunk
              </div></li><li><div>
                Commit 1572637 from [~mikemccand] in branch 'dev/branches/lucene5376'
[ https://svn.apache.org/r1572637 ]

LUCENE-5376: add factory for SuggestStopFilter; get PostingsHighlighter MTQ highlighting working with block join queries; fix 0.0 score from block join group parent; add explicit label faceting; fix analyzing infix suggester highlighting; allow drill-downs on range facets
              </div></li><li><div>
                Hey Mike,

What's the endzone here? Any thoughts on it coming back into trunk?
              </div></li><li><div>
                bq. What's the endzone here? Any thoughts on it coming back into trunk?

Yes, I'd like to land it in trunk / 4.x, but it's probably going to be a while still ... lots of nocommits, though probably most could be downgraded to TODOs.

The server works well (it's running at http://jirasearch.mikemccandless.com), and is a nice showcase of many Lucene modules (faceting, expressions, joins, grouping, highlighting, etc.).  It's also helped uncover a number of "rough edges" in Lucene...
              </div></li><li><div>
                Commit 1573003 from [~mikemccand] in branch 'dev/branches/lucene5376'
[ https://svn.apache.org/r1573003 ]

LUCENE-5376: merge trunk
              </div></li><li><div>
                Commit 1573080 from [~mikemccand] in branch 'dev/branches/lucene5376'
[ https://svn.apache.org/r1573080 ]

LUCENE-5376, LUCENE-5477: add near-real-time suggest updates when using AnalyzingInfixSuggester to Lucene demo server
              </div></li><li><div>
                Commit 1573227 from [~mikemccand] in branch 'dev/branches/lucene5376'
[ https://svn.apache.org/r1573227 ]

LUCENE-5376: expose set/getCommitUserData
              </div></li><li><div>
                Commit 1578132 from [~mikemccand] in branch 'dev/branches/lucene5376_2'
[ https://svn.apache.org/r1578132 ]

LUCENE-5376: make new branch
              </div></li><li><div>
                Commit 1578133 from [~mikemccand] in branch 'dev/branches/lucene5376_2'
[ https://svn.apache.org/r1578133 ]

LUCENE-5376: carry over last branch
              </div></li><li><div>
                Commit 1578144 from [~mikemccand] in branch 'dev/branches/lucene5376_2'
[ https://svn.apache.org/r1578144 ]

LUCENE-5376: merge trunk
              </div></li><li><div>
                What's motivated the new branch?
              </div></li><li><div>
                bq. What's motivated the new branch?

Oh, sorry, something went wrong with the merge props on the old branch, such that when I tried to merge as I always do ("svn merge ../trunk") it hit strange conflicts in files never changed on the branch and then stopped merging and asked me to resolve the conflicts and re-run the merge, which caused further conflicts in files that shouldn't have conflicted...

I figured it was easier to just rebranch.
              </div></li><li><div>
                Sweet!
              </div></li><li><div>
                Commit 1579299 from [~mikemccand] in branch 'dev/branches/lucene5376_2'
[ https://svn.apache.org/r1579299 ]

LUCENE-5376: add missing cause for some exceptions
              </div></li><li><div>
                Commit 1591283 from jdyer@apache.org in branch 'dev/branches/lucene5376_2'
[ https://svn.apache.org/r1591283 ]

LUCENE-5376: add "lib" directory to svn:ignore
              </div></li><li><div>
                Commit 1591292 from jdyer@apache.org in branch 'dev/branches/lucene5376_2'
[ https://svn.apache.org/r1591292 ]

LUCENE-5376: Use a default 'stateDir'  instead of throwing NPE
              </div></li><li><div>
                Just playing around with this a little bit.  I'm running into some barriers for a quick start, wonder if we could...

- If user doesn't specify a handler, or an invalid one, return a list of valid handlers, possibly with a little param documentation instead of the current IllegalArgumentException
- Allow commands like "createIndex" be execute as GET and not require POST.  Maybe let users pass parameters on the URL and not always expect an incoming JSON document?  And/or have a parameter "json" for such a document?

I'd be happy to try and add this but wasn't sure if the intent was to make this strictly a server-to-server app, or also something users could play around with interactively with a browser.
              </div></li><li><div>
                Thanks James!

bq. If user doesn't specify a handler, or an invalid one, return a list of valid handlers, possibly with a little param documentation instead of the current IllegalArgumentException

+1: it's really important that all errors that come back from the server are transparent/clear as possible.  Maybe point to the live docs handler?

bq. Allow commands like "createIndex" be execute as GET and not require POST. Maybe let users pass parameters on the URL and not always expect an incoming JSON document? And/or have a parameter "json" for such a document?

I think this makes sense as long as the GET API is just a mirror of what you could do via JSON?  E.g., maybe take all CGI args, turn into the corresponding JSON struct, and pretend that JSON had arrived via POST?  Something like that ...
              </div></li><li><div>
                Commit 1591762 from jdyer@apache.org in branch 'dev/branches/lucene5376_2'
[ https://svn.apache.org/r1591762 ]

LUCENE-5376: add HelpHandler to aid new users and provide quick reference
              </div></li><li><div>
                Commit 1591764 from jdyer@apache.org in branch 'dev/branches/lucene5376_2'
[ https://svn.apache.org/r1591764 ]

LUCENE-5376: HelpHandler fixes
              </div></li><li><div>
                Commit 1591984 from jdyer@apache.org in branch 'dev/branches/lucene5376_2'
[ https://svn.apache.org/r1591984 ]

LUCENE-5376: HelpHandler fix for incoming parameter
              </div></li><li><div>
                Commit 1591986 from jdyer@apache.org in branch 'dev/branches/lucene5376_2'
[ https://svn.apache.org/r1591986 ]

LUCENE-5376: convert GET parameters to JSON
              </div></li><li><div>
                Just looking for the code? https://github.com/apache/lucene-solr/tree/lucene5376_2
              </div></li><li><div>
                I've moved this "thin wrapper Lucene server to its own github project: https://github.com/mikemccand/luceneserver
              </div></li></ol></div></div></html>