<!DOCTYPE html><html><div class="item-title">
        Item 263
      </div> <div class="item-details"><div><b>git_comments:</b> <ol><li><div>
                 Run selected tests
              </div></li><li><div>
                 Runs tests for bash scripts in a docker container. This argument is the entrypoint for the bats-tests
 pre-commit hook where it runs all the bats tests (excluding in container tests).
 It runs All tests if no arguments specified
 If some arguments specifed it runs:
  * The .bats tests directly if specified as parameters
  * The .bats tests corresponding (using the argument location) to the .sh files passed as parameters
  * All .bats files found in the directory if directory specified

  All of the above can be mixed in one set of command line arguments
              </div></li><li><div>
                 deduplicate
              </div></li><li><div>
                 Find tests corresponding to the modified scripts
scripts/}
              </div></li><li><div>
                 add it if it is a directory
              </div></li><li><div>
                 or if the bats files were modified themselves - run them directly
              </div></li><li><div>
                @} == "0" ]]; then
 Run all tests
bats_arguments} == "0" ]]; then
 Skip running anything if all filtered out
              </div></li></ol></div><div><b>git_commits:</b> <ol><li><div><div><b>summary:</b> Bats tests should be much faster now for pre-commits. (#11662)
                </div><div><b>message:</b> Bats tests should be much faster now for pre-commits. (#11662)

For pre-commit run of the tests only the corresponding tests
for changed .sh files and changed .bats files should be run

(cherry picked from commit 9a90ebeabe3842a46fd14c3ced4cbadf31e3c678)

                </div></div></li></ol></div><div><b>github_issues:</b> <ol></ol></div><div><b>github_issues_comments:</b> <ol></ol></div><div><b>github_pulls:</b> <ol><li><div><div><b>title:</b> Bats tests should be much faster now for pre-commits.
                </div><div><b>body:</b> For pre-commit run of the tests only the corresponding tests
for changed .sh files and changed .bats files should be run

&lt;!--
Thank you for contributing! Please make sure that your code changes
are covered with tests. And in case of new features or big changes
remember to adjust the documentation.

Feel free to ping committers for the review!

In case of existing issue, reference it using one of the following:

closes: #ISSUE
related: #ISSUE

How to write a good git commit message:
http://chris.beams.io/posts/git-commit/
--&gt;

---
**^ Add meaningful description above**

Read the **[Pull Request Guidelines](https://github.com/apache/airflow/blob/master/CONTRIBUTING.rst#pull-request-guidelines)** for more information.
In case of fundamental code change, Airflow Improvement Proposal ([AIP](https://cwiki.apache.org/confluence/display/AIRFLOW/Airflow+Improvements+Proposals)) is needed.
In case of a new dependency, check compliance with the [ASF 3rd Party License Policy](https://www.apache.org/legal/resolved.html#category-x).
In case of backwards incompatible changes please leave a note in [UPDATING.md](https://github.com/apache/airflow/blob/master/UPDATING.md).

                </div></div></li></ol></div><div><b>github_pulls_comments:</b> <ol><li><div>
                cc: @OmairK  -&gt; this is what we were talking about once. With this script bats tests will actually use the power of pre-commits and will only locally run those bats tests which were modified or only those tests that correspond to the modified files. This way we can add more bats tests with almost no impact on speed of (pre)commit.
              </div></li><li><div>
                Also random failure. Otherwise it is good!
              </div></li><li><div>
                Small improvement - but useful for pre-commit users who modify scripts (also allows adding more tests)
              </div></li></ol></div><div><b>github_pulls_reviews:</b> <ol></ol></div><div><b>jira_issues:</b> <ol></ol></div><div><b>jira_issues_comments:</b> <ol></ol></div></div></html>