<!DOCTYPE html><html><div class="item-title">
        Item 260
      </div> <div class="item-details"><div><b>git_comments:</b> <ol></ol></div><div><b>git_commits:</b> <ol><li><div><div><b>summary:</b> Refactor CORS filter into webapp context handler
                </div><div><b>message:</b> Refactor CORS filter into webapp context handler

### What is this PR for?
#867 was a hotfix and merged immediately. However we can refactor CORS filter into more appropriate place, which is webapp context handler instead of keeping it in rest api handler (since it also applies to websocket api).

### What type of PR is it?
Refactoring

### Todos
* [x] - move from rest to webapp

### What is the Jira issue?

### How should this be tested?
Basically this is refactoring, and original flow holds.
For testing, can use same routine as in #867.

### Screenshots (if appropriate)

### Questions:
* Does the licenses files need update? No
* Is there breaking changes for older versions? No
* Does this needs documentation? No

Author: Khalid Huseynov &lt;khalidhnv@nflabs.com&gt;

Closes #900 from khalidhuseynov/fix/refactor-cors-filter and squashes the following commits:

210a613 [Khalid Huseynov] move cors filter from rest api to webapp handler

                </div></div></li></ol></div><div><b>github_issues:</b> <ol></ol></div><div><b>github_issues_comments:</b> <ol></ol></div><div><b>github_pulls:</b> <ol><li><div><div><b>title:</b> Fix duplicate CORS header problem
                </div><div><b>body:</b> ### What is this PR for?

It attempts to solve cause of the duplicated CORS headers problem that was introduced by #831 and was tried to be solved as hotfix in #863 
### What type of PR is it?

Bug Fix
### Todos
- [x] - remove second `addFilter` to the same context
### What is the Jira issue?
### How should this be tested?

same as in #863 
### Screenshots (if appropriate)

![screenshot_duplicate_cors2](https://cloud.githubusercontent.com/assets/1642088/14910843/f400fd50-0e2b-11e6-9641-2f33b2f49afd.png)
### Questions:
- Does the licenses files need update? No
- Is there breaking changes for older versions? No
- Does this needs documentation? No

                </div></div></li></ol></div><div><b>github_pulls_comments:</b> <ol><li><div>
                /cc @echarles @Leemoonsoo for review

              </div></li><li><div>
                It looks like better solution than #863 üëç 

              </div></li><li><div>
                Yes, better tha #863.
To make it clear that the filter is applied to both the `api` and `ws`, I would move `webapp.addFilter(new FilterHolder...` somewhere at line 273.

              </div></li><li><div>
                I'm merging it into master as a hotfix, while it breaks development mode of zeppelin-web.
@echarles 's suggestion is very valid and it can be applied in the future PR.

              </div></li></ol></div><div><b>github_pulls_reviews:</b> <ol></ol></div><div><b>jira_issues:</b> <ol></ol></div><div><b>jira_issues_comments:</b> <ol></ol></div></div></html>