<!DOCTYPE html><html><div class="item-title">
        Item 25
      </div> <div class="item-details"><div><b>git_comments:</b> <ol><li><div>
                *
   * BFS Traversal of all the children under path, with the entries in the list,
   * in the same order as that of the traversal. Lists all the children without
   * setting any watches.
   *
   * @param zkw
   *          - zk reference
   * @param znode
   *          - path of node
   * @return list of children znodes under the path
   * @throws KeeperException
   *           if unexpected ZooKeeper exception
   
              </div></li><li><div>
                *
   * Delete all the children of the specified node but not the node itself. This
   * will first traverse the znode tree for listing the children and then delete
   * these znodes using multi-update api or sequential based on the specified
   * configurations.
   * &lt;p&gt;
   * Sets no watches. Throws all exceptions besides dealing with deletion of
   * children.
   * &lt;p&gt;
   * If hbase.zookeeper.useMulti is true, use ZooKeeper's multi-update
   * functionality. Otherwise, run the list of operations sequentially.
   * &lt;p&gt;
   * If all of the following are true:
   * &lt;ul&gt;
   * &lt;li&gt;runSequentialOnMultiFailure is true
   * &lt;li&gt;hbase.zookeeper.useMulti is true
   * &lt;/ul&gt;
   * on calling multi, we get a ZooKeeper exception that can be handled by a
   * sequential call(*), we retry the operations one-by-one (sequentially).
   *
   * @param zkw
   *          - zk reference
   * @param runSequentialOnMultiFailure
   *          - if true when we get a ZooKeeper exception that could retry the
   *          operations one-by-one (sequentially)
   * @param pathRoots
   *          - path of the parent node(s)
   * @throws KeeperException.NotEmptyException
   *           if node has children while deleting
   * @throws KeeperException
   *           if unexpected ZooKeeper exception
   * @throws IllegalArgumentException
   *           if an invalid path is specified
   
              </div></li><li><div>
                 Delete the leaves first and eventually get rid of the root
              </div></li><li><div>
                 atleast one element should exist
              </div></li><li><div>
                *
   * Verifies that for the given root node, it should delete all the child nodes
   * recursively using multi-update api.
   
              </div></li><li><div>
                 add elements to the parent node
              </div></li><li><div>
                 define parent node
              </div></li><li><div>
                *
   * Verifies that for the given root node, it should delete all the child nodes
   * recursively using normal sequential way.
   
              </div></li><li><div>
                 disables the multi-update api execution
              </div></li><li><div>
                 sets back the multi-update api execution
              </div></li></ol></div><div><b>git_commits:</b> <ol><li><div><div><b>summary:</b> HBASE-7847 Use zookeeper multi to clear znodes (Rakesh R)
                </div><div><b>message:</b> HBASE-7847 Use zookeeper multi to clear znodes (Rakesh R)

                </div></div></li></ol></div><div><b>github_issues:</b> <ol></ol></div><div><b>github_issues_comments:</b> <ol></ol></div><div><b>github_pulls:</b> <ol></ol></div><div><b>github_pulls_comments:</b> <ol></ol></div><div><b>github_pulls_reviews:</b> <ol></ol></div><div><b>jira_issues:</b> <ol><li><div><div><b>summary:</b> Use zookeeper multi to clear znodes
                </div><div><b>description:</b> In ZKProcedureUtil, clearChildZNodes() and clearZNodes(String procedureName) should utilize zookeeper multi so that they're atomic
                </div><div><b>label:</b> requirement
                </div></div></li><li><div><div><b>summary:</b> Use zookeeper multi to clear znodes
                </div><div><b>description:</b> In ZKProcedureUtil, clearChildZNodes() and clearZNodes(String procedureName) should utilize zookeeper multi so that they're atomic
                </div></div></li><li><div><div><b>summary:</b> Use zookeeper multi to clear znodes
                </div><div><b>description:</b> In ZKProcedureUtil, clearChildZNodes() and clearZNodes(String procedureName) should utilize zookeeper multi so that they're atomic
                </div></div></li><li><div><div><b>summary:</b> Use zookeeper multi to clear znodes
                </div><div><b>description:</b> In ZKProcedureUtil, clearChildZNodes() and clearZNodes(String procedureName) should utilize zookeeper multi so that they're atomic
                </div></div></li><li><div><div><b>summary:</b> Use zookeeper multi to clear znodes
                </div><div><b>description:</b> In ZKProcedureUtil, clearChildZNodes() and clearZNodes(String procedureName) should utilize zookeeper multi so that they're atomic
                </div></div></li><li><div><div><b>summary:</b> Use zookeeper multi to clear znodes
                </div><div><b>description:</b> In ZKProcedureUtil, clearChildZNodes() and clearZNodes(String procedureName) should utilize zookeeper multi so that they're atomic
                </div></div></li><li><div><div><b>summary:</b> Use zookeeper multi to clear znodes
                </div><div><b>description:</b> In ZKProcedureUtil, clearChildZNodes() and clearZNodes(String procedureName) should utilize zookeeper multi so that they're atomic
                </div><div><b>label:</b> code-design
                </div></div></li><li><div><div><b>summary:</b> Use zookeeper multi to clear znodes
                </div><div><b>description:</b> In ZKProcedureUtil, clearChildZNodes() and clearZNodes(String procedureName) should utilize zookeeper multi so that they're atomic
                </div></div></li><li><div><div><b>summary:</b> Use zookeeper multi to clear znodes
                </div><div><b>description:</b> In ZKProcedureUtil, clearChildZNodes() and clearZNodes(String procedureName) should utilize zookeeper multi so that they're atomic
                </div></div></li><li><div><div><b>summary:</b> Use zookeeper multi to clear znodes
                </div><div><b>description:</b> In ZKProcedureUtil, clearChildZNodes() and clearZNodes(String procedureName) should utilize zookeeper multi so that they're atomic
                </div><div><b>label:</b> code-design
                </div></div></li><li><div><div><b>summary:</b> Use zookeeper multi to clear znodes
                </div><div><b>description:</b> In ZKProcedureUtil, clearChildZNodes() and clearZNodes(String procedureName) should utilize zookeeper multi so that they're atomic
                </div></div></li><li><div><div><b>summary:</b> Use zookeeper multi to clear znodes
                </div><div><b>description:</b> In ZKProcedureUtil, clearChildZNodes() and clearZNodes(String procedureName) should utilize zookeeper multi so that they're atomic
                </div></div></li><li><div><div><b>summary:</b> Use zookeeper multi to clear znodes
                </div><div><b>description:</b> In ZKProcedureUtil, clearChildZNodes() and clearZNodes(String procedureName) should utilize zookeeper multi so that they're atomic
                </div></div></li><li><div><div><b>summary:</b> Use zookeeper multi to clear znodes
                </div><div><b>description:</b> In ZKProcedureUtil, clearChildZNodes() and clearZNodes(String procedureName) should utilize zookeeper multi so that they're atomic
                </div></div></li><li><div><div><b>summary:</b> Use zookeeper multi to clear znodes
                </div><div><b>description:</b> In ZKProcedureUtil, clearChildZNodes() and clearZNodes(String procedureName) should utilize zookeeper multi so that they're atomic
                </div></div></li><li><div><div><b>summary:</b> Use zookeeper multi to clear znodes
                </div><div><b>description:</b> In ZKProcedureUtil, clearChildZNodes() and clearZNodes(String procedureName) should utilize zookeeper multi so that they're atomic
                </div></div></li><li><div><div><b>summary:</b> Use zookeeper multi to clear znodes
                </div><div><b>description:</b> In ZKProcedureUtil, clearChildZNodes() and clearZNodes(String procedureName) should utilize zookeeper multi so that they're atomic
                </div><div><b>label:</b> code-design
                </div></div></li><li><div><div><b>summary:</b> Use zookeeper multi to clear znodes
                </div><div><b>description:</b> In ZKProcedureUtil, clearChildZNodes() and clearZNodes(String procedureName) should utilize zookeeper multi so that they're atomic
                </div></div></li><li><div><div><b>summary:</b> Use zookeeper multi to clear znodes
                </div><div><b>description:</b> In ZKProcedureUtil, clearChildZNodes() and clearZNodes(String procedureName) should utilize zookeeper multi so that they're atomic
                </div></div></li><li><div><div><b>summary:</b> Use zookeeper multi to clear znodes
                </div><div><b>description:</b> In ZKProcedureUtil, clearChildZNodes() and clearZNodes(String procedureName) should utilize zookeeper multi so that they're atomic
                </div><div><b>label:</b> documentation
                </div></div></li><li><div><div><b>summary:</b> Use zookeeper multi to clear znodes
                </div><div><b>description:</b> In ZKProcedureUtil, clearChildZNodes() and clearZNodes(String procedureName) should utilize zookeeper multi so that they're atomic
                </div></div></li><li><div><div><b>summary:</b> Use zookeeper multi to clear znodes
                </div><div><b>description:</b> In ZKProcedureUtil, clearChildZNodes() and clearZNodes(String procedureName) should utilize zookeeper multi so that they're atomic
                </div></div></li><li><div><div><b>summary:</b> Use zookeeper multi to clear znodes
                </div><div><b>description:</b> In ZKProcedureUtil, clearChildZNodes() and clearZNodes(String procedureName) should utilize zookeeper multi so that they're atomic
                </div></div></li><li><div><div><b>summary:</b> Use zookeeper multi to clear znodes
                </div><div><b>description:</b> In ZKProcedureUtil, clearChildZNodes() and clearZNodes(String procedureName) should utilize zookeeper multi so that they're atomic
                </div><div><b>label:</b> code-design
                </div></div></li><li><div><div><b>summary:</b> Use zookeeper multi to clear znodes
                </div><div><b>description:</b> In ZKProcedureUtil, clearChildZNodes() and clearZNodes(String procedureName) should utilize zookeeper multi so that they're atomic
                </div></div></li><li><div><div><b>summary:</b> Use zookeeper multi to clear znodes
                </div><div><b>description:</b> In ZKProcedureUtil, clearChildZNodes() and clearZNodes(String procedureName) should utilize zookeeper multi so that they're atomic
                </div><div><b>label:</b> documentation
                </div></div></li><li><div><div><b>summary:</b> Use zookeeper multi to clear znodes
                </div><div><b>description:</b> In ZKProcedureUtil, clearChildZNodes() and clearZNodes(String procedureName) should utilize zookeeper multi so that they're atomic
                </div></div></li><li><div><div><b>summary:</b> Use zookeeper multi to clear znodes
                </div><div><b>description:</b> In ZKProcedureUtil, clearChildZNodes() and clearZNodes(String procedureName) should utilize zookeeper multi so that they're atomic
                </div></div></li><li><div><div><b>summary:</b> Use zookeeper multi to clear znodes
                </div><div><b>description:</b> In ZKProcedureUtil, clearChildZNodes() and clearZNodes(String procedureName) should utilize zookeeper multi so that they're atomic
                </div></div></li><li><div><div><b>summary:</b> Use zookeeper multi to clear znodes
                </div><div><b>description:</b> In ZKProcedureUtil, clearChildZNodes() and clearZNodes(String procedureName) should utilize zookeeper multi so that they're atomic
                </div></div></li><li><div><div><b>summary:</b> Use zookeeper multi to clear znodes
                </div><div><b>description:</b> In ZKProcedureUtil, clearChildZNodes() and clearZNodes(String procedureName) should utilize zookeeper multi so that they're atomic
                </div></div></li><li><div><div><b>summary:</b> Use zookeeper multi to clear znodes
                </div><div><b>description:</b> In ZKProcedureUtil, clearChildZNodes() and clearZNodes(String procedureName) should utilize zookeeper multi so that they're atomic
                </div></div></li><li><div><div><b>summary:</b> Use zookeeper multi to clear znodes
                </div><div><b>description:</b> In ZKProcedureUtil, clearChildZNodes() and clearZNodes(String procedureName) should utilize zookeeper multi so that they're atomic
                </div><div><b>label:</b> code-design
                </div></div></li><li><div><div><b>summary:</b> Use zookeeper multi to clear znodes
                </div><div><b>description:</b> In ZKProcedureUtil, clearChildZNodes() and clearZNodes(String procedureName) should utilize zookeeper multi so that they're atomic
                </div></div></li><li><div><div><b>summary:</b> Use zookeeper multi to clear znodes
                </div><div><b>description:</b> In ZKProcedureUtil, clearChildZNodes() and clearZNodes(String procedureName) should utilize zookeeper multi so that they're atomic
                </div></div></li><li><div><div><b>summary:</b> Use zookeeper multi to clear znodes
                </div><div><b>description:</b> In ZKProcedureUtil, clearChildZNodes() and clearZNodes(String procedureName) should utilize zookeeper multi so that they're atomic
                </div></div></li><li><div><div><b>summary:</b> Use zookeeper multi to clear znodes
                </div><div><b>description:</b> In ZKProcedureUtil, clearChildZNodes() and clearZNodes(String procedureName) should utilize zookeeper multi so that they're atomic
                </div></div></li><li><div><div><b>summary:</b> Use zookeeper multi to clear znodes
                </div><div><b>description:</b> In ZKProcedureUtil, clearChildZNodes() and clearZNodes(String procedureName) should utilize zookeeper multi so that they're atomic
                </div><div><b>label:</b> code-design
                </div></div></li><li><div><div><b>summary:</b> Use zookeeper multi to clear znodes
                </div><div><b>description:</b> In ZKProcedureUtil, clearChildZNodes() and clearZNodes(String procedureName) should utilize zookeeper multi so that they're atomic
                </div><div><b>label:</b> code-design
                </div></div></li><li><div><div><b>summary:</b> Use zookeeper multi to clear znodes
                </div><div><b>description:</b> In ZKProcedureUtil, clearChildZNodes() and clearZNodes(String procedureName) should utilize zookeeper multi so that they're atomic
                </div></div></li><li><div><div><b>summary:</b> Use zookeeper multi to clear znodes
                </div><div><b>description:</b> In ZKProcedureUtil, clearChildZNodes() and clearZNodes(String procedureName) should utilize zookeeper multi so that they're atomic
                </div></div></li><li><div><div><b>summary:</b> Use zookeeper multi to clear znodes
                </div><div><b>description:</b> In ZKProcedureUtil, clearChildZNodes() and clearZNodes(String procedureName) should utilize zookeeper multi so that they're atomic
                </div></div></li><li><div><div><b>summary:</b> Use zookeeper multi to clear znodes
                </div><div><b>description:</b> In ZKProcedureUtil, clearChildZNodes() and clearZNodes(String procedureName) should utilize zookeeper multi so that they're atomic
                </div></div></li><li><div><div><b>summary:</b> Use zookeeper multi to clear znodes
                </div><div><b>description:</b> In ZKProcedureUtil, clearChildZNodes() and clearZNodes(String procedureName) should utilize zookeeper multi so that they're atomic
                </div></div></li><li><div><div><b>summary:</b> Use zookeeper multi to clear znodes
                </div><div><b>description:</b> In ZKProcedureUtil, clearChildZNodes() and clearZNodes(String procedureName) should utilize zookeeper multi so that they're atomic
                </div></div></li><li><div><div><b>summary:</b> Use zookeeper multi to clear znodes
                </div><div><b>description:</b> In ZKProcedureUtil, clearChildZNodes() and clearZNodes(String procedureName) should utilize zookeeper multi so that they're atomic
                </div></div></li><li><div><div><b>summary:</b> Use zookeeper multi to clear znodes
                </div><div><b>description:</b> In ZKProcedureUtil, clearChildZNodes() and clearZNodes(String procedureName) should utilize zookeeper multi so that they're atomic
                </div><div><b>label:</b> code-design
                </div></div></li><li><div><div><b>summary:</b> Use zookeeper multi to clear znodes
                </div><div><b>description:</b> In ZKProcedureUtil, clearChildZNodes() and clearZNodes(String procedureName) should utilize zookeeper multi so that they're atomic
                </div><div><b>label:</b> code-design
                </div></div></li><li><div><div><b>summary:</b> Use zookeeper multi to clear znodes
                </div><div><b>description:</b> In ZKProcedureUtil, clearChildZNodes() and clearZNodes(String procedureName) should utilize zookeeper multi so that they're atomic
                </div></div></li><li><div><div><b>summary:</b> Use zookeeper multi to clear znodes
                </div><div><b>description:</b> In ZKProcedureUtil, clearChildZNodes() and clearZNodes(String procedureName) should utilize zookeeper multi so that they're atomic
                </div></div></li><li><div><div><b>summary:</b> Use zookeeper multi to clear znodes
                </div><div><b>description:</b> In ZKProcedureUtil, clearChildZNodes() and clearZNodes(String procedureName) should utilize zookeeper multi so that they're atomic
                </div><div><b>label:</b> documentation
                </div></div></li><li><div><div><b>summary:</b> Use zookeeper multi to clear znodes
                </div><div><b>description:</b> In ZKProcedureUtil, clearChildZNodes() and clearZNodes(String procedureName) should utilize zookeeper multi so that they're atomic
                </div><div><b>label:</b> code-design
                </div></div></li><li><div><div><b>summary:</b> Use zookeeper multi to clear znodes
                </div><div><b>description:</b> In ZKProcedureUtil, clearChildZNodes() and clearZNodes(String procedureName) should utilize zookeeper multi so that they're atomic
                </div><div><b>label:</b> code-design
                </div></div></li><li><div><div><b>summary:</b> Use zookeeper multi to clear znodes
                </div><div><b>description:</b> In ZKProcedureUtil, clearChildZNodes() and clearZNodes(String procedureName) should utilize zookeeper multi so that they're atomic
                </div></div></li><li><div><div><b>summary:</b> Use zookeeper multi to clear znodes
                </div><div><b>description:</b> In ZKProcedureUtil, clearChildZNodes() and clearZNodes(String procedureName) should utilize zookeeper multi so that they're atomic
                </div><div><b>label:</b> code-design
                </div></div></li><li><div><div><b>summary:</b> Use zookeeper multi to clear znodes
                </div><div><b>description:</b> In ZKProcedureUtil, clearChildZNodes() and clearZNodes(String procedureName) should utilize zookeeper multi so that they're atomic
                </div></div></li><li><div><div><b>summary:</b> Use zookeeper multi to clear znodes
                </div><div><b>description:</b> In ZKProcedureUtil, clearChildZNodes() and clearZNodes(String procedureName) should utilize zookeeper multi so that they're atomic
                </div></div></li><li><div><div><b>summary:</b> Use zookeeper multi to clear znodes
                </div><div><b>description:</b> In ZKProcedureUtil, clearChildZNodes() and clearZNodes(String procedureName) should utilize zookeeper multi so that they're atomic
                </div></div></li><li><div><div><b>summary:</b> Use zookeeper multi to clear znodes
                </div><div><b>description:</b> In ZKProcedureUtil, clearChildZNodes() and clearZNodes(String procedureName) should utilize zookeeper multi so that they're atomic
                </div></div></li><li><div><div><b>summary:</b> Use zookeeper multi to clear znodes
                </div><div><b>description:</b> In ZKProcedureUtil, clearChildZNodes() and clearZNodes(String procedureName) should utilize zookeeper multi so that they're atomic
                </div></div></li><li><div><div><b>summary:</b> Use zookeeper multi to clear znodes
                </div><div><b>description:</b> In ZKProcedureUtil, clearChildZNodes() and clearZNodes(String procedureName) should utilize zookeeper multi so that they're atomic
                </div></div></li><li><div><div><b>summary:</b> Use zookeeper multi to clear znodes
                </div><div><b>description:</b> In ZKProcedureUtil, clearChildZNodes() and clearZNodes(String procedureName) should utilize zookeeper multi so that they're atomic
                </div></div></li></ol></div><div><b>jira_issues_comments:</b> <ol><li><div><div><b>body:</b> Work in progress
                </div><div><b>label:</b> requirement
                </div></div></li><li><div>
                Just added initial draft patch, would like to know the feedback and will try to add few tests also.
              </div></li><li><div>
                {color:red}-1 overall{color}.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12634131/HBASE-7847.patch
  against trunk revision .
  ATTACHMENT ID: 12634131

    {color:green}+1 @author{color}.  The patch does not contain any @author tags.

    {color:red}-1 tests included{color}.  The patch doesn't appear to include any new or modified tests.
                        Please justify why no new tests are needed for this patch.
                        Also please list what manual steps were performed to verify this patch.

    {color:red}-1 hadoop1.0{color}.  The patch failed to compile against the hadoop 1.0 profile.
    Here is snippet of errors:
    {code}[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:2.5.1:compile (default-compile) on project hbase-client: Compilation failure
[ERROR] /home/jenkins/jenkins-slave/workspace/PreCommit-HBASE-Build/trunk/hbase-client/src/main/java/org/apache/hadoop/hbase/zookeeper/ZKAssign.java:[499,36] unreported exception java.lang.InterruptedException; must be caught or declared to be thrown
[ERROR] -&gt; [Help 1]
org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:2.5.1:compile (default-compile) on project hbase-client: Compilation failure
/home/jenkins/jenkins-slave/workspace/PreCommit-HBASE-Build/trunk/hbase-client/src/main/java/org/apache/hadoop/hbase/zookeeper/ZKAssign.java:[499,36] unreported exception java.lang.InterruptedException; must be caught or declared to be thrown

	at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:213)
	at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
	at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
--
Caused by: org.apache.maven.plugin.CompilationFailureException: Compilation failure
/home/jenkins/jenkins-slave/workspace/PreCommit-HBASE-Build/trunk/hbase-client/src/main/java/org/apache/hadoop/hbase/zookeeper/ZKAssign.java:[499,36] unreported exception java.lang.InterruptedException; must be caught or declared to be thrown

	at org.apache.maven.plugin.AbstractCompilerMojo.execute(AbstractCompilerMojo.java:729)
	at org.apache.maven.plugin.CompilerMojo.execute(CompilerMojo.java:128)
	at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101){code}

Console output: https://builds.apache.org/job/PreCommit-HBASE-Build/8958//console

This message is automatically generated.
              </div></li><li><div>
                Looks like the newly introduced InterruptedException causes compilation to fail.
              </div></li><li><div>
                This patch seems unrelated to:

{code}
  &lt;property&gt;
    &lt;name&gt;hbase.zookeeper.useMulti&lt;/name&gt;
    &lt;value&gt;false&lt;/value&gt;
    &lt;description&gt;Instructs HBase to make use of ZooKeeper's multi-update functionality.
    This allows certain ZooKeeper operations to complete more quickly and prevents some issues
    with rare Replication failure scenarios (see the release note of HBASE-2611 for an example).
    IMPORTANT: only set this to true if all ZooKeeper servers in the cluster are on version 3.4+
    and will not be downgraded.  ZooKeeper versions before 3.4 do not support multi-update and
    will not fail gracefully if multi-update is invoked (see ZOOKEEPER-1495).&lt;/description&gt;
  &lt;/property&gt;
{code}

It should be related?
              </div></li><li><div>
                Thank you Ted, Stack for the comments. Could you please have a look at the new patch.

Have made the following changes:
- Handled InterruptedException 
- Implemented the deleteChildrenRecursively api similar to the existing multiOrSequential api structure. Also, IMHO we can expose new util api ZKUtil#deleteChildrenRecursivelyMultiOrSequential to everyone.

-Rakesh
              </div></li><li><div><div><b>body:</b> {color:red}-1 overall{color}.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12634398/HBASE-7847.patch
  against trunk revision .
  ATTACHMENT ID: 12634398

    {color:green}+1 @author{color}.  The patch does not contain any @author tags.

    {color:red}-1 tests included{color}.  The patch doesn't appear to include any new or modified tests.
                        Please justify why no new tests are needed for this patch.
                        Also please list what manual steps were performed to verify this patch.

    {color:green}+1 hadoop1.0{color}.  The patch compiles against the hadoop 1.0 profile.

    {color:green}+1 hadoop1.1{color}.  The patch compiles against the hadoop 1.1 profile.

    {color:red}-1 javadoc{color}.  The javadoc tool appears to have generated 2 warning messages.

    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.

    {color:green}+1 findbugs{color}.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.

    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.

    {color:red}-1 lineLengths{color}.  The patch introduces the following lines longer than 100:
    +   * BFS Traversal of all the children under path, with the entries in the list, in the same order as
+   * Delete all the children of the specified nodes but not the nodes itself. Sets no watches. Throws

  {color:green}+1 site{color}.  The mvn site goal succeeds with this patch.

     {color:red}-1 core tests{color}.  The patch failed these unit tests:
     

     {color:red}-1 core zombie tests{color}.  There are 1 zombie test(s): 	at org.apache.hadoop.hbase.regionserver.wal.TestLogRolling.testLogRollOnDatanodeDeath(TestLogRolling.java:368)

Test results: https://builds.apache.org/job/PreCommit-HBASE-Build/8966//testReport/
Findbugs warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/8966//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html
Findbugs warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/8966//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html
Findbugs warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/8966//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html
Findbugs warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/8966//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html
Findbugs warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/8966//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html
Findbugs warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/8966//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html
Findbugs warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/8966//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html
Findbugs warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/8966//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html
Findbugs warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/8966//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html
Console output: https://builds.apache.org/job/PreCommit-HBASE-Build/8966//console

This message is automatically generated.
                </div><div><b>label:</b> code-design
                </div></div></li><li><div>
                Attached one more patch where I have,
- included few tests 
- corrected '-1 lineLengths'

I failed to get the javadocs &amp; test failure problems, is that related to my patch ?
              </div></li><li><div>
                Latest patch lgtm. Nice tests [~rakeshr].
              </div></li><li><div><div><b>body:</b> {color:red}-1 overall{color}.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12634432/HBASE-7847.patch
  against trunk revision .
  ATTACHMENT ID: 12634432

    {color:green}+1 @author{color}.  The patch does not contain any @author tags.

    {color:green}+1 tests included{color}.  The patch appears to include 5 new or modified tests.

    {color:green}+1 hadoop1.0{color}.  The patch compiles against the hadoop 1.0 profile.

    {color:green}+1 hadoop1.1{color}.  The patch compiles against the hadoop 1.1 profile.

    {color:red}-1 javadoc{color}.  The javadoc tool appears to have generated 2 warning messages.

    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.

    {color:green}+1 findbugs{color}.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.

    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.

    {color:green}+1 lineLengths{color}.  The patch does not introduce lines longer than 100

  {color:green}+1 site{color}.  The mvn site goal succeeds with this patch.

     {color:red}-1 core tests{color}.  The patch failed these unit tests:
                       org.apache.hadoop.hbase.master.TestSplitLogManager
                  org.apache.hadoop.hbase.regionserver.TestSplitLogWorker

     {color:red}-1 core zombie tests{color}.  There are 1 zombie test(s): 	at org.apache.hadoop.hbase.mapreduce.TestHFileOutputFormat.testMRIncrementalLoad(TestHFileOutputFormat.java:354)

Test results: https://builds.apache.org/job/PreCommit-HBASE-Build/8969//testReport/
Findbugs warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/8969//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html
Findbugs warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/8969//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html
Findbugs warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/8969//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html
Findbugs warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/8969//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html
Findbugs warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/8969//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html
Findbugs warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/8969//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html
Findbugs warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/8969//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html
Findbugs warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/8969//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html
Findbugs warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/8969//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html
Console output: https://builds.apache.org/job/PreCommit-HBASE-Build/8969//console

This message is automatically generated.
                </div><div><b>label:</b> code-design
                </div></div></li><li><div>
                When does ZKUtil.listSubTreeBFS show up in zk?  Is it a recent version of zk?  Has it always been there?  Is this the only 'new' zk call this patch introduces?  Thanks.
              </div></li><li><div>
                bq.When does ZKUtil.listSubTreeBFS show up in zk? Is it a recent version of zk? 
I could see ZKUtil.listSubTreeBFS api is available from 3.4.0 onwards. Reference JIRA ZOOKEEPER-839, ZKUtil added as part of this.

bq.Has it always been there?
AFAIK, ZKUtil apis are already being used extensively in many apache projects (including HADOOP, BOOKKEEPER etc). Anyway I'll have a word with Flavio and come back.

bq.Is this the only 'new' zk call this patch introduces?
Yes, actually list sub tree is using getChildren() api for traversing and will be called multiple times. ZKUtil#deleteRecursive() internally uses the ZKUtil.listSubTreeBFS() api to prepare the hierarchy, then it wll call zk#delete api for each path.

Existing:-
zk#getChildren() calls + zk#delete calls for each path

New approach:-
zk#getChildren() calls + one multi() api call
              </div></li><li><div>
                Thanks for digging.  What happens if someone is running zk 3.3.x?  I ask because it is a little obnoxious expecting folks update their zk ensemble when updating their hbase.  At a minimum I'd think this sort of requirement would make this a trunk only patch and even then, is it worth stipulating we require at least 3.4 to run?   On other hand, looking in requirements, we do not require a particular version of zk.  Could you poke to see if this feature available and then selectively use the new code and fall back on the old if it fails?

Thanks.
              </div></li><li><div>
                bq.Has it always been there?
Yes Stack, you are right. This is not an exposed api from ZK and I feel its not safe to use directly. How about bringing the same traversal logic to HBase instead of depending on ZKUtil#listSubTreeBFS , I'll have a try.

              </div></li><li><div>
                [~rakeshr]
The test case failures also related to this patch. Please handle them in next patch.
              </div></li><li><div>
                Thank you again Stack, Rajeshbabu for the reviews. I've reworked and now I have used our own logic of traversal and preparing the nodes to be deleted.
              </div></li><li><div><div><b>body:</b> {color:red}-1 overall{color}.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12634657/HBASE-7847_v4.patch
  against trunk revision .
  ATTACHMENT ID: 12634657

    {color:green}+1 @author{color}.  The patch does not contain any @author tags.

    {color:green}+1 tests included{color}.  The patch appears to include 5 new or modified tests.

    {color:green}+1 hadoop1.0{color}.  The patch compiles against the hadoop 1.0 profile.

    {color:green}+1 hadoop1.1{color}.  The patch compiles against the hadoop 1.1 profile.

    {color:green}+1 javadoc{color}.  The javadoc tool did not generate any warning messages.

    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.

    {color:green}+1 findbugs{color}.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.

    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.

    {color:green}+1 lineLengths{color}.  The patch does not introduce lines longer than 100

  {color:green}+1 site{color}.  The mvn site goal succeeds with this patch.

     {color:red}-1 core tests{color}.  The patch failed these unit tests:
                       org.apache.hadoop.hbase.regionserver.TestEndToEndSplitTransaction
                  org.apache.hadoop.hbase.client.TestAdmin

Test results: https://builds.apache.org/job/PreCommit-HBASE-Build/8988//testReport/
Findbugs warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/8988//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html
Findbugs warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/8988//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html
Findbugs warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/8988//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html
Findbugs warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/8988//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html
Findbugs warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/8988//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html
Findbugs warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/8988//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html
Findbugs warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/8988//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html
Findbugs warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/8988//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html
Findbugs warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/8988//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html
Console output: https://builds.apache.org/job/PreCommit-HBASE-Build/8988//console

This message is automatically generated.
                </div><div><b>label:</b> code-design
                </div></div></li><li><div>
                These test cases are passing locally in my environment, I doubt whether these are due to my patch ?
              </div></li><li><div>
                Test failures were on Online Schema Change - not related to your patch.
              </div></li><li><div><div><b>body:</b> lgtm
{code}
+   * @throws KeeperException
+   */
+  public static void deleteChildrenRecursivelyMultiOrSequential(ZooKeeperWatcher zkw,
{code}
Please add javadoc for the above method.
{code}
+      // enables back the multi-update api execution
+      zkw.getConfiguration().setBoolean("hbase.zookeeper.useMulti", true);
{code}
Should the current config value be saved at beginning of test and restored in finally ?
                </div><div><b>label:</b> documentation
                </div></div></li><li><div>
                Thank you Ted for the review. Attached latest patch addressing the comments.
              </div></li><li><div>
                Thank you Ted for the review. Attached latest patch addressing the comments.
              </div></li><li><div>
                Thank you Ted for the review. Attached latest patch addressing the comments.
              </div></li><li><div><div><b>body:</b> {color:green}+1 overall{color}.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12635032/HBASE-7847_v5.patch
  against trunk revision .
  ATTACHMENT ID: 12635032

    {color:green}+1 @author{color}.  The patch does not contain any @author tags.

    {color:green}+1 tests included{color}.  The patch appears to include 5 new or modified tests.

    {color:green}+1 hadoop1.0{color}.  The patch compiles against the hadoop 1.0 profile.

    {color:green}+1 hadoop1.1{color}.  The patch compiles against the hadoop 1.1 profile.

    {color:green}+1 javadoc{color}.  The javadoc tool did not generate any warning messages.

    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.

    {color:green}+1 findbugs{color}.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.

    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.

    {color:green}+1 lineLengths{color}.  The patch does not introduce lines longer than 100

  {color:green}+1 site{color}.  The mvn site goal succeeds with this patch.

    {color:green}+1 core tests{color}.  The patch passed unit tests in .

Test results: https://builds.apache.org/job/PreCommit-HBASE-Build/9021//testReport/
Findbugs warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/9021//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html
Findbugs warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/9021//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html
Findbugs warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/9021//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html
Findbugs warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/9021//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html
Findbugs warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/9021//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html
Findbugs warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/9021//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html
Findbugs warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/9021//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html
Findbugs warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/9021//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html
Findbugs warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/9021//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html
Console output: https://builds.apache.org/job/PreCommit-HBASE-Build/9021//console

This message is automatically generated.
                </div><div><b>label:</b> code-design
                </div></div></li><li><div>
                Ping [~saint.ack@gmail.com], [~yuzhihong@gmail.com]
              </div></li><li><div><div><b>body:</b> lgtm
{code}
+  public static void deleteChildrenRecursivelyMultiOrSequential(ZooKeeperWatcher zkw,
+      boolean runSequentialOnMultiFailure, String... pathRoots) throws KeeperException {
{code}
Can you add javadoc for the parameters of above method ?
listChildrenBFSNoWatch() needs javadoc for the parameters, too.
                </div><div><b>label:</b> documentation
                </div></div></li><li><div>
                Attached new patch addressing the comments. Please have a look. Thanks!
              </div></li><li><div>
                {color:red}-1 overall{color}.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12635241/HBASE-7847_v6.patch
  against trunk revision .
  ATTACHMENT ID: 12635241

    {color:green}+1 @author{color}.  The patch does not contain any @author tags.

    {color:green}+1 tests included{color}.  The patch appears to include 5 new or modified tests.

    {color:green}+1 hadoop1.0{color}.  The patch compiles against the hadoop 1.0 profile.

    {color:green}+1 hadoop1.1{color}.  The patch compiles against the hadoop 1.1 profile.

    {color:green}+1 javadoc{color}.  The javadoc tool did not generate any warning messages.

    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.

    {color:red}-1 findbugs{color}.  The patch appears to cause Findbugs (version 1.3.9) to fail.

    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.

    {color:green}+1 lineLengths{color}.  The patch does not introduce lines longer than 100

  {color:green}+1 site{color}.  The mvn site goal succeeds with this patch.

     {color:red}-1 core tests{color}.  The patch failed these unit tests:
                       org.apache.hadoop.hbase.client.TestHCM

Test results: https://builds.apache.org/job/PreCommit-HBASE-Build/9034//testReport/
Console output: https://builds.apache.org/job/PreCommit-HBASE-Build/9034//console

This message is automatically generated.
              </div></li><li><div>
                From https://builds.apache.org/job/HBase-TRUNK/5023/testReport/org.apache.hadoop.hbase.client/TestHCM/ , TestHCM#testConnectionNotAllowsInterrupt took ~ 6 minutes.

The test failure was likely unrelated.
              </div></li><li><div>
                Re-attaching patch v6.
              </div></li><li><div>
                {color:red}-1 overall{color}.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12635421/7847_v6.patch
  against trunk revision .
  ATTACHMENT ID: 12635421

    {color:green}+1 @author{color}.  The patch does not contain any @author tags.

    {color:green}+1 tests included{color}.  The patch appears to include 5 new or modified tests.

    {color:green}+1 hadoop1.0{color}.  The patch compiles against the hadoop 1.0 profile.

    {color:green}+1 hadoop1.1{color}.  The patch compiles against the hadoop 1.1 profile.

    {color:green}+1 javadoc{color}.  The javadoc tool did not generate any warning messages.

    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.

    {color:green}+1 findbugs{color}.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.

    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.

    {color:green}+1 lineLengths{color}.  The patch does not introduce lines longer than 100

  {color:green}+1 site{color}.  The mvn site goal succeeds with this patch.

     {color:red}-1 core tests{color}.  The patch failed these unit tests:
     

Test results: https://builds.apache.org/job/PreCommit-HBASE-Build/9039//testReport/
Findbugs warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/9039//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html
Findbugs warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/9039//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html
Findbugs warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/9039//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html
Findbugs warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/9039//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html
Findbugs warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/9039//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html
Findbugs warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/9039//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html
Findbugs warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/9039//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html
Findbugs warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/9039//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html
Findbugs warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/9039//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html
Console output: https://builds.apache.org/job/PreCommit-HBASE-Build/9039//console

This message is automatically generated.
              </div></li><li><div>
                +1 on patch v6
              </div></li><li><div><div><b>body:</b> {color:red}-1 overall{color}.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12635627/7847_v6.patch
  against trunk revision .
  ATTACHMENT ID: 12635627

    {color:green}+1 @author{color}.  The patch does not contain any @author tags.

    {color:green}+1 tests included{color}.  The patch appears to include 5 new or modified tests.

    {color:green}+1 hadoop1.0{color}.  The patch compiles against the hadoop 1.0 profile.

    {color:green}+1 hadoop1.1{color}.  The patch compiles against the hadoop 1.1 profile.

    {color:green}+1 javadoc{color}.  The javadoc tool did not generate any warning messages.

    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.

    {color:green}+1 findbugs{color}.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.

    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.

    {color:green}+1 lineLengths{color}.  The patch does not introduce lines longer than 100

  {color:green}+1 site{color}.  The mvn site goal succeeds with this patch.

     {color:red}-1 core tests{color}.  The patch failed these unit tests:
                       org.apache.hadoop.hbase.coprocessor.TestRegionObserverInterface

     {color:red}-1 core zombie tests{color}.  There are 1 zombie test(s): 	at org.apache.hadoop.hbase.mapreduce.TestTableMapReduceBase.testMultiRegionTable(TestTableMapReduceBase.java:96)

Test results: https://builds.apache.org/job/PreCommit-HBASE-Build/9047//testReport/
Findbugs warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/9047//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html
Findbugs warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/9047//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html
Findbugs warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/9047//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html
Findbugs warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/9047//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html
Findbugs warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/9047//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html
Findbugs warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/9047//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html
Findbugs warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/9047//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html
Findbugs warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/9047//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html
Findbugs warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/9047//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html
Console output: https://builds.apache.org/job/PreCommit-HBASE-Build/9047//console

This message is automatically generated.
                </div><div><b>label:</b> code-design
                </div></div></li><li><div>
                Thanks again [~yuzhihong@gmail.com] for +1. 

Hi [~stack], kindly look at the patch when you get sometime. Thanks!
              </div></li><li><div>
                Retry
              </div></li><li><div>
                This comment seems out of place but we can fix on commit:

+      // Delete the leaves first and eventually get rid of the root

Should this be true by default?

+    deleteChildrenRecursivelyMultiOrSequential(zkw, false, node);

i.e. retry with the sequential if the multi fails?

What is happening here?

+    List&lt;Op&gt; opList = new ArrayList&lt;Op&gt;();
+    List&lt;ZKUtilOp&gt; ops = new ArrayList&lt;ZKUtil.ZKUtilOp&gt;(opList.size());

The opList has zero size.  Is that what you want?

Call out BFS for what it is.

Nice tests.
              </div></li><li><div>
                Thanks again [~saint.ack@gmail.com] for the comments. I'll prepare a new patch addressing these. 
{quote} 
Should this be true by default?
+ deleteChildrenRecursivelyMultiOrSequential(zkw, false, node);
i.e. retry with the sequential if the multi fails?
{quote}
Yeah, if true will retry sequentially on multi failures. I'll make this as true.

For the below one, could you help to understand more.
bq. Call out BFS for what it is.

BFS I meant Breadth-First-Search traversal strategy. Whether you are asking to avoid abbreviation/short forms ?
              </div></li><li><div><div><b>body:</b> {color:red}-1 overall{color}.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12636523/7847_v6.patch
  against trunk revision .
  ATTACHMENT ID: 12636523

    {color:green}+1 @author{color}.  The patch does not contain any @author tags.

    {color:green}+1 tests included{color}.  The patch appears to include 5 new or modified tests.

    {color:green}+1 javadoc{color}.  The javadoc tool did not generate any warning messages.

    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.

    {color:green}+1 findbugs{color}.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.

    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.

    {color:green}+1 lineLengths{color}.  The patch does not introduce lines longer than 100

  {color:green}+1 site{color}.  The mvn site goal succeeds with this patch.

     {color:red}-1 core tests{color}.  The patch failed these unit tests:
                       org.apache.hadoop.hbase.procedure.TestZKProcedure
                  org.apache.hadoop.hbase.coprocessor.TestRegionObserverInterface

Test results: https://builds.apache.org/job/PreCommit-HBASE-Build/9086//testReport/
Findbugs warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/9086//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html
Findbugs warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/9086//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html
Findbugs warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/9086//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-client.html
Findbugs warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/9086//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-common.html
Findbugs warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/9086//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-protocol.html
Findbugs warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/9086//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-server.html
Findbugs warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/9086//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-examples.html
Findbugs warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/9086//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-thrift.html
Findbugs warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/9086//artifact/trunk/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html
Console output: https://builds.apache.org/job/PreCommit-HBASE-Build/9086//console

This message is automatically generated.
                </div><div><b>label:</b> code-design
                </div></div></li><li><div><div><b>body:</b> bq. BFS I meant Breadth-First-Search traversal strategy

Nit.  Yeah, if I was to guess, I'd probably have guessed the above.  I shouldn't have to decode acronyms.
                </div><div><b>label:</b> code-design
                </div></div></li><li><div>
                Any chance of your trying multi ON against a zk ensemble that does not support multi (after changing it so the default is that we fall back to one-by-one if multi is not availble) to make sure all still works and you don't get an exception you were not expecting?  Thanks.
              </div></li><li><div>
                Thanks [~stack] for pointing me to these cases. I'll tests and will update you tomorrow.
              </div></li><li><div>
                Hi [~stack]

{quote}
Any chance of your trying multi ON against a zk ensemble that does not support multi (after changing it so the default is that we fall back to one-by-one if multi is not availble) to make sure all still works and you don't get an exception you were not expecting? 
{quote}
Say, if user tries to perform multi api 'hbase.zookeeper.useMulti=true' with older ZK version 3.3, looks like zkclient will get hanged. Kindly look at the issue ZOOKEEPER-1495 for more information, this issue is resolved only on 3.4 branch.

Secondly, the new proposed api internally uses the existing ZKUtil#multiOrSequential() api to perform the delete operation. Here in ZKUtil#multiOrSequential() I could see, it would retry with sequential execution if any of the following exception occured. Other than these it will throw out the exception to the user.
- NODEEXISTS
- NONODE
- BADVERSION
- NOAUTH

In javadoc, I had mentioned the following exceptions:
{code}
   * @throws KeeperException.NotEmptyException if node has children while deleting
   * @throws KeeperException if unexpected ZooKeeper exception
{code}

Ah, I missed one case, IllegalArgumentException - if an invalid path is specified. I'll include this too in javadoc section.

Does this sound good to you ?
              </div></li><li><div>
                [~rakeshr] So, we should require a zk 3.4.x for hbase?  It was released November 2011 so this seems like an OK requirement to add to our list.  The hang will happen on any zk before 3.4.6?  When was multi added?  Do you know?

Regardless of the zk version, is it true that you have to set the 'multi' configuration property for us to even do a multi op in the first place?  Is this true?   If so, and the zk version does not support multi ops and hbase hangs, then we have a sort of defense and we can commit this.

Is it possible to ask zk what version it is?  It was not possible in the past but may be fixed in 3.4.6?  If so, that'd be cool.  Then we could ask and then do multi going forward (Though if I remember, the issue here is that only one member of the ensemble, the one we are talking too, could report itself 3.4.6 but all others could be at an earlier version).

Thanks [~rakeshr]


              </div></li><li><div>
                Thanks [~stack] for the reply. Kindly see my thoughts :

bq. we should require a zk 3.4.x for hbase?
Yes

bq. The hang will happen on any zk before 3.4.6? When was multi added? Do you know?
Multi feature is added by ZOOKEEPER-965 and 3.4.0 onwards. So for multi support, atleast we need 3.4.x version and we can recommended to set multi if zk version is 3.4.x or higher version. AFAIK, client would get hang if exec multi before 3.4.x. Presently this is a limitation in zk older versions.

bq. Is it possible to ask zk what version it is? It was not possible in the past but may be fixed in 3.4.6? If so, that'd be cool. Then we could ask and then do multi going forward (Though if I remember, the issue here is that only one member of the ensemble, the one we are talking too, could report itself 3.4.6 but all others could be at an earlier version).
We have a JIRA ZOOKEEPER-1381 to discuss the feasibility. But like you mentioned, if the connected server(follower/observer) is of higher version and the Leader is with lower version, I also feel it may not work out as per the client's expectations.

Also, I could see there are similar discussion happened earlier in HBASE-6058. Please follow link : [ZK multi api usage HBASE|https://issues.apache.org/jira/i#browse/HBASE-6058?page=com.atlassian.jira.plugin.system.issuetabpanels%3Acomment-tabpanel&amp;issueKey=HBASE-6058&amp;serverRenderedViewIssue=true&amp;focusedCommentId=13398282]

\\
If you agree with all these, I would be happy to prepare a new patch by fixing your comments (except the execution of multi irerspective of zk versions)

Thanks,
Rakesh R
              </div></li><li><div>
                ping [~stack]
              </div></li><li><div>
                Attached latest patch. Could you please have a look and let me know any comments. Thank you!
              </div></li><li><div><div><b>body:</b> {color:red}-1 overall{color}.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12694084/HBASE-7847_v7.patch
  against master branch at commit 5fbf80ee5ecb288804d2d2d042199dcd834ae848.
  ATTACHMENT ID: 12694084

    {color:green}+1 @author{color}.  The patch does not contain any @author tags.

    {color:green}+1 tests included{color}.  The patch appears to include 6 new or modified tests.

    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.

    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.

    {color:green}+1 javadoc{color}.  The javadoc tool did not generate any warning messages.

    {color:green}+1 checkstyle{color}.  The applied patch does not increase the total number of checkstyle errors

    {color:green}+1 findbugs{color}.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.

    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.

    {color:green}+1 lineLengths{color}.  The patch does not introduce lines longer than 100

  {color:green}+1 site{color}.  The mvn site goal succeeds with this patch.

     {color:red}-1 core tests{color}.  The patch failed these unit tests:
     

Test results: https://builds.apache.org/job/PreCommit-HBASE-Build/12566//testReport/
Findbugs warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/12566//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html
Findbugs warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/12566//artifact/patchprocess/newPatchFindbugsWarningshbase-rest.html
Findbugs warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/12566//artifact/patchprocess/newPatchFindbugsWarningshbase-client.html
Findbugs warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/12566//artifact/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html
Findbugs warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/12566//artifact/patchprocess/newPatchFindbugsWarningshbase-annotations.html
Findbugs warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/12566//artifact/patchprocess/newPatchFindbugsWarningshbase-examples.html
Findbugs warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/12566//artifact/patchprocess/newPatchFindbugsWarningshbase-thrift.html
Findbugs warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/12566//artifact/patchprocess/newPatchFindbugsWarningshbase-server.html
Findbugs warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/12566//artifact/patchprocess/newPatchFindbugsWarningshbase-protocol.html
Findbugs warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/12566//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html
Findbugs warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/12566//artifact/patchprocess/newPatchFindbugsWarningshbase-common.html
Checkstyle Errors: https://builds.apache.org/job/PreCommit-HBASE-Build/12566//artifact/patchprocess/checkstyle-aggregate.html

  Console output: https://builds.apache.org/job/PreCommit-HBASE-Build/12566//console

This message is automatically generated.
                </div><div><b>label:</b> code-design
                </div></div></li><li><div><div><b>body:</b> I've made the following changes compare to the previous one:

# Added {{IllegalArgumentException - if an invalid path is specified}} in javadoc
# Changed this call {{deleteChildrenRecursivelyMultiOrSequential(zkw, false, node);}} to {{deleteChildrenRecursivelyMultiOrSequential(zkw, true, node);}}
# Removed unused variable {{List&lt;Op&gt; opList = new ArrayList&lt;Op&gt;();}}

Thanks,
Rakesh
                </div><div><b>label:</b> code-design
                </div></div></li><li><div>
                Ah. I failed to find the reason for the failure. Appreciate any help. Thanks!

{code}
[INFO] HBase - Common .................................... FAILURE [01:04 min]

[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 01:24 min
[INFO] Finished at: 2015-01-23T05:50:30+00:00
[INFO] Final Memory: 59M/1439M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-surefire-plugin:2.18:test (default-test) on project hbase-common: ExecutionException: java.lang.RuntimeException: The forked VM terminated without properly saying goodbye. VM crash or System.exit called?
[ERROR] Command was /bin/sh -c cd /home/jenkins/jenkins-slave/workspace/PreCommit-HBASE-Build@2/hbase-common &amp;&amp; /home/jenkins/jenkins-slave/tools/hudson.model.JDK/jdk-1.7u51/jre/bin/java -enableassertions -XX:MaxDirectMemorySize=1G -Xmx1900m -XX:MaxPermSize=256m -Djava.security.egd=file:/dev/./urandom -Djava.net.preferIPv4Stack=true -Djava.awt.headless=true -jar /home/jenkins/jenkins-slave/workspace/PreCommit-HBASE-Build@2/hbase-common/target/surefire/surefirebooter5072257009364750704.jar /home/jenkins/jenkins-slave/workspace/PreCommit-HBASE-Build@2/hbase-common/target/surefire/surefire5287510543774723648tmp /home/jenkins/jenkins-slave/workspace/PreCommit-HBASE-Build@2/hbase-common/target/surefire/surefire_94684592704014843371tmp
[ERROR] -&gt; [Help 1]
{code}
              </div></li><li><div>
                Re-attaching the same patch to trigger the build.
              </div></li><li><div><div><b>body:</b> {code}
+    // atleast one element should exists
{code}
Typo: exists -&gt; exist
{code}
+  @Test
+  public void testdeleteChildrenRecursivelyMulti() throws Exception {
{code}
Please add timeout for the new tests.
                </div><div><b>label:</b> documentation
                </div></div></li><li><div><div><b>body:</b> {color:green}+1 overall{color}.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12694175/HBASE-7847_v7.1.patch
  against master branch at commit e13b9938a16327d029afc3aaea8f42d531ddb306.
  ATTACHMENT ID: 12694175

    {color:green}+1 @author{color}.  The patch does not contain any @author tags.

    {color:green}+1 tests included{color}.  The patch appears to include 6 new or modified tests.

    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.

    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.

    {color:green}+1 javadoc{color}.  The javadoc tool did not generate any warning messages.

    {color:green}+1 checkstyle{color}.  The applied patch does not increase the total number of checkstyle errors

    {color:green}+1 findbugs{color}.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.

    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.

    {color:green}+1 lineLengths{color}.  The patch does not introduce lines longer than 100

  {color:green}+1 site{color}.  The mvn site goal succeeds with this patch.

    {color:green}+1 core tests{color}.  The patch passed unit tests in .

Test results: https://builds.apache.org/job/PreCommit-HBASE-Build/12569//testReport/
Findbugs warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/12569//artifact/patchprocess/newPatchFindbugsWarningshbase-rest.html
Findbugs warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/12569//artifact/patchprocess/newPatchFindbugsWarningshbase-common.html
Findbugs warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/12569//artifact/patchprocess/newPatchFindbugsWarningshbase-client.html
Findbugs warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/12569//artifact/patchprocess/newPatchFindbugsWarningshbase-annotations.html
Findbugs warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/12569//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html
Findbugs warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/12569//artifact/patchprocess/newPatchFindbugsWarningshbase-server.html
Findbugs warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/12569//artifact/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html
Findbugs warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/12569//artifact/patchprocess/newPatchFindbugsWarningshbase-protocol.html
Findbugs warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/12569//artifact/patchprocess/newPatchFindbugsWarningshbase-thrift.html
Findbugs warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/12569//artifact/patchprocess/newPatchFindbugsWarningshbase-examples.html
Findbugs warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/12569//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html
Checkstyle Errors: https://builds.apache.org/job/PreCommit-HBASE-Build/12569//artifact/patchprocess/checkstyle-aggregate.html

  Console output: https://builds.apache.org/job/PreCommit-HBASE-Build/12569//console

This message is automatically generated.
                </div><div><b>label:</b> code-design
                </div></div></li><li><div><div><b>body:</b> +1 after nits are addressed.
                </div><div><b>label:</b> code-design
                </div></div></li><li><div>
                Thanks [~tedyu]. Attached new patch addressing the comments. Also, I've added {{@Test (timeout=60000)}} for the other existing testcases in that test class.
              </div></li><li><div><div><b>body:</b> {color:green}+1 overall{color}.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12694204/HBASE-7847_v9.patch
  against master branch at commit 74adb11f4c504abbb6a52de72b53883ad7b952b4.
  ATTACHMENT ID: 12694204

    {color:green}+1 @author{color}.  The patch does not contain any @author tags.

    {color:green}+1 tests included{color}.  The patch appears to include 6 new or modified tests.

    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.

    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.

    {color:green}+1 javadoc{color}.  The javadoc tool did not generate any warning messages.

    {color:green}+1 checkstyle{color}.  The applied patch does not increase the total number of checkstyle errors

    {color:green}+1 findbugs{color}.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.

    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.

    {color:green}+1 lineLengths{color}.  The patch does not introduce lines longer than 100

  {color:green}+1 site{color}.  The mvn site goal succeeds with this patch.

    {color:green}+1 core tests{color}.  The patch passed unit tests in .

Test results: https://builds.apache.org/job/PreCommit-HBASE-Build/12571//testReport/
Findbugs warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/12571//artifact/patchprocess/newPatchFindbugsWarningshbase-annotations.html
Findbugs warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/12571//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop2-compat.html
Findbugs warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/12571//artifact/patchprocess/newPatchFindbugsWarningshbase-common.html
Findbugs warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/12571//artifact/patchprocess/newPatchFindbugsWarningshbase-hadoop-compat.html
Findbugs warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/12571//artifact/patchprocess/newPatchFindbugsWarningshbase-protocol.html
Findbugs warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/12571//artifact/patchprocess/newPatchFindbugsWarningshbase-prefix-tree.html
Findbugs warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/12571//artifact/patchprocess/newPatchFindbugsWarningshbase-client.html
Findbugs warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/12571//artifact/patchprocess/newPatchFindbugsWarningshbase-examples.html
Findbugs warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/12571//artifact/patchprocess/newPatchFindbugsWarningshbase-thrift.html
Findbugs warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/12571//artifact/patchprocess/newPatchFindbugsWarningshbase-rest.html
Findbugs warnings: https://builds.apache.org/job/PreCommit-HBASE-Build/12571//artifact/patchprocess/newPatchFindbugsWarningshbase-server.html
Checkstyle Errors: https://builds.apache.org/job/PreCommit-HBASE-Build/12571//artifact/patchprocess/checkstyle-aggregate.html

  Console output: https://builds.apache.org/job/PreCommit-HBASE-Build/12571//console

This message is automatically generated.
                </div><div><b>label:</b> code-design
                </div></div></li><li><div>
                +1

Looks nice.
              </div></li><li><div>
                Thanks for the patch, Rakesh.
              </div></li><li><div>
                Thanks a lot [~saint.ack@gmail.com], [~tedyu], [~rajeshbabu] for the great support!
              </div></li><li><div>
                FAILURE: Integrated in HBase-TRUNK #6060 (See [https://builds.apache.org/job/HBase-TRUNK/6060/])
HBASE-7847 Use zookeeper multi to clear znodes (Rakesh R) (tedyu: rev aaeafca9206341761094b1bcd27580f3978356bb)
* hbase-client/src/main/java/org/apache/hadoop/hbase/zookeeper/ZKUtil.java
* hbase-server/src/test/java/org/apache/hadoop/hbase/zookeeper/TestZKMulti.java

              </div></li><li><div>
                FAILURE: Integrated in HBase-1.1 #114 (See [https://builds.apache.org/job/HBase-1.1/114/])
HBASE-7847 Use zookeeper multi to clear znodes (Rakesh R) (tedyu: rev 80dfdc52444db9bc0808d34e459117ae96bc965f)
* hbase-client/src/main/java/org/apache/hadoop/hbase/zookeeper/ZKUtil.java
* hbase-server/src/test/java/org/apache/hadoop/hbase/zookeeper/TestZKMulti.java

              </div></li><li><div>
                Closing issues released in 1.1.0.
              </div></li><li><div>
                Picked back to 0.98 and branch-1.0
              </div></li><li><div>
                FAILURE: Integrated in HBase-1.0 #984 (See [https://builds.apache.org/job/HBase-1.0/984/])
HBASE-7847 Use zookeeper multi to clear znodes (Rakesh R) (apurtell: rev ffc50404242f2b548d7492b26ae7f556362369df)
* hbase-server/src/test/java/org/apache/hadoop/hbase/zookeeper/TestZKMulti.java
* hbase-client/src/main/java/org/apache/hadoop/hbase/zookeeper/ZKUtil.java

              </div></li><li><div>
                FAILURE: Integrated in HBase-0.98 #1046 (See [https://builds.apache.org/job/HBase-0.98/1046/])
HBASE-7847 Use zookeeper multi to clear znodes (Rakesh R) (apurtell: rev 897e11da76aa42587e8b1857f24d2880f5d0064a)
* hbase-server/src/test/java/org/apache/hadoop/hbase/zookeeper/TestZKMulti.java
* hbase-client/src/main/java/org/apache/hadoop/hbase/zookeeper/ZKUtil.java

              </div></li><li><div>
                FAILURE: Integrated in HBase-0.98-on-Hadoop-1.1 #999 (See [https://builds.apache.org/job/HBase-0.98-on-Hadoop-1.1/999/])
HBASE-7847 Use zookeeper multi to clear znodes (Rakesh R) (apurtell: rev 897e11da76aa42587e8b1857f24d2880f5d0064a)
* hbase-server/src/test/java/org/apache/hadoop/hbase/zookeeper/TestZKMulti.java
* hbase-client/src/main/java/org/apache/hadoop/hbase/zookeeper/ZKUtil.java

              </div></li></ol></div></div></html>