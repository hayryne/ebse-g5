<!DOCTYPE html><html><div class="item-title">
        Item 338
      </div> <div class="item-details"><div><b>git_comments:</b> <ol><li><div>
                
 * Licensed to the Apache Software Foundation (ASF) under one or more
 * contributor license agreements.  See the NOTICE file distributed with
 * this work for additional information regarding copyright ownership.
 * The ASF licenses this file to You under the Apache License, Version 2.0
 * (the "License"); you may not use this file except in compliance with
 * the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 
              </div></li><li><div>
                 eslint-disable no-undef 
              </div></li><li><div>
                 add test plugins
              </div></li><li><div>
                 check if plugin list is empty
              </div></li></ol></div><div><b>git_commits:</b> <ol><li><div><div><b>summary:</b> fix: cannot delete multiple plugins without page refreshing (#1317)
                </div><div><b>message:</b> fix: cannot delete multiple plugins without page refreshing (#1317)


                </div></div></li></ol></div><div><b>github_issues:</b> <ol><li><div><div><b>title:</b> GlobalPlugin List: cannot delete multiple plugins without page refreshing
                </div><div><b>body:</b> # Bug report

## Describe the bug

GlobalPlugin List: cannot delete multiple plugins without page refreshing.

## How to Reproduce

1. Go to GlobalPlugin (Plugin);
2. Click on Delete, then that plugin is deleted;
3. Click on Delete on another Plugin, then the deleted plugin (step2) is shown.

## System information

- Version: master branch

## Additional context

This is because, it will put the previous plugin's data when deleting another plugin.
                </div></div></li><li><div><div><b>title:</b> GlobalPlugin List: cannot delete multiple plugins without page refreshing
                </div><div><b>body:</b> # Bug report

## Describe the bug

GlobalPlugin List: cannot delete multiple plugins without page refreshing.

## How to Reproduce

1. Go to GlobalPlugin (Plugin);
2. Click on Delete, then that plugin is deleted;
3. Click on Delete on another Plugin, then the deleted plugin (step2) is shown.

## System information

- Version: master branch

## Additional context

This is because, it will put the previous plugin's data when deleting another plugin.
                </div></div></li></ol></div><div><b>github_issues_comments:</b> <ol></ol></div><div><b>github_pulls:</b> <ol><li><div><div><b>title:</b> fix: cannot delete multiple plugins without page refreshing
                </div><div><b>body:</b> Please answer these questions before submitting a pull request

- Why submit this pull request?
- [x] Bugfix
- [ ] New feature provided
- [ ] Improve performance
- [ ] Backport patches

resolve #1316 
Update the plugin data after deleting a plugin

                </div></div></li><li><div><div><b>title:</b> fix: cannot delete multiple plugins without page refreshing
                </div><div><b>body:</b> Please answer these questions before submitting a pull request

- Why submit this pull request?
- [x] Bugfix
- [ ] New feature provided
- [ ] Improve performance
- [ ] Backport patches

resolve #1316 
Update the plugin data after deleting a plugin

                </div></div></li><li><div><div><b>title:</b> fix: cannot delete multiple plugins without page refreshing
                </div><div><b>body:</b> Please answer these questions before submitting a pull request

- Why submit this pull request?
- [x] Bugfix
- [ ] New feature provided
- [ ] Improve performance
- [ ] Backport patches

resolve #1316 
Update the plugin data after deleting a plugin

                </div></div></li><li><div><div><b>title:</b> fix: cannot delete multiple plugins without page refreshing
                </div><div><b>body:</b> Please answer these questions before submitting a pull request

- Why submit this pull request?
- [x] Bugfix
- [ ] New feature provided
- [ ] Improve performance
- [ ] Backport patches

resolve #1316 
Update the plugin data after deleting a plugin

                </div></div></li><li><div><div><b>title:</b> fix: cannot delete multiple plugins without page refreshing
                </div><div><b>body:</b> Please answer these questions before submitting a pull request

- Why submit this pull request?
- [x] Bugfix
- [ ] New feature provided
- [ ] Improve performance
- [ ] Backport patches

resolve #1316 
Update the plugin data after deleting a plugin

                </div></div></li><li><div><div><b>title:</b> fix: cannot delete multiple plugins without page refreshing
                </div><div><b>body:</b> Please answer these questions before submitting a pull request

- Why submit this pull request?
- [x] Bugfix
- [ ] New feature provided
- [ ] Improve performance
- [ ] Backport patches

resolve #1316 
Update the plugin data after deleting a plugin

                </div></div></li><li><div><div><b>title:</b> fix: cannot delete multiple plugins without page refreshing
                </div><div><b>body:</b> Please answer these questions before submitting a pull request

- Why submit this pull request?
- [x] Bugfix
- [ ] New feature provided
- [ ] Improve performance
- [ ] Backport patches

resolve #1316 
Update the plugin data after deleting a plugin

                </div></div></li><li><div><div><b>title:</b> fix: cannot delete multiple plugins without page refreshing
                </div><div><b>body:</b> Please answer these questions before submitting a pull request

- Why submit this pull request?
- [x] Bugfix
- [ ] New feature provided
- [ ] Improve performance
- [ ] Backport patches

resolve #1316 
Update the plugin data after deleting a plugin

                </div></div></li><li><div><div><b>title:</b> fix: cannot delete multiple plugins without page refreshing
                </div><div><b>body:</b> Please answer these questions before submitting a pull request

- Why submit this pull request?
- [x] Bugfix
- [ ] New feature provided
- [ ] Improve performance
- [ ] Backport patches

resolve #1316 
Update the plugin data after deleting a plugin

                </div></div></li><li><div><div><b>title:</b> fix: cannot delete multiple plugins without page refreshing
                </div><div><b>body:</b> Please answer these questions before submitting a pull request

- Why submit this pull request?
- [x] Bugfix
- [ ] New feature provided
- [ ] Improve performance
- [ ] Backport patches

resolve #1316 
Update the plugin data after deleting a plugin

                </div></div></li><li><div><div><b>title:</b> fix: cannot delete multiple plugins without page refreshing
                </div><div><b>body:</b> Please answer these questions before submitting a pull request

- Why submit this pull request?
- [x] Bugfix
- [ ] New feature provided
- [ ] Improve performance
- [ ] Backport patches

resolve #1316 
Update the plugin data after deleting a plugin

                </div></div></li><li><div><div><b>title:</b> fix: cannot delete multiple plugins without page refreshing
                </div><div><b>body:</b> Please answer these questions before submitting a pull request

- Why submit this pull request?
- [x] Bugfix
- [ ] New feature provided
- [ ] Improve performance
- [ ] Backport patches

resolve #1316 
Update the plugin data after deleting a plugin

                </div></div></li><li><div><div><b>title:</b> fix: cannot delete multiple plugins without page refreshing
                </div><div><b>body:</b> Please answer these questions before submitting a pull request

- Why submit this pull request?
- [x] Bugfix
- [ ] New feature provided
- [ ] Improve performance
- [ ] Backport patches

resolve #1316 
Update the plugin data after deleting a plugin

                </div></div></li><li><div><div><b>title:</b> fix: cannot delete multiple plugins without page refreshing
                </div><div><b>body:</b> Please answer these questions before submitting a pull request

- Why submit this pull request?
- [x] Bugfix
- [ ] New feature provided
- [ ] Improve performance
- [ ] Backport patches

resolve #1316 
Update the plugin data after deleting a plugin

                </div><div><b>label:</b> code-design
                </div></div></li><li><div><div><b>title:</b> fix: cannot delete multiple plugins without page refreshing
                </div><div><b>body:</b> Please answer these questions before submitting a pull request

- Why submit this pull request?
- [x] Bugfix
- [ ] New feature provided
- [ ] Improve performance
- [ ] Backport patches

resolve #1316 
Update the plugin data after deleting a plugin

                </div><div><b>label:</b> code-design
                </div></div></li><li><div><div><b>title:</b> fix: cannot delete multiple plugins without page refreshing
                </div><div><b>body:</b> Please answer these questions before submitting a pull request

- Why submit this pull request?
- [x] Bugfix
- [ ] New feature provided
- [ ] Improve performance
- [ ] Backport patches

resolve #1316 
Update the plugin data after deleting a plugin

                </div></div></li><li><div><div><b>title:</b> fix: cannot delete multiple plugins without page refreshing
                </div><div><b>body:</b> Please answer these questions before submitting a pull request

- Why submit this pull request?
- [x] Bugfix
- [ ] New feature provided
- [ ] Improve performance
- [ ] Backport patches

resolve #1316 
Update the plugin data after deleting a plugin

                </div></div></li><li><div><div><b>title:</b> fix: cannot delete multiple plugins without page refreshing
                </div><div><b>body:</b> Please answer these questions before submitting a pull request

- Why submit this pull request?
- [x] Bugfix
- [ ] New feature provided
- [ ] Improve performance
- [ ] Backport patches

resolve #1316 
Update the plugin data after deleting a plugin

                </div></div></li><li><div><div><b>title:</b> fix: cannot delete multiple plugins without page refreshing
                </div><div><b>body:</b> Please answer these questions before submitting a pull request

- Why submit this pull request?
- [x] Bugfix
- [ ] New feature provided
- [ ] Improve performance
- [ ] Backport patches

resolve #1316 
Update the plugin data after deleting a plugin

                </div></div></li><li><div><div><b>title:</b> fix: cannot delete multiple plugins without page refreshing
                </div><div><b>body:</b> Please answer these questions before submitting a pull request

- Why submit this pull request?
- [x] Bugfix
- [ ] New feature provided
- [ ] Improve performance
- [ ] Backport patches

resolve #1316 
Update the plugin data after deleting a plugin

                </div></div></li><li><div><div><b>title:</b> fix: cannot delete multiple plugins without page refreshing
                </div><div><b>body:</b> Please answer these questions before submitting a pull request

- Why submit this pull request?
- [x] Bugfix
- [ ] New feature provided
- [ ] Improve performance
- [ ] Backport patches

resolve #1316 
Update the plugin data after deleting a plugin

                </div></div></li><li><div><div><b>title:</b> fix: cannot delete multiple plugins without page refreshing
                </div><div><b>body:</b> Please answer these questions before submitting a pull request

- Why submit this pull request?
- [x] Bugfix
- [ ] New feature provided
- [ ] Improve performance
- [ ] Backport patches

resolve #1316 
Update the plugin data after deleting a plugin

                </div></div></li><li><div><div><b>title:</b> fix: cannot delete multiple plugins without page refreshing
                </div><div><b>body:</b> Please answer these questions before submitting a pull request

- Why submit this pull request?
- [x] Bugfix
- [ ] New feature provided
- [ ] Improve performance
- [ ] Backport patches

resolve #1316 
Update the plugin data after deleting a plugin

                </div></div></li><li><div><div><b>title:</b> fix: cannot delete multiple plugins without page refreshing
                </div><div><b>body:</b> Please answer these questions before submitting a pull request

- Why submit this pull request?
- [x] Bugfix
- [ ] New feature provided
- [ ] Improve performance
- [ ] Backport patches

resolve #1316 
Update the plugin data after deleting a plugin

                </div><div><b>label:</b> code-design
                </div></div></li><li><div><div><b>title:</b> fix: cannot delete multiple plugins without page refreshing
                </div><div><b>body:</b> Please answer these questions before submitting a pull request

- Why submit this pull request?
- [x] Bugfix
- [ ] New feature provided
- [ ] Improve performance
- [ ] Backport patches

resolve #1316 
Update the plugin data after deleting a plugin

                </div></div></li></ol></div><div><b>github_pulls_comments:</b> <ol><li><div>
                # [Codecov](https://codecov.io/gh/apache/apisix-dashboard/pull/1317?src=pr&amp;el=h1) Report
&gt; Merging [#1317](https://codecov.io/gh/apache/apisix-dashboard/pull/1317?src=pr&amp;el=desc) (ab5b869) into [master](https://codecov.io/gh/apache/apisix-dashboard/commit/754f5598706fe5dfe9a09bf0d51d0701406c692c?el=desc) (754f559) will **increase** coverage by `18.80%`.
&gt; The diff coverage is `n/a`.

[![Impacted file tree graph](https://codecov.io/gh/apache/apisix-dashboard/pull/1317/graphs/tree.svg?width=650&amp;height=150&amp;src=pr&amp;token=Q1HERXN96P)](https://codecov.io/gh/apache/apisix-dashboard/pull/1317?src=pr&amp;el=tree)

```diff
@@             Coverage Diff             @@
##           master    #1317       +/-   ##
===========================================
+ Coverage   44.19%   63.00%   +18.80%     
===========================================
  Files          31       41       +10     
  Lines        1948     2360      +412     
===========================================
+ Hits          861     1487      +626     
+ Misses        975      697      -278     
- Partials      112      176       +64     
```


| [Impacted Files](https://codecov.io/gh/apache/apisix-dashboard/pull/1317?src=pr&amp;el=tree) | Coverage Δ | |
|---|---|---|
| [api/internal/log/zap.go](https://codecov.io/gh/apache/apisix-dashboard/pull/1317/diff?src=pr&amp;el=tree#diff-YXBpL2ludGVybmFsL2xvZy96YXAuZ28=) | `60.86% &lt;0.00%&gt; (ø)` | |
| [api/cmd/managerapi.go](https://codecov.io/gh/apache/apisix-dashboard/pull/1317/diff?src=pr&amp;el=tree#diff-YXBpL2NtZC9tYW5hZ2VyYXBpLmdv) | `77.08% &lt;0.00%&gt; (ø)` | |
| [...l/handler/route\_online\_debug/route\_online\_debug.go](https://codecov.io/gh/apache/apisix-dashboard/pull/1317/diff?src=pr&amp;el=tree#diff-YXBpL2ludGVybmFsL2hhbmRsZXIvcm91dGVfb25saW5lX2RlYnVnL3JvdXRlX29ubGluZV9kZWJ1Zy5nbw==) | `73.80% &lt;0.00%&gt; (ø)` | |
| [api/internal/core/storage/etcd.go](https://codecov.io/gh/apache/apisix-dashboard/pull/1317/diff?src=pr&amp;el=tree#diff-YXBpL2ludGVybmFsL2NvcmUvc3RvcmFnZS9ldGNkLmdv) | `51.51% &lt;0.00%&gt; (ø)` | |
| [api/internal/route.go](https://codecov.io/gh/apache/apisix-dashboard/pull/1317/diff?src=pr&amp;el=tree#diff-YXBpL2ludGVybmFsL3JvdXRlLmdv) | `83.87% &lt;0.00%&gt; (ø)` | |
| [api/internal/handler/healthz/healthz.go](https://codecov.io/gh/apache/apisix-dashboard/pull/1317/diff?src=pr&amp;el=tree#diff-YXBpL2ludGVybmFsL2hhbmRsZXIvaGVhbHRoei9oZWFsdGh6Lmdv) | `66.66% &lt;0.00%&gt; (ø)` | |
| [api/cmd/manager/main.go](https://codecov.io/gh/apache/apisix-dashboard/pull/1317/diff?src=pr&amp;el=tree#diff-YXBpL2NtZC9tYW5hZ2VyL21haW4uZ28=) | `0.00% &lt;0.00%&gt; (ø)` | |
| [api/internal/core/storage/storage\_mock.go](https://codecov.io/gh/apache/apisix-dashboard/pull/1317/diff?src=pr&amp;el=tree#diff-YXBpL2ludGVybmFsL2NvcmUvc3RvcmFnZS9zdG9yYWdlX21vY2suZ28=) | `0.00% &lt;0.00%&gt; (ø)` | |
| [api/internal/conf/conf.go](https://codecov.io/gh/apache/apisix-dashboard/pull/1317/diff?src=pr&amp;el=tree#diff-YXBpL2ludGVybmFsL2NvbmYvY29uZi5nbw==) | `67.85% &lt;0.00%&gt; (ø)` | |
| [api/internal/log/log.go](https://codecov.io/gh/apache/apisix-dashboard/pull/1317/diff?src=pr&amp;el=tree#diff-YXBpL2ludGVybmFsL2xvZy9sb2cuZ28=) | `50.00% &lt;0.00%&gt; (ø)` | |
| ... and [23 more](https://codecov.io/gh/apache/apisix-dashboard/pull/1317/diff?src=pr&amp;el=tree-more) | |

------

[Continue to review full report at Codecov](https://codecov.io/gh/apache/apisix-dashboard/pull/1317?src=pr&amp;el=continue).
&gt; **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta)
&gt; `Δ = absolute &lt;relative&gt; (impact)`, `ø = not affected`, `? = missing data`
&gt; Powered by [Codecov](https://codecov.io/gh/apache/apisix-dashboard/pull/1317?src=pr&amp;el=footer). Last update [754f559...7cc3666](https://codecov.io/gh/apache/apisix-dashboard/pull/1317?src=pr&amp;el=lastupdated). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments).

              </div></li><li><div>
                @guoqqqi CI failed
              </div></li><li><div>
                @guoqqqi CI failed
              </div></li><li><div>
                Hi，I will fix it at https://github.com/apache/apisix-dashboard/pull/1372
              </div></li></ol></div><div><b>github_pulls_reviews:</b> <ol><li><div>
                testcase, please.
              </div></li><li><div>
                The test case needs to make sure it could delete multiple plugins successfully.
              </div></li><li><div>
                The file name should be like `a-b-c.json`
              </div></li><li><div>
                and why not use data from another schema data file?
              </div></li><li><div>
                ```suggestion
  it('should create plugins', () =&gt; {
```
              </div></li><li><div>
                How about making this function global?
              </div></li><li><div>
                what does `addPlugins`  mean?  Did you mean `testPlugins`?
              </div></li><li><div>
                https://github.com/apache/apisix-dashboard/pull/1317/files#diff-5b8ddd39c2c1c0c56ef78ba6284324b57b0660d1d0eb5569cf59acf760fecd3bR38
              </div></li><li><div><div><b>body:</b> This function would better receive a parameter `cases`
                </div><div><b>label:</b> code-design
                </div></div></li><li><div><div><b>body:</b> `cases` is an array (variable), and should replace `this.cases`.
                </div><div><b>label:</b> code-design
                </div></div></li><li><div>
                ping  
              </div></li><li><div>
                not a good name, `configurePlugins`
              </div></li><li><div>
                why not use https://github.com/guoqqqi/apisix-dashboard/blob/fix-globalPlugin/web/cypress/fixtures/plugin-dataset.json and choose part of cases?
              </div></li><li><div>
                No need those tips
              </div></li><li><div>
                because this is a public function
              </div></li><li><div>
                If your codes are clear, no need to add this tip.
              </div></li><li><div>
                extra spaces
              </div></li><li><div>
                get what?
              </div></li><li><div><div><b>body:</b> ![image](https://user-images.githubusercontent.com/72343596/105630517-b4fb6380-5e84-11eb-94d7-0a8537e670a8.png)
We can use timeout to replace those useless wait
                </div><div><b>label:</b> code-design
                </div></div></li></ol></div><div><b>jira_issues:</b> <ol></ol></div><div><b>jira_issues_comments:</b> <ol></ol></div></div></html>