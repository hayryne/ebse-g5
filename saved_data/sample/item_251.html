<!DOCTYPE html><html><div class="item-title">
        Item 251
      </div> <div class="item-details"><div><b>git_comments:</b> <ol><li><div>
                
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * "License"); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 
              </div></li><li><div>
                *
   * Generate the old string for the old test cases.
   * @return the expression as a string using the leaf ids
   
              </div></li><li><div>
                *
   * Get the id of the leaf.
   * The ids are assigned sequentially from 0.
   * @return the offset in the list returned from {@link SearchArgument#getLeaves}
   
              </div></li><li><div>
                *
   * Get the expression tree without the normalization to conjunctive normal
   * form. It will still have the negations pushed to the leaves, but it
   * won't have the potentially exponential expansion.
   
              </div></li><li><div>
                *
   * Generate the backwards compatible string for test cases
   * @return the sarg using the old string
   
              </div></li></ol></div><div><b>git_commits:</b> <ol><li><div><div><b>summary:</b> HIVE-24458: Add a method to provide a non-normalized ExpressionTree (#1726) (Owen O'Malley reviewed by Panos Garefalakis, Zoltan Haindrich)
                </div><div><b>message:</b> HIVE-24458: Add a method to provide a non-normalized ExpressionTree (#1726) (Owen O'Malley reviewed by Panos Garefalakis, Zoltan Haindrich)


                </div></div></li></ol></div><div><b>github_issues:</b> <ol></ol></div><div><b>github_issues_comments:</b> <ol></ol></div><div><b>github_pulls:</b> <ol><li><div><div><b>title:</b> HIVE-24458: Add a method to provide a non-normalized ExpressionTree
                </div><div><b>body:</b> This pull request provides a method to get a non-normalized copy of the SArg expression. This can be useful for applications where the smaller non-normalized expression is useful.

I've changed the SArg ExpressionTree leaves to keep a pointer to the PredicateLeafImpl rather than just the id. That makes a lot of things easier, including dealing with keeping the normalized and non-normalized versions in sync with the leaves.

It also changes the format of the toString to be easier to read, but to make the old tests easier to port I've provided a toOldString method that generates the old string.
                </div></div></li><li><div><div><b>title:</b> HIVE-24458: Add a method to provide a non-normalized ExpressionTree
                </div><div><b>body:</b> This pull request provides a method to get a non-normalized copy of the SArg expression. This can be useful for applications where the smaller non-normalized expression is useful.

I've changed the SArg ExpressionTree leaves to keep a pointer to the PredicateLeafImpl rather than just the id. That makes a lot of things easier, including dealing with keeping the normalized and non-normalized versions in sync with the leaves.

It also changes the format of the toString to be easier to read, but to make the old tests easier to port I've provided a toOldString method that generates the old string.
                </div><div><b>label:</b> code-design
                </div></div></li><li><div><div><b>title:</b> HIVE-24458: Add a method to provide a non-normalized ExpressionTree
                </div><div><b>body:</b> This pull request provides a method to get a non-normalized copy of the SArg expression. This can be useful for applications where the smaller non-normalized expression is useful.

I've changed the SArg ExpressionTree leaves to keep a pointer to the PredicateLeafImpl rather than just the id. That makes a lot of things easier, including dealing with keeping the normalized and non-normalized versions in sync with the leaves.

It also changes the format of the toString to be easier to read, but to make the old tests easier to port I've provided a toOldString method that generates the old string.
                </div></div></li><li><div><div><b>title:</b> HIVE-24458: Add a method to provide a non-normalized ExpressionTree
                </div><div><b>body:</b> This pull request provides a method to get a non-normalized copy of the SArg expression. This can be useful for applications where the smaller non-normalized expression is useful.

I've changed the SArg ExpressionTree leaves to keep a pointer to the PredicateLeafImpl rather than just the id. That makes a lot of things easier, including dealing with keeping the normalized and non-normalized versions in sync with the leaves.

It also changes the format of the toString to be easier to read, but to make the old tests easier to port I've provided a toOldString method that generates the old string.
                </div></div></li><li><div><div><b>title:</b> HIVE-24458: Add a method to provide a non-normalized ExpressionTree
                </div><div><b>body:</b> This pull request provides a method to get a non-normalized copy of the SArg expression. This can be useful for applications where the smaller non-normalized expression is useful.

I've changed the SArg ExpressionTree leaves to keep a pointer to the PredicateLeafImpl rather than just the id. That makes a lot of things easier, including dealing with keeping the normalized and non-normalized versions in sync with the leaves.

It also changes the format of the toString to be easier to read, but to make the old tests easier to port I've provided a toOldString method that generates the old string.
                </div><div><b>label:</b> code-design
                </div></div></li><li><div><div><b>title:</b> HIVE-24458: Add a method to provide a non-normalized ExpressionTree
                </div><div><b>body:</b> This pull request provides a method to get a non-normalized copy of the SArg expression. This can be useful for applications where the smaller non-normalized expression is useful.

I've changed the SArg ExpressionTree leaves to keep a pointer to the PredicateLeafImpl rather than just the id. That makes a lot of things easier, including dealing with keeping the normalized and non-normalized versions in sync with the leaves.

It also changes the format of the toString to be easier to read, but to make the old tests easier to port I've provided a toOldString method that generates the old string.
                </div></div></li><li><div><div><b>title:</b> HIVE-24458: Add a method to provide a non-normalized ExpressionTree
                </div><div><b>body:</b> This pull request provides a method to get a non-normalized copy of the SArg expression. This can be useful for applications where the smaller non-normalized expression is useful.

I've changed the SArg ExpressionTree leaves to keep a pointer to the PredicateLeafImpl rather than just the id. That makes a lot of things easier, including dealing with keeping the normalized and non-normalized versions in sync with the leaves.

It also changes the format of the toString to be easier to read, but to make the old tests easier to port I've provided a toOldString method that generates the old string.
                </div><div><b>label:</b> documentation
                </div></div></li><li><div><div><b>title:</b> HIVE-24458: Add a method to provide a non-normalized ExpressionTree
                </div><div><b>body:</b> This pull request provides a method to get a non-normalized copy of the SArg expression. This can be useful for applications where the smaller non-normalized expression is useful.

I've changed the SArg ExpressionTree leaves to keep a pointer to the PredicateLeafImpl rather than just the id. That makes a lot of things easier, including dealing with keeping the normalized and non-normalized versions in sync with the leaves.

It also changes the format of the toString to be easier to read, but to make the old tests easier to port I've provided a toOldString method that generates the old string.
                </div></div></li><li><div><div><b>title:</b> HIVE-24458: Add a method to provide a non-normalized ExpressionTree
                </div><div><b>body:</b> This pull request provides a method to get a non-normalized copy of the SArg expression. This can be useful for applications where the smaller non-normalized expression is useful.

I've changed the SArg ExpressionTree leaves to keep a pointer to the PredicateLeafImpl rather than just the id. That makes a lot of things easier, including dealing with keeping the normalized and non-normalized versions in sync with the leaves.

It also changes the format of the toString to be easier to read, but to make the old tests easier to port I've provided a toOldString method that generates the old string.
                </div></div></li><li><div><div><b>title:</b> HIVE-24458: Add a method to provide a non-normalized ExpressionTree
                </div><div><b>body:</b> This pull request provides a method to get a non-normalized copy of the SArg expression. This can be useful for applications where the smaller non-normalized expression is useful.

I've changed the SArg ExpressionTree leaves to keep a pointer to the PredicateLeafImpl rather than just the id. That makes a lot of things easier, including dealing with keeping the normalized and non-normalized versions in sync with the leaves.

It also changes the format of the toString to be easier to read, but to make the old tests easier to port I've provided a toOldString method that generates the old string.
                </div><div><b>label:</b> code-design
                </div></div></li><li><div><div><b>title:</b> HIVE-24458: Add a method to provide a non-normalized ExpressionTree
                </div><div><b>body:</b> This pull request provides a method to get a non-normalized copy of the SArg expression. This can be useful for applications where the smaller non-normalized expression is useful.

I've changed the SArg ExpressionTree leaves to keep a pointer to the PredicateLeafImpl rather than just the id. That makes a lot of things easier, including dealing with keeping the normalized and non-normalized versions in sync with the leaves.

It also changes the format of the toString to be easier to read, but to make the old tests easier to port I've provided a toOldString method that generates the old string.
                </div></div></li><li><div><div><b>title:</b> HIVE-24458: Add a method to provide a non-normalized ExpressionTree
                </div><div><b>body:</b> This pull request provides a method to get a non-normalized copy of the SArg expression. This can be useful for applications where the smaller non-normalized expression is useful.

I've changed the SArg ExpressionTree leaves to keep a pointer to the PredicateLeafImpl rather than just the id. That makes a lot of things easier, including dealing with keeping the normalized and non-normalized versions in sync with the leaves.

It also changes the format of the toString to be easier to read, but to make the old tests easier to port I've provided a toOldString method that generates the old string.
                </div></div></li><li><div><div><b>title:</b> HIVE-24458: Add a method to provide a non-normalized ExpressionTree
                </div><div><b>body:</b> This pull request provides a method to get a non-normalized copy of the SArg expression. This can be useful for applications where the smaller non-normalized expression is useful.

I've changed the SArg ExpressionTree leaves to keep a pointer to the PredicateLeafImpl rather than just the id. That makes a lot of things easier, including dealing with keeping the normalized and non-normalized versions in sync with the leaves.

It also changes the format of the toString to be easier to read, but to make the old tests easier to port I've provided a toOldString method that generates the old string.
                </div></div></li><li><div><div><b>title:</b> HIVE-24458: Add a method to provide a non-normalized ExpressionTree
                </div><div><b>body:</b> This pull request provides a method to get a non-normalized copy of the SArg expression. This can be useful for applications where the smaller non-normalized expression is useful.

I've changed the SArg ExpressionTree leaves to keep a pointer to the PredicateLeafImpl rather than just the id. That makes a lot of things easier, including dealing with keeping the normalized and non-normalized versions in sync with the leaves.

It also changes the format of the toString to be easier to read, but to make the old tests easier to port I've provided a toOldString method that generates the old string.
                </div></div></li><li><div><div><b>title:</b> HIVE-24458: Add a method to provide a non-normalized ExpressionTree
                </div><div><b>body:</b> This pull request provides a method to get a non-normalized copy of the SArg expression. This can be useful for applications where the smaller non-normalized expression is useful.

I've changed the SArg ExpressionTree leaves to keep a pointer to the PredicateLeafImpl rather than just the id. That makes a lot of things easier, including dealing with keeping the normalized and non-normalized versions in sync with the leaves.

It also changes the format of the toString to be easier to read, but to make the old tests easier to port I've provided a toOldString method that generates the old string.
                </div><div><b>label:</b> code-design
                </div></div></li><li><div><div><b>title:</b> HIVE-24458: Add a method to provide a non-normalized ExpressionTree
                </div><div><b>body:</b> This pull request provides a method to get a non-normalized copy of the SArg expression. This can be useful for applications where the smaller non-normalized expression is useful.

I've changed the SArg ExpressionTree leaves to keep a pointer to the PredicateLeafImpl rather than just the id. That makes a lot of things easier, including dealing with keeping the normalized and non-normalized versions in sync with the leaves.

It also changes the format of the toString to be easier to read, but to make the old tests easier to port I've provided a toOldString method that generates the old string.
                </div></div></li></ol></div><div><b>github_pulls_comments:</b> <ol><li><div>
                @pgaref I think we are ok with two trees, because we were already keeping the larger tree in memory. Adding the compact one should be ok.
              </div></li></ol></div><div><b>github_pulls_reviews:</b> <ol><li><div>
                unfinished sentece

              </div></li><li><div>
                I find `unexpanded` a little strange - a different keyword might fit this thing better (what do you think about compact or  original).

              </div></li><li><div><div><b>body:</b> Unused variable
                </div><div><b>label:</b> code-design
                </div></div></li><li><div>
                This could be changed to PredicateLeaf -- see below
              </div></li><li><div><div><b>body:</b> Nit: maybe we should also explicitly mention in **getExpression** doc that it normalizes the expression
                </div><div><b>label:</b> documentation
                </div></div></li><li><div>
                maybe rename vars to compact and normalized ExpressionTree to avoid confusion?
              </div></li><li><div>
                Apache License?
              </div></li><li><div><div><b>body:</b> I believe **Id** setter and getter could be moved to the **PredicateLeaf** interface.
It would be cleaner and as a result **addLeaf** would need less modifications.
                </div><div><b>label:</b> code-design
                </div></div></li><li><div>
                This can now become PredicateLeaf
              </div></li><li><div>
                Argument may change to PredicateLeaf?
              </div></li><li><div>
                same
              </div></li><li><div>
                same on all alterations below..
              </div></li><li><div><div><b>body:</b> I made getId more visible, but left setId as private. setId only makes sense in the context of the builder.
                </div><div><b>label:</b> code-design
                </div></div></li></ol></div><div><b>jira_issues:</b> <ol><li><div><div><b>summary:</b> Allow access to SArgs without converting to disjunctive normal form
                </div><div><b>description:</b> For some use cases, it is useful to have access to the SArg expression in a non-normalized form. Currently, the SArg only provides the fully normalized expression.
                </div></div></li><li><div><div><b>summary:</b> Allow access to SArgs without converting to disjunctive normal form
                </div><div><b>description:</b> For some use cases, it is useful to have access to the SArg expression in a non-normalized form. Currently, the SArg only provides the fully normalized expression.
                </div></div></li><li><div><div><b>summary:</b> Allow access to SArgs without converting to disjunctive normal form
                </div><div><b>description:</b> For some use cases, it is useful to have access to the SArg expression in a non-normalized form. Currently, the SArg only provides the fully normalized expression.
                </div></div></li></ol></div><div><b>jira_issues_comments:</b> <ol><li><div>
                merged into master. Thank you Owen for extending this!
              </div></li></ol></div></div></html>