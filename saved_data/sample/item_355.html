<!DOCTYPE html><html><div class="item-title">
        Item 355
      </div> <div class="item-details"><div><b>git_comments:</b> <ol><li><div>
                
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
  
              </div></li><li><div>
                
 * Licensed to the Apache Software Foundation (ASF) under one or more
 * contributor license agreements.  See the NOTICE file distributed with
 * this work for additional information regarding copyright ownership.
 * The ASF licenses this file to You under the Apache License, Version 2.0
 * (the "License"); you may not use this file except in compliance with
 * the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 
              </div></li><li><div><div><b>comment:</b>  FIXME: Workarond for concret implementation for slf4j, is there any better solution for all slf4j implementations in one class ? 2017/8/1
                </div><div><b>label:</b> code-design
                </div></div></li></ol></div><div><b>git_commits:</b> <ol><li><div><div><b>summary:</b> Author: lindzh &lt;linsony0@163.com&gt;
                </div><div><b>message:</b> Author: lindzh &lt;linsony0@163.com&gt;
Author: 鲁般 &lt;dezhi.ldz@alibaba-inc.com&gt;

Closes #120 from lindzh/fix_client_logger.

                </div></div></li></ol></div><div><b>github_issues:</b> <ol></ol></div><div><b>github_issues_comments:</b> <ol></ol></div><div><b>github_pulls:</b> <ol><li><div><div><b>title:</b> [ROCKETMQ-224] add rocketmq client log4j2 logging support
                </div><div><b>body:</b> When using RocketMQ client,we can only using logback or log4j for logging. If we using log4j2,there is no client log.

                </div></div></li></ol></div><div><b>github_pulls_comments:</b> <ol><li><div>
                
[![Coverage Status](https://:/builds/11981619/badge)](https://:/builds/11981619)

Coverage decreased (-0.1%) to 38.464% when pulling **4b4666a5b3279d66bbc1406ec9537b3383c0cdcc on lindzh:fix_client_logger** into **0c5e53db6f4d0ed9f25747379a8b679e2da5392d on apache:master**.

              </div></li><li><div>
                
[![Coverage Status](https://:/builds/11981619/badge)](https://:/builds/11981619)

Coverage decreased (-0.1%) to 38.464% when pulling **4b4666a5b3279d66bbc1406ec9537b3383c0cdcc on lindzh:fix_client_logger** into **0c5e53db6f4d0ed9f25747379a8b679e2da5392d on apache:master**.

              </div></li><li><div>
                
[![Coverage Status](https://:/builds/11981660/badge)](https://:/builds/11981660)

Coverage increased (+0.7%) to 39.271% when pulling **4b4666a5b3279d66bbc1406ec9537b3383c0cdcc on lindzh:fix_client_logger** into **0c5e53db6f4d0ed9f25747379a8b679e2da5392d on apache:master**.

              </div></li><li><div>
                
[![Coverage Status](https://:/builds/11981660/badge)](https://:/builds/11981660)

Coverage increased (+0.7%) to 39.271% when pulling **4b4666a5b3279d66bbc1406ec9537b3383c0cdcc on lindzh:fix_client_logger** into **0c5e53db6f4d0ed9f25747379a8b679e2da5392d on apache:master**.

              </div></li><li><div>
                
[![Coverage Status](https://:/builds/11981660/badge)](https://:/builds/11981660)

Coverage increased (+0.7%) to 39.271% when pulling **4b4666a5b3279d66bbc1406ec9537b3383c0cdcc on lindzh:fix_client_logger** into **0c5e53db6f4d0ed9f25747379a8b679e2da5392d on apache:master**.

              </div></li><li><div>
                
[![Coverage Status](https://coveralls.io/builds/12201519/badge)](https://coveralls.io/builds/12201519)

Coverage increased (+0.6%) to 39.189% when pulling **6ab4ad4553b70bfc39f7cacaf178ba9f01fd69f4 on lindzh:fix_client_logger** into **0c5e53db6f4d0ed9f25747379a8b679e2da5392d on apache:master**.

              </div></li><li><div>
                
[![Coverage Status](https://coveralls.io/builds/12201519/badge)](https://coveralls.io/builds/12201519)

Coverage increased (+0.6%) to 39.189% when pulling **6ab4ad4553b70bfc39f7cacaf178ba9f01fd69f4 on lindzh:fix_client_logger** into **0c5e53db6f4d0ed9f25747379a8b679e2da5392d on apache:master**.

              </div></li><li><div>
                
[![Coverage Status](https://coveralls.io/builds/12201519/badge)](https://coveralls.io/builds/12201519)

Coverage increased (+0.6%) to 39.189% when pulling **6ab4ad4553b70bfc39f7cacaf178ba9f01fd69f4 on lindzh:fix_client_logger** into **0c5e53db6f4d0ed9f25747379a8b679e2da5392d on apache:master**.

              </div></li><li><div>
                
[![Coverage Status](https://coveralls.io/builds/12590707/badge)](https://coveralls.io/builds/12590707)

Coverage increased (+0.6%) to 39.21% when pulling **04e5a1e030c82e4c9175ed544a8d059eecbd6a72 on lindzh:fix_client_logger** into **0c5e53db6f4d0ed9f25747379a8b679e2da5392d on apache:master**.

              </div></li><li><div>
                
[![Coverage Status](https://coveralls.io/builds/12590707/badge)](https://coveralls.io/builds/12590707)

Coverage increased (+0.6%) to 39.21% when pulling **04e5a1e030c82e4c9175ed544a8d059eecbd6a72 on lindzh:fix_client_logger** into **0c5e53db6f4d0ed9f25747379a8b679e2da5392d on apache:master**.

              </div></li><li><div>
                
[![Coverage Status](https://coveralls.io/builds/12590707/badge)](https://coveralls.io/builds/12590707)

Coverage increased (+0.6%) to 39.21% when pulling **04e5a1e030c82e4c9175ed544a8d059eecbd6a72 on lindzh:fix_client_logger** into **0c5e53db6f4d0ed9f25747379a8b679e2da5392d on apache:master**.

              </div></li><li><div>
                Now, LGTM. this pr also fix the rocketmq's logger appender bug when using any concrete implementation, no matter log4j, log4j2 or logback. 
              </div></li><li><div>
                
[![Coverage Status](https://coveralls.io/builds/12635815/badge)](https://coveralls.io/builds/12635815)

Coverage increased (+0.2%) to 38.771% when pulling **0ea6994712784d700aa365c2e121306b898b3355 on lindzh:fix_client_logger** into **0c5e53db6f4d0ed9f25747379a8b679e2da5392d on apache:master**.

              </div></li><li><div>
                
[![Coverage Status](https://coveralls.io/builds/12635815/badge)](https://coveralls.io/builds/12635815)

Coverage increased (+0.2%) to 38.771% when pulling **0ea6994712784d700aa365c2e121306b898b3355 on lindzh:fix_client_logger** into **0c5e53db6f4d0ed9f25747379a8b679e2da5392d on apache:master**.

              </div></li><li><div>
                
[![Coverage Status](https://coveralls.io/builds/12635815/badge)](https://coveralls.io/builds/12635815)

Coverage increased (+0.2%) to 38.771% when pulling **0ea6994712784d700aa365c2e121306b898b3355 on lindzh:fix_client_logger** into **0c5e53db6f4d0ed9f25747379a8b679e2da5392d on apache:master**.

              </div></li></ol></div><div><b>github_pulls_reviews:</b> <ol><li><div>
                Could we  put log4j2 test in rocketmq example module ?
              </div></li><li><div><div><b>body:</b> As log4j is widely used in example,add this test in example will make it confused to choose log moudle.
                </div><div><b>label:</b> code-design
                </div></div></li><li><div><div><b>body:</b> Did you use the right code style? http://rocketmq.apache.org/docs/code-guidelines/
                </div><div><b>label:</b> code-design
                </div></div></li><li><div>
                Any assert or thrown exception?
              </div></li><li><div>
                Assert has been added.
              </div></li><li><div>
                We'd better use org.junit.Assert.
              </div></li><li><div>
                Add logClass and its getter for test purpose only?
              </div></li><li><div>
                Fixed it with reflect
              </div></li><li><div>
                we'd better remember this task and fix it later.
              </div></li><li><div>
                why modify the init method?
              </div></li></ol></div><div><b>jira_issues:</b> <ol><li><div><div><b>summary:</b> Client log4j2 logging
                </div><div><b>description:</b> When using RocketMQ client,we can only using logback or log4j for logging. If we using log4j2,there is no client log.
                </div></div></li></ol></div><div><b>jira_issues_comments:</b> <ol><li><div>
                GitHub user lindzh opened a pull request:

    https://github.com/apache/incubator-rocketmq/pull/120

    [ROCKETMQ-224] add rocketmq client log4j2 logging support

    When using RocketMQ client,we can only using logback or log4j for logging. If we using log4j2,there is no client log.


You can merge this pull request into a Git repository by running:

    $ git pull https://github.com/lindzh/incubator-rocketmq fix_client_logger

Alternatively you can review and apply these changes as the patch at:

    https://github.com/apache/incubator-rocketmq/pull/120.patch

To close this pull request, make a commit to your master/trunk branch
with (at least) the following in the commit message:

    This closes #120
    
----
commit 4b4666a5b3279d66bbc1406ec9537b3383c0cdcc
Author: 鲁般 &lt;dezhi.ldz@alibaba-inc.com&gt;
Date:   2017-06-15T07:31:52Z

    add rocketmq client log4j2 logging support

----

              </div></li><li><div>
                Github pull request :https://github.com/apache/incubator-rocketmq/pull/120
              </div></li><li><div>
                Github user lindzh closed the pull request at:

    https://github.com/apache/incubator-rocketmq/pull/120

              </div></li><li><div>
                GitHub user lindzh reopened a pull request:

    https://github.com/apache/incubator-rocketmq/pull/120

    [ROCKETMQ-224] add rocketmq client log4j2 logging support

    When using RocketMQ client,we can only using logback or log4j for logging. If we using log4j2,there is no client log.


You can merge this pull request into a Git repository by running:

    $ git pull https://github.com/lindzh/incubator-rocketmq fix_client_logger

Alternatively you can review and apply these changes as the patch at:

    https://github.com/apache/incubator-rocketmq/pull/120.patch

To close this pull request, make a commit to your master/trunk branch
with (at least) the following in the commit message:

    This closes #120
    
----
commit 4b4666a5b3279d66bbc1406ec9537b3383c0cdcc
Author: 鲁般 &lt;dezhi.ldz@alibaba-inc.com&gt;
Date:   2017-06-15T07:31:52Z

    add rocketmq client log4j2 logging support

----

              </div></li><li><div>
                Github user coveralls commented on the issue:

    https://github.com/apache/incubator-rocketmq/pull/120
  
    
    [![Coverage Status](https://:/builds/11981619/badge)](https://:/builds/11981619)
    
    Coverage decreased (-0.1%) to 38.464% when pulling **4b4666a5b3279d66bbc1406ec9537b3383c0cdcc on lindzh:fix_client_logger** into **0c5e53db6f4d0ed9f25747379a8b679e2da5392d on apache:master**.


              </div></li><li><div>
                Github user coveralls commented on the issue:

    https://github.com/apache/incubator-rocketmq/pull/120
  
    
    [![Coverage Status](https://:/builds/11981619/badge)](https://:/builds/11981619)
    
    Coverage decreased (-0.1%) to 38.464% when pulling **4b4666a5b3279d66bbc1406ec9537b3383c0cdcc on lindzh:fix_client_logger** into **0c5e53db6f4d0ed9f25747379a8b679e2da5392d on apache:master**.


              </div></li><li><div>
                Github user coveralls commented on the issue:

    https://github.com/apache/incubator-rocketmq/pull/120
  
    
    [![Coverage Status](https://:/builds/11981660/badge)](https://:/builds/11981660)
    
    Coverage increased (+0.7%) to 39.271% when pulling **4b4666a5b3279d66bbc1406ec9537b3383c0cdcc on lindzh:fix_client_logger** into **0c5e53db6f4d0ed9f25747379a8b679e2da5392d on apache:master**.


              </div></li><li><div>
                Github user coveralls commented on the issue:

    https://github.com/apache/incubator-rocketmq/pull/120
  
    
    [![Coverage Status](https://:/builds/11981660/badge)](https://:/builds/11981660)
    
    Coverage increased (+0.7%) to 39.271% when pulling **4b4666a5b3279d66bbc1406ec9537b3383c0cdcc on lindzh:fix_client_logger** into **0c5e53db6f4d0ed9f25747379a8b679e2da5392d on apache:master**.


              </div></li><li><div>
                Github user coveralls commented on the issue:

    https://github.com/apache/incubator-rocketmq/pull/120
  
    
    [![Coverage Status](https://:/builds/11981660/badge)](https://:/builds/11981660)
    
    Coverage increased (+0.7%) to 39.271% when pulling **4b4666a5b3279d66bbc1406ec9537b3383c0cdcc on lindzh:fix_client_logger** into **0c5e53db6f4d0ed9f25747379a8b679e2da5392d on apache:master**.


              </div></li><li><div>
                Github user vongosling commented on a diff in the pull request:

    https://github.com/apache/incubator-rocketmq/pull/120#discussion_r123714561
  
    --- Diff: pom.xml ---
    @@ -638,6 +638,16 @@
                     &lt;artifactId&gt;log4j-core&lt;/artifactId&gt;
                     &lt;version&gt;2.7&lt;/version&gt;
                 &lt;/dependency&gt;
    +            &lt;dependency&gt;
    +                &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;
    --- End diff --
    
    Why could i depend log4j2 core directly in dependency management?

              </div></li><li><div>
                Github user vongosling commented on a diff in the pull request:

    https://github.com/apache/incubator-rocketmq/pull/120#discussion_r123713735
  
    --- Diff: client/pom.xml ---
    @@ -37,13 +37,31 @@
                 &lt;groupId&gt;${project.groupId}&lt;/groupId&gt;
                 &lt;artifactId&gt;rocketmq-common&lt;/artifactId&gt;
             &lt;/dependency&gt;
    +
             &lt;dependency&gt;
                 &lt;groupId&gt;org.slf4j&lt;/groupId&gt;
                 &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;
             &lt;/dependency&gt;
    +
             &lt;dependency&gt;
                 &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;
                 &lt;artifactId&gt;commons-lang3&lt;/artifactId&gt;
             &lt;/dependency&gt;
    +
    +        &lt;dependency&gt;
    +            &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;
    +            &lt;artifactId&gt;log4j-core&lt;/artifactId&gt;
    +            &lt;scope&gt;test&lt;/scope&gt;
    +        &lt;/dependency&gt;
    +        &lt;dependency&gt;
    +            &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;
    +            &lt;artifactId&gt;log4j-api&lt;/artifactId&gt;
    +            &lt;scope&gt;test&lt;/scope&gt;
    +        &lt;/dependency&gt;
    +        &lt;dependency&gt;
    +            &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;
    +            &lt;artifactId&gt;log4j-slf4j-impl&lt;/artifactId&gt;
    --- End diff --
    
    Could we  put log4j2 test in rocketmq example module ?

              </div></li><li><div>
                Github user lindzh commented on a diff in the pull request:

    https://github.com/apache/incubator-rocketmq/pull/120#discussion_r123936939
  
    --- Diff: client/pom.xml ---
    @@ -37,13 +37,31 @@
                 &lt;groupId&gt;${project.groupId}&lt;/groupId&gt;
                 &lt;artifactId&gt;rocketmq-common&lt;/artifactId&gt;
             &lt;/dependency&gt;
    +
             &lt;dependency&gt;
                 &lt;groupId&gt;org.slf4j&lt;/groupId&gt;
                 &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;
             &lt;/dependency&gt;
    +
             &lt;dependency&gt;
                 &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;
                 &lt;artifactId&gt;commons-lang3&lt;/artifactId&gt;
             &lt;/dependency&gt;
    +
    +        &lt;dependency&gt;
    +            &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;
    +            &lt;artifactId&gt;log4j-core&lt;/artifactId&gt;
    +            &lt;scope&gt;test&lt;/scope&gt;
    +        &lt;/dependency&gt;
    +        &lt;dependency&gt;
    +            &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;
    +            &lt;artifactId&gt;log4j-api&lt;/artifactId&gt;
    +            &lt;scope&gt;test&lt;/scope&gt;
    +        &lt;/dependency&gt;
    +        &lt;dependency&gt;
    +            &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;
    +            &lt;artifactId&gt;log4j-slf4j-impl&lt;/artifactId&gt;
    --- End diff --
    
    As log4j is widely used in example,add this test in example will make it confused to choose log moudle.

              </div></li><li><div>
                Github user zhouxinyu commented on a diff in the pull request:

    https://github.com/apache/incubator-rocketmq/pull/120#discussion_r124163160
  
    --- Diff: client/src/main/java/org/apache/rocketmq/client/log/ClientLogger.java ---
    @@ -35,16 +36,19 @@
     
         private static Logger createLogger(final String loggerName) {
             String logConfigFilePath =
    -            System.getProperty("rocketmq.client.log.configFile",
    -                System.getenv("ROCKETMQ_CLIENT_LOG_CONFIGFILE"));
    +                System.getProperty("rocketmq.client.log.configFile",
    +                        System.getenv("ROCKETMQ_CLIENT_LOG_CONFIGFILE"));
    --- End diff --
    
    Did you use the right code style? http://rocketmq.apache.org/docs/code-guidelines/

              </div></li><li><div>
                Github user zhouxinyu commented on a diff in the pull request:

    https://github.com/apache/incubator-rocketmq/pull/120#discussion_r124163372
  
    --- Diff: client/src/test/java/org/apache/rocketmq/client/log/ClientLogTest.java ---
    @@ -0,0 +1,30 @@
    +/*
    + * Licensed to the Apache Software Foundation (ASF) under one or more
    + * contributor license agreements.  See the NOTICE file distributed with
    + * this work for additional information regarding copyright ownership.
    + * The ASF licenses this file to You under the Apache License, Version 2.0
    + * (the "License"); you may not use this file except in compliance with
    + * the License.  You may obtain a copy of the License at
    + *
    + *     http://www.apache.org/licenses/LICENSE-2.0
    + *
    + * Unless required by applicable law or agreed to in writing, software
    + * distributed under the License is distributed on an "AS IS" BASIS,
    + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    + * See the License for the specific language governing permissions and
    + * limitations under the License.
    + */
    +
    +package org.apache.rocketmq.client.log;
    +
    +import org.junit.Test;
    +
    +import java.util.Date;
    +
    +public class ClientLogTest {
    +
    +    @Test
    +    public void testLog4j2() {
    +        ClientLogger.getLog().info("logg4j test " + new Date());
    --- End diff --
    
    Any assert or thrown exception?

              </div></li><li><div>
                Github user lindzh commented on a diff in the pull request:

    https://github.com/apache/incubator-rocketmq/pull/120#discussion_r124972804
  
    --- Diff: client/src/test/java/org/apache/rocketmq/client/log/ClientLogTest.java ---
    @@ -0,0 +1,30 @@
    +/*
    + * Licensed to the Apache Software Foundation (ASF) under one or more
    + * contributor license agreements.  See the NOTICE file distributed with
    + * this work for additional information regarding copyright ownership.
    + * The ASF licenses this file to You under the Apache License, Version 2.0
    + * (the "License"); you may not use this file except in compliance with
    + * the License.  You may obtain a copy of the License at
    + *
    + *     http://www.apache.org/licenses/LICENSE-2.0
    + *
    + * Unless required by applicable law or agreed to in writing, software
    + * distributed under the License is distributed on an "AS IS" BASIS,
    + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    + * See the License for the specific language governing permissions and
    + * limitations under the License.
    + */
    +
    +package org.apache.rocketmq.client.log;
    +
    +import org.junit.Test;
    +
    +import java.util.Date;
    +
    +public class ClientLogTest {
    +
    +    @Test
    +    public void testLog4j2() {
    +        ClientLogger.getLog().info("logg4j test " + new Date());
    --- End diff --
    
    Assert has been added.

              </div></li><li><div>
                Github user coveralls commented on the issue:

    https://github.com/apache/incubator-rocketmq/pull/120
  
    
    [![Coverage Status](https://coveralls.io/builds/12201519/badge)](https://coveralls.io/builds/12201519)
    
    Coverage increased (+0.6%) to 39.189% when pulling **6ab4ad4553b70bfc39f7cacaf178ba9f01fd69f4 on lindzh:fix_client_logger** into **0c5e53db6f4d0ed9f25747379a8b679e2da5392d on apache:master**.


              </div></li><li><div>
                Github user coveralls commented on the issue:

    https://github.com/apache/incubator-rocketmq/pull/120
  
    
    [![Coverage Status](https://coveralls.io/builds/12201519/badge)](https://coveralls.io/builds/12201519)
    
    Coverage increased (+0.6%) to 39.189% when pulling **6ab4ad4553b70bfc39f7cacaf178ba9f01fd69f4 on lindzh:fix_client_logger** into **0c5e53db6f4d0ed9f25747379a8b679e2da5392d on apache:master**.


              </div></li><li><div>
                Github user coveralls commented on the issue:

    https://github.com/apache/incubator-rocketmq/pull/120
  
    
    [![Coverage Status](https://coveralls.io/builds/12201519/badge)](https://coveralls.io/builds/12201519)
    
    Coverage increased (+0.6%) to 39.189% when pulling **6ab4ad4553b70bfc39f7cacaf178ba9f01fd69f4 on lindzh:fix_client_logger** into **0c5e53db6f4d0ed9f25747379a8b679e2da5392d on apache:master**.


              </div></li><li><div>
                Github user coveralls commented on the issue:

    https://github.com/apache/incubator-rocketmq/pull/120
  
    
    [![Coverage Status](https://coveralls.io/builds/12590707/badge)](https://coveralls.io/builds/12590707)
    
    Coverage increased (+0.6%) to 39.21% when pulling **04e5a1e030c82e4c9175ed544a8d059eecbd6a72 on lindzh:fix_client_logger** into **0c5e53db6f4d0ed9f25747379a8b679e2da5392d on apache:master**.


              </div></li><li><div>
                Github user coveralls commented on the issue:

    https://github.com/apache/incubator-rocketmq/pull/120
  
    
    [![Coverage Status](https://coveralls.io/builds/12590707/badge)](https://coveralls.io/builds/12590707)
    
    Coverage increased (+0.6%) to 39.21% when pulling **04e5a1e030c82e4c9175ed544a8d059eecbd6a72 on lindzh:fix_client_logger** into **0c5e53db6f4d0ed9f25747379a8b679e2da5392d on apache:master**.


              </div></li><li><div>
                Github user coveralls commented on the issue:

    https://github.com/apache/incubator-rocketmq/pull/120
  
    
    [![Coverage Status](https://coveralls.io/builds/12590707/badge)](https://coveralls.io/builds/12590707)
    
    Coverage increased (+0.6%) to 39.21% when pulling **04e5a1e030c82e4c9175ed544a8d059eecbd6a72 on lindzh:fix_client_logger** into **0c5e53db6f4d0ed9f25747379a8b679e2da5392d on apache:master**.


              </div></li><li><div>
                Github user lizhanhui commented on a diff in the pull request:

    https://github.com/apache/incubator-rocketmq/pull/120#discussion_r130515214
  
    --- Diff: client/src/test/java/org/apache/rocketmq/client/log/ClientLogTest.java ---
    @@ -0,0 +1,67 @@
    +/*
    + * Licensed to the Apache Software Foundation (ASF) under one or more
    + * contributor license agreements.  See the NOTICE file distributed with
    + * this work for additional information regarding copyright ownership.
    + * The ASF licenses this file to You under the Apache License, Version 2.0
    + * (the "License"); you may not use this file except in compliance with
    + * the License.  You may obtain a copy of the License at
    + *
    + *     http://www.apache.org/licenses/LICENSE-2.0
    + *
    + * Unless required by applicable law or agreed to in writing, software
    + * distributed under the License is distributed on an "AS IS" BASIS,
    + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    + * See the License for the specific language governing permissions and
    + * limitations under the License.
    + */
    +
    +package org.apache.rocketmq.client.log;
    +
    +import junit.framework.Assert;
    --- End diff --
    
    We'd better use org.junit.Assert.

              </div></li><li><div>
                Github user lizhanhui commented on a diff in the pull request:

    https://github.com/apache/incubator-rocketmq/pull/120#discussion_r130515522
  
    --- Diff: client/src/main/java/org/apache/rocketmq/client/log/ClientLogger.java ---
    @@ -27,16 +28,19 @@
         public static final String CLIENT_LOG_ROOT = "rocketmq.client.logRoot";
         public static final String CLIENT_LOG_MAXINDEX = "rocketmq.client.logFileMaxIndex";
         public static final String CLIENT_LOG_LEVEL = "rocketmq.client.logLevel";
    +
         private static Logger log;
     
    -    static {
    -        log = createLogger(LoggerName.CLIENT_LOGGER_NAME);
    +    public static Class logClass = null;
    --- End diff --
    
    Add logClass and its getter for test purpose only?

              </div></li><li><div>
                Github user lindzh commented on a diff in the pull request:

    https://github.com/apache/incubator-rocketmq/pull/120#discussion_r130544050
  
    --- Diff: client/src/main/java/org/apache/rocketmq/client/log/ClientLogger.java ---
    @@ -27,16 +28,19 @@
         public static final String CLIENT_LOG_ROOT = "rocketmq.client.logRoot";
         public static final String CLIENT_LOG_MAXINDEX = "rocketmq.client.logFileMaxIndex";
         public static final String CLIENT_LOG_LEVEL = "rocketmq.client.logLevel";
    +
         private static Logger log;
     
    -    static {
    -        log = createLogger(LoggerName.CLIENT_LOGGER_NAME);
    +    public static Class logClass = null;
    --- End diff --
    
    Fixed it with reflect

              </div></li><li><div>
                Github user vongosling commented on a diff in the pull request:

    https://github.com/apache/incubator-rocketmq/pull/120#discussion_r130550009
  
    --- Diff: client/src/test/java/org/apache/rocketmq/client/log/ClientLogTest.java ---
    @@ -32,15 +33,19 @@
             LOG_DIR = System.getProperty(CLIENT_LOG_ROOT, "${user.home}/logs/rocketmqlogs");
         }
     
    +    // FIXME: Workarond for concret implementation for slf4j, is there any better solution for all slf4j implementations in one class ? 2017/8/1
    --- End diff --
    
    we'd better remember this task and fix it later.

              </div></li><li><div>
                Github user vongosling commented on the issue:

    https://github.com/apache/incubator-rocketmq/pull/120
  
    Now, LGTM. this pr also fix the rocketmq's logger appender bug when using any concrete implementation, no matter log4j, log4j2 or logback. 

              </div></li><li><div>
                Github user coveralls commented on the issue:

    https://github.com/apache/incubator-rocketmq/pull/120
  
    
    [![Coverage Status](https://coveralls.io/builds/12635815/badge)](https://coveralls.io/builds/12635815)
    
    Coverage increased (+0.2%) to 38.771% when pulling **0ea6994712784d700aa365c2e121306b898b3355 on lindzh:fix_client_logger** into **0c5e53db6f4d0ed9f25747379a8b679e2da5392d on apache:master**.


              </div></li><li><div>
                Github user coveralls commented on the issue:

    https://github.com/apache/incubator-rocketmq/pull/120
  
    
    [![Coverage Status](https://coveralls.io/builds/12635815/badge)](https://coveralls.io/builds/12635815)
    
    Coverage increased (+0.2%) to 38.771% when pulling **0ea6994712784d700aa365c2e121306b898b3355 on lindzh:fix_client_logger** into **0c5e53db6f4d0ed9f25747379a8b679e2da5392d on apache:master**.


              </div></li><li><div>
                Github user coveralls commented on the issue:

    https://github.com/apache/incubator-rocketmq/pull/120
  
    
    [![Coverage Status](https://coveralls.io/builds/12635815/badge)](https://coveralls.io/builds/12635815)
    
    Coverage increased (+0.2%) to 38.771% when pulling **0ea6994712784d700aa365c2e121306b898b3355 on lindzh:fix_client_logger** into **0c5e53db6f4d0ed9f25747379a8b679e2da5392d on apache:master**.


              </div></li><li><div>
                Github user vsair commented on a diff in the pull request:

    https://github.com/apache/incubator-rocketmq/pull/120#discussion_r130556323
  
    --- Diff: client/src/main/java/org/apache/rocketmq/client/log/ClientLogger.java ---
    @@ -99,7 +111,12 @@ private static Logger createLogger(final String loggerName) {
         }
     
         public static Logger getLog() {
    -        return log;
    +        if (log == null) {
    --- End diff --
    
    why not modify the init method?

              </div></li><li><div>
                Github user asfgit closed the pull request at:

    https://github.com/apache/incubator-rocketmq/pull/120

              </div></li></ol></div></div></html>