<!DOCTYPE html><html><div class="item-title">
        Item 18
      </div> <div class="item-details"><div><b>git_comments:</b> <ol></ol></div><div><b>git_commits:</b> <ol><li><div><div><b>summary:</b> HBASE-14622 Purge TestZkLess* tests from branch-1
                </div><div><b>message:</b> HBASE-14622 Purge TestZkLess* tests from branch-1

                </div></div></li></ol></div><div><b>github_issues:</b> <ol></ol></div><div><b>github_issues_comments:</b> <ol></ol></div><div><b>github_pulls:</b> <ol></ol></div><div><b>github_pulls_comments:</b> <ol></ol></div><div><b>github_pulls_reviews:</b> <ol></ol></div><div><b>jira_issues:</b> <ol><li><div><div><b>summary:</b> Purge TestZkLess* tests from branch-1
                </div><div><b>description:</b> I saw this in branch-1.2 tests just now:

 TestZKLessSplitOnCluster&gt;TestSplitTransactionOnCluster.testSplitWithRegionReplicas:1005 ï¿½ NullPointer

We are failing a test for an unsupported feature that is doing assignment for a new facility, replicas.

Let me purge all TestZKLess* tests in branch-1.
                </div></div></li></ol></div><div><b>jira_issues_comments:</b> <ol><li><div>
                Pushed to branch-1.1+
              </div></li><li><div>
                Removed four tests:

diff --git a/hbase-server/src/test/java/org/apache/hadoop/hbase/master/TestZKLessAMOnCluster.java b/hbase-server/src/test/java/org/apache/hadoop/hbase/master/TestZKLessAMOnCluster.java
diff --git a/hbase-server/src/test/java/org/apache/hadoop/hbase/namespace/TestZKLessNamespaceAuditor.java b/hbase-server/src/test/java/org/apache/hadoop/hbase/namespace/TestZKLessNamespaceAuditor.java
diff --git a/hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestZKLessMergeOnCluster.java b/hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestZKLessMergeOnCluster.java
diff --git a/hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestZKLessSplitOnCluster.java b/hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestZKLessSplitOnCluster.java

              </div></li><li><div>
                SUCCESS: Integrated in HBase-1.2-IT #214 (See [https://builds.apache.org/job/HBase-1.2-IT/214/])
HBASE-14622 Purge TestZkLess* tests from branch-1 (stack: rev 5a84e9d5e464c197ac64bf4380ebaa3b8dd6e51d)
* hbase-server/src/test/java/org/apache/hadoop/hbase/namespace/TestZKLessNamespaceAuditor.java
* hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestZKLessSplitOnCluster.java
* hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestZKLessMergeOnCluster.java
* hbase-server/src/test/java/org/apache/hadoop/hbase/master/TestZKLessAMOnCluster.java

              </div></li><li><div>
                FAILURE: Integrated in HBase-1.3 #269 (See [https://builds.apache.org/job/HBase-1.3/269/])
HBASE-14622 Purge TestZkLess* tests from branch-1 (stack: rev c8bdb917377c472875747ba7b939ff4f17ba0fa4)
* hbase-server/src/test/java/org/apache/hadoop/hbase/master/TestZKLessAMOnCluster.java
* hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestZKLessSplitOnCluster.java
* hbase-server/src/test/java/org/apache/hadoop/hbase/namespace/TestZKLessNamespaceAuditor.java
* hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestZKLessMergeOnCluster.java

              </div></li><li><div>
                SUCCESS: Integrated in HBase-1.1 #708 (See [https://builds.apache.org/job/HBase-1.1/708/])
HBASE-14622 Purge TestZkLess* tests from branch-1 (stack: rev 1205075076c0eb9c7990651607e4192053227129)
* hbase-server/src/test/java/org/apache/hadoop/hbase/master/TestZKLessAMOnCluster.java
* hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestZKLessMergeOnCluster.java
* hbase-server/src/test/java/org/apache/hadoop/hbase/namespace/TestZKLessNamespaceAuditor.java
* hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestZKLessSplitOnCluster.java

              </div></li><li><div>
                bq. We are failing a test for an unsupported feature that is doing assignment for a new facility, replicas. Let me purge all TestZKLess* tests in branch-1.

This rationale applies to 0.98 also, so let me do that there too.

              </div></li><li><div>
                [~stack], you purged this on branch-1.x except for branch-1.0. Probably should do that there too. I'm just going to go ahead and do it.
              </div></li><li><div>
                Pushed removal of these tests to branch-1.0 and 0.98, reusing Stack's commit message
              </div></li><li><div>
                Why are we calling this feature un-supported. It has a lot of nice properties. We have a blog post up about it. From what I remember the only reason we disabled it was so that things would be rolling upgradable.
              </div></li><li><div>
                FAILURE: Integrated in HBase-1.2 #259 (See [https://builds.apache.org/job/HBase-1.2/259/])
HBASE-14622 Purge TestZkLess* tests from branch-1 (stack: rev 5a84e9d5e464c197ac64bf4380ebaa3b8dd6e51d)
* hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestZKLessSplitOnCluster.java
* hbase-server/src/test/java/org/apache/hadoop/hbase/namespace/TestZKLessNamespaceAuditor.java
* hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestZKLessMergeOnCluster.java
* hbase-server/src/test/java/org/apache/hadoop/hbase/master/TestZKLessAMOnCluster.java

              </div></li><li><div>
                SUCCESS: Integrated in HBase-1.3-IT #241 (See [https://builds.apache.org/job/HBase-1.3-IT/241/])
HBASE-14622 Purge TestZkLess* tests from branch-1 (stack: rev c8bdb917377c472875747ba7b939ff4f17ba0fa4)
* hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestZKLessSplitOnCluster.java
* hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestZKLessMergeOnCluster.java
* hbase-server/src/test/java/org/apache/hadoop/hbase/master/TestZKLessAMOnCluster.java
* hbase-server/src/test/java/org/apache/hadoop/hbase/namespace/TestZKLessNamespaceAuditor.java

              </div></li><li><div>
                SUCCESS: Integrated in HBase-1.0 #1083 (See [https://builds.apache.org/job/HBase-1.0/1083/])
HBASE-14622 Purge TestZkLess* tests from branch-1 (apurtell: rev 231637fcaf00df4c5fd05308cbaa6bb71b9bc8f6)
* hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestZKLessSplitOnCluster.java
* hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestZKLessMergeOnCluster.java
* hbase-server/src/test/java/org/apache/hadoop/hbase/master/TestZKLessAMOnCluster.java

              </div></li><li><div>
                FAILURE: Integrated in HBase-0.98-on-Hadoop-1.1 #1111 (See [https://builds.apache.org/job/HBase-0.98-on-Hadoop-1.1/1111/])
HBASE-14622 Purge TestZkLess* tests from branch-1 (apurtell: rev 218fb052f11046f2224ebf87749f5867bf836e44)
* hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestZKLessSplitOnCluster.java
* hbase-server/src/test/java/org/apache/hadoop/hbase/master/TestZKLessAMOnCluster.java
* hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestZKLessMergeOnCluster.java

              </div></li><li><div><div><b>body:</b> zkless is the future.. It will be default in 2.0, or at least a version of it -- one w/ state preserved in procedure store rather than up in meta. zkless in 1.0 is not well tested and I thought no one was using it (Only case I know of someone using it, is on a branch made of 0.98)

I removed the tests here because it was an 'unsupported' feature test running on top of read replicas, a feature that is not on by default throwing an NPE. Rather than try and figure what was up in the test, and not expecting that someone would be jumping at the opportunity to fix issues in here, I just removed these zkless tests from branch-1 so they can't fail again.

I can put them back if you'd like [~eclark], just say.
                </div><div><b>label:</b> test
                </div></div></li><li><div>
                FAILURE: Integrated in HBase-0.98 #1158 (See [https://builds.apache.org/job/HBase-0.98/1158/])
HBASE-14622 Purge TestZkLess* tests from branch-1 (apurtell: rev 218fb052f11046f2224ebf87749f5867bf836e44)
* hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestZKLessSplitOnCluster.java
* hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestZKLessMergeOnCluster.java
* hbase-server/src/test/java/org/apache/hadoop/hbase/master/TestZKLessAMOnCluster.java

              </div></li><li><div>
                Bulk closing 1.1.3 issues.
              </div></li><li><div>
                SUCCESS: Integrated in Jenkins build HBase-1.3-IT #667 (See [https://builds.apache.org/job/HBase-1.3-IT/667/])
HBASE-23219 Re-enable ZKLess tests for branch-1 (Revert HBASE-14622) (apurtell: rev 99ce2fd988cfd5cf21769886e5d46d14c60eed53)
* (add) hbase-server/src/test/java/org/apache/hadoop/hbase/master/TestZKLessAMOnCluster.java
* (add) hbase-server/src/test/java/org/apache/hadoop/hbase/namespace/TestZKLessNamespaceAuditor.java

              </div></li><li><div>
                Results for branch branch-1
	[build #1125 on builds.a.o|https://builds.apache.org/job/HBase%20Nightly/job/branch-1/1125/]: (x) *{color:red}-1 overall{color}*
----
details (if available):

(/) {color:green}+1 general checks{color}
-- For more information [see general report|https://builds.apache.org/job/HBase%20Nightly/job/branch-1/1125//General_Nightly_Build_Report/]


(/) {color:green}+1 jdk7 checks{color}
-- For more information [see jdk7 report|https://builds.apache.org/job/HBase%20Nightly/job/branch-1/1125//JDK7_Nightly_Build_Report/]


(x) {color:red}-1 jdk8 hadoop2 checks{color}
-- For more information [see jdk8 (hadoop2) report|https://builds.apache.org/job/HBase%20Nightly/job/branch-1/1125//JDK8_Nightly_Build_Report_(Hadoop2)/]




(/) {color:green}+1 source release artifact{color}
-- See build output for details.

              </div></li><li><div>
                Results for branch branch-1.4
	[build #1075 on builds.a.o|https://builds.apache.org/job/HBase%20Nightly/job/branch-1.4/1075/]: (x) *{color:red}-1 overall{color}*
----
details (if available):

(/) {color:green}+1 general checks{color}
-- For more information [see general report|https://builds.apache.org/job/HBase%20Nightly/job/branch-1.4/1075//General_Nightly_Build_Report/]


(x) {color:red}-1 jdk7 checks{color}
-- For more information [see jdk7 report|https://builds.apache.org/job/HBase%20Nightly/job/branch-1.4/1075//JDK7_Nightly_Build_Report/]


(x) {color:red}-1 jdk8 hadoop2 checks{color}
-- For more information [see jdk8 (hadoop2) report|https://builds.apache.org/job/HBase%20Nightly/job/branch-1.4/1075//JDK8_Nightly_Build_Report_(Hadoop2)/]




(/) {color:green}+1 source release artifact{color}
-- See build output for details.

              </div></li><li><div>
                Results for branch branch-1.3
	[build #1026 on builds.a.o|https://builds.apache.org/job/HBase%20Nightly/job/branch-1.3/1026/]: (x) *{color:red}-1 overall{color}*
----
details (if available):

(/) {color:green}+1 general checks{color}
-- For more information [see general report|https://builds.apache.org/job/HBase%20Nightly/job/branch-1.3/1026//General_Nightly_Build_Report/]


(/) {color:green}+1 jdk7 checks{color}
-- For more information [see jdk7 report|https://builds.apache.org/job/HBase%20Nightly/job/branch-1.3/1026//JDK7_Nightly_Build_Report/]


(x) {color:red}-1 jdk8 hadoop2 checks{color}
-- For more information [see jdk8 (hadoop2) report|https://builds.apache.org/job/HBase%20Nightly/job/branch-1.3/1026//JDK8_Nightly_Build_Report_(Hadoop2)/]




(/) {color:green}+1 source release artifact{color}
-- See build output for details.

              </div></li></ol></div></div></html>