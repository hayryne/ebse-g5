<!DOCTYPE html><html><div class="item-title">
        Item 205
      </div> <div class="item-details"><div><b>git_comments:</b> <ol></ol></div><div><b>git_commits:</b> <ol><li><div><div><b>summary:</b> [C++] Update README for linting (#1515)
                </div><div><b>message:</b> [C++] Update README for linting (#1515)

* [C++] Update README for linting

There are hidden gotchas when trying to move the linting Makefile targets,
mention them.

* Mention the LLVM releases page

                </div></div></li></ol></div><div><b>github_issues:</b> <ol><li><div><div><b>title:</b> clang-format not found on Ubuntu 16.04
                </div><div><b>body:</b> I am on Ubuntu 16.04 and have clang-format installed:
```
$ which clang-format
/usr/bin/clang-format
$ which clang-format-3.8
/usr/bin/clang-format-3.8
```

Yet for some reason cmake doesn't find it:
```
clang-tidy found at /usr/bin/clang-tidy-3.8
clang-format not found
infer not found
[etc.]
```
and consequently the `lint` target fails executing. I'm probably missing something trivial here.
                </div></div></li><li><div><div><b>title:</b> clang-format not found on Ubuntu 16.04
                </div><div><b>body:</b> I am on Ubuntu 16.04 and have clang-format installed:
```
$ which clang-format
/usr/bin/clang-format
$ which clang-format-3.8
/usr/bin/clang-format-3.8
```

Yet for some reason cmake doesn't find it:
```
clang-tidy found at /usr/bin/clang-tidy-3.8
clang-format not found
infer not found
[etc.]
```
and consequently the `lint` target fails executing. I'm probably missing something trivial here.
                </div><div><b>label:</b> documentation
                </div></div></li><li><div><div><b>title:</b> clang-format not found on Ubuntu 16.04
                </div><div><b>body:</b> I am on Ubuntu 16.04 and have clang-format installed:
```
$ which clang-format
/usr/bin/clang-format
$ which clang-format-3.8
/usr/bin/clang-format-3.8
```

Yet for some reason cmake doesn't find it:
```
clang-tidy found at /usr/bin/clang-tidy-3.8
clang-format not found
infer not found
[etc.]
```
and consequently the `lint` target fails executing. I'm probably missing something trivial here.
                </div></div></li><li><div><div><b>title:</b> clang-format not found on Ubuntu 16.04
                </div><div><b>body:</b> I am on Ubuntu 16.04 and have clang-format installed:
```
$ which clang-format
/usr/bin/clang-format
$ which clang-format-3.8
/usr/bin/clang-format-3.8
```

Yet for some reason cmake doesn't find it:
```
clang-tidy found at /usr/bin/clang-tidy-3.8
clang-format not found
infer not found
[etc.]
```
and consequently the `lint` target fails executing. I'm probably missing something trivial here.
                </div></div></li><li><div><div><b>title:</b> clang-format not found on Ubuntu 16.04
                </div><div><b>body:</b> I am on Ubuntu 16.04 and have clang-format installed:
```
$ which clang-format
/usr/bin/clang-format
$ which clang-format-3.8
/usr/bin/clang-format-3.8
```

Yet for some reason cmake doesn't find it:
```
clang-tidy found at /usr/bin/clang-tidy-3.8
clang-format not found
infer not found
[etc.]
```
and consequently the `lint` target fails executing. I'm probably missing something trivial here.
                </div></div></li><li><div><div><b>title:</b> clang-format not found on Ubuntu 16.04
                </div><div><b>body:</b> I am on Ubuntu 16.04 and have clang-format installed:
```
$ which clang-format
/usr/bin/clang-format
$ which clang-format-3.8
/usr/bin/clang-format-3.8
```

Yet for some reason cmake doesn't find it:
```
clang-tidy found at /usr/bin/clang-tidy-3.8
clang-format not found
infer not found
[etc.]
```
and consequently the `lint` target fails executing. I'm probably missing something trivial here.
                </div></div></li><li><div><div><b>title:</b> clang-format not found on Ubuntu 16.04
                </div><div><b>body:</b> I am on Ubuntu 16.04 and have clang-format installed:
```
$ which clang-format
/usr/bin/clang-format
$ which clang-format-3.8
/usr/bin/clang-format-3.8
```

Yet for some reason cmake doesn't find it:
```
clang-tidy found at /usr/bin/clang-tidy-3.8
clang-format not found
infer not found
[etc.]
```
and consequently the `lint` target fails executing. I'm probably missing something trivial here.
                </div></div></li></ol></div><div><b>github_issues_comments:</b> <ol><li><div>
                We are pinned to clang-format-4.0 because each version formats the code slightly differently (which is very annoying). I recommend installing LLVM 4.0 from http://apt.llvm.org/
              </div></li><li><div><div><b>body:</b> This needs to be documented in the README since it's not obvious unless you look at the CMake files or have been following PRs the last few months
                </div><div><b>label:</b> documentation
                </div></div></li><li><div>
                Thanks. That works better now (`make check-format` and `make format` work ok). Yet, the `lint` target fails for some unknown reason:
```
$ LANG=C make lint
CMakeFiles/lint.dir/build.make:57: recipe for target 'CMakeFiles/lint' failed
make[3]: *** [CMakeFiles/lint] Error 1
CMakeFiles/Makefile2:251: recipe for target 'CMakeFiles/lint.dir/all' failed
make[2]: *** [CMakeFiles/lint.dir/all] Error 2
CMakeFiles/Makefile2:258: recipe for target 'CMakeFiles/lint.dir/rule' failed
make[1]: *** [CMakeFiles/lint.dir/rule] Error 2
Makefile:240: recipe for target 'lint' failed
make: *** [lint] Error 2
```

              </div></li><li><div>
                The cpplint that is shipped with the repo (https://github.com/apache/arrow/blob/master/cpp/build-support/cpplint.py) does not work on Python 3. If you `pip install cpplint` and then re-run the CMake build it will pick up the cpplint executable from your environment rather than using the script in the repo
              </div></li><li><div>
                I see, thanks!
              </div></li></ol></div><div><b>github_pulls:</b> <ol><li><div><div><b>title:</b> [C++] Update README for linting
                </div><div><b>body:</b> There are hidden gotchas when trying to run the linting Makefile targets, mention them.

See issue #1514 (I'm not sure it's required to open a JIRA entry for such a trivial issue?).
                </div></div></li></ol></div><div><b>github_pulls_comments:</b> <ol><li><div>
                Note we could also update `cpplint` to the newer py3-compatible forked version from https://github.com/cpplint/cpplint.
              </div></li></ol></div><div><b>github_pulls_reviews:</b> <ol><li><div>
                Thanks for adding this! Maybe also add http://releases.llvm.org/download.html which has binaries for Windows, macOS, and other Linuxes
              </div></li><li><div>
                Done.
              </div></li></ol></div><div><b>jira_issues:</b> <ol></ol></div><div><b>jira_issues_comments:</b> <ol></ol></div></div></html>