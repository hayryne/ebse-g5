<!DOCTYPE html><html><div class="item-title">
        Item 369
      </div> <div class="item-details"><div><b>git_comments:</b> <ol><li><div>
                *
 * Admin client for BookKeeper clusters
 
              </div></li><li><div>
                *
     * Gracefully release resources that this client uses.
     *
     * @throws InterruptedException
     *             if there is an error shutting down the clients that this
     *             class uses.
     
              </div></li><li><div>
                
 *
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * "License"); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied.  See the License for the
 * specific language governing permissions and limitations
 * under the License.
 *
 
              </div></li><li><div>
                *
     * Constructor that takes in a ZooKeeper servers connect string so we know
     * how to connect to ZooKeeper to retrieve information about the BookKeeper
     * cluster. We need this before we can do any type of admin operations on
     * the BookKeeper cluster.
     *
     * @param zkServers
     *            Comma separated list of hostname:port pairs for the ZooKeeper
     *            servers cluster.
     * @throws IOException
     *             throws this exception if there is an error instantiating the
     *             ZooKeeper client.
     * @throws InterruptedException
     *             Throws this exception if there is an error instantiating the
     *             BookKeeper client.
     * @throws KeeperException
     *             Throws this exception if there is an error instantiating the
     *             BookKeeper client.
     
              </div></li><li><div>
                *
         * Callback method for synchronous open operation
         *
         * @param rc
         *          return code
         * @param lh
         *          ledger handle
         * @param ctx
         *          optional control object
         
              </div></li><li><div>
                *
         * Delete callback implementation for synchronous delete call.
         *
         * @param rc
         *            return code
         * @param ctx
         *            optional control object
         
              </div></li><li><div>
                *
         * Create callback implementation for synchronous create call.
         *
         * @param rc
         *          return code
         * @param lh
         *          ledger handle object
         * @param ctx
         *          optional control object
         
              </div></li><li><div>
                *
         * Implementation of  callback interface for synchronous read last confirmed method.
         
              </div></li><li><div>
                *
         * Implementation of callback interface for synchronous read method.
         *
         * @param rc
         *          return code
         * @param leder
         *          ledger identifier
         * @param entry
         *          entry identifier
         * @param ctx
         *          control object
         
              </div></li><li><div>
                *
         * Close callback method
         *
         * @param rc
         * @param lh
         * @param ctx
         
              </div></li><li><div>
                *
         * Implementation of callback interface for synchronous read method.
         *
         * @param rc
         *          return code
         * @param leder
         *          ledger identifier
         * @param seq
         *          sequence of entries
         * @param ctx
         *          control object
         
              </div></li></ol></div><div><b>git_commits:</b> <ol><li><div><div><b>summary:</b> BOOKKEEPER-89: Bookkeeper API changes for initial Bookkeeper release (ivank)
                </div><div><b>message:</b> BOOKKEEPER-89: Bookkeeper API changes for initial Bookkeeper release (ivank)

git-svn-id: https://svn.apache.org/repos/asf/zookeeper/bookkeeper/trunk@1189842 13f79535-47bb-0310-9956-ffa450edef68

                </div></div></li></ol></div><div><b>github_issues:</b> <ol></ol></div><div><b>github_issues_comments:</b> <ol></ol></div><div><b>github_pulls:</b> <ol></ol></div><div><b>github_pulls_comments:</b> <ol></ol></div><div><b>github_pulls_reviews:</b> <ol></ol></div><div><b>jira_issues:</b> <ol><li><div><div><b>summary:</b> Bookkeeper API changes for initial Bookkeeper release
                </div><div><b>description:</b> Changes are as follows.

BookKeeper#createLedger, parameter is named passwd, "Key" used in LedgerHandle api
BookKeeper#getBookieClient shouldn't be public
BookKeeper#createComplete shouldn't be public
BookKeeper#openComplete shouldn't be public
BookKeeper#deleteComplete shouldn't be public
BookKeeper#halt could be changed to close(), should throw a BKException

LedgerHandle#getLedgerKey passwd is used in BookKeeper, should possibly be private
LedgerHandle#getLedgerMetadata shouldn't be public
LedgerHandle#getDigestManager shouldn't be public
LedgerHandle#getDistributionSchedule shouldn't be public
LedgerHandle#writeLedgerConfig shouldn't be public
LedgerHandle#addEntry should return void, errors should go in an Exception
LedgerHandle#readComplete should not be public
LedgerHandle#addComplete should not be public
LedgerHandle#readLastConfirmedCompelte should not be public
LedgerHandle#closeComplete should not be public

ASyncCallback#RecoverCallback shouldn't be public

                </div></div></li><li><div><div><b>summary:</b> Bookkeeper API changes for initial Bookkeeper release
                </div><div><b>description:</b> Changes are as follows.

BookKeeper#createLedger, parameter is named passwd, "Key" used in LedgerHandle api
BookKeeper#getBookieClient shouldn't be public
BookKeeper#createComplete shouldn't be public
BookKeeper#openComplete shouldn't be public
BookKeeper#deleteComplete shouldn't be public
BookKeeper#halt could be changed to close(), should throw a BKException

LedgerHandle#getLedgerKey passwd is used in BookKeeper, should possibly be private
LedgerHandle#getLedgerMetadata shouldn't be public
LedgerHandle#getDigestManager shouldn't be public
LedgerHandle#getDistributionSchedule shouldn't be public
LedgerHandle#writeLedgerConfig shouldn't be public
LedgerHandle#addEntry should return void, errors should go in an Exception
LedgerHandle#readComplete should not be public
LedgerHandle#addComplete should not be public
LedgerHandle#readLastConfirmedCompelte should not be public
LedgerHandle#closeComplete should not be public

ASyncCallback#RecoverCallback shouldn't be public

                </div></div></li><li><div><div><b>summary:</b> Bookkeeper API changes for initial Bookkeeper release
                </div><div><b>description:</b> Changes are as follows.

BookKeeper#createLedger, parameter is named passwd, "Key" used in LedgerHandle api
BookKeeper#getBookieClient shouldn't be public
BookKeeper#createComplete shouldn't be public
BookKeeper#openComplete shouldn't be public
BookKeeper#deleteComplete shouldn't be public
BookKeeper#halt could be changed to close(), should throw a BKException

LedgerHandle#getLedgerKey passwd is used in BookKeeper, should possibly be private
LedgerHandle#getLedgerMetadata shouldn't be public
LedgerHandle#getDigestManager shouldn't be public
LedgerHandle#getDistributionSchedule shouldn't be public
LedgerHandle#writeLedgerConfig shouldn't be public
LedgerHandle#addEntry should return void, errors should go in an Exception
LedgerHandle#readComplete should not be public
LedgerHandle#addComplete should not be public
LedgerHandle#readLastConfirmedCompelte should not be public
LedgerHandle#closeComplete should not be public

ASyncCallback#RecoverCallback shouldn't be public

                </div><div><b>label:</b> code-design
                </div></div></li><li><div><div><b>summary:</b> Bookkeeper API changes for initial Bookkeeper release
                </div><div><b>description:</b> Changes are as follows.

BookKeeper#createLedger, parameter is named passwd, "Key" used in LedgerHandle api
BookKeeper#getBookieClient shouldn't be public
BookKeeper#createComplete shouldn't be public
BookKeeper#openComplete shouldn't be public
BookKeeper#deleteComplete shouldn't be public
BookKeeper#halt could be changed to close(), should throw a BKException

LedgerHandle#getLedgerKey passwd is used in BookKeeper, should possibly be private
LedgerHandle#getLedgerMetadata shouldn't be public
LedgerHandle#getDigestManager shouldn't be public
LedgerHandle#getDistributionSchedule shouldn't be public
LedgerHandle#writeLedgerConfig shouldn't be public
LedgerHandle#addEntry should return void, errors should go in an Exception
LedgerHandle#readComplete should not be public
LedgerHandle#addComplete should not be public
LedgerHandle#readLastConfirmedCompelte should not be public
LedgerHandle#closeComplete should not be public

ASyncCallback#RecoverCallback shouldn't be public

                </div></div></li><li><div><div><b>summary:</b> Bookkeeper API changes for initial Bookkeeper release
                </div><div><b>description:</b> Changes are as follows.

BookKeeper#createLedger, parameter is named passwd, "Key" used in LedgerHandle api
BookKeeper#getBookieClient shouldn't be public
BookKeeper#createComplete shouldn't be public
BookKeeper#openComplete shouldn't be public
BookKeeper#deleteComplete shouldn't be public
BookKeeper#halt could be changed to close(), should throw a BKException

LedgerHandle#getLedgerKey passwd is used in BookKeeper, should possibly be private
LedgerHandle#getLedgerMetadata shouldn't be public
LedgerHandle#getDigestManager shouldn't be public
LedgerHandle#getDistributionSchedule shouldn't be public
LedgerHandle#writeLedgerConfig shouldn't be public
LedgerHandle#addEntry should return void, errors should go in an Exception
LedgerHandle#readComplete should not be public
LedgerHandle#addComplete should not be public
LedgerHandle#readLastConfirmedCompelte should not be public
LedgerHandle#closeComplete should not be public

ASyncCallback#RecoverCallback shouldn't be public

                </div></div></li><li><div><div><b>summary:</b> Bookkeeper API changes for initial Bookkeeper release
                </div><div><b>description:</b> Changes are as follows.

BookKeeper#createLedger, parameter is named passwd, "Key" used in LedgerHandle api
BookKeeper#getBookieClient shouldn't be public
BookKeeper#createComplete shouldn't be public
BookKeeper#openComplete shouldn't be public
BookKeeper#deleteComplete shouldn't be public
BookKeeper#halt could be changed to close(), should throw a BKException

LedgerHandle#getLedgerKey passwd is used in BookKeeper, should possibly be private
LedgerHandle#getLedgerMetadata shouldn't be public
LedgerHandle#getDigestManager shouldn't be public
LedgerHandle#getDistributionSchedule shouldn't be public
LedgerHandle#writeLedgerConfig shouldn't be public
LedgerHandle#addEntry should return void, errors should go in an Exception
LedgerHandle#readComplete should not be public
LedgerHandle#addComplete should not be public
LedgerHandle#readLastConfirmedCompelte should not be public
LedgerHandle#closeComplete should not be public

ASyncCallback#RecoverCallback shouldn't be public

                </div><div><b>label:</b> code-design
                </div></div></li><li><div><div><b>summary:</b> Bookkeeper API changes for initial Bookkeeper release
                </div><div><b>description:</b> Changes are as follows.

BookKeeper#createLedger, parameter is named passwd, "Key" used in LedgerHandle api
BookKeeper#getBookieClient shouldn't be public
BookKeeper#createComplete shouldn't be public
BookKeeper#openComplete shouldn't be public
BookKeeper#deleteComplete shouldn't be public
BookKeeper#halt could be changed to close(), should throw a BKException

LedgerHandle#getLedgerKey passwd is used in BookKeeper, should possibly be private
LedgerHandle#getLedgerMetadata shouldn't be public
LedgerHandle#getDigestManager shouldn't be public
LedgerHandle#getDistributionSchedule shouldn't be public
LedgerHandle#writeLedgerConfig shouldn't be public
LedgerHandle#addEntry should return void, errors should go in an Exception
LedgerHandle#readComplete should not be public
LedgerHandle#addComplete should not be public
LedgerHandle#readLastConfirmedCompelte should not be public
LedgerHandle#closeComplete should not be public

ASyncCallback#RecoverCallback shouldn't be public

                </div></div></li><li><div><div><b>summary:</b> Bookkeeper API changes for initial Bookkeeper release
                </div><div><b>description:</b> Changes are as follows.

BookKeeper#createLedger, parameter is named passwd, "Key" used in LedgerHandle api
BookKeeper#getBookieClient shouldn't be public
BookKeeper#createComplete shouldn't be public
BookKeeper#openComplete shouldn't be public
BookKeeper#deleteComplete shouldn't be public
BookKeeper#halt could be changed to close(), should throw a BKException

LedgerHandle#getLedgerKey passwd is used in BookKeeper, should possibly be private
LedgerHandle#getLedgerMetadata shouldn't be public
LedgerHandle#getDigestManager shouldn't be public
LedgerHandle#getDistributionSchedule shouldn't be public
LedgerHandle#writeLedgerConfig shouldn't be public
LedgerHandle#addEntry should return void, errors should go in an Exception
LedgerHandle#readComplete should not be public
LedgerHandle#addComplete should not be public
LedgerHandle#readLastConfirmedCompelte should not be public
LedgerHandle#closeComplete should not be public

ASyncCallback#RecoverCallback shouldn't be public

                </div></div></li><li><div><div><b>summary:</b> Bookkeeper API changes for initial Bookkeeper release
                </div><div><b>description:</b> Changes are as follows.

BookKeeper#createLedger, parameter is named passwd, "Key" used in LedgerHandle api
BookKeeper#getBookieClient shouldn't be public
BookKeeper#createComplete shouldn't be public
BookKeeper#openComplete shouldn't be public
BookKeeper#deleteComplete shouldn't be public
BookKeeper#halt could be changed to close(), should throw a BKException

LedgerHandle#getLedgerKey passwd is used in BookKeeper, should possibly be private
LedgerHandle#getLedgerMetadata shouldn't be public
LedgerHandle#getDigestManager shouldn't be public
LedgerHandle#getDistributionSchedule shouldn't be public
LedgerHandle#writeLedgerConfig shouldn't be public
LedgerHandle#addEntry should return void, errors should go in an Exception
LedgerHandle#readComplete should not be public
LedgerHandle#addComplete should not be public
LedgerHandle#readLastConfirmedCompelte should not be public
LedgerHandle#closeComplete should not be public

ASyncCallback#RecoverCallback shouldn't be public

                </div></div></li><li><div><div><b>summary:</b> Bookkeeper API changes for initial Bookkeeper release
                </div><div><b>description:</b> Changes are as follows.

BookKeeper#createLedger, parameter is named passwd, "Key" used in LedgerHandle api
BookKeeper#getBookieClient shouldn't be public
BookKeeper#createComplete shouldn't be public
BookKeeper#openComplete shouldn't be public
BookKeeper#deleteComplete shouldn't be public
BookKeeper#halt could be changed to close(), should throw a BKException

LedgerHandle#getLedgerKey passwd is used in BookKeeper, should possibly be private
LedgerHandle#getLedgerMetadata shouldn't be public
LedgerHandle#getDigestManager shouldn't be public
LedgerHandle#getDistributionSchedule shouldn't be public
LedgerHandle#writeLedgerConfig shouldn't be public
LedgerHandle#addEntry should return void, errors should go in an Exception
LedgerHandle#readComplete should not be public
LedgerHandle#addComplete should not be public
LedgerHandle#readLastConfirmedCompelte should not be public
LedgerHandle#closeComplete should not be public

ASyncCallback#RecoverCallback shouldn't be public

                </div></div></li><li><div><div><b>summary:</b> Bookkeeper API changes for initial Bookkeeper release
                </div><div><b>description:</b> Changes are as follows.

BookKeeper#createLedger, parameter is named passwd, "Key" used in LedgerHandle api
BookKeeper#getBookieClient shouldn't be public
BookKeeper#createComplete shouldn't be public
BookKeeper#openComplete shouldn't be public
BookKeeper#deleteComplete shouldn't be public
BookKeeper#halt could be changed to close(), should throw a BKException

LedgerHandle#getLedgerKey passwd is used in BookKeeper, should possibly be private
LedgerHandle#getLedgerMetadata shouldn't be public
LedgerHandle#getDigestManager shouldn't be public
LedgerHandle#getDistributionSchedule shouldn't be public
LedgerHandle#writeLedgerConfig shouldn't be public
LedgerHandle#addEntry should return void, errors should go in an Exception
LedgerHandle#readComplete should not be public
LedgerHandle#addComplete should not be public
LedgerHandle#readLastConfirmedCompelte should not be public
LedgerHandle#closeComplete should not be public

ASyncCallback#RecoverCallback shouldn't be public

                </div></div></li><li><div><div><b>summary:</b> Bookkeeper API changes for initial Bookkeeper release
                </div><div><b>description:</b> Changes are as follows.

BookKeeper#createLedger, parameter is named passwd, "Key" used in LedgerHandle api
BookKeeper#getBookieClient shouldn't be public
BookKeeper#createComplete shouldn't be public
BookKeeper#openComplete shouldn't be public
BookKeeper#deleteComplete shouldn't be public
BookKeeper#halt could be changed to close(), should throw a BKException

LedgerHandle#getLedgerKey passwd is used in BookKeeper, should possibly be private
LedgerHandle#getLedgerMetadata shouldn't be public
LedgerHandle#getDigestManager shouldn't be public
LedgerHandle#getDistributionSchedule shouldn't be public
LedgerHandle#writeLedgerConfig shouldn't be public
LedgerHandle#addEntry should return void, errors should go in an Exception
LedgerHandle#readComplete should not be public
LedgerHandle#addComplete should not be public
LedgerHandle#readLastConfirmedCompelte should not be public
LedgerHandle#closeComplete should not be public

ASyncCallback#RecoverCallback shouldn't be public

                </div></div></li><li><div><div><b>summary:</b> Bookkeeper API changes for initial Bookkeeper release
                </div><div><b>description:</b> Changes are as follows.

BookKeeper#createLedger, parameter is named passwd, "Key" used in LedgerHandle api
BookKeeper#getBookieClient shouldn't be public
BookKeeper#createComplete shouldn't be public
BookKeeper#openComplete shouldn't be public
BookKeeper#deleteComplete shouldn't be public
BookKeeper#halt could be changed to close(), should throw a BKException

LedgerHandle#getLedgerKey passwd is used in BookKeeper, should possibly be private
LedgerHandle#getLedgerMetadata shouldn't be public
LedgerHandle#getDigestManager shouldn't be public
LedgerHandle#getDistributionSchedule shouldn't be public
LedgerHandle#writeLedgerConfig shouldn't be public
LedgerHandle#addEntry should return void, errors should go in an Exception
LedgerHandle#readComplete should not be public
LedgerHandle#addComplete should not be public
LedgerHandle#readLastConfirmedCompelte should not be public
LedgerHandle#closeComplete should not be public

ASyncCallback#RecoverCallback shouldn't be public

                </div></div></li><li><div><div><b>summary:</b> Bookkeeper API changes for initial Bookkeeper release
                </div><div><b>description:</b> Changes are as follows.

BookKeeper#createLedger, parameter is named passwd, "Key" used in LedgerHandle api
BookKeeper#getBookieClient shouldn't be public
BookKeeper#createComplete shouldn't be public
BookKeeper#openComplete shouldn't be public
BookKeeper#deleteComplete shouldn't be public
BookKeeper#halt could be changed to close(), should throw a BKException

LedgerHandle#getLedgerKey passwd is used in BookKeeper, should possibly be private
LedgerHandle#getLedgerMetadata shouldn't be public
LedgerHandle#getDigestManager shouldn't be public
LedgerHandle#getDistributionSchedule shouldn't be public
LedgerHandle#writeLedgerConfig shouldn't be public
LedgerHandle#addEntry should return void, errors should go in an Exception
LedgerHandle#readComplete should not be public
LedgerHandle#addComplete should not be public
LedgerHandle#readLastConfirmedCompelte should not be public
LedgerHandle#closeComplete should not be public

ASyncCallback#RecoverCallback shouldn't be public

                </div></div></li><li><div><div><b>summary:</b> Bookkeeper API changes for initial Bookkeeper release
                </div><div><b>description:</b> Changes are as follows.

BookKeeper#createLedger, parameter is named passwd, "Key" used in LedgerHandle api
BookKeeper#getBookieClient shouldn't be public
BookKeeper#createComplete shouldn't be public
BookKeeper#openComplete shouldn't be public
BookKeeper#deleteComplete shouldn't be public
BookKeeper#halt could be changed to close(), should throw a BKException

LedgerHandle#getLedgerKey passwd is used in BookKeeper, should possibly be private
LedgerHandle#getLedgerMetadata shouldn't be public
LedgerHandle#getDigestManager shouldn't be public
LedgerHandle#getDistributionSchedule shouldn't be public
LedgerHandle#writeLedgerConfig shouldn't be public
LedgerHandle#addEntry should return void, errors should go in an Exception
LedgerHandle#readComplete should not be public
LedgerHandle#addComplete should not be public
LedgerHandle#readLastConfirmedCompelte should not be public
LedgerHandle#closeComplete should not be public

ASyncCallback#RecoverCallback shouldn't be public

                </div></div></li><li><div><div><b>summary:</b> Bookkeeper API changes for initial Bookkeeper release
                </div><div><b>description:</b> Changes are as follows.

BookKeeper#createLedger, parameter is named passwd, "Key" used in LedgerHandle api
BookKeeper#getBookieClient shouldn't be public
BookKeeper#createComplete shouldn't be public
BookKeeper#openComplete shouldn't be public
BookKeeper#deleteComplete shouldn't be public
BookKeeper#halt could be changed to close(), should throw a BKException

LedgerHandle#getLedgerKey passwd is used in BookKeeper, should possibly be private
LedgerHandle#getLedgerMetadata shouldn't be public
LedgerHandle#getDigestManager shouldn't be public
LedgerHandle#getDistributionSchedule shouldn't be public
LedgerHandle#writeLedgerConfig shouldn't be public
LedgerHandle#addEntry should return void, errors should go in an Exception
LedgerHandle#readComplete should not be public
LedgerHandle#addComplete should not be public
LedgerHandle#readLastConfirmedCompelte should not be public
LedgerHandle#closeComplete should not be public

ASyncCallback#RecoverCallback shouldn't be public

                </div></div></li><li><div><div><b>summary:</b> Bookkeeper API changes for initial Bookkeeper release
                </div><div><b>description:</b> Changes are as follows.

BookKeeper#createLedger, parameter is named passwd, "Key" used in LedgerHandle api
BookKeeper#getBookieClient shouldn't be public
BookKeeper#createComplete shouldn't be public
BookKeeper#openComplete shouldn't be public
BookKeeper#deleteComplete shouldn't be public
BookKeeper#halt could be changed to close(), should throw a BKException

LedgerHandle#getLedgerKey passwd is used in BookKeeper, should possibly be private
LedgerHandle#getLedgerMetadata shouldn't be public
LedgerHandle#getDigestManager shouldn't be public
LedgerHandle#getDistributionSchedule shouldn't be public
LedgerHandle#writeLedgerConfig shouldn't be public
LedgerHandle#addEntry should return void, errors should go in an Exception
LedgerHandle#readComplete should not be public
LedgerHandle#addComplete should not be public
LedgerHandle#readLastConfirmedCompelte should not be public
LedgerHandle#closeComplete should not be public

ASyncCallback#RecoverCallback shouldn't be public

                </div></div></li><li><div><div><b>summary:</b> Bookkeeper API changes for initial Bookkeeper release
                </div><div><b>description:</b> Changes are as follows.

BookKeeper#createLedger, parameter is named passwd, "Key" used in LedgerHandle api
BookKeeper#getBookieClient shouldn't be public
BookKeeper#createComplete shouldn't be public
BookKeeper#openComplete shouldn't be public
BookKeeper#deleteComplete shouldn't be public
BookKeeper#halt could be changed to close(), should throw a BKException

LedgerHandle#getLedgerKey passwd is used in BookKeeper, should possibly be private
LedgerHandle#getLedgerMetadata shouldn't be public
LedgerHandle#getDigestManager shouldn't be public
LedgerHandle#getDistributionSchedule shouldn't be public
LedgerHandle#writeLedgerConfig shouldn't be public
LedgerHandle#addEntry should return void, errors should go in an Exception
LedgerHandle#readComplete should not be public
LedgerHandle#addComplete should not be public
LedgerHandle#readLastConfirmedCompelte should not be public
LedgerHandle#closeComplete should not be public

ASyncCallback#RecoverCallback shouldn't be public

                </div></div></li><li><div><div><b>summary:</b> Bookkeeper API changes for initial Bookkeeper release
                </div><div><b>description:</b> Changes are as follows.

BookKeeper#createLedger, parameter is named passwd, "Key" used in LedgerHandle api
BookKeeper#getBookieClient shouldn't be public
BookKeeper#createComplete shouldn't be public
BookKeeper#openComplete shouldn't be public
BookKeeper#deleteComplete shouldn't be public
BookKeeper#halt could be changed to close(), should throw a BKException

LedgerHandle#getLedgerKey passwd is used in BookKeeper, should possibly be private
LedgerHandle#getLedgerMetadata shouldn't be public
LedgerHandle#getDigestManager shouldn't be public
LedgerHandle#getDistributionSchedule shouldn't be public
LedgerHandle#writeLedgerConfig shouldn't be public
LedgerHandle#addEntry should return void, errors should go in an Exception
LedgerHandle#readComplete should not be public
LedgerHandle#addComplete should not be public
LedgerHandle#readLastConfirmedCompelte should not be public
LedgerHandle#closeComplete should not be public

ASyncCallback#RecoverCallback shouldn't be public

                </div></div></li></ol></div><div><b>jira_issues_comments:</b> <ol><li><div>
                Implemented changes as in description. RecoveryCallback is still public as BookKeeperTools needs it. BookKeeperTools has been moved in to the client package.
              </div></li><li><div>
                
-----------------------------------------------------------
This is an automatically generated e-mail. To reply, visit:
https://reviews.apache.org/r/2543/
-----------------------------------------------------------

Review request for bookkeeper.


Summary
-------

Changes are as follows.

BookKeeper#createLedger, parameter is named passwd, "Key" used in LedgerHandle api
BookKeeper#getBookieClient shouldn't be public
BookKeeper#createComplete shouldn't be public
BookKeeper#openComplete shouldn't be public
BookKeeper#deleteComplete shouldn't be public
BookKeeper#halt could be changed to close(), should throw a BKException

LedgerHandle#getLedgerKey passwd is used in BookKeeper, should possibly be private
LedgerHandle#getLedgerMetadata shouldn't be public
LedgerHandle#getDigestManager shouldn't be public
LedgerHandle#getDistributionSchedule shouldn't be public
LedgerHandle#writeLedgerConfig shouldn't be public
LedgerHandle#addEntry should return void, errors should go in an Exception
LedgerHandle#readComplete should not be public
LedgerHandle#addComplete should not be public
LedgerHandle#readLastConfirmedCompelte should not be public
LedgerHandle#closeComplete should not be public

ASyncCallback#RecoverCallback shouldn't be public


This addresses bug BOOKKEEPER-89.
    https://issues.apache.org/jira/browse/BOOKKEEPER-89


Diffs
-----

  bookkeeper-server/src/main/java/org/apache/bookkeeper/client/AsyncCallback.java 6421460 
  bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeper.java 6af43ae 
  bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeperTools.java PRE-CREATION 
  bookkeeper-server/src/main/java/org/apache/bookkeeper/client/DigestManager.java d4af3fa 
  bookkeeper-server/src/main/java/org/apache/bookkeeper/client/DistributionSchedule.java 78aaa15 
  bookkeeper-server/src/main/java/org/apache/bookkeeper/client/LedgerHandle.java 959df73 
  bookkeeper-server/src/main/java/org/apache/bookkeeper/client/MacDigestManager.java 1131652 
  bookkeeper-server/src/main/java/org/apache/bookkeeper/tools/BookKeeperTools.java 94e444c 
  bookkeeper-server/src/test/java/org/apache/bookkeeper/client/BookKeeperTestClient.java dfc63d7 
  bookkeeper-server/src/test/java/org/apache/bookkeeper/test/BaseTestCase.java 224c796 
  bookkeeper-server/src/test/java/org/apache/bookkeeper/test/BookieFailureTest.java 82483f3 
  bookkeeper-server/src/test/java/org/apache/bookkeeper/test/BookieReadWriteTest.java 56331ef 
  bookkeeper-server/src/test/java/org/apache/bookkeeper/test/BookieRecoveryTest.java f933ba1 
  pom.xml 2392db5 

Diff: https://reviews.apache.org/r/2543/diff


Testing
-------


Thanks,

Ivan


              </div></li><li><div><div><b>body:</b> Fixed the hedwig server compile. I hadn't cleaned, before testing last time.
                </div><div><b>label:</b> code-design
                </div></div></li><li><div>
                
-----------------------------------------------------------
This is an automatically generated e-mail. To reply, visit:
https://reviews.apache.org/r/2543/
-----------------------------------------------------------

(Updated 2011-10-24 14:53:25.740238)


Review request for bookkeeper.


Summary
-------

Changes are as follows.

BookKeeper#createLedger, parameter is named passwd, "Key" used in LedgerHandle api
BookKeeper#getBookieClient shouldn't be public
BookKeeper#createComplete shouldn't be public
BookKeeper#openComplete shouldn't be public
BookKeeper#deleteComplete shouldn't be public
BookKeeper#halt could be changed to close(), should throw a BKException

LedgerHandle#getLedgerKey passwd is used in BookKeeper, should possibly be private
LedgerHandle#getLedgerMetadata shouldn't be public
LedgerHandle#getDigestManager shouldn't be public
LedgerHandle#getDistributionSchedule shouldn't be public
LedgerHandle#writeLedgerConfig shouldn't be public
LedgerHandle#addEntry should return void, errors should go in an Exception
LedgerHandle#readComplete should not be public
LedgerHandle#addComplete should not be public
LedgerHandle#readLastConfirmedCompelte should not be public
LedgerHandle#closeComplete should not be public

ASyncCallback#RecoverCallback shouldn't be public


This addresses bug BOOKKEEPER-89.
    https://issues.apache.org/jira/browse/BOOKKEEPER-89


Diffs (updated)
-----

  bookkeeper-server/src/main/java/org/apache/bookkeeper/client/AsyncCallback.java 6421460 
  bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeper.java 6af43ae 
  bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeperTools.java PRE-CREATION 
  bookkeeper-server/src/main/java/org/apache/bookkeeper/client/DigestManager.java d4af3fa 
  bookkeeper-server/src/main/java/org/apache/bookkeeper/client/DistributionSchedule.java 78aaa15 
  bookkeeper-server/src/main/java/org/apache/bookkeeper/client/LedgerHandle.java 959df73 
  bookkeeper-server/src/main/java/org/apache/bookkeeper/client/MacDigestManager.java 1131652 
  bookkeeper-server/src/main/java/org/apache/bookkeeper/tools/BookKeeperTools.java 94e444c 
  bookkeeper-server/src/test/java/org/apache/bookkeeper/client/BookKeeperTestClient.java dfc63d7 
  bookkeeper-server/src/test/java/org/apache/bookkeeper/client/LedgerCacheTest.java PRE-CREATION 
  bookkeeper-server/src/test/java/org/apache/bookkeeper/test/BaseTestCase.java 224c796 
  bookkeeper-server/src/test/java/org/apache/bookkeeper/test/BookieFailureTest.java 82483f3 
  bookkeeper-server/src/test/java/org/apache/bookkeeper/test/BookieReadWriteTest.java 56331ef 
  bookkeeper-server/src/test/java/org/apache/bookkeeper/test/BookieRecoveryTest.java f933ba1 
  bookkeeper-server/src/test/java/org/apache/bookkeeper/test/LedgerCacheTest.java 3a78507 
  hedwig-server/src/main/java/org/apache/hedwig/server/benchmark/BookkeeperBenchmark.java a934985 
  hedwig-server/src/main/java/org/apache/hedwig/server/netty/PubSubServer.java 726341d 
  hedwig-server/src/test/java/org/apache/hedwig/server/persistence/BookKeeperTestBase.java b918d97 
  pom.xml 2392db5 

Diff: https://reviews.apache.org/r/2543/diff


Testing
-------


Thanks,

Ivan


              </div></li><li><div>
                
-----------------------------------------------------------
This is an automatically generated e-mail. To reply, visit:
https://reviews.apache.org/r/2543/#review2843
-----------------------------------------------------------


Thanks a lot for working on this patch, Ivan. It is mostly good for me, but I have a few comments if you don't mind.


bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeper.java
&lt;https://reviews.apache.org/r/2543/#comment6370&gt;

    We differentiate between password and ledger key in BookKeeper. The password is the string that the application passes to bookkeeper when creating a ledger. The password is used to generate the ledger key (check the constructor of ledger handle) and the mac key when MAC is being used.



bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeperTools.java
&lt;https://reviews.apache.org/r/2543/#comment6376&gt;

    I understand that these tools need visibility to some internal methods of the client package, but this class is not really part of the bookkeeper client. It is instead a tool for things like bookie recovery.
    
    I was wondering if we should at least have it in a separate folder to avoid confusion.



bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeperTools.java
&lt;https://reviews.apache.org/r/2543/#comment6371&gt;

    Is this a tab?



bookkeeper-server/src/test/java/org/apache/bookkeeper/client/LedgerCacheTest.java
&lt;https://reviews.apache.org/r/2543/#comment6373&gt;

    Why are we moving this test to a different package?


- fpj


On 2011-10-24 14:53:25, Ivan Kelly wrote:
bq.  
bq.  -----------------------------------------------------------
bq.  This is an automatically generated e-mail. To reply, visit:
bq.  https://reviews.apache.org/r/2543/
bq.  -----------------------------------------------------------
bq.  
bq.  (Updated 2011-10-24 14:53:25)
bq.  
bq.  
bq.  Review request for bookkeeper.
bq.  
bq.  
bq.  Summary
bq.  -------
bq.  
bq.  Changes are as follows.
bq.  
bq.  BookKeeper#createLedger, parameter is named passwd, "Key" used in LedgerHandle api
bq.  BookKeeper#getBookieClient shouldn't be public
bq.  BookKeeper#createComplete shouldn't be public
bq.  BookKeeper#openComplete shouldn't be public
bq.  BookKeeper#deleteComplete shouldn't be public
bq.  BookKeeper#halt could be changed to close(), should throw a BKException
bq.  
bq.  LedgerHandle#getLedgerKey passwd is used in BookKeeper, should possibly be private
bq.  LedgerHandle#getLedgerMetadata shouldn't be public
bq.  LedgerHandle#getDigestManager shouldn't be public
bq.  LedgerHandle#getDistributionSchedule shouldn't be public
bq.  LedgerHandle#writeLedgerConfig shouldn't be public
bq.  LedgerHandle#addEntry should return void, errors should go in an Exception
bq.  LedgerHandle#readComplete should not be public
bq.  LedgerHandle#addComplete should not be public
bq.  LedgerHandle#readLastConfirmedCompelte should not be public
bq.  LedgerHandle#closeComplete should not be public
bq.  
bq.  ASyncCallback#RecoverCallback shouldn't be public
bq.  
bq.  
bq.  This addresses bug BOOKKEEPER-89.
bq.      https://issues.apache.org/jira/browse/BOOKKEEPER-89
bq.  
bq.  
bq.  Diffs
bq.  -----
bq.  
bq.    bookkeeper-server/src/main/java/org/apache/bookkeeper/client/AsyncCallback.java 6421460 
bq.    bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeper.java 6af43ae 
bq.    bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeperTools.java PRE-CREATION 
bq.    bookkeeper-server/src/main/java/org/apache/bookkeeper/client/DigestManager.java d4af3fa 
bq.    bookkeeper-server/src/main/java/org/apache/bookkeeper/client/DistributionSchedule.java 78aaa15 
bq.    bookkeeper-server/src/main/java/org/apache/bookkeeper/client/LedgerHandle.java 959df73 
bq.    bookkeeper-server/src/main/java/org/apache/bookkeeper/client/MacDigestManager.java 1131652 
bq.    bookkeeper-server/src/main/java/org/apache/bookkeeper/tools/BookKeeperTools.java 94e444c 
bq.    bookkeeper-server/src/test/java/org/apache/bookkeeper/client/BookKeeperTestClient.java dfc63d7 
bq.    bookkeeper-server/src/test/java/org/apache/bookkeeper/client/LedgerCacheTest.java PRE-CREATION 
bq.    bookkeeper-server/src/test/java/org/apache/bookkeeper/test/BaseTestCase.java 224c796 
bq.    bookkeeper-server/src/test/java/org/apache/bookkeeper/test/BookieFailureTest.java 82483f3 
bq.    bookkeeper-server/src/test/java/org/apache/bookkeeper/test/BookieReadWriteTest.java 56331ef 
bq.    bookkeeper-server/src/test/java/org/apache/bookkeeper/test/BookieRecoveryTest.java f933ba1 
bq.    bookkeeper-server/src/test/java/org/apache/bookkeeper/test/LedgerCacheTest.java 3a78507 
bq.    hedwig-server/src/main/java/org/apache/hedwig/server/benchmark/BookkeeperBenchmark.java a934985 
bq.    hedwig-server/src/main/java/org/apache/hedwig/server/netty/PubSubServer.java 726341d 
bq.    hedwig-server/src/test/java/org/apache/hedwig/server/persistence/BookKeeperTestBase.java b918d97 
bq.    pom.xml 2392db5 
bq.  
bq.  Diff: https://reviews.apache.org/r/2543/diff
bq.  
bq.  
bq.  Testing
bq.  -------
bq.  
bq.  
bq.  Thanks,
bq.  
bq.  Ivan
bq.  
bq.


              </div></li><li><div><div><b>body:</b> 

bq.  On 2011-10-26 00:03:20, fpj wrote:
bq.  &gt; bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeper.java, line 187
bq.  &gt; &lt;https://reviews.apache.org/r/2543/diff/2/?file=52724#file52724line187&gt;
bq.  &gt;
bq.  &gt;     We differentiate between password and ledger key in BookKeeper. The password is the string that the application passes to bookkeeper when creating a ledger. The password is used to generate the ledger key (check the constructor of ledger handle) and the mac key when MAC is being used.

Ah, I'll change this back then and update the javadoc for LedgerHandle#getLedgerKey


bq.  On 2011-10-26 00:03:20, fpj wrote:
bq.  &gt; bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeperTools.java, line 547
bq.  &gt; &lt;https://reviews.apache.org/r/2543/diff/2/?file=52725#file52725line547&gt;
bq.  &gt;
bq.  &gt;     Is this a tab?

Nope, it's line which contains only whitespace, in this case spaces. Its considered bad style, so thats probably why it's on show here.


bq.  On 2011-10-26 00:03:20, fpj wrote:
bq.  &gt; bookkeeper-server/src/test/java/org/apache/bookkeeper/client/LedgerCacheTest.java, line 22
bq.  &gt; &lt;https://reviews.apache.org/r/2543/diff/2/?file=52732#file52732line22&gt;
bq.  &gt;
bq.  &gt;     Why are we moving this test to a different package?

It accesses MacDigestManager, which is now package private. In general I think it's better to have tests in the same package as the code they're testing, so that they can poke at internals without having to open them to the world.


bq.  On 2011-10-26 00:03:20, fpj wrote:
bq.  &gt; bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeperTools.java, line 1
bq.  &gt; &lt;https://reviews.apache.org/r/2543/diff/2/?file=52725#file52725line1&gt;
bq.  &gt;
bq.  &gt;     I understand that these tools need visibility to some internal methods of the client package, but this class is not really part of the bookkeeper client. It is instead a tool for things like bookie recovery.
bq.  &gt;     
bq.  &gt;     I was wondering if we should at least have it in a separate folder to avoid confusion.

It's a tricky one. While it is toollike, it reaches into the internals of the client code. Really a tool should just use the public api itself. How about this? I'll move the BookKeeperTools back to tools, and put the main() in it, but then I'll create a class BookKeeperAdmin which acts as an admin client and implements the code that reaches into the internals. Then BookKeeperTools can use the public methods exposed by BookKeeperAdmin.


- Ivan


-----------------------------------------------------------
This is an automatically generated e-mail. To reply, visit:
https://reviews.apache.org/r/2543/#review2843
-----------------------------------------------------------


On 2011-10-24 14:53:25, Ivan Kelly wrote:
bq.  
bq.  -----------------------------------------------------------
bq.  This is an automatically generated e-mail. To reply, visit:
bq.  https://reviews.apache.org/r/2543/
bq.  -----------------------------------------------------------
bq.  
bq.  (Updated 2011-10-24 14:53:25)
bq.  
bq.  
bq.  Review request for bookkeeper.
bq.  
bq.  
bq.  Summary
bq.  -------
bq.  
bq.  Changes are as follows.
bq.  
bq.  BookKeeper#createLedger, parameter is named passwd, "Key" used in LedgerHandle api
bq.  BookKeeper#getBookieClient shouldn't be public
bq.  BookKeeper#createComplete shouldn't be public
bq.  BookKeeper#openComplete shouldn't be public
bq.  BookKeeper#deleteComplete shouldn't be public
bq.  BookKeeper#halt could be changed to close(), should throw a BKException
bq.  
bq.  LedgerHandle#getLedgerKey passwd is used in BookKeeper, should possibly be private
bq.  LedgerHandle#getLedgerMetadata shouldn't be public
bq.  LedgerHandle#getDigestManager shouldn't be public
bq.  LedgerHandle#getDistributionSchedule shouldn't be public
bq.  LedgerHandle#writeLedgerConfig shouldn't be public
bq.  LedgerHandle#addEntry should return void, errors should go in an Exception
bq.  LedgerHandle#readComplete should not be public
bq.  LedgerHandle#addComplete should not be public
bq.  LedgerHandle#readLastConfirmedCompelte should not be public
bq.  LedgerHandle#closeComplete should not be public
bq.  
bq.  ASyncCallback#RecoverCallback shouldn't be public
bq.  
bq.  
bq.  This addresses bug BOOKKEEPER-89.
bq.      https://issues.apache.org/jira/browse/BOOKKEEPER-89
bq.  
bq.  
bq.  Diffs
bq.  -----
bq.  
bq.    bookkeeper-server/src/main/java/org/apache/bookkeeper/client/AsyncCallback.java 6421460 
bq.    bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeper.java 6af43ae 
bq.    bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeperTools.java PRE-CREATION 
bq.    bookkeeper-server/src/main/java/org/apache/bookkeeper/client/DigestManager.java d4af3fa 
bq.    bookkeeper-server/src/main/java/org/apache/bookkeeper/client/DistributionSchedule.java 78aaa15 
bq.    bookkeeper-server/src/main/java/org/apache/bookkeeper/client/LedgerHandle.java 959df73 
bq.    bookkeeper-server/src/main/java/org/apache/bookkeeper/client/MacDigestManager.java 1131652 
bq.    bookkeeper-server/src/main/java/org/apache/bookkeeper/tools/BookKeeperTools.java 94e444c 
bq.    bookkeeper-server/src/test/java/org/apache/bookkeeper/client/BookKeeperTestClient.java dfc63d7 
bq.    bookkeeper-server/src/test/java/org/apache/bookkeeper/client/LedgerCacheTest.java PRE-CREATION 
bq.    bookkeeper-server/src/test/java/org/apache/bookkeeper/test/BaseTestCase.java 224c796 
bq.    bookkeeper-server/src/test/java/org/apache/bookkeeper/test/BookieFailureTest.java 82483f3 
bq.    bookkeeper-server/src/test/java/org/apache/bookkeeper/test/BookieReadWriteTest.java 56331ef 
bq.    bookkeeper-server/src/test/java/org/apache/bookkeeper/test/BookieRecoveryTest.java f933ba1 
bq.    bookkeeper-server/src/test/java/org/apache/bookkeeper/test/LedgerCacheTest.java 3a78507 
bq.    hedwig-server/src/main/java/org/apache/hedwig/server/benchmark/BookkeeperBenchmark.java a934985 
bq.    hedwig-server/src/main/java/org/apache/hedwig/server/netty/PubSubServer.java 726341d 
bq.    hedwig-server/src/test/java/org/apache/hedwig/server/persistence/BookKeeperTestBase.java b918d97 
bq.    pom.xml 2392db5 
bq.  
bq.  Diff: https://reviews.apache.org/r/2543/diff
bq.  
bq.  
bq.  Testing
bq.  -------
bq.  
bq.  
bq.  Thanks,
bq.  
bq.  Ivan
bq.  
bq.


                </div><div><b>label:</b> code-design
                </div></div></li><li><div>
                
-----------------------------------------------------------
This is an automatically generated e-mail. To reply, visit:
https://reviews.apache.org/r/2543/
-----------------------------------------------------------

(Updated 2011-10-26 09:49:18.492814)


Review request for bookkeeper.


Changes
-------

Addressed comments. Removed passwd-&gt;key change. Added BookKeeperAdmin and moved BookKeeperTools back to tools package.


Summary
-------

Changes are as follows.

BookKeeper#createLedger, parameter is named passwd, "Key" used in LedgerHandle api
BookKeeper#getBookieClient shouldn't be public
BookKeeper#createComplete shouldn't be public
BookKeeper#openComplete shouldn't be public
BookKeeper#deleteComplete shouldn't be public
BookKeeper#halt could be changed to close(), should throw a BKException

LedgerHandle#getLedgerKey passwd is used in BookKeeper, should possibly be private
LedgerHandle#getLedgerMetadata shouldn't be public
LedgerHandle#getDigestManager shouldn't be public
LedgerHandle#getDistributionSchedule shouldn't be public
LedgerHandle#writeLedgerConfig shouldn't be public
LedgerHandle#addEntry should return void, errors should go in an Exception
LedgerHandle#readComplete should not be public
LedgerHandle#addComplete should not be public
LedgerHandle#readLastConfirmedCompelte should not be public
LedgerHandle#closeComplete should not be public

ASyncCallback#RecoverCallback shouldn't be public


This addresses bug BOOKKEEPER-89.
    https://issues.apache.org/jira/browse/BOOKKEEPER-89


Diffs (updated)
-----

  bookkeeper-server/src/main/java/org/apache/bookkeeper/client/AsyncCallback.java 6421460 
  bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeper.java 6af43ae 
  bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeperAdmin.java PRE-CREATION 
  bookkeeper-server/src/main/java/org/apache/bookkeeper/client/DigestManager.java d4af3fa 
  bookkeeper-server/src/main/java/org/apache/bookkeeper/client/DistributionSchedule.java 78aaa15 
  bookkeeper-server/src/main/java/org/apache/bookkeeper/client/LedgerHandle.java 959df73 
  bookkeeper-server/src/main/java/org/apache/bookkeeper/client/MacDigestManager.java 1131652 
  bookkeeper-server/src/main/java/org/apache/bookkeeper/tools/BookKeeperTools.java 94e444c 
  bookkeeper-server/src/test/java/org/apache/bookkeeper/client/BookKeeperTestClient.java dfc63d7 
  bookkeeper-server/src/test/java/org/apache/bookkeeper/client/LedgerCacheTest.java PRE-CREATION 
  bookkeeper-server/src/test/java/org/apache/bookkeeper/test/BaseTestCase.java 224c796 
  bookkeeper-server/src/test/java/org/apache/bookkeeper/test/BookieFailureTest.java 82483f3 
  bookkeeper-server/src/test/java/org/apache/bookkeeper/test/BookieReadWriteTest.java 56331ef 
  bookkeeper-server/src/test/java/org/apache/bookkeeper/test/BookieRecoveryTest.java f933ba1 
  bookkeeper-server/src/test/java/org/apache/bookkeeper/test/LedgerCacheTest.java 3a78507 
  hedwig-server/src/main/java/org/apache/hedwig/server/benchmark/BookkeeperBenchmark.java a934985 
  hedwig-server/src/main/java/org/apache/hedwig/server/netty/PubSubServer.java 726341d 
  hedwig-server/src/test/java/org/apache/hedwig/server/persistence/BookKeeperTestBase.java b918d97 
  pom.xml 2392db5 

Diff: https://reviews.apache.org/r/2543/diff


Testing
-------


Thanks,

Ivan


              </div></li><li><div>
                patch generated with --no-prefix
              </div></li><li><div>
                BookieReadWriteTest is failing for me. I'm attaching the surefire report.
              </div></li><li><div>
                Failure is unrelated. Is related to BOOKKEEPER-92, which I think has exposed a bug. I'll try and fix now and submit a new JIRA for it. Hopefully Jenkins will catch this sort of thing once ZK 3.4 is out.


              </div></li><li><div>
                Actually, Sijie had already spotted this problem. BOOKKEEPER-94.
              </div></li><li><div>
                One final change. I had forgotten to change addEntry to return an exception instead of a return code. 
              </div></li><li><div>
                looks great. i like how you moved the callbacks from the class to inner classes! my one comment is that i think we should keep the accessor for the ZooKeeper public. if you are using bookkeeper and you want to do some zookeeper operations, usually you want to use the same zookeeper object to keep any session events in sync.
              </div></li><li><div>
                In that case I would suggest passing your own ZK instance into the constructor. Do you think more is needed than this?
              </div></li><li><div>
                +1, looks great!
              </div></li><li><div>
                +1 yes, i think you are right ivan. i don't feel strongly about it.
              </div></li><li><div>
                Committed as r1189842. Thanks for reviewing, guys.
              </div></li></ol></div></div></html>