<!DOCTYPE html><html><div class="item-title">
        Item 369
      </div> <div class="item-details"><div><b>git_comments:</b> <ol><li><div>
                / \brief Create a new FileSystem by URI
/
/ A scheme-less URI is considered a local filesystem path.
/ Recognized schemes are "file", "mock" and "hdfs".
/
/ \param[in] uri a URI-based path, ex: file:///some/local/path
/ \param[out] out_path (optional) Path inside the filesystem.
/ \return out_fs FileSystem instance.
              </div></li></ol></div><div><b>git_commits:</b> <ol><li><div><div><b>summary:</b> ARROW-7306: [C++] Add Result-returning version of FileSystemFromUri
                </div><div><b>message:</b> ARROW-7306: [C++] Add Result-returning version of FileSystemFromUri

I guess this should be in #5866

Closes #5952 from mrkn/ARROW-7306 and squashes the following commits:

e0793a3c3 &lt;Kenta Murata&gt; Add Result-returning version of FileSystemFromUri

Authored-by: Kenta Murata &lt;mrkn@mrkn.jp&gt;
Signed-off-by: Antoine Pitrou &lt;antoine@python.org&gt;

                </div></div></li></ol></div><div><b>github_issues:</b> <ol></ol></div><div><b>github_issues_comments:</b> <ol></ol></div><div><b>github_pulls:</b> <ol><li><div><div><b>title:</b> ARROW-7168: [Python] Respect the specified dictionary type for pd.Categorical conversion
                </div><div><b>body:</b> https://issues.apache.org/jira/browse/ARROW-7168

This change ensures that if you specify a `type` in `pa.array`, we ensure the output actually has this type when converting to dictionary array (as we also do for other types).

The PR now implements this change, but we might want to do this with a deprecation first, as this can break people's code.
                </div></div></li></ol></div><div><b>github_pulls_comments:</b> <ol><li><div>
                https://issues.apache.org/jira/browse/ARROW-7168
              </div></li><li><div>
                @pitrou thanks! Added some additional tests
              </div></li><li><div>
                Also added some additional code to do it with a warning for now, falling back to the previous behaviour if the new behaviour fails.
              </div></li><li><div>
                We had some regressions with the changes in 0.15 related to following the types in the schema and the pandas index etc, so thought to be more cautious this time. But certainly not attached to it (I can't really judge if it will be something easy to run into or not). 

I think the extra maintenance work is limited, we will only need to remove the warnings and replace with an error at some point.


              </div></li><li><div>
                Ok, merged as is :-)
              </div></li></ol></div><div><b>github_pulls_reviews:</b> <ol><li><div>
                Shouldn't you check also the array value? (for example using `result.to_pylist()`)
              </div></li><li><div>
                Also, should you perhaps check passing a `mask` argument to `pa.array()`?
              </div></li></ol></div><div><b>jira_issues:</b> <ol><li><div><div><b>summary:</b> [C++] Add Result-returning version of FileSystemFromUri
                </div><div><b>description:</b> 
                </div></div></li></ol></div><div><b>jira_issues_comments:</b> <ol><li><div>
                Issue resolved by pull request 5952
[https://github.com/apache/arrow/pull/5952]
              </div></li></ol></div></div></html>