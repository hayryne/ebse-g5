<!DOCTYPE html><html><div class="item-title">
        Item 196
      </div> <div class="item-details"><div><b>git_comments:</b> <ol></ol></div><div><b>git_commits:</b> <ol><li><div><div><b>summary:</b> [FLINK-2090] [core] Truncate 'toString()' of CollectionInputFormat when the collection is huge
                </div><div><b>message:</b> [FLINK-2090] [core] Truncate 'toString()' of CollectionInputFormat when the collection is huge

This closes #2323

                </div></div></li></ol></div><div><b>github_issues:</b> <ol></ol></div><div><b>github_issues_comments:</b> <ol></ol></div><div><b>github_pulls:</b> <ol><li><div><div><b>title:</b> [FLINK-2090] toString of CollectionInputFormat takes long time when t…
                </div><div><b>body:</b> Thanks for contributing to Apache Flink. Before you open your pull request, please take the following check list into consideration.
If your changes take all of the items into account, feel free to open your pull request. For more information and/or questions please refer to the [How To Contribute guide](http://flink.apache.org/how-to-contribute.html).
In addition to going through the list, please provide a meaningful description of your changes.
- [x] General
  - The pull request references the related JIRA issue ("[FLINK-XXX] Jira title text")
  - The pull request addresses only one issue
  - Each commit in the PR has a meaningful commit message (including the JIRA id)
- [x] Documentation
  - Documentation has been added for new functionality
  - Old documentation affected by the pull request has been updated
  - JavaDoc for public methods has been added
- [x] Tests &amp; Build
  - Functionality added by the pull request is covered by tests
  - `mvn clean verify` has been executed successfully locally or a Travis build has passed

…he collection is huge

                </div></div></li><li><div><div><b>title:</b> [FLINK-2090] toString of CollectionInputFormat takes long time when t…
                </div><div><b>body:</b> Thanks for contributing to Apache Flink. Before you open your pull request, please take the following check list into consideration.
If your changes take all of the items into account, feel free to open your pull request. For more information and/or questions please refer to the [How To Contribute guide](http://flink.apache.org/how-to-contribute.html).
In addition to going through the list, please provide a meaningful description of your changes.
- [x] General
  - The pull request references the related JIRA issue ("[FLINK-XXX] Jira title text")
  - The pull request addresses only one issue
  - Each commit in the PR has a meaningful commit message (including the JIRA id)
- [x] Documentation
  - Documentation has been added for new functionality
  - Old documentation affected by the pull request has been updated
  - JavaDoc for public methods has been added
- [x] Tests &amp; Build
  - Functionality added by the pull request is covered by tests
  - `mvn clean verify` has been executed successfully locally or a Travis build has passed

…he collection is huge

                </div><div><b>label:</b> code-design
                </div></div></li><li><div><div><b>title:</b> [FLINK-2090] toString of CollectionInputFormat takes long time when t…
                </div><div><b>body:</b> Thanks for contributing to Apache Flink. Before you open your pull request, please take the following check list into consideration.
If your changes take all of the items into account, feel free to open your pull request. For more information and/or questions please refer to the [How To Contribute guide](http://flink.apache.org/how-to-contribute.html).
In addition to going through the list, please provide a meaningful description of your changes.
- [x] General
  - The pull request references the related JIRA issue ("[FLINK-XXX] Jira title text")
  - The pull request addresses only one issue
  - Each commit in the PR has a meaningful commit message (including the JIRA id)
- [x] Documentation
  - Documentation has been added for new functionality
  - Old documentation affected by the pull request has been updated
  - JavaDoc for public methods has been added
- [x] Tests &amp; Build
  - Functionality added by the pull request is covered by tests
  - `mvn clean verify` has been executed successfully locally or a Travis build has passed

…he collection is huge

                </div></div></li><li><div><div><b>title:</b> [FLINK-2090] toString of CollectionInputFormat takes long time when t…
                </div><div><b>body:</b> Thanks for contributing to Apache Flink. Before you open your pull request, please take the following check list into consideration.
If your changes take all of the items into account, feel free to open your pull request. For more information and/or questions please refer to the [How To Contribute guide](http://flink.apache.org/how-to-contribute.html).
In addition to going through the list, please provide a meaningful description of your changes.
- [x] General
  - The pull request references the related JIRA issue ("[FLINK-XXX] Jira title text")
  - The pull request addresses only one issue
  - Each commit in the PR has a meaningful commit message (including the JIRA id)
- [x] Documentation
  - Documentation has been added for new functionality
  - Old documentation affected by the pull request has been updated
  - JavaDoc for public methods has been added
- [x] Tests &amp; Build
  - Functionality added by the pull request is covered by tests
  - `mvn clean verify` has been executed successfully locally or a Travis build has passed

…he collection is huge

                </div></div></li><li><div><div><b>title:</b> [FLINK-2090] toString of CollectionInputFormat takes long time when t…
                </div><div><b>body:</b> Thanks for contributing to Apache Flink. Before you open your pull request, please take the following check list into consideration.
If your changes take all of the items into account, feel free to open your pull request. For more information and/or questions please refer to the [How To Contribute guide](http://flink.apache.org/how-to-contribute.html).
In addition to going through the list, please provide a meaningful description of your changes.
- [x] General
  - The pull request references the related JIRA issue ("[FLINK-XXX] Jira title text")
  - The pull request addresses only one issue
  - Each commit in the PR has a meaningful commit message (including the JIRA id)
- [x] Documentation
  - Documentation has been added for new functionality
  - Old documentation affected by the pull request has been updated
  - JavaDoc for public methods has been added
- [x] Tests &amp; Build
  - Functionality added by the pull request is covered by tests
  - `mvn clean verify` has been executed successfully locally or a Travis build has passed

…he collection is huge

                </div></div></li><li><div><div><b>title:</b> [FLINK-2090] toString of CollectionInputFormat takes long time when t…
                </div><div><b>body:</b> Thanks for contributing to Apache Flink. Before you open your pull request, please take the following check list into consideration.
If your changes take all of the items into account, feel free to open your pull request. For more information and/or questions please refer to the [How To Contribute guide](http://flink.apache.org/how-to-contribute.html).
In addition to going through the list, please provide a meaningful description of your changes.
- [x] General
  - The pull request references the related JIRA issue ("[FLINK-XXX] Jira title text")
  - The pull request addresses only one issue
  - Each commit in the PR has a meaningful commit message (including the JIRA id)
- [x] Documentation
  - Documentation has been added for new functionality
  - Old documentation affected by the pull request has been updated
  - JavaDoc for public methods has been added
- [x] Tests &amp; Build
  - Functionality added by the pull request is covered by tests
  - `mvn clean verify` has been executed successfully locally or a Travis build has passed

…he collection is huge

                </div></div></li><li><div><div><b>title:</b> [FLINK-2090] toString of CollectionInputFormat takes long time when t…
                </div><div><b>body:</b> Thanks for contributing to Apache Flink. Before you open your pull request, please take the following check list into consideration.
If your changes take all of the items into account, feel free to open your pull request. For more information and/or questions please refer to the [How To Contribute guide](http://flink.apache.org/how-to-contribute.html).
In addition to going through the list, please provide a meaningful description of your changes.
- [x] General
  - The pull request references the related JIRA issue ("[FLINK-XXX] Jira title text")
  - The pull request addresses only one issue
  - Each commit in the PR has a meaningful commit message (including the JIRA id)
- [x] Documentation
  - Documentation has been added for new functionality
  - Old documentation affected by the pull request has been updated
  - JavaDoc for public methods has been added
- [x] Tests &amp; Build
  - Functionality added by the pull request is covered by tests
  - `mvn clean verify` has been executed successfully locally or a Travis build has passed

…he collection is huge

                </div></div></li><li><div><div><b>title:</b> [FLINK-2090] toString of CollectionInputFormat takes long time when t…
                </div><div><b>body:</b> Thanks for contributing to Apache Flink. Before you open your pull request, please take the following check list into consideration.
If your changes take all of the items into account, feel free to open your pull request. For more information and/or questions please refer to the [How To Contribute guide](http://flink.apache.org/how-to-contribute.html).
In addition to going through the list, please provide a meaningful description of your changes.
- [x] General
  - The pull request references the related JIRA issue ("[FLINK-XXX] Jira title text")
  - The pull request addresses only one issue
  - Each commit in the PR has a meaningful commit message (including the JIRA id)
- [x] Documentation
  - Documentation has been added for new functionality
  - Old documentation affected by the pull request has been updated
  - JavaDoc for public methods has been added
- [x] Tests &amp; Build
  - Functionality added by the pull request is covered by tests
  - `mvn clean verify` has been executed successfully locally or a Travis build has passed

…he collection is huge

                </div></div></li><li><div><div><b>title:</b> [FLINK-2090] toString of CollectionInputFormat takes long time when t…
                </div><div><b>body:</b> Thanks for contributing to Apache Flink. Before you open your pull request, please take the following check list into consideration.
If your changes take all of the items into account, feel free to open your pull request. For more information and/or questions please refer to the [How To Contribute guide](http://flink.apache.org/how-to-contribute.html).
In addition to going through the list, please provide a meaningful description of your changes.
- [x] General
  - The pull request references the related JIRA issue ("[FLINK-XXX] Jira title text")
  - The pull request addresses only one issue
  - Each commit in the PR has a meaningful commit message (including the JIRA id)
- [x] Documentation
  - Documentation has been added for new functionality
  - Old documentation affected by the pull request has been updated
  - JavaDoc for public methods has been added
- [x] Tests &amp; Build
  - Functionality added by the pull request is covered by tests
  - `mvn clean verify` has been executed successfully locally or a Travis build has passed

…he collection is huge

                </div></div></li></ol></div><div><b>github_pulls_comments:</b> <ol><li><div>
                Set maximum limit for the toString result, as suggested by Stephan here: https://issues.apache.org/jira/browse/FLINK-2090 

              </div></li><li><div><div><b>body:</b> Looks good. Can you remove the Guava dependency, though? We try to avoid Guava as much as possible, because it causes too many dependency issues...

                </div><div><b>label:</b> code-design
                </div></div></li><li><div>
                @mushketyk Are you going to update this pull request?

              </div></li><li><div>
                @StephanEwen Sorry, somehow I missed your comment. I'll update the PR today.

              </div></li><li><div>
                @StephanEwen I've updated the PR according to your review.

              </div></li><li><div>
                Looks good, merging this...

              </div></li><li><div>
                Awesome! Thank you.

              </div></li></ol></div><div><b>github_pulls_reviews:</b> <ol></ol></div><div><b>jira_issues:</b> <ol><li><div><div><b>summary:</b> toString of CollectionInputFormat takes long time when the collection is huge
                </div><div><b>description:</b> The {{toString}} method of {{CollectionInputFormat}} calls {{toString}} on its underlying {{Collection}}. Thus, {{toString}} is called for each element of the collection. If the {{Collection}} contains many elements or the individual {{toString}} calls for each element take a long time, then the string generation can take a considerable amount of time. [~mikiobraun] noticed that when he inserted several jBLAS matrices into Flink.

The {{toString}} method is mainly used for logging statements in {{DataSourceNode}}'s {{computeOperatorSpecificDefaultEstimates}} method and in {{JobGraphGenerator.getDescriptionForUserCode}}. I'm wondering whether it is necessary to print the complete content of the underlying {{Collection}} or if it's not enough to print only the first 3 elements in the {{toString}} method.
                </div></div></li></ol></div><div><b>jira_issues_comments:</b> <ol><li><div>
                How about we print at most N (= 3 or 10) elements. After each element, we check whether the string buffer has more than 100 characters. If yes, we abort there.
              </div></li><li><div>
                 I will fix this.
              </div></li><li><div>
                GitHub user mushketyk opened a pull request:

    https://github.com/apache/flink/pull/2323

    [FLINK-2090] toString of CollectionInputFormat takes long time when t…

    Thanks for contributing to Apache Flink. Before you open your pull request, please take the following check list into consideration.
    If your changes take all of the items into account, feel free to open your pull request. For more information and/or questions please refer to the [How To Contribute guide](http://flink.apache.org/how-to-contribute.html).
    In addition to going through the list, please provide a meaningful description of your changes.
    
    - [x] General
      - The pull request references the related JIRA issue ("[FLINK-XXX] Jira title text")
      - The pull request addresses only one issue
      - Each commit in the PR has a meaningful commit message (including the JIRA id)
    
    - [x] Documentation
      - Documentation has been added for new functionality
      - Old documentation affected by the pull request has been updated
      - JavaDoc for public methods has been added
    
    - [x] Tests &amp; Build
      - Functionality added by the pull request is covered by tests
      - `mvn clean verify` has been executed successfully locally or a Travis build has passed
    
    …he collection is huge

You can merge this pull request into a Git repository by running:

    $ git pull https://github.com/mushketyk/flink fast-to-string

Alternatively you can review and apply these changes as the patch at:

    https://github.com/apache/flink/pull/2323.patch

To close this pull request, make a commit to your master/trunk branch
with (at least) the following in the commit message:

    This closes #2323
    
----
commit 76c5b7dd1cf12b17b7601b2d1c8ea7cc475a031c
Author: Ivan Mushketyk &lt;ivan.mushketik@gmail.com&gt;
Date:   2016-08-01T19:39:17Z

    [FLINK-2090] toString of CollectionInputFormat takes long time when the collection is huge

----

              </div></li><li><div>
                Github user mushketyk commented on the issue:

    https://github.com/apache/flink/pull/2323
  
    Set maximum limit for the toString result, as suggested by Stephan here: https://issues.apache.org/jira/browse/FLINK-2090 

              </div></li><li><div>
                Github user StephanEwen commented on the issue:

    https://github.com/apache/flink/pull/2323
  
    Looks good. Can you remove the Guava dependency, though? We try to avoid Guava as much as possible, because it causes too many dependency issues...

              </div></li><li><div>
                Github user StephanEwen commented on the issue:

    https://github.com/apache/flink/pull/2323
  
    @mushketyk Are you going to update this pull request?

              </div></li><li><div>
                Github user mushketyk commented on the issue:

    https://github.com/apache/flink/pull/2323
  
    @StephanEwen Sorry, somehow I missed your comment. I'll update the PR today.

              </div></li><li><div>
                Github user mushketyk commented on the issue:

    https://github.com/apache/flink/pull/2323
  
    @StephanEwen I've updated the PR according to your review.

              </div></li><li><div>
                Github user StephanEwen commented on the issue:

    https://github.com/apache/flink/pull/2323
  
    Looks good, merging this...

              </div></li><li><div>
                Github user mushketyk commented on the issue:

    https://github.com/apache/flink/pull/2323
  
    Awesome! Thank you.

              </div></li><li><div>
                Fixed via b5d58934d7124e0076e588e74485a60e7c1f484b

Thank you for the contribution
              </div></li><li><div>
                Github user asfgit closed the pull request at:

    https://github.com/apache/flink/pull/2323

              </div></li></ol></div></div></html>