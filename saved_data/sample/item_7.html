<!DOCTYPE html><html><div class="item-title">
        Item 7
      </div> <div class="item-details"><div><b>git_comments:</b> <ol><li><div>
                *
     * Instantiate an exception, giving the name of the unavailable resource.
     *
     * @param resourceName the name of the resource on the classpath, e.g.
     *                     &lt;code&gt;/brooklyn/osgi/brooklyn-test-osgi-entities.jar&lt;/code&gt;
     * @param skipMessage the message associated with the exception
     * @param cause the underlying exception that caused this one
     
              </div></li><li><div>
                *
     * Instantiate an exception, giving the name of the unavailable resource.
     *
     * @param resourceName the name of the resource on the classpath, e.g.
     *                     &lt;code&gt;/brooklyn/osgi/brooklyn-test-osgi-entities.jar&lt;/code&gt;
     
              </div></li><li><div>
                *
     * Instantiate an exception, giving the name of the unavailable resource.
     *
     * @param resourceName the name of the resource on the classpath, e.g.
     *                     &lt;code&gt;/brooklyn/osgi/brooklyn-test-osgi-entities.jar&lt;/code&gt;
     * @param cause the underlying exception that caused this one
     
              </div></li><li><div>
                
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * "License"); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied.  See the License for the
 * specific language governing permissions and limitations
 * under the License.
 
              </div></li><li><div>
                *
     * Instantiate an exception, giving the name of the unavailable resource.
     *
     * @param resourceName the name of the resource on the classpath, e.g.
     *                     &lt;code&gt;/brooklyn/osgi/brooklyn-test-osgi-entities.jar&lt;/code&gt;
     * @param skipMessage the message associated with the exception
     
              </div></li><li><div><div><b>comment:</b> *
 * Indicates that a test cannot be run as a necessary resource is not available.
 *
 * &lt;p&gt;This exception should be used by tests that need a particular test resource (i.e., a file that is conventionally
 * in the &lt;code&gt;src/test/resources&lt;/code&gt; folder, and that available as a classpath resource at runtime) is not
 * available. It will cause TestNG to mark the test as "skipped" with a suitable message.&lt;/p&gt;
 *
 * &lt;p&gt;Some tests require binary files (such as OSGi bundles) which under Apache conventions are not able to be
 * distributed in our source code release. This exception allows such tests to become "optional" so that they do not
 * cause test failures when running the tests on a source distribution.&lt;/p&gt;
 *
 * &lt;p&gt;Note that the single-string constructors expect the string to be the simple name of the classpath resource that
 * is not available. The exception message is then derived from this. The two-string constructors take both the
 * resource name and an explicit exception message.&lt;/p&gt;
 
                </div><div><b>label:</b> code-design
                </div></div></li><li><div>
                *
     * Get the name of the classpath resource that could not be loaded.
     *
     * @return the name of the classpath resource whose absence caused this exception.
     
              </div></li><li><div><div><b>comment:</b>  just make sure we clean up the resource
                </div><div><b>label:</b> code-design
                </div></div></li><li><div>
                *
     * Asserts that a resource is available on the classpath; otherwise, throws {@link TestResourceUnavailableException}
     *
     * Note that this will use the same classloader that was used to load this class.
     *
     * @param resourceName the classpath resource name, e.g.
     *                     &lt;code&gt;/brooklyn/osgi/brooklyn-test-osgi-entities.jar&lt;/code&gt;
     
              </div></li></ol></div><div><b>git_commits:</b> <ol><li><div><div><b>summary:</b> Merge and close #365 [BROOKLYN-29]
                </div><div><b>message:</b> Merge and close #365 [BROOKLYN-29]

                </div></div></li></ol></div><div><b>github_issues:</b> <ol></ol></div><div><b>github_issues_comments:</b> <ol></ol></div><div><b>github_pulls:</b> <ol><li><div><div><b>title:</b> Make binary files optional
                </div><div><b>body:</b> We are unable, by Apache convention, to include binary files in our source code releases. But we are allowed to make a source release that is a subset of our Git repository. Therefore, we are able to make a source release that simply excludes binary files.

These changes modify tests that rely on binary files to gracefully handle the lack of binary test resources. This is done by throwing a derivative of SkipException, which causes TestNG to mark the test as "skipped" (neither failed, nor passed)

                </div></div></li><li><div><div><b>title:</b> Make binary files optional
                </div><div><b>body:</b> We are unable, by Apache convention, to include binary files in our source code releases. But we are allowed to make a source release that is a subset of our Git repository. Therefore, we are able to make a source release that simply excludes binary files.

These changes modify tests that rely on binary files to gracefully handle the lack of binary test resources. This is done by throwing a derivative of SkipException, which causes TestNG to mark the test as "skipped" (neither failed, nor passed)

                </div></div></li><li><div><div><b>title:</b> Make binary files optional
                </div><div><b>body:</b> We are unable, by Apache convention, to include binary files in our source code releases. But we are allowed to make a source release that is a subset of our Git repository. Therefore, we are able to make a source release that simply excludes binary files.

These changes modify tests that rely on binary files to gracefully handle the lack of binary test resources. This is done by throwing a derivative of SkipException, which causes TestNG to mark the test as "skipped" (neither failed, nor passed)

                </div></div></li><li><div><div><b>title:</b> Make binary files optional
                </div><div><b>body:</b> We are unable, by Apache convention, to include binary files in our source code releases. But we are allowed to make a source release that is a subset of our Git repository. Therefore, we are able to make a source release that simply excludes binary files.

These changes modify tests that rely on binary files to gracefully handle the lack of binary test resources. This is done by throwing a derivative of SkipException, which causes TestNG to mark the test as "skipped" (neither failed, nor passed)

                </div></div></li><li><div><div><b>title:</b> Make binary files optional
                </div><div><b>body:</b> We are unable, by Apache convention, to include binary files in our source code releases. But we are allowed to make a source release that is a subset of our Git repository. Therefore, we are able to make a source release that simply excludes binary files.

These changes modify tests that rely on binary files to gracefully handle the lack of binary test resources. This is done by throwing a derivative of SkipException, which causes TestNG to mark the test as "skipped" (neither failed, nor passed)

                </div></div></li><li><div><div><b>title:</b> Make binary files optional
                </div><div><b>body:</b> We are unable, by Apache convention, to include binary files in our source code releases. But we are allowed to make a source release that is a subset of our Git repository. Therefore, we are able to make a source release that simply excludes binary files.

These changes modify tests that rely on binary files to gracefully handle the lack of binary test resources. This is done by throwing a derivative of SkipException, which causes TestNG to mark the test as "skipped" (neither failed, nor passed)

                </div><div><b>label:</b> code-design
                </div></div></li><li><div><div><b>title:</b> Make binary files optional
                </div><div><b>body:</b> We are unable, by Apache convention, to include binary files in our source code releases. But we are allowed to make a source release that is a subset of our Git repository. Therefore, we are able to make a source release that simply excludes binary files.

These changes modify tests that rely on binary files to gracefully handle the lack of binary test resources. This is done by throwing a derivative of SkipException, which causes TestNG to mark the test as "skipped" (neither failed, nor passed)

                </div></div></li></ol></div><div><b>github_pulls_comments:</b> <ol><li><div>
                [incubator-brooklyn-pull-requests #416](https://builds.apache.org/job/incubator-brooklyn-pull-requests/416/) SUCCESS
This pull request looks good

              </div></li><li><div>
                Any comments on this PR? Would be good to get a decision either way and get the release process moving again!

              </div></li><li><div>
                Look good, but needs rebased before it can be merged.

              </div></li><li><div>
                Thanks @grkvlt - I've rebased it and will now merge.

              </div></li><li><div>
                [incubator-brooklyn-pull-requests #440](https://builds.apache.org/job/incubator-brooklyn-pull-requests/440/) SUCCESS
This pull request looks good

              </div></li></ol></div><div><b>github_pulls_reviews:</b> <ol></ol></div><div><b>jira_issues:</b> <ol><li><div><div><b>summary:</b> Verify no binaries in source release
                </div><div><b>description:</b> The source code contains a "hello world" WAR file used for some integration tests. Other projects have hit a speed bump with their source releases containing binaries, so we will likely hit the same problems. Search the source tree for all cases where we may be including binary files. Determine how other projects have addressed these problems and apply similar fixes to Brooklyn.
                </div></div></li></ol></div><div><b>jira_issues_comments:</b> <ol><li><div>
                Whilst adding the apache licence header, I found the following binaries (not including .png etc):

./software/nosql/src/test/resources/solr/example.tgz
./core/src/test/resources/hello-world.war
./examples/simple-nosql-cluster/src/main/resources/cumulusrdf.war
./sandbox/examples/src/main/resources/hello-world.war
./sandbox/examples/src/main/resources/swf-booking-mvc.war
./software/webapp/src/test/resources/hello-world.war
./software/webapp/src/test/resources/seam-booking-as6.war
./software/webapp/src/test/resources/seam-booking-as7.war
./software/webapp/src/test/resources/swf-booking-mvc.war
./usage/launcher/src/test/resources/hello-world.war
./usage/qa/src/main/resources/hello-world.war
              </div></li><li><div><div><b>body:</b> Martin, can you provide an update on this issue? Is your work in progress publicly accessible in case someone else takes over this issue?
                </div><div><b>label:</b> requirement
                </div></div></li><li><div><div><b>body:</b> I made good progress switching over from hello-world.war to brooklyn-example-hello-world-webapp.war. For the most part, it's just tests looking for a 200, but there are a couple of test that look for more, so I've moved the functionality into brooklyn-example-hello-world-webapp.war. Also added some pom-foo to add the war as a dependency - NOTE: this needs to be run (i.e. mvn clean install) after an IDE 'clean'

Current known issue: the nginx live tests are failing
                </div><div><b>label:</b> code-design
                </div></div></li><li><div>
                P.S. mean to say that the code is available here: https://github.com/Nakomis/incubator-brooklyn/compare/BROOKLYN-29-remove-hello-world-war
              </div></li><li><div><div><b>body:</b> I believe I have resolved this in the last two commits of https://github.com/apache/incubator-brooklyn/pull/179 .

The resolutions are as follows:

./core/src/test/resources/hello-world.war - accompanying text file added; sources included in WAR (written by us) and the WAR is an artifact used only for testing (not included in the distributables)

./software/webapp/src/test/resources/hello-world.war - removed, inherits from core tests
./usage/launcher/src/test/resources/hello-world.war - removed, inherits from core tests
./usage/qa/src/main/resources/hello-world.war - removed, inherits from core tests, refactored so this is sufficient

./software/webapp/src/test/resources/seam-booking-as6.war
./software/webapp/src/test/resources/seam-booking-as7.war
./software/webapp/src/test/resources/swf-booking-mvc.war
  - all three above removed (either not used or replaced by hello-world.war)

./sandbox/examples/src/main/resources/hello-world.war
./sandbox/examples/src/main/resources/swf-booking-mvc.war
  - entire sandbox/examples removed (very very old!)

./software/nosql/src/test/resources/solr/example.tgz - accompanying text file added; the tarball is purely source files used for example (not included in the distributables)

./examples/simple-nosql-cluster/src/main/resources/cumulusrdf.war - removed, replaced with reference to hosted version at https://cumulusrdf.googlecode.com/svn/wiki/downloads/cumulusrdf-1.0.1.war

[~Nakomis] this does not build on your change as it makes the build much more complex (examples required to be built before you can run integration tests).  if it is required then i suggest we move hello-world out to a separate project where it can be hosted.  (in fact this might be a good idea for our example webapps in any case).
                </div><div><b>label:</b> code-design
                </div></div></li><li><div>
                it would be nice to purge all trace of these binaries from the git history.  they make a clone far larger than it needs to be.  that's a separate discussion but if you have thoughts let me know.
              </div></li><li><div>
                I am still seeing these files that are giving me cause for concern:

- examples/simple-nosql-cluster/src/main/resources/cumulusrdf-0.6.1-pre.jar
- examples/simple-nosql-cluster/src/main/resources/cumulusrdf.war
- core/src/test/resources/brooklyn/entity/rebind/brooklyn-AppInCatalog.jar
- core/src/test/resources/brooklyn/osgi/brooklyn-test-osgi-entities.jar
- software/messaging/src/test/resources/qpid-test-plugin.jar
- software/nosql/src/main/resources/brooklyn/entity/nosql/cassandra/cassandra-multicloud-snitch.jar
- software/osgi/src/test/resources/hello-world.jar
- usage/qa/src/main/resources/hello-world.war
- and all the files in sandbox/examples/simple-open-loop-policy/localrepo

              </div></li><li><div>
                Aled has addressed a number of this in https://github.com/apache/incubator-brooklyn/pull/295.
I have addressed the remainder of this list in https://github.com/apache/incubator-brooklyn/pull/299.

              </div></li><li><div>
                Argh, just found another set of jar files at examples/simple-messaging-pubsub/resources/lib :-(
I'm out of time right now so we'll have to look at this tomorrow.
              </div></li><li><div>
                I can't see a `resources/lib` in `examples/simple-messaging-pubsub/`. That looks like a build artifact, rather than something in version control. See https://github.com/apache/incubator-brooklyn/tree/master/examples/simple-messaging-pubsub
              </div></li><li><div>
                All known binaries have been either removed, or their source code exists inside this repository. Marking resolved.
              </div></li></ol></div></div></html>