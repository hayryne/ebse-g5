<!DOCTYPE html><html><div class="item-title">
        Item 80
      </div> <div class="item-details"><div><b>git_comments:</b> <ol></ol></div><div><b>git_commits:</b> <ol><li><div><div><b>summary:</b> SOLR-9047: zkcli should allow alternative locations for log4j configuration
                </div><div><b>message:</b> SOLR-9047: zkcli should allow alternative locations for log4j configuration

                </div></div></li></ol></div><div><b>github_issues:</b> <ol></ol></div><div><b>github_issues_comments:</b> <ol></ol></div><div><b>github_pulls:</b> <ol></ol></div><div><b>github_pulls_comments:</b> <ol></ol></div><div><b>github_pulls_reviews:</b> <ol></ol></div><div><b>jira_issues:</b> <ol><li><div><div><b>summary:</b> zkcli should allow alternative locations for log4j configuration
                </div><div><b>description:</b> zkcli uses the log4j configuration in the local directory:
{code}
sdir="`dirname \"$0\"`"

PATH=$JAVA_HOME/bin:$PATH $JVM -Dlog4j.configuration=file:$sdir/log4j.properties -classpath "$sdir/../../solr-webapp/webapp/WEB-INF/lib/*:$sdir/../../lib/ext/*" org.apache.solr.cloud.ZkCLI ${1+"$@"}
{code}

which is a reasonable default, but often people want to use a "global" log4j configuration.  For example, one may define a log4j configuration that writes to an external log directory and want to point to this rather than copying it to each source checkout.
                </div></div></li></ol></div><div><b>jira_issues_comments:</b> <ol><li><div>
                is it time to just kill zkcli and move it's functionality into bin/solr ?
              </div></li><li><div>
                bq. is it time to just kill zkcli and move it's functionality into bin/solr ?

probably :).  In any case that would be a 7.x change, right?  This would be useful in 6.x imo.
              </div></li><li><div>
                Here's a patch that lets you specify the log4j configuration file via the  LOG4J_PROPS environment variable.

I'd appreciate someone looking at the windows code since I can't test.
              </div></li><li><div><div><b>body:</b> Looks okay to me, though caps style doesn't match existing in the batch file.
                </div><div><b>label:</b> code-design
                </div></div></li><li><div><div><b>body:</b> Here's a patch that matches the caps style (I had been copying the style from solr.cmd)
                </div><div><b>label:</b> code-design
                </div></div></li><li><div><div><b>body:</b> Looks okay to me too (though can't test on windows either).
                </div><div><b>label:</b> test
                </div></div></li><li><div>
                Commit 0dec8f9415a9d97a93870a416e96366db60a72fa in lucene-solr's branch refs/heads/master from [~gchanan]
[ https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=0dec8f9 ]

SOLR-9047: zkcli should allow alternative locations for log4j configuration

              </div></li><li><div>
                Commit 67ebfb1cc257808e53f74d9c38a9729ded87a330 in lucene-solr's branch refs/heads/branch_6x from [~gchanan]
[ https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=67ebfb1 ]

SOLR-9047: zkcli should allow alternative locations for log4j configuration

              </div></li><li><div>
                Thanks for taking a look Mark and Christine.  Committed to trunk and 6.1.
              </div></li><li><div>
                Commit ad152d23d5e70121f5e6ddc4bae5dabb288b96c2 in lucene-solr's branch refs/heads/branch_6x from [~gchanan]
[ https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=ad152d2 ]

SOLR-9047: fix windows script

              </div></li><li><div>
                Commit 6e2d80d3a8f4434499bbeee81afa47a52252c143 in lucene-solr's branch refs/heads/master from [~gchanan]
[ https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=6e2d80d ]

SOLR-9047: fix windows script

              </div></li><li><div>
                
Manually correcting fixVersion per Step #S5 of LUCENE-7271

              </div></li><li><div>
                Commit 66c16651baa88a2dcdef392e2f76870334136821 in lucene-solr's branch refs/heads/branch_5_5 from [~gchanan]
[ https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=66c1665 ]

SOLR-9047: zkcli should allow alternative locations for log4j configuration

              </div></li><li><div>
                Commit 1eb3093311682a2db108dd5e6d6f4aea52bee973 in lucene-solr's branch refs/heads/branch_5x from [~gchanan]
[ https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=1eb3093 ]

SOLR-9047: zkcli should allow alternative locations for log4j configuration

              </div></li><li><div>
                Commit c64b1194af9328c4da7bc5f5f08cbac93db3e7bf in lucene-solr's branch refs/heads/branch_5x from [~steve_rowe]
[ https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=c64b119 ]

SOLR-9047: Remove misplaced CHANGES entry

              </div></li><li><div>
                Reopening to backport to 6.0.2, 5.6 and 5.5.2.
              </div></li><li><div>
                Bulk close issues released with 5.5.2.
              </div></li></ol></div></div></html>