<!DOCTYPE html><html><div class="item-title">
        Item 80
      </div> <div class="item-details"><div><b>git_comments:</b> <ol><li><div>
                
 * Licensed to the Apache Software Foundation (ASF) under one or more
 * contributor license agreements.  See the NOTICE file distributed with
 * this work for additional information regarding copyright ownership.
 * The ASF licenses this file to You under the Apache License, Version 2.0
 * (the "License"); you may not use this file except in compliance with
 * the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 
              </div></li><li><div>
                *
   * Create a new LowerCaseFilter, that normalizes token text to lower case.
   * 
   * @param in TokenStream to filter
   
              </div></li><li><div>
                *
 * Normalizes token text to lower case.
 * &lt;p&gt;
 * This class moved to Lucene Core, but a reference in the {@code analysis/common} module
 * is preserved for documentation purposes and consistency with filter factory.
 * @see org.apache.lucene.analysis.LowerCaseFilter
 * @see LowerCaseFilterFactory
 
              </div></li><li><div>
                
 * Licensed to the Apache Software Foundation (ASF) under one or more
 * contributor license agreements.  See the NOTICE file distributed with
 * this work for additional information regarding copyright ownership.
 * The ASF licenses this file to You under the Apache License, Version 2.0
 * (the "License"); you may not use this file except in compliance with
 * the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 
              </div></li><li><div>
                *
   * Constructs a filter which removes words from the input TokenStream that are
   * named in the Set.
   * 
   * @param in
   *          Input stream
   * @param stopWords
   *          A {@link org.apache.lucene.analysis.util.CharArraySet} representing the stopwords.
   * @see #makeStopSet(java.lang.String...)
   
              </div></li><li><div>
                *
 * Removes stop words from a token stream.
 * &lt;p&gt;
 * This class moved to Lucene Core, but a reference in the {@code analysis/common} module
 * is preserved for documentation purposes and consistency with filter factory.
 * @see org.apache.lucene.analysis.StopFilter
 * @see StopFilterFactory
 
              </div></li><li><div>
                *
   * Constructs a filter which removes words from the input TokenStream that are
   * named in the Set.
   * 
   * @param in
   *          Input stream
   * @param stopWords
   *          A {@link org.apache.lucene.analysis.CharArraySet} representing the stopwords.
   * @see #makeStopSet(java.lang.String...)
   
              </div></li><li><div>
                
 * Licensed to the Apache Software Foundation (ASF) under one or more
 * contributor license agreements.  See the NOTICE file distributed with
 * this work for additional information regarding copyright ownership.
 * The ASF licenses this file to You under the Apache License, Version 2.0
 * (the "License"); you may not use this file except in compliance with
 * the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 
              </div></li><li><div>
                *
   * Creates a map from the mappings in another map. 
   *
   * @param c
   *          a map whose mappings to be copied
   * @param ignoreCase
   *          &lt;code&gt;false&lt;/code&gt; if and only if the set should be case sensitive
   *          otherwise &lt;code&gt;true&lt;/code&gt;.
   
              </div></li><li><div>
                *
   * Create map with enough capacity to hold startSize terms
   *
   * @param startSize
   *          the initial capacity
   * @param ignoreCase
   *          &lt;code&gt;false&lt;/code&gt; if and only if the set should be case sensitive
   *          otherwise &lt;code&gt;true&lt;/code&gt;.
   
              </div></li><li><div>
                *
 * A simple class that stores key Strings as char[]'s in a
 * hash table. Note that this is not a general purpose
 * class.  For example, it cannot remove items from the
 * map, nor does it resize its hash table to be smaller,
 * etc.  It is designed to be quick to retrieve items
 * by char[] keys without the necessity of converting
 * to a String first.
 * @deprecated This class moved to Lucene-Core module:
 *  {@link org.apache.lucene.analysis.CharArrayMap}
 
              </div></li><li><div>
                
 * Licensed to the Apache Software Foundation (ASF) under one or more
 * contributor license agreements.  See the NOTICE file distributed with
 * this work for additional information regarding copyright ownership.
 * The ASF licenses this file to You under the Apache License, Version 2.0
 * (the "License"); you may not use this file except in compliance with
 * the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 
              </div></li><li><div>
                *
   * Create set with enough capacity to hold startSize terms
   * 
   * @param startSize
   *          the initial capacity
   * @param ignoreCase
   *          &lt;code&gt;false&lt;/code&gt; if and only if the set should be case sensitive
   *          otherwise &lt;code&gt;true&lt;/code&gt;.
   
              </div></li><li><div>
                *
   * Creates a set from a Collection of objects. 
   * 
   * @param c
   *          a collection whose elements to be placed into the set
   * @param ignoreCase
   *          &lt;code&gt;false&lt;/code&gt; if and only if the set should be case sensitive
   *          otherwise &lt;code&gt;true&lt;/code&gt;.
   
              </div></li><li><div>
                *
 * A simple class that stores Strings as char[]'s in a
 * hash table.  Note that this is not a general purpose
 * class.  For example, it cannot remove items from the
 * set, nor does it resize its hash table to be smaller,
 * etc.  It is designed to be quick to test if a char[]
 * is in the set without the necessity of converting it
 * to a String first.
 *
 * &lt;P&gt;
 * &lt;em&gt;Please note:&lt;/em&gt; This class implements {@link java.util.Set Set} but
 * does not behave like it should in all cases. The generic type is
 * {@code Set&lt;Object&gt;}, because you can add any object to it,
 * that has a string representation. The add methods will use
 * {@link Object#toString} and store the result using a {@code char[]}
 * buffer. The same behavior have the {@code contains()} methods.
 * The {@link #iterator()} returns an {@code Iterator&lt;char[]&gt;}.
 * @deprecated This class moved to Lucene-Core module:
 *  {@link org.apache.lucene.analysis.CharArraySet}
 
              </div></li><li><div>
                
 * Licensed to the Apache Software Foundation (ASF) under one or more
 * contributor license agreements.  See the NOTICE file distributed with
 * this work for additional information regarding copyright ownership.
 * The ASF licenses this file to You under the Apache License, Version 2.0
 * (the "License"); you may not use this file except in compliance with
 * the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 
              </div></li><li><div>
                *
   * Create a new {@link FilteringTokenFilter}.
   * @param in      the {@link TokenStream} to consume
   
              </div></li><li><div>
                *
 * Abstract base class for TokenFilters that may remove tokens.
 * You have to implement {@link #accept} and return a boolean if the current
 * token should be preserved. {@link #incrementToken} uses this method
 * to decide if a token should be passed to the caller.
 * @deprecated This class moved to Lucene-Core module:
 *  {@link org.apache.lucene.analysis.FilteringTokenFilter}
 
              </div></li><li><div>
                *
   * Creates a new instance initialized with the given stopword set
   * 
   * @param stopwords
   *          the analyzer's stopword set
   
              </div></li><li><div>
                *
 * Base class for Analyzers that need to make use of stopword sets. 
 * @deprecated This class moved to Lucene-Core module:
 *  {@link org.apache.lucene.analysis.StopwordAnalyzerBase}
 
              </div></li><li><div>
                *
   * Creates a new Analyzer with an empty stopword set
   
              </div></li><li><div>
                
 * Licensed to the Apache Software Foundation (ASF) under one or more
 * contributor license agreements.  See the NOTICE file distributed with
 * this work for additional information regarding copyright ownership.
 * The ASF licenses this file to You under the Apache License, Version 2.0
 * (the "License"); you may not use this file except in compliance with
 * the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 
              </div></li><li><div>
                 this cast should always work, because the stop set is final!
              </div></li><li><div>
                *
   * Reads lines from a Reader and adds every line as an entry to a CharArraySet (omitting
   * leading and trailing whitespace). Every line of the Reader should contain only
   * one word. The words need to be in lowercase if you make use of an
   * Analyzer which uses LowerCaseFilter (like StandardAnalyzer).
   *
   * @param reader Reader containing the wordlist
   * @return A {@link CharArraySet} with the reader's words
   
              </div></li><li><div>
                *
   * Reads lines from a Reader and adds every non-comment line as an entry to a CharArraySet (omitting
   * leading and trailing whitespace). Every line of the Reader should contain only
   * one word. The words need to be in lowercase if you make use of an
   * Analyzer which uses LowerCaseFilter (like StandardAnalyzer).
   *
   * @param reader Reader containing the wordlist
   * @param comment The string representing a comment.
   * @return A CharArraySet with the reader's words
   
              </div></li><li><div>
                *
   * Reads lines from a Reader and adds every line as an entry to a CharArraySet (omitting
   * leading and trailing whitespace). Every line of the Reader should contain only
   * one word. The words need to be in lowercase if you make use of an
   * Analyzer which uses LowerCaseFilter (like StandardAnalyzer).
   *
   * @param reader Reader containing the wordlist
   * @param result the {@link CharArraySet} to fill with the readers words
   * @return the given {@link CharArraySet} with the reader's words
   
              </div></li><li><div>
                 skip blank lines
              </div></li><li><div>
                *
   * Accesses a resource by name and returns the (non comment) lines containing
   * data using the given character encoding.
   *
   * &lt;p&gt;
   * A comment line is any line that starts with the character "#"
   * &lt;/p&gt;
   *
   * @return a list of non-blank non-comment lines with whitespace trimmed
   * @throws IOException If there is a low-level I/O error.
   
              </div></li><li><div>
                 skip initial bom marker
              </div></li><li><div>
                
 * Licensed to the Apache Software Foundation (ASF) under one or more
 * contributor license agreements.  See the NOTICE file distributed with
 * this work for additional information regarding copyright ownership.
 * The ASF licenses this file to You under the Apache License, Version 2.0
 * (the "License"); you may not use this file except in compliance with
 * the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 
              </div></li><li><div>
                *
 * Loader for text files that represent a list of stopwords.
 * 
 * @see IOUtils to obtain {@link Reader} instances
 * @lucene.internal
 * @deprecated This class moved to Lucene-Core module:
 *  {@link org.apache.lucene.analysis.WordlistLoader}
 
              </div></li><li><div>
                 skip comments
              </div></li><li><div>
                *
   * Reads stopwords from a stopword list in Snowball format.
   * &lt;p&gt;
   * The snowball format is the following:
   * &lt;ul&gt;
   * &lt;li&gt;Lines may contain multiple words separated by whitespace.
   * &lt;li&gt;The comment character is the vertical line (&amp;#124;).
   * &lt;li&gt;Lines may contain trailing comments.
   * &lt;/ul&gt;
   * 
   * @param reader Reader containing a Snowball stopword list
   * @return A {@link CharArraySet} with the reader's words
   
              </div></li><li><div>
                *
   * Reads lines from a Reader and adds every non-comment line as an entry to a CharArraySet (omitting
   * leading and trailing whitespace). Every line of the Reader should contain only
   * one word. The words need to be in lowercase if you make use of an
   * Analyzer which uses LowerCaseFilter (like StandardAnalyzer).
   *
   * @param reader Reader containing the wordlist
   * @param comment The string representing a comment.
   * @param result the {@link CharArraySet} to fill with the readers words
   * @return the given {@link CharArraySet} with the reader's words
   
              </div></li><li><div>
                *
   * Reads a stem dictionary. Each line contains:
   * &lt;pre&gt;word&lt;b&gt;\t&lt;/b&gt;stem&lt;/pre&gt;
   * (i.e. two tab separated words)
   *
   * @return stem dictionary that overrules the stemming algorithm
   * @throws IOException If there is a low-level I/O error.
   
              </div></li><li><div>
                *
   * Reads stopwords from a stopword list in Snowball format.
   * &lt;p&gt;
   * The snowball format is the following:
   * &lt;ul&gt;
   * &lt;li&gt;Lines may contain multiple words separated by whitespace.
   * &lt;li&gt;The comment character is the vertical line (&amp;#124;).
   * &lt;li&gt;Lines may contain trailing comments.
   * &lt;/ul&gt;
   * 
   * @param reader Reader containing a Snowball stopword list
   * @param result the {@link CharArraySet} to fill with the readers words
   * @return the given {@link CharArraySet} with the reader's words
   
              </div></li><li><div>
                * no instance 
              </div></li><li><div>
                 a supported option via WhitespaceTokenizerFactory
 class from core, but StopFilterFactory creates one from this module
 class from core, but LowerCaseFilterFactory creates one from this module
              </div></li><li><div>
                 clones of core's filters:
              </div></li></ol></div><div><b>git_commits:</b> <ol><li><div><div><b>summary:</b> LUCENE-7318: Fix backwards compatibility issues around StandardAnalyzer and its components, introduced with Lucene 6.2.0. The moved classes were restored in their original packages: LowercaseFilter and StopFilter, as well as several utility classes
                </div><div><b>message:</b> LUCENE-7318: Fix backwards compatibility issues around StandardAnalyzer and its components, introduced with Lucene 6.2.0. The moved classes were restored in their original packages: LowercaseFilter and StopFilter, as well as several utility classes

                </div></div></li></ol></div><div><b>github_issues:</b> <ol></ol></div><div><b>github_issues_comments:</b> <ol></ol></div><div><b>github_pulls:</b> <ol></ol></div><div><b>github_pulls_comments:</b> <ol></ol></div><div><b>github_pulls_reviews:</b> <ol></ol></div><div><b>jira_issues:</b> <ol><li><div><div><b>summary:</b> Graduate StandardAnalyzer out of analyzers module into core
                </div><div><b>description:</b> Spinoff from LUCENE-7314:

{{StandardAnalyzer}} has progressed substantially since we broke out the analyzers module ... it now follows a real Unicode standard (UAX #29 Unicode Text Segmentation).  It's also much faster than it used to be, since it switched to JFlex a while back.  Many bug fixes, etc.

I think it would make a good default for most Lucene users, and we should graduate it from the analyzers module into core, and make it the default for {{IndexWriter}}.

It's really quite crazy that users must go digging in the analyzers module to get started with Lucene ... we don't make them dig through the codecs module to find a good default codec ...
                </div></div></li></ol></div><div><b>jira_issues_comments:</b> <ol><li><div>
                +1
              </div></li><li><div>
                Rote patch, moving {{StandardAnalyzer/Tokenizer}}, and the utility
classes it uses, to core's oal.analysis module.

I left {{ClassicAnalyzer}} and {{UAX29URLEmailTokenizer}} in the
analysis module.

"ant test" passes but precommit is still angry about some javadocs
... I'll iterate.

The one non-rote change I did was to move the
{{ENGLISH_STOP_WORDS_SET}} from {{StopAnalyzer}} (still in analyzers
module) to {{StandardAnalyzer}}.

I also added "jflex" target to core's build.xml, to regenerate the
tokenizer.

I left {{ClassicAnalyzer}}, and the factories, in the analysis/common
module.

              </div></li><li><div>
                Mike, you marked this as fixed in 6.2, but AFAICT you didn't commit to branch_6x?
              </div></li><li><div>
                Woops, thanks for catching [~steve_rowe]!
              </div></li><li><div>
                Commit ba922148307248893bf70d02b28efdec9882f348 in lucene-solr's branch refs/heads/branch_6x from Mike McCandless
[ https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=ba92214 ]

LUCENE-7318: graduate StandardAnalyzer and make it the default for IndexWriterConfig

              </div></li><li><div>
                Bulk close resolved issues after 6.2.0 release.
              </div></li><li><div>
                After upgrading an app to 6.2, I noticed that CharArraySet has moved both to a different module and to a different different package.  That happened in this issue.  CharArraySet is not marked lucene.experimental/internal.  I think the CHANGES.txt upgrade nodes could be modified, even though 6.2 is already released?  Also... I think it was worth mentioning in the summary/dialog here.
              </div></li><li><div><div><b>body:</b> Same issue here: it also affects some of the most important tokenfilters like StopFilter, LowerCaseFilter and their superclasses. This is a really hard and unexpected change, because in a minor update we moved some of the most important classes to other packages.

At least we should have kept a "deprecated" subclass at the old place. This caused lots of trouble for my clients :( There was also a question on java-user a minute ago.

I'd suggest to add a 6.2.1 release with the classes moved back at their old package, or alternatively a deprecated subclass without additional functionality. This change breaks binary compatibility of any analysis plugin (and there are tons out there).
                </div><div><b>label:</b> code-design
                </div></div></li><li><div>
                I reopen this for discussion and maybe a fix in next release (rename classes back to their original name).
              </div></li><li><div>
                Yes, i get some cannot fine symbol messages too when compiling:

* LowerCaseFilter
* StopFilter
* CharArraySet
* StopwordAnalyzerBase
* CharacterUtils
* TokenStreamComponents
* WordListLoader

And probably more since compiling just stops after a few errors.

              </div></li><li><div>
                By the way, i'm actually fine with this change but now i just have no idea what's happening when upgrading, and this isn't mentioned as API change in CHANGES.txt. Also, this issue description also doesn't clearly state how to deal with this API change :)
              </div></li><li><div>
                There are changes to Solr classes also in this commit, and the need for Solr changes in a LUCENE issue should probably ring an alarm bell that there may be breaking API changes...
+1 to adding back deprecated versions of the removed classes in 6.2.1 for 6.x
              </div></li><li><div>
                Sorry everyone, I am +1 to put back deprecated subclasses in the original package.
              </div></li><li><div>
                I can look into this later this evening!

If you want to do it: you need to remove the final modifier from the TokenFilter and add it to incrementToken() to make the assert happy. Then you can subclass. The alternative is to add a wrapper filter.
              </div></li><li><div><div><b>body:</b> bq. I think it would make a good default for most Lucene users, and we should graduate it from the analyzers module into core, and make it the default for IndexWriter.

This "StandardAnalyzer" is specific to English, as it removes English stopwords.
That seems to be an odd choice now for a few reasons:
- It was argued in the past (rather vehemently) that Solr should not prefer english in it's default "text" field
- AFAIK, removing stopwords is no longer considered best practice.

Given that removal of english stopwords is the only thing that really makes this analyzer english-centric (and given the negative impact that can have on other languages), it seems like the stopword filter should be removed from StandardAnalyzer.
                </div><div><b>label:</b> code-design
                </div></div></li><li><div>
                Yonik: good idea. This would at least allow to move back StopFilter and all its super classes back from where they came from!
              </div></li><li><div>
                For Filters specifically, they are now in a different package/module from their own Factories. That's kind of unusual as well.
              </div></li><li><div>
                As we plan to release 6.2.1 quite soon, I will for now add back the "deprecated" subclasses in the analyzers/common module. The decision if the StopFilter should stay in StandardAnalyzer and the whole base classes in core is a different decision and should be discussed in a separate issue.
              </div></li><li><div>
                I opened LUCENE-7444 for a general discussion. I looked into the code. I only see the choice of first reverting everything in this issue and start from scratch in LUCENE-7444. Unfortunately this wouldn't solve the problem for analysis plugins shipped with Solr or Elasticsearch that are affected by classname changes of some of the most important analysis components used in almost any custom analysis plugin out there.
              </div></li><li><div><div><b>body:</b> Hmm, why not leave {{StopFilter}}, etc., in core, and put (deprecated) subclasses in the old package names?
                </div><div><b>label:</b> code-design
                </div></div></li><li><div>
                Or deprecate what was done in this issue instead. Having just one or two analysis components separated out form all the others doesn't make a lot of sense.
Example: LowerCaseFilter and UpperCaseFilter are now in different packages and different jars?!
Steering people toward using StopFilter by default isn't necessarily a good idea either.
              </div></li><li><div><div><b>body:</b> bq. Or deprecate what was done in this issue instead

I don't think we should do that: {{StandardAnalyzer}} makes a great default, now, finally.  It's based on a Unicode standard (UAX 29).

bq. Example: LowerCaseFilter and UpperCaseFilter are now in different packages and different jars?!

But I think this reflects typical usage?  {{UpperCaseFilter}} is rarely used.

bq. Steering people toward using StopFilter by default isn't necessarily a good idea either.

Yes, there are difficult tradeoffs if you filter stop words or not, but for better or worse, many apps do in fact need to filter stop words, and I think it's important we make it easy for apps to use the default analyzer ({{StandardAnalyzer}}) with stop words, and we should not remove it from core.
                </div><div><b>label:</b> code-design
                </div></div></li><li><div><div><b>body:</b> bq. Hmm, why not leave StopFilter, etc., in core, and put (deprecated) subclasses in the old package names?

I plan to do this for 6.x and 6.2.1, but I won't deprecate the duplicates for now. So I will just subclass in analyzers/common, although this is still a lot of code duplication (most classes only have ctors that need to be cloned). This would also make it consistent with the Factory classes. Those factory classes should use/instantiate the common variants.

All other discussion should be placed in LUCENE-7444. Once this is discussed and finalized, we can decide in 6.3, which classes to deprecate (if we do this at all). My personal opinion is:
- Move StandardTokenizer to core (no package name change, so no backwards layer needed)
- Move no-op StandardFilter to core, too, but deprecate from beginning (no package name change, so no backwards layer needed)
- Add all "original" classes back in analyzers/common by subclassing, but don't deprecate

Later-on (LUCENE-7444):
- Remove StopFilter. For first time users, the decision of Stop words or not should be simple and our recommendation: no stop words please for something thats called "Standard"
- StopFilter and all its superclasses and utility classes move back into analysis/common. I'd also suggest this for LowercaseFilter and just clone it in core as a package-private class inside oal/analysis/standard.
- The CharacterUtils can stay in core (its @lucene.internal anyways), but moved completely to utils package (I have no strong opinion there)

People that want to have stopwords can always define their own Analyzer using CustomAnalyzer.
                </div><div><b>label:</b> code-design
                </div></div></li><li><div>
                bq. Example: LowerCaseFilter and UpperCaseFilter are now in different packages and different jars?!

I agree thats not how it should look like. The package structure of Lucene 4 was so great and now we are back at Lucene 1.0! Sorry, no-go for me.

bq. Steering people toward using StopFilter by default isn't necessarily a good idea either.

I fully agree. As said in previous comment. Somebody who want to use a StopFilter can do this very easy using CustomAnalyzer. And thats all part of analysis/common. No need to do this in core.

People that have no idea about "stop words or not" should not need to deal with it. At least, do not provide English stop words by default for something that is advertised as language neutral.

P.S.: Stop words are empty by default in ES, too! (https://www.elastic.co/guide/en/elasticsearch/reference/current/analysis-standard-analyzer.html)
              </div></li><li><div><div><b>body:</b> +1 to subclass deprecated classes back in analyzers common with the original (6.1) package names for this issue for 6.2.1, and defer stop words discussion for LUCENE-7444.  I'll reply to your stop words comments over there.

The minor code dup is fine as long as the version in analyzers/common is deprecated (gone in 7.0).
                </div><div><b>label:</b> code-design
                </div></div></li><li><div>
                Here is a patch, restoring the classes in the analysis/common module! I did not deprecate anything for now (for 6.2.1) and also not for branch_6x until LUCENE-7444 is solved.

I did not clone CharacterUtils. WordlistLoader was cloned completely, because you cannot subclass static classes.

The factories now create the analysis/common's variant, so they are consistent and the tests don't fail (with Mike's change, the factory tests for LowerCase and StopFilter did not even work at all!!!)
              </div></li><li><div>
                Thanks Uwe, I'll review the patch.  But quickly on:

bq. with Mike's change, the factory tests for LowerCase and StopFilter did not even work at all!!!

I'm confused, why are tests not failing here?
              </div></li><li><div>
                Because the test did not check what it should! It checked that all tokenstream components have corresponding factories. As you moved them to core, the test no longer checked for factory existence, as it was not seeing the classes. Once I added it back in common, it complains because the packages of returned implementation classes mismatched. This is why the factory returns the subclass, which is also more consistent (oal.analysis.core.LowerCaseFilterFactory returns oal.analysis.core.LowerCaseFilter, not oal.analysis.LowerCaseFilter).

I will post a new patch fixing 2 Solr tests soon. Running tests.
              </div></li><li><div>
                Patch fixing Solr tests (it actually reverts them).
              </div></li><li><div>
                Thanks [~thetaphi], the patch looks good.  I don't really like that the back compat classes are not deprecated, but I guess it's OK while we discuss LUCENE-7444.

There's a missing {{w}} in this comment: {{// class from core, but LoerCaseFilterFactory creates one from this module}}.
              </div></li><li><div><div><b>body:</b> My plan for 6.2.1 and 6.x is to deprecate all backwards classes except StopFilter and LowercaseFilter. Those are actually used by the factory classes and don't really hurt. It also makes the javadocs easier to understand.

In master I'd like to just add the StopFilter and LowercaseFilter classes for consistency with the factory. The other (deprecated) ones will be left out in master. This is a good way to fix the package naming consistency problems and give users a good overview on all available filters when displaying the analysis/common javadocs.

What do you think?
                </div><div><b>label:</b> code-design
                </div></div></li><li><div>
                +1, thanks [~thetaphi].
              </div></li><li><div>
                New patch with all classes deprecated, except StopFilter and LowercaseFilter that stay at their original location for better documentation and consistency with Filter factory. Documentation for this was added.

I will commit this later to 6.x and 6.2 branch, and forward-port the 2 filters to master, so we also get good documentation in master.

The remaining stuff can be discussed in the other issue, which is now unrelated.
              </div></li><li><div>
                I fixed the test comment locally, won't upload new patch!
              </div></li><li><div>
                +1, thanks [~thetaphi].
              </div></li><li><div>
                Commit 89f03655e3822226097142b59126e75c89a946f4 in lucene-solr's branch refs/heads/branch_6x from [~thetaphi]
[ https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=89f0365 ]

LUCENE-7318: Fix backwards compatibility issues around StandardAnalyzer and its components, introduced with Lucene 6.2.0. The moved classes were restored in their original packages: LowercaseFilter and StopFilter, as well as several utility classes

              </div></li><li><div>
                Commit 5b3e6deb2f19e917792c1b8f4909b9c28b2e7508 in lucene-solr's branch refs/heads/branch_6_2 from [~thetaphi]
[ https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=5b3e6de ]

LUCENE-7318: Fix backwards compatibility issues around StandardAnalyzer and its components, introduced with Lucene 6.2.0. The moved classes were restored in their original packages: LowercaseFilter and StopFilter, as well as several utility classes

# Conflicts:
#	lucene/CHANGES.txt

              </div></li><li><div>
                Commit b39fcc12023b978c2d93a9446596729ca0e0e464 in lucene-solr's branch refs/heads/master from [~thetaphi]
[ https://git-wip-us.apache.org/repos/asf?p=lucene-solr.git;h=b39fcc1 ]

LUCENE-7318: Forward port some changes (add StopFilter and LowercaseFilter at their original location)

              </div></li><li><div>
                Committed patch.
              </div></li><li><div>
                I committed to 6.x and 6.2 (including addition of deprecated classes). I also forward-ported the LowercaseFilter and StopFilter changes to master, so Javadocs of analysis/common module are consistent.
              </div></li><li><div>
                Closing after 6.2.1 release
              </div></li></ol></div></div></html>