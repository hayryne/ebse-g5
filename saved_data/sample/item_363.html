<!DOCTYPE html><html><div class="item-title">
        Item 363
      </div> <div class="item-details"><div><b>git_comments:</b> <ol><li><div>
                *
   * Add a new column to a nested struct.
   * &lt;p&gt;
   * The parent name is used to find the parent using {@link Schema#findField(String)}. If the
   * parent name is null, the new column will be added to the root as a top-level column. If parent
   * identifies a struct, a new column is added to that struct. If it identifies a list, the column
   * is added to the list element struct, and if it identifies a map, the new column is added to
   * the map's value struct.
   * &lt;p&gt;
   * The given name is used to name the new column and names containing "." are not handled
   * differently.
   * &lt;p&gt;
   * If type is a nested type, its field IDs are reassigned when added to the existing schema.
   *
   * @param parent name of the parent struct to the column will be added to
   * @param name name for the new column
   * @param type type for the new column
   * @param doc documentation string for the new column
   * @return this for method chaining
   * @throws IllegalArgumentException If parent doesn't identify a struct
   
              </div></li><li><div>
                *
   * Update a column in the schema to a new primitive type.
   * &lt;p&gt;
   * The name is used to find the column to update using {@link Schema#findField(String)}.
   * &lt;p&gt;
   * Only updates that widen types are allowed.
   * &lt;p&gt;
   * Columns may be updated and renamed in the same schema update.
   *
   * @param name name of the column to rename
   * @param newType replacement type for the column
   * @param newDoc replacement documentation string for the column
   * @return this for method chaining
   * @throws IllegalArgumentException If name doesn't identify a column in the schema or if this
   *                                  change introduces a type incompatibility or if it conflicts
   *                                  with other additions, renames, or updates.
   
              </div></li><li><div>
                *
   * Add a new top-level column.
   * &lt;p&gt;
   * Because "." may be interpreted as a column path separator or may be used in field names, it is
   * not allowed in names passed to this method. To add to nested structures or to add fields with
   * names that contain ".", use {@link #addColumn(String, String, Type)}.
   * &lt;p&gt;
   * If type is a nested type, its field IDs are reassigned when added to the existing schema.
   *
   * @param name name for the new column
   * @param type type for the new column
   * @param doc documentation string for the new column
   * @return this for method chaining
   * @throws IllegalArgumentException If name contains "."
   
              </div></li><li><div>
                *
   * Update a column in the schema to a new primitive type.
   * &lt;p&gt;
   * The name is used to find the column to update using {@link Schema#findField(String)}.
   * &lt;p&gt;
   * Columns may be updated and renamed in the same schema update.
   *
   * @param name name of the column to rename
   * @param newDoc replacement documentation string for the column
   * @return this for method chaining
   * @throws IllegalArgumentException If name doesn't identify a column in the schema or if this
   *                                  change introduces a type incompatibility or if it conflicts
   *                                  with other additions, renames, or updates.
   
              </div></li><li><div>
                 handle deletes
 handle updates
 rename is handled in struct, but struct needs the correct type from the field result
 handle adds
              </div></li><li><div>
                 merge with a rename or update, if present
              </div></li></ol></div><div><b>git_commits:</b> <ol><li><div><div><b>summary:</b> Add support for field documentation. (#59)
                </div><div><b>message:</b> Add support for field documentation. (#59)

This adds an optional documentation string to the field level in Iceberg schemas.

Support for doc strings is added to Spark field conversion and to the UpdateSchema API.

To store field documentation, this adds a "doc" field to each nested field in the JSON representation of types. The spec has also been updated. This is a forward compatible change. Older readers will ignore the new doc field.
                </div><div><b>label:</b> documentation
                </div></div></li></ol></div><div><b>github_issues:</b> <ol><li><div><div><b>title:</b> Add column comments to Iceberg schemas
                </div><div><b>body:</b> Iceberg schemas should allow storing comments as documentation for struct fields.
                </div></div></li><li><div><div><b>title:</b> Add column comments to Iceberg schemas
                </div><div><b>body:</b> Iceberg schemas should allow storing comments as documentation for struct fields.
                </div></div></li><li><div><div><b>title:</b> Add column comments to Iceberg schemas
                </div><div><b>body:</b> Iceberg schemas should allow storing comments as documentation for struct fields.
                </div></div></li></ol></div><div><b>github_issues_comments:</b> <ol><li><div>
                @govi20, I just saw your comment on the old issue. If you're still interested in working on this, feel free to open a PR!

You'll need to add a comment string to the field level in the type system. Basically, anything that gets an ID would be able to carry a comment. Next, you'd need to add those comments to the JSON parser for schemas to ensure they are persisted in table metadata. I think there should also be a flag that turns on comment serialization because we don't want them everywhere -- like when we send a schema to tasks -- we just want them in table metadata.
              </div></li></ol></div><div><b>github_pulls:</b> <ol><li><div><div><b>title:</b> Add support for field documentation.
                </div><div><b>body:</b> This adds an optional documentation string to the field level in Iceberg schemas.

Support for doc strings is added to Spark field conversion and to the UpdateSchema API.

To store field documentation, this adds a "doc" field to each nested field in the JSON representation of types. The spec has also been updated. This is a forward compatible change. Older readers will ignore the new doc field.

This fixes #38.
                </div><div><b>label:</b> documentation
                </div></div></li></ol></div><div><b>github_pulls_comments:</b> <ol><li><div>
                Spec changes are here: https://docs.google.com/document/d/1Q-zL5lSCle6NEEdyfiYsXYzX_Q8Qf0ctMyGBKslOswA/edit#heading=h.llpzlfgcw6g2
              </div></li></ol></div><div><b>github_pulls_reviews:</b> <ol></ol></div><div><b>jira_issues:</b> <ol></ol></div><div><b>jira_issues_comments:</b> <ol></ol></div></div></html>