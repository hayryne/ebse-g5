<!DOCTYPE html><html><div class="item-title">
        Item 385
      </div> <div class="item-details"><div><b>git_comments:</b> <ol><li><div>
                ! \return whether type is a float16 type. 
              </div></li><li><div>
                 Do not read the first undef lane.
              </div></li><li><div>
                 Emit CUDA code to access fp16 vector elements.

 half4 is stored as uint2

 h4.x is emitted as *(half2*)(&amp;(u2.x)).x
 h4.y is emitted as *(half2*)(&amp;(u2.x)).y
 h4.z is emitted as *(half2*)(&amp;(u2.y)).x
 h4.w is emitted as *(half2*)(&amp;(u2.y)).y

              </div></li><li><div>
                 Pack two half values.
              </div></li></ol></div><div><b>git_commits:</b> <ol><li><div><div><b>summary:</b> [CodeGen][CUDA] Improve CUDA vectorizer (#4736)
                </div><div><b>message:</b> [CodeGen][CUDA] Improve CUDA vectorizer (#4736)

- Fixes issues to enable fp16 vectorizer. Now correct packing and
  unpacking CUDA code will be emitted. Enabled more unit tests.

- Do not emit code to read the first lane from an undef variable

  int _3;
  _3 = _3 &amp; ~(0x000000ff &lt;&lt; 0) | ...

  and emit the following code instead:

  _3 = (((0x000000ff &amp; (_1 &gt;&gt; 0))+(0x000000ff &amp; (_2 &gt;&gt; 0))) &lt;&lt; 0);

  Note that nvcc 10.2 is forgiving and emits the same code for both cases.
  A warning appears in test_codegen_cuda.py.

Signed-off-by: Wei Pan &lt;weip@nvidia.com&gt;
                </div></div></li></ol></div><div><b>github_issues:</b> <ol></ol></div><div><b>github_issues_comments:</b> <ol></ol></div><div><b>github_pulls:</b> <ol><li><div><div><b>title:</b> [CodeGen][CUDA] Improve CUDA vectorizer
                </div><div><b>body:</b> - Fixes issues to enable fp16 vectorizer. Now correct packing and
  unpacking CUDA code will be emitted. Enabled more unit tests.

- Do not emit code to read the first lane from an undef variable

  int _3;
  _3 = _3 &amp; ~(0x000000ff &lt;&lt; 0) | ...

  and emit the following code instead:

  _3 = (((0x000000ff &amp; (_1 &gt;&gt; 0))+(0x000000ff &amp; (_2 &gt;&gt; 0))) &lt;&lt; 0);

  Note that nvcc 10.2 is forgiving and emits the same code for both cases.
  A warning appears in test_codegen_cuda.py.

Signed-off-by: Wei Pan &lt;weip@nvidia.com&gt;

Thanks for contributing to TVM!   Please refer to guideline https://docs.tvm.ai/contribute/ for useful information and tips. After the pull request is submitted, please request code reviews from [Reviewers](https://github.com/apache/incubator-tvm/blob/master/CONTRIBUTORS.md#reviewers) by @ them in the pull request thread.

                </div></div></li></ol></div><div><b>github_pulls_comments:</b> <ol><li><div>
                Thanks @wpan11nv this is merged
              </div></li></ol></div><div><b>github_pulls_reviews:</b> <ol></ol></div><div><b>jira_issues:</b> <ol></ol></div><div><b>jira_issues_comments:</b> <ol></ol></div></div></html>