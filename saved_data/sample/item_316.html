<!DOCTYPE html><html><div class="item-title">
        Item 316
      </div> <div class="item-details"><div><b>git_comments:</b> <ol></ol></div><div><b>git_commits:</b> <ol><li><div><div><b>summary:</b> THRIFT-3274 calling "make clean" twice in a row yields make error
                </div><div><b>message:</b> THRIFT-3274 calling "make clean" twice in a row yields make error

This closes #676

                </div><div><b>label:</b> code-design
                </div></div></li></ol></div><div><b>github_issues:</b> <ol></ol></div><div><b>github_issues_comments:</b> <ol></ol></div><div><b>github_pulls:</b> <ol><li><div><div><b>title:</b> THRIFT-3274 calling "make clean" twice in a row yields make error
                </div><div><b>body:</b> Removing `gen-cpp/.deps` hidden directory broke the source tree where any subsequent make command failed.

                </div></div></li></ol></div><div><b>github_pulls_comments:</b> <ol></ol></div><div><b>github_pulls_reviews:</b> <ol></ol></div><div><b>jira_issues:</b> <ol><li><div><div><b>summary:</b> calling "make clean" twice in a row yields make error
                </div><div><b>description:</b> After calling {{make clean}} by accident twice in a row I got this:

{code}
Making clean in test
make[3]: Entering directory '/home/jens/Arbeitsfläche/Thrift/lib/cpp/test'
Makefile:1173: gen-cpp/.deps/ChildService.Plo: File or directory not found
Makefile:1174: gen-cpp/.deps/DebugProtoTest_types.Plo: File or directory not found
Makefile:1175: gen-cpp/.deps/EmptyService.Plo: File or directory not found
Makefile:1176: gen-cpp/.deps/EnumTest_types.Plo: File or directory not found
Makefile:1177: gen-cpp/.deps/OptionalRequiredTest_types.Plo: File or directory not found
Makefile:1178: gen-cpp/.deps/ParentService.Plo: File or directory not found
Makefile:1179: gen-cpp/.deps/Recursive_types.Plo: File or directory not found
Makefile:1180: gen-cpp/.deps/ThriftTest_constants.Plo: File or directory not found
Makefile:1181: gen-cpp/.deps/ThriftTest_types.Plo: File or directory not found
Makefile:1182: gen-cpp/.deps/TypedefTest_types.Plo: File or directory not found
Makefile:1183: gen-cpp/.deps/proc_types.Plo: File or directory not found
make[3]: *** No rule to make target 'gen-cpp/.deps/proc_types.Plo'.  Stop.
make[3]: Leaving directory '/home/jens/Arbeitsfläche/Thrift/lib/cpp/test'
Makefile:1578: recipe for target 'clean-recursive' failed
make[2]: *** [clean-recursive] Error 1
make[2]: Leaving directory '/home/jens/Arbeitsfläche/Thrift/lib/cpp'
Makefile:536: recipe for target 'clean-recursive' failed
make[1]: *** [clean-recursive] Error 1
make[1]: Leaving directory '/home/jens/Arbeitsfläche/Thrift/lib'
Makefile:601: recipe for target 'clean-recursive' failed
make: *** [clean-recursive] Error 1
{code}
                </div></div></li></ol></div><div><b>jira_issues_comments:</b> <ol><li><div>
                GitHub user nsuke opened a pull request:

    https://github.com/apache/thrift/pull/676

    THRIFT-3274 calling "make clean" twice in a row yields make error

    Removing `gen-cpp/.deps` hidden directory broke the source tree where any subsequent make command failed.

You can merge this pull request into a Git repository by running:

    $ git pull https://github.com/nsuke/thrift THRIFT-3274

Alternatively you can review and apply these changes as the patch at:

    https://github.com/apache/thrift/pull/676.patch

To close this pull request, make a commit to your master/trunk branch
with (at least) the following in the commit message:

    This closes #676
    
----
commit 10b30a03a9011560c1617b44a9ebf4ba86f38e14
Author: Nobuaki Sukegawa &lt;nsuke@apache.org&gt;
Date:   2015-11-03T04:42:00Z

    THRIFT-3274 calling "make clean" twice in a row yields make error

----

              </div></li><li><div><div><b>body:</b> Better, but not perfect. The tutorial seems to suffer from the same problems:

{code}
Making clean in cpp
make[2]: Entering directory '/home/jens/Arbeitsfläche/Thrift/tutorial/cpp'
Makefile:621: gen-cpp/.deps/Calculator.Plo: File or directory not found
Makefile:622: gen-cpp/.deps/SharedService.Plo: File or directory not found
Makefile:623: gen-cpp/.deps/shared_constants.Plo: File or directory not found
Makefile:624: gen-cpp/.deps/shared_types.Plo: File or directory not found
Makefile:625: gen-cpp/.deps/tutorial_constants.Plo: File or directory not found
Makefile:626: gen-cpp/.deps/tutorial_types.Plo: File or directory not found
make[2]: *** No rule to make target 'gen-cpp/.deps/tutorial_types.Plo'.  Schluss.
make[2]: Leaving directory '/home/jens/Arbeitsfläche/Thrift/tutorial/cpp'
Makefile:535: recipe for target 'clean-recursive' failed
make[1]: *** [clean-recursive] Error 1
make[1]: Leaving directory '/home/jens/Arbeitsfläche/Thrift/tutorial'
Makefile:613: recipe for target 'clean-recursive' failed
make: *** [clean-recursive] Error 1
{code}

                </div><div><b>label:</b> code-design
                </div></div></li><li><div>
                Github user asfgit closed the pull request at:

    https://github.com/apache/thrift/pull/676

              </div></li><li><div>
                Thanks Aki!
              </div></li><li><div>
                SUCCESS: Integrated in Thrift #1709 (See [https://builds.apache.org/job/Thrift/1709/])
THRIFT-3274 calling "make clean" twice in a row yields make error (roger: rev d3f7d0e66ce0a1dc37f2eb0b90f303c2f5b5979e)
* lib/cpp/test/Makefile.am
* test/cpp/Makefile.am

              </div></li><li><div>
                [~jensg] fix for tutorial is in verification...
              </div></li><li><div>
                tutorial fix is committed
              </div></li><li><div>
                SUCCESS: Integrated in Thrift #1710 (See [https://builds.apache.org/job/Thrift/1710/])
THRIFT-3274 calling "make clean" twice in a row yields make error (roger: rev f57b57ac0b5e890d7d8ebb75610e7fe279833909)
* tutorial/cpp/Makefile.am

              </div></li><li><div>
                Yep, that's it. Thanks!
              </div></li></ol></div></div></html>