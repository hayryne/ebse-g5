<!DOCTYPE html><html><div class="item-title">
        Item 345
      </div> <div class="item-details"><div><b>git_comments:</b> <ol><li><div>
                 Verify existing table's name argument is valid, and match any additional restrictions
              </div></li><li><div>
                 Verify namespace arguments are valid, and match any additional restrictions
              </div></li></ol></div><div><b>git_commits:</b> <ol><li><div><div><b>summary:</b> Fix #1430 Enforce table name limit for new tables (#1518)
                </div><div><b>message:</b> Fix #1430 Enforce table name limit for new tables (#1518)

* Add name length limit for new tables and namespaces (max length 1024 chars)
* Add fast failure for client side
* Warn for old names if beyond the max length
* Add tests

Co-Authored-By: Laura Schanno &lt;lbschanno@gmail.com&gt;
Co-Authored-By: Keith Turner &lt;kturner@apache.org&gt;
Co-Authored-By: Christopher Tubbs &lt;ctubbsii@apache.org&gt;

                </div></div></li></ol></div><div><b>github_issues:</b> <ol><li><div><div><b>title:</b> Limit the size of new table names
                </div><div><b>body:</b> Giant table names can take down ZooKeeper and the master server. There should be a reasonable limit on table name sizes. This can be imposed on the server side for creating tables, renaming tables, and cloning tables. Existing tables need not be affected.

Client code can be updated for fast-failure (and to limit the number of invalid requests sent to the server-side).

For reference, the information I found while searching the web (not necessarily accurate, but good enough to give us an idea) gives the following limits to identifier sizes:

| Item | Number of characters (or sometimes, bytes) |
| ---- | ---- |
| Oracle DB table names | 30 |
| MySQL table names | 64 |
| PostgreSQL table names | 63 |
| DNS identifier | 63 |
| Most filesystem file names (EXT/XFS/ZFS/exFAT/HFS+/Brtfs/NTFS | 255 |
| EXT4 max path | 4096 |
| Java identifiers | unlimited |
| longest English word | 45 |
| "supercalifragilisticexpialidocious" | 34 |

My original opinion was 63, because this is what DNS uses, and because it is similar to what common relational databases use which, like us, have a very DNS-like naming convention of dot-separated components, as in `namespace.tablename` or `database.tablename`

However, I think that's probably going to be too limiting, so I think 255 is a more reasonable limit.

The server-side code for validating table names is located in the `FateServiceHandler` class, in a method called `validateTableNameArgument`. However, that method is currently being used for existing tables, in order to validate the parameters sent over the wire to the server. A similar method would have to be created to specifically validate *new* destination table names from creating, renaming, or cloning a table. That way, we don't impose the name limit on existing tables, only on new ones. For existing tables, it may be worth adding a warning log message to the current validator method that the table name is longer than what Accumulo now supports, and it may cause unexpected behavior if not renamed to something shorter.

(Originally reported at [ACCUMULO-2366](https://issues.apache.org/jira/browse/ACCUMULO-2366))
                </div><div><b>label:</b> code-design
                </div></div></li><li><div><div><b>title:</b> Limit the size of new table names
                </div><div><b>body:</b> Giant table names can take down ZooKeeper and the master server. There should be a reasonable limit on table name sizes. This can be imposed on the server side for creating tables, renaming tables, and cloning tables. Existing tables need not be affected.

Client code can be updated for fast-failure (and to limit the number of invalid requests sent to the server-side).

For reference, the information I found while searching the web (not necessarily accurate, but good enough to give us an idea) gives the following limits to identifier sizes:

| Item | Number of characters (or sometimes, bytes) |
| ---- | ---- |
| Oracle DB table names | 30 |
| MySQL table names | 64 |
| PostgreSQL table names | 63 |
| DNS identifier | 63 |
| Most filesystem file names (EXT/XFS/ZFS/exFAT/HFS+/Brtfs/NTFS | 255 |
| EXT4 max path | 4096 |
| Java identifiers | unlimited |
| longest English word | 45 |
| "supercalifragilisticexpialidocious" | 34 |

My original opinion was 63, because this is what DNS uses, and because it is similar to what common relational databases use which, like us, have a very DNS-like naming convention of dot-separated components, as in `namespace.tablename` or `database.tablename`

However, I think that's probably going to be too limiting, so I think 255 is a more reasonable limit.

The server-side code for validating table names is located in the `FateServiceHandler` class, in a method called `validateTableNameArgument`. However, that method is currently being used for existing tables, in order to validate the parameters sent over the wire to the server. A similar method would have to be created to specifically validate *new* destination table names from creating, renaming, or cloning a table. That way, we don't impose the name limit on existing tables, only on new ones. For existing tables, it may be worth adding a warning log message to the current validator method that the table name is longer than what Accumulo now supports, and it may cause unexpected behavior if not renamed to something shorter.

(Originally reported at [ACCUMULO-2366](https://issues.apache.org/jira/browse/ACCUMULO-2366))
                </div></div></li><li><div><div><b>title:</b> Limit the size of new table names
                </div><div><b>body:</b> Giant table names can take down ZooKeeper and the master server. There should be a reasonable limit on table name sizes. This can be imposed on the server side for creating tables, renaming tables, and cloning tables. Existing tables need not be affected.

Client code can be updated for fast-failure (and to limit the number of invalid requests sent to the server-side).

For reference, the information I found while searching the web (not necessarily accurate, but good enough to give us an idea) gives the following limits to identifier sizes:

| Item | Number of characters (or sometimes, bytes) |
| ---- | ---- |
| Oracle DB table names | 30 |
| MySQL table names | 64 |
| PostgreSQL table names | 63 |
| DNS identifier | 63 |
| Most filesystem file names (EXT/XFS/ZFS/exFAT/HFS+/Brtfs/NTFS | 255 |
| EXT4 max path | 4096 |
| Java identifiers | unlimited |
| longest English word | 45 |
| "supercalifragilisticexpialidocious" | 34 |

My original opinion was 63, because this is what DNS uses, and because it is similar to what common relational databases use which, like us, have a very DNS-like naming convention of dot-separated components, as in `namespace.tablename` or `database.tablename`

However, I think that's probably going to be too limiting, so I think 255 is a more reasonable limit.

The server-side code for validating table names is located in the `FateServiceHandler` class, in a method called `validateTableNameArgument`. However, that method is currently being used for existing tables, in order to validate the parameters sent over the wire to the server. A similar method would have to be created to specifically validate *new* destination table names from creating, renaming, or cloning a table. That way, we don't impose the name limit on existing tables, only on new ones. For existing tables, it may be worth adding a warning log message to the current validator method that the table name is longer than what Accumulo now supports, and it may cause unexpected behavior if not renamed to something shorter.

(Originally reported at [ACCUMULO-2366](https://issues.apache.org/jira/browse/ACCUMULO-2366))
                </div></div></li><li><div><div><b>title:</b> Limit the size of new table names
                </div><div><b>body:</b> Giant table names can take down ZooKeeper and the master server. There should be a reasonable limit on table name sizes. This can be imposed on the server side for creating tables, renaming tables, and cloning tables. Existing tables need not be affected.

Client code can be updated for fast-failure (and to limit the number of invalid requests sent to the server-side).

For reference, the information I found while searching the web (not necessarily accurate, but good enough to give us an idea) gives the following limits to identifier sizes:

| Item | Number of characters (or sometimes, bytes) |
| ---- | ---- |
| Oracle DB table names | 30 |
| MySQL table names | 64 |
| PostgreSQL table names | 63 |
| DNS identifier | 63 |
| Most filesystem file names (EXT/XFS/ZFS/exFAT/HFS+/Brtfs/NTFS | 255 |
| EXT4 max path | 4096 |
| Java identifiers | unlimited |
| longest English word | 45 |
| "supercalifragilisticexpialidocious" | 34 |

My original opinion was 63, because this is what DNS uses, and because it is similar to what common relational databases use which, like us, have a very DNS-like naming convention of dot-separated components, as in `namespace.tablename` or `database.tablename`

However, I think that's probably going to be too limiting, so I think 255 is a more reasonable limit.

The server-side code for validating table names is located in the `FateServiceHandler` class, in a method called `validateTableNameArgument`. However, that method is currently being used for existing tables, in order to validate the parameters sent over the wire to the server. A similar method would have to be created to specifically validate *new* destination table names from creating, renaming, or cloning a table. That way, we don't impose the name limit on existing tables, only on new ones. For existing tables, it may be worth adding a warning log message to the current validator method that the table name is longer than what Accumulo now supports, and it may cause unexpected behavior if not renamed to something shorter.

(Originally reported at [ACCUMULO-2366](https://issues.apache.org/jira/browse/ACCUMULO-2366))
                </div><div><b>label:</b> code-design
                </div></div></li><li><div><div><b>title:</b> Limit the size of new table names
                </div><div><b>body:</b> Giant table names can take down ZooKeeper and the master server. There should be a reasonable limit on table name sizes. This can be imposed on the server side for creating tables, renaming tables, and cloning tables. Existing tables need not be affected.

Client code can be updated for fast-failure (and to limit the number of invalid requests sent to the server-side).

For reference, the information I found while searching the web (not necessarily accurate, but good enough to give us an idea) gives the following limits to identifier sizes:

| Item | Number of characters (or sometimes, bytes) |
| ---- | ---- |
| Oracle DB table names | 30 |
| MySQL table names | 64 |
| PostgreSQL table names | 63 |
| DNS identifier | 63 |
| Most filesystem file names (EXT/XFS/ZFS/exFAT/HFS+/Brtfs/NTFS | 255 |
| EXT4 max path | 4096 |
| Java identifiers | unlimited |
| longest English word | 45 |
| "supercalifragilisticexpialidocious" | 34 |

My original opinion was 63, because this is what DNS uses, and because it is similar to what common relational databases use which, like us, have a very DNS-like naming convention of dot-separated components, as in `namespace.tablename` or `database.tablename`

However, I think that's probably going to be too limiting, so I think 255 is a more reasonable limit.

The server-side code for validating table names is located in the `FateServiceHandler` class, in a method called `validateTableNameArgument`. However, that method is currently being used for existing tables, in order to validate the parameters sent over the wire to the server. A similar method would have to be created to specifically validate *new* destination table names from creating, renaming, or cloning a table. That way, we don't impose the name limit on existing tables, only on new ones. For existing tables, it may be worth adding a warning log message to the current validator method that the table name is longer than what Accumulo now supports, and it may cause unexpected behavior if not renamed to something shorter.

(Originally reported at [ACCUMULO-2366](https://issues.apache.org/jira/browse/ACCUMULO-2366))
                </div></div></li><li><div><div><b>title:</b> Limit the size of new table names
                </div><div><b>body:</b> Giant table names can take down ZooKeeper and the master server. There should be a reasonable limit on table name sizes. This can be imposed on the server side for creating tables, renaming tables, and cloning tables. Existing tables need not be affected.

Client code can be updated for fast-failure (and to limit the number of invalid requests sent to the server-side).

For reference, the information I found while searching the web (not necessarily accurate, but good enough to give us an idea) gives the following limits to identifier sizes:

| Item | Number of characters (or sometimes, bytes) |
| ---- | ---- |
| Oracle DB table names | 30 |
| MySQL table names | 64 |
| PostgreSQL table names | 63 |
| DNS identifier | 63 |
| Most filesystem file names (EXT/XFS/ZFS/exFAT/HFS+/Brtfs/NTFS | 255 |
| EXT4 max path | 4096 |
| Java identifiers | unlimited |
| longest English word | 45 |
| "supercalifragilisticexpialidocious" | 34 |

My original opinion was 63, because this is what DNS uses, and because it is similar to what common relational databases use which, like us, have a very DNS-like naming convention of dot-separated components, as in `namespace.tablename` or `database.tablename`

However, I think that's probably going to be too limiting, so I think 255 is a more reasonable limit.

The server-side code for validating table names is located in the `FateServiceHandler` class, in a method called `validateTableNameArgument`. However, that method is currently being used for existing tables, in order to validate the parameters sent over the wire to the server. A similar method would have to be created to specifically validate *new* destination table names from creating, renaming, or cloning a table. That way, we don't impose the name limit on existing tables, only on new ones. For existing tables, it may be worth adding a warning log message to the current validator method that the table name is longer than what Accumulo now supports, and it may cause unexpected behavior if not renamed to something shorter.

(Originally reported at [ACCUMULO-2366](https://issues.apache.org/jira/browse/ACCUMULO-2366))
                </div><div><b>label:</b> code-design
                </div></div></li><li><div><div><b>title:</b> Limit the size of new table names
                </div><div><b>body:</b> Giant table names can take down ZooKeeper and the master server. There should be a reasonable limit on table name sizes. This can be imposed on the server side for creating tables, renaming tables, and cloning tables. Existing tables need not be affected.

Client code can be updated for fast-failure (and to limit the number of invalid requests sent to the server-side).

For reference, the information I found while searching the web (not necessarily accurate, but good enough to give us an idea) gives the following limits to identifier sizes:

| Item | Number of characters (or sometimes, bytes) |
| ---- | ---- |
| Oracle DB table names | 30 |
| MySQL table names | 64 |
| PostgreSQL table names | 63 |
| DNS identifier | 63 |
| Most filesystem file names (EXT/XFS/ZFS/exFAT/HFS+/Brtfs/NTFS | 255 |
| EXT4 max path | 4096 |
| Java identifiers | unlimited |
| longest English word | 45 |
| "supercalifragilisticexpialidocious" | 34 |

My original opinion was 63, because this is what DNS uses, and because it is similar to what common relational databases use which, like us, have a very DNS-like naming convention of dot-separated components, as in `namespace.tablename` or `database.tablename`

However, I think that's probably going to be too limiting, so I think 255 is a more reasonable limit.

The server-side code for validating table names is located in the `FateServiceHandler` class, in a method called `validateTableNameArgument`. However, that method is currently being used for existing tables, in order to validate the parameters sent over the wire to the server. A similar method would have to be created to specifically validate *new* destination table names from creating, renaming, or cloning a table. That way, we don't impose the name limit on existing tables, only on new ones. For existing tables, it may be worth adding a warning log message to the current validator method that the table name is longer than what Accumulo now supports, and it may cause unexpected behavior if not renamed to something shorter.

(Originally reported at [ACCUMULO-2366](https://issues.apache.org/jira/browse/ACCUMULO-2366))
                </div></div></li><li><div><div><b>title:</b> Limit the size of new table names
                </div><div><b>body:</b> Giant table names can take down ZooKeeper and the master server. There should be a reasonable limit on table name sizes. This can be imposed on the server side for creating tables, renaming tables, and cloning tables. Existing tables need not be affected.

Client code can be updated for fast-failure (and to limit the number of invalid requests sent to the server-side).

For reference, the information I found while searching the web (not necessarily accurate, but good enough to give us an idea) gives the following limits to identifier sizes:

| Item | Number of characters (or sometimes, bytes) |
| ---- | ---- |
| Oracle DB table names | 30 |
| MySQL table names | 64 |
| PostgreSQL table names | 63 |
| DNS identifier | 63 |
| Most filesystem file names (EXT/XFS/ZFS/exFAT/HFS+/Brtfs/NTFS | 255 |
| EXT4 max path | 4096 |
| Java identifiers | unlimited |
| longest English word | 45 |
| "supercalifragilisticexpialidocious" | 34 |

My original opinion was 63, because this is what DNS uses, and because it is similar to what common relational databases use which, like us, have a very DNS-like naming convention of dot-separated components, as in `namespace.tablename` or `database.tablename`

However, I think that's probably going to be too limiting, so I think 255 is a more reasonable limit.

The server-side code for validating table names is located in the `FateServiceHandler` class, in a method called `validateTableNameArgument`. However, that method is currently being used for existing tables, in order to validate the parameters sent over the wire to the server. A similar method would have to be created to specifically validate *new* destination table names from creating, renaming, or cloning a table. That way, we don't impose the name limit on existing tables, only on new ones. For existing tables, it may be worth adding a warning log message to the current validator method that the table name is longer than what Accumulo now supports, and it may cause unexpected behavior if not renamed to something shorter.

(Originally reported at [ACCUMULO-2366](https://issues.apache.org/jira/browse/ACCUMULO-2366))
                </div></div></li><li><div><div><b>title:</b> Limit the size of new table names
                </div><div><b>body:</b> Giant table names can take down ZooKeeper and the master server. There should be a reasonable limit on table name sizes. This can be imposed on the server side for creating tables, renaming tables, and cloning tables. Existing tables need not be affected.

Client code can be updated for fast-failure (and to limit the number of invalid requests sent to the server-side).

For reference, the information I found while searching the web (not necessarily accurate, but good enough to give us an idea) gives the following limits to identifier sizes:

| Item | Number of characters (or sometimes, bytes) |
| ---- | ---- |
| Oracle DB table names | 30 |
| MySQL table names | 64 |
| PostgreSQL table names | 63 |
| DNS identifier | 63 |
| Most filesystem file names (EXT/XFS/ZFS/exFAT/HFS+/Brtfs/NTFS | 255 |
| EXT4 max path | 4096 |
| Java identifiers | unlimited |
| longest English word | 45 |
| "supercalifragilisticexpialidocious" | 34 |

My original opinion was 63, because this is what DNS uses, and because it is similar to what common relational databases use which, like us, have a very DNS-like naming convention of dot-separated components, as in `namespace.tablename` or `database.tablename`

However, I think that's probably going to be too limiting, so I think 255 is a more reasonable limit.

The server-side code for validating table names is located in the `FateServiceHandler` class, in a method called `validateTableNameArgument`. However, that method is currently being used for existing tables, in order to validate the parameters sent over the wire to the server. A similar method would have to be created to specifically validate *new* destination table names from creating, renaming, or cloning a table. That way, we don't impose the name limit on existing tables, only on new ones. For existing tables, it may be worth adding a warning log message to the current validator method that the table name is longer than what Accumulo now supports, and it may cause unexpected behavior if not renamed to something shorter.

(Originally reported at [ACCUMULO-2366](https://issues.apache.org/jira/browse/ACCUMULO-2366))
                </div></div></li><li><div><div><b>title:</b> Limit the size of new table names
                </div><div><b>body:</b> Giant table names can take down ZooKeeper and the master server. There should be a reasonable limit on table name sizes. This can be imposed on the server side for creating tables, renaming tables, and cloning tables. Existing tables need not be affected.

Client code can be updated for fast-failure (and to limit the number of invalid requests sent to the server-side).

For reference, the information I found while searching the web (not necessarily accurate, but good enough to give us an idea) gives the following limits to identifier sizes:

| Item | Number of characters (or sometimes, bytes) |
| ---- | ---- |
| Oracle DB table names | 30 |
| MySQL table names | 64 |
| PostgreSQL table names | 63 |
| DNS identifier | 63 |
| Most filesystem file names (EXT/XFS/ZFS/exFAT/HFS+/Brtfs/NTFS | 255 |
| EXT4 max path | 4096 |
| Java identifiers | unlimited |
| longest English word | 45 |
| "supercalifragilisticexpialidocious" | 34 |

My original opinion was 63, because this is what DNS uses, and because it is similar to what common relational databases use which, like us, have a very DNS-like naming convention of dot-separated components, as in `namespace.tablename` or `database.tablename`

However, I think that's probably going to be too limiting, so I think 255 is a more reasonable limit.

The server-side code for validating table names is located in the `FateServiceHandler` class, in a method called `validateTableNameArgument`. However, that method is currently being used for existing tables, in order to validate the parameters sent over the wire to the server. A similar method would have to be created to specifically validate *new* destination table names from creating, renaming, or cloning a table. That way, we don't impose the name limit on existing tables, only on new ones. For existing tables, it may be worth adding a warning log message to the current validator method that the table name is longer than what Accumulo now supports, and it may cause unexpected behavior if not renamed to something shorter.

(Originally reported at [ACCUMULO-2366](https://issues.apache.org/jira/browse/ACCUMULO-2366))
                </div></div></li><li><div><div><b>title:</b> Limit the size of new table names
                </div><div><b>body:</b> Giant table names can take down ZooKeeper and the master server. There should be a reasonable limit on table name sizes. This can be imposed on the server side for creating tables, renaming tables, and cloning tables. Existing tables need not be affected.

Client code can be updated for fast-failure (and to limit the number of invalid requests sent to the server-side).

For reference, the information I found while searching the web (not necessarily accurate, but good enough to give us an idea) gives the following limits to identifier sizes:

| Item | Number of characters (or sometimes, bytes) |
| ---- | ---- |
| Oracle DB table names | 30 |
| MySQL table names | 64 |
| PostgreSQL table names | 63 |
| DNS identifier | 63 |
| Most filesystem file names (EXT/XFS/ZFS/exFAT/HFS+/Brtfs/NTFS | 255 |
| EXT4 max path | 4096 |
| Java identifiers | unlimited |
| longest English word | 45 |
| "supercalifragilisticexpialidocious" | 34 |

My original opinion was 63, because this is what DNS uses, and because it is similar to what common relational databases use which, like us, have a very DNS-like naming convention of dot-separated components, as in `namespace.tablename` or `database.tablename`

However, I think that's probably going to be too limiting, so I think 255 is a more reasonable limit.

The server-side code for validating table names is located in the `FateServiceHandler` class, in a method called `validateTableNameArgument`. However, that method is currently being used for existing tables, in order to validate the parameters sent over the wire to the server. A similar method would have to be created to specifically validate *new* destination table names from creating, renaming, or cloning a table. That way, we don't impose the name limit on existing tables, only on new ones. For existing tables, it may be worth adding a warning log message to the current validator method that the table name is longer than what Accumulo now supports, and it may cause unexpected behavior if not renamed to something shorter.

(Originally reported at [ACCUMULO-2366](https://issues.apache.org/jira/browse/ACCUMULO-2366))
                </div><div><b>label:</b> code-design
                </div></div></li><li><div><div><b>title:</b> Limit the size of new table names
                </div><div><b>body:</b> Giant table names can take down ZooKeeper and the master server. There should be a reasonable limit on table name sizes. This can be imposed on the server side for creating tables, renaming tables, and cloning tables. Existing tables need not be affected.

Client code can be updated for fast-failure (and to limit the number of invalid requests sent to the server-side).

For reference, the information I found while searching the web (not necessarily accurate, but good enough to give us an idea) gives the following limits to identifier sizes:

| Item | Number of characters (or sometimes, bytes) |
| ---- | ---- |
| Oracle DB table names | 30 |
| MySQL table names | 64 |
| PostgreSQL table names | 63 |
| DNS identifier | 63 |
| Most filesystem file names (EXT/XFS/ZFS/exFAT/HFS+/Brtfs/NTFS | 255 |
| EXT4 max path | 4096 |
| Java identifiers | unlimited |
| longest English word | 45 |
| "supercalifragilisticexpialidocious" | 34 |

My original opinion was 63, because this is what DNS uses, and because it is similar to what common relational databases use which, like us, have a very DNS-like naming convention of dot-separated components, as in `namespace.tablename` or `database.tablename`

However, I think that's probably going to be too limiting, so I think 255 is a more reasonable limit.

The server-side code for validating table names is located in the `FateServiceHandler` class, in a method called `validateTableNameArgument`. However, that method is currently being used for existing tables, in order to validate the parameters sent over the wire to the server. A similar method would have to be created to specifically validate *new* destination table names from creating, renaming, or cloning a table. That way, we don't impose the name limit on existing tables, only on new ones. For existing tables, it may be worth adding a warning log message to the current validator method that the table name is longer than what Accumulo now supports, and it may cause unexpected behavior if not renamed to something shorter.

(Originally reported at [ACCUMULO-2366](https://issues.apache.org/jira/browse/ACCUMULO-2366))
                </div></div></li></ol></div><div><b>github_issues_comments:</b> <ol><li><div><div><b>body:</b> I marked this issue as a "good first issue", because adding the limit is relatively simple. However, the code changes are in an area that may be somewhat unfriendly to approach, so it's slightly more challenging than other possible "good first issues". Perhaps this might be a "good second issue". Either way, it's a small amount of code to be changed and should be easy to implement and create simple test cases for.
                </div><div><b>label:</b> code-design
                </div></div></li><li><div>
                Upon completion of this issue, a good follow-up PR would be to implement the same restrictions in the size of namespace names.
              </div></li><li><div>
                &gt;  the code changes are in an area that may be somewhat unfriendly to approach

@ctubbsii where do you think a change should be made for this?
              </div></li><li><div><div><b>body:</b> Do we know what the impact / actual limit is?  The might be quite a gap between "giant" and  255.  Depending on how tables are created, it is not hard to get larger than 255.  Throw in a base name, a yarn job name and a timestamp or two and you can get a generated name that is not user friendly, but does encode some system runtime info that can be useful.

Whatever limit is "chosen" an approach could to have it as a configuration parameter with a sensible default and some guidance on what the "real" max should be considered to be.  Sort of like the zookeeper jute buffer parameter.
                </div><div><b>label:</b> code-design
                </div></div></li><li><div>
                Nevermind @ctubbsii , the information I was asking about is in the description.
              </div></li><li><div><div><b>body:</b> @EdColeman I think adding a configuration parameter makes this issue more complex than something I would be comfortable asking a first-time contributor to do. That could be done as a follow-on issue, if it's in high demand. However, I do think we should keep in mind that the table name is primarily for humans, and should be within reason for humans to read, memorize, type in the shell, view on the monitor, see in the logs, etc.

I do think you make a good point about it easy to get above 255, with a naming convention that is composed of a few different external sources. If 1024 is more reasonable than 255, I'd be happy to support that instead.
                </div><div><b>label:</b> code-design
                </div></div></li><li><div>
                Currently working on this one.
              </div></li><li><div>
                Awesome @cradal . Let me know if you run into any issues.
              </div></li><li><div>
                Regarding how to discern between the older tables and new ones with the length limit:

I see this is an issue mainly with cloning and renaming, mainly. These ops are called in the FateServiceHandler for all tables. So, I think we need a way to branch between the two validation functions that account for no-limit-names and limited-names. 

Here is a possible non-time-based  solution, although it is admittedly naive and has a pitfall. What about appending the Accumulo version number that the table was created under to the table name? We could set the user limit to 1024 characters, but have the internal limit to 1027 where the last three chars identify the Accumulo version (e.g. ...tablename1.9). In this way, the validation function could discern between an older table that breaks the new limit and a new table that is compliant by checking the final 3 chars.

There is a clear pitfall here, though. There might be older tables that happen to have '1.9' as their last three characters. 

I don't think using the ServerUtil class to detect upgrades will help because, once folks upgrade to the new version with the new limit, there still won't be a way to delineate between tables created pre-upgrade and those created post-upgrade.

I will keep looking for identifying info, maybe from ZK or Master, that we can leverage.
              </div></li><li><div>
                &gt; Regarding how to discern between the older tables and new ones with the length limit:

The primary action for this issue is to simply impose the limit for new table names. There is no need to distinguish between tables created prior to the restriction being imposed, and after.

An optional secondary action is to log a warning with a recommendation to rename tables with names longer than the current limit. For that, there length of the current name is sufficient. There is still no need to distinguish between tables created before and after the limit.
              </div></li></ol></div><div><b>github_pulls:</b> <ol></ol></div><div><b>github_pulls_comments:</b> <ol></ol></div><div><b>github_pulls_reviews:</b> <ol></ol></div><div><b>jira_issues:</b> <ol><li><div><div><b>summary:</b> Giant table names kill the master
                </div><div><b>description:</b> Attempting to create a 1MB table results in the master losing it's ZK lock and going down. It gets the following error message twice.

We should probably limit table names for this reason.

{code}Error connecting to zookeeper, will retry in 250
	org.apache.zookeeper.KeeperException$ConnectionLossException: KeeperErrorCode = ConnectionLoss for /accumulo/8da9811c-b74a-43a8-9acd-f35365743241/fate/tx_5be1ffebf4a0a0c1/repo_
		at org.apache.zookeeper.KeeperException.create(KeeperException.java:99)
		at org.apache.zookeeper.KeeperException.create(KeeperException.java:51)
		at org.apache.zookeeper.ZooKeeper.create(ZooKeeper.java:783)
		at org.apache.accumulo.fate.zookeeper.ZooUtil.putPersistentSequential(ZooUtil.java:213)
		at org.apache.accumulo.fate.zookeeper.ZooReaderWriter.putPersistentSequential(ZooReaderWriter.java:94)
		at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
		at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
		at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
		at java.lang.reflect.Method.invoke(Method.java:622)
		at org.apache.accumulo.server.zookeeper.ZooReaderWriter$1.invoke(ZooReaderWriter.java:67)
		at com.sun.proxy.$Proxy2.putPersistentSequential(Unknown Source)
		at org.apache.accumulo.fate.ZooStore.push(ZooStore.java:297)
		at org.apache.accumulo.fate.AgeOffStore.push(AgeOffStore.java:176)
		at org.apache.accumulo.fate.Fate.seedTransaction(Fate.java:163)
		at org.apache.accumulo.server.master.Master$MasterClientServiceHandler.executeTableOperation(Master.java:832)
		at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
		at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
		at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
		at java.lang.reflect.Method.invoke(Method.java:622)
		at org.apache.accumulo.trace.instrument.thrift.TraceWrap$1.invoke(TraceWrap.java:63)
		at com.sun.proxy.$Proxy3.executeTableOperation(Unknown Source)
		at org.apache.accumulo.core.master.thrift.MasterClientService$Processor$executeTableOperation.getResult(MasterClientService.java:1591)
		at org.apache.accumulo.core.master.thrift.MasterClientService$Processor$executeTableOperation.getResult(MasterClientService.java:1575)
		at org.apache.thrift.ProcessFunction.process(ProcessFunction.java:39)
		at org.apache.thrift.TBaseProcessor.process(TBaseProcessor.java:39)
		at org.apache.accumulo.server.util.TServerUtils$TimedProcessor.process(TServerUtils.java:156)
		at org.apache.thrift.server.AbstractNonblockingServer$FrameBuffer.invoke(AbstractNonblockingServer.java:478)
		at org.apache.accumulo.server.util.TServerUtils$THsHaServer$Invocation.run(TServerUtils.java:208)
		at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1146)
		at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
		at org.apache.accumulo.trace.instrument.TraceRunnable.run(TraceRunnable.java:47)
		at org.apache.accumulo.core.util.LoggingRunnable.run(LoggingRunnable.java:34)
		at java.lang.Thread.run(Thread.java:701){code}


                </div></div></li></ol></div><div><b>jira_issues_comments:</b> <ol><li><div>
                A sensible thing could be to adopt the DNS limits: maximum length of 63 bytes for each segment, which means that the maximum length for a fully-qualified table name (i.e. one in a namespace) would be 63+len(".")+63 = 127 bytes.
              </div></li><li><div>
                To be clear, does "ConnectionLoss for /accumulo/8da9811c-b74a-43a8-9acd-f35365743241/fate/tx_5be1ffebf4a0a0c1/repo_" mean that part of the zookeeper entry was cut off? If so, is there an explicit zookeeper guideline for path size?
              </div></li><li><div>
                Closed as duplicate of https://github.com/apache/accumulo/issues/1430
              </div></li></ol></div></div></html>