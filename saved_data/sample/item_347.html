<!DOCTYPE html><html><div class="item-title">
        Item 347
      </div> <div class="item-details"><div><b>git_comments:</b> <ol><li><div>
                
 * Licensed to the Apache Software Foundation (ASF) under one or more
 * contributor license agreements.  See the NOTICE file distributed with
 * this work for additional information regarding copyright ownership.
 * The ASF licenses this file to You under the Apache License, Version 2.0
 * (the "License"); you may not use this file except in compliance with
 * the License.  You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 
              </div></li><li><div>
                
         * counter and config-property should actually work without the bean extension. Doing it here because we have
         * quarkus.camel.enable-main=true in the core itest
         
              </div></li><li><div>
                *
 * A {@link RouteBuilder} injected into {@link CamelResource} and thus instantiated eagerly.
 
              </div></li><li><div>
                
 * Licensed to the Apache Software Foundation (ASF) under one or more
 * contributor license agreements.  See the NOTICE file distributed with
 * this work for additional information regarding copyright ownership.
 * The ASF licenses this file to You under the Apache License, Version 2.0
 * (the "License"); you may not use this file except in compliance with
 * the License.  You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 
              </div></li><li><div>
                *
 * An @ApplicationScoped {@link RouteBuilder} that would normally get removed from the CDI container because it is not
 * injected anywhere and because it has no observer method, etc.
 
              </div></li><li><div>
                
 * Licensed to the Apache Software Foundation (ASF) under one or more
 * contributor license agreements.  See the NOTICE file distributed with
 * this work for additional information regarding copyright ownership.
 * The ASF licenses this file to You under the Apache License, Version 2.0
 * (the "License"); you may not use this file except in compliance with
 * the License.  You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 
              </div></li><li><div>
                *
 * A {@link RouteBuilder} with a @Produces method that makes it a CDI bean. It would normally get removed from the CDI
 * container.
 
              </div></li><li><div>
                
 * Licensed to the Apache Software Foundation (ASF) under one or more
 * contributor license agreements.  See the NOTICE file distributed with
 * this work for additional information regarding copyright ownership.
 * The ASF licenses this file to You under the Apache License, Version 2.0
 * (the "License"); you may not use this file except in compliance with
 * the License.  You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 
              </div></li><li><div>
                
         * Camel is not pulling the RouteBuilders from the CDI container when the main is off so there is no point in
         * making the lazy beans unremovable in that case.
         
              </div></li><li><div>
                *
 * A {@link RouteBuilder} instantiated by Camel (not by Arc).
 
              </div></li><li><div>
                 Ensure that the RoutesBuilder.configure() was not called multiple times 
              </div></li><li><div>
                 Ensure that @Inject works 
              </div></li><li><div>
                 Ensure that the bean was not instantiated multiple times 
              </div></li><li><div>
                 Ensure that @ConfigProperty works 
              </div></li><li><div>
                 Ensure that the RoutesBuilder.configure() was not called multiple times on CamelRoute 
              </div></li></ol></div><div><b>git_commits:</b> <ol><li><div><div><b>summary:</b> Fix #136 @ConfigProperty and @Inject do not work in RouteBuilders
                </div><div><b>message:</b> Fix #136 @ConfigProperty and @Inject do not work in RouteBuilders

                </div></div></li></ol></div><div><b>github_issues:</b> <ol><li><div><div><b>title:</b> @ConfigProperty and @Inject do not work in RouteBuilders
                </div><div><b>body:</b> Probably caused by how we instantiate RouteBuilders. 

Stumbled across this when adding tests to the twitter test project where we have this
https://github.com/apache/camel-quarkus/blob/f3e7dbcad37aec1ae54b2dfb5d05d2ff462b6e49/integration-tests/twitter/src/main/java/org/apache/camel/quarkus/component/twitter/CamelRoute.java#L26-L27

I guess the users should expect `@ConfigProperty` and `@Inject` to work in RouteBuilders?
                </div><div><b>label:</b> code-design
                </div></div></li><li><div><div><b>title:</b> @ConfigProperty and @Inject do not work in RouteBuilders
                </div><div><b>body:</b> Probably caused by how we instantiate RouteBuilders. 

Stumbled across this when adding tests to the twitter test project where we have this
https://github.com/apache/camel-quarkus/blob/f3e7dbcad37aec1ae54b2dfb5d05d2ff462b6e49/integration-tests/twitter/src/main/java/org/apache/camel/quarkus/component/twitter/CamelRoute.java#L26-L27

I guess the users should expect `@ConfigProperty` and `@Inject` to work in RouteBuilders?
                </div></div></li><li><div><div><b>title:</b> @ConfigProperty and @Inject do not work in RouteBuilders
                </div><div><b>body:</b> Probably caused by how we instantiate RouteBuilders. 

Stumbled across this when adding tests to the twitter test project where we have this
https://github.com/apache/camel-quarkus/blob/f3e7dbcad37aec1ae54b2dfb5d05d2ff462b6e49/integration-tests/twitter/src/main/java/org/apache/camel/quarkus/component/twitter/CamelRoute.java#L26-L27

I guess the users should expect `@ConfigProperty` and `@Inject` to work in RouteBuilders?
                </div><div><b>label:</b> code-design
                </div></div></li><li><div><div><b>title:</b> @ConfigProperty and @Inject do not work in RouteBuilders
                </div><div><b>body:</b> Probably caused by how we instantiate RouteBuilders. 

Stumbled across this when adding tests to the twitter test project where we have this
https://github.com/apache/camel-quarkus/blob/f3e7dbcad37aec1ae54b2dfb5d05d2ff462b6e49/integration-tests/twitter/src/main/java/org/apache/camel/quarkus/component/twitter/CamelRoute.java#L26-L27

I guess the users should expect `@ConfigProperty` and `@Inject` to work in RouteBuilders?
                </div></div></li><li><div><div><b>title:</b> @ConfigProperty and @Inject do not work in RouteBuilders
                </div><div><b>body:</b> Probably caused by how we instantiate RouteBuilders. 

Stumbled across this when adding tests to the twitter test project where we have this
https://github.com/apache/camel-quarkus/blob/f3e7dbcad37aec1ae54b2dfb5d05d2ff462b6e49/integration-tests/twitter/src/main/java/org/apache/camel/quarkus/component/twitter/CamelRoute.java#L26-L27

I guess the users should expect `@ConfigProperty` and `@Inject` to work in RouteBuilders?
                </div></div></li><li><div><div><b>title:</b> @ConfigProperty and @Inject do not work in RouteBuilders
                </div><div><b>body:</b> Probably caused by how we instantiate RouteBuilders. 

Stumbled across this when adding tests to the twitter test project where we have this
https://github.com/apache/camel-quarkus/blob/f3e7dbcad37aec1ae54b2dfb5d05d2ff462b6e49/integration-tests/twitter/src/main/java/org/apache/camel/quarkus/component/twitter/CamelRoute.java#L26-L27

I guess the users should expect `@ConfigProperty` and `@Inject` to work in RouteBuilders?
                </div></div></li></ol></div><div><b>github_issues_comments:</b> <ol><li><div><div><b>body:</b> you can also use properties placeholders in the uri definition with {{...}}

On Thu, 15 Aug 2019 at 16:08, Peter Palaga &lt;notifications@github.com&gt; wrote:

&gt; Probably caused by how we instantiate RouteBuilders.
&gt;
&gt; Stumbled across this when adding a tests to the twitter test project where
&gt; we have this
&gt;
&gt; https://github.com/apache/camel-quarkus/blob/f3e7dbcad37aec1ae54b2dfb5d05d2ff462b6e49/integration-tests/twitter/src/main/java/org/apache/camel/quarkus/component/twitter/CamelRoute.java#L26-L27
&gt;
&gt; I guess the users should expect @ConfigProperty and @Inject to work in
&gt; RouteBuilders?
&gt;
&gt; —
&gt; You are receiving this because you are subscribed to this thread.
&gt; Reply to this email directly, view it on GitHub
&gt; &lt;https://github.com/apache/camel-quarkus/issues/136?email_source=notifications&amp;email_token=AAOIJBPVXNA62BCCOSVR2QLQEVPO3A5CNFSM4IL6SDUKYY3PNVWWK3TUL52HS4DFUVEXG43VMWVGG33NNVSW45C7NFSM4HFOBVGA&gt;,
&gt; or mute the thread
&gt; &lt;https://github.com/notifications/unsubscribe-auth/AAOIJBISWD4XX4S3NJQQKSLQEVPO3ANCNFSM4IL6SDUA&gt;
&gt; .
&gt;
-- 
--
Luca Burgazzoli

                </div><div><b>label:</b> code-design
                </div></div></li><li><div>
                Thanks, `{{camel.component.twitter-directmessage.user}}` works. 

`@ConfigProperty` and `@Inject` do not work because we do not let Arc to instantiate them https://github.com/apache/camel-quarkus/blob/c74d4a2846c5bd5b6c2963e9b2d8ccf78fadd4a9/extensions/core/deployment/src/main/java/org/apache/camel/quarkus/core/deployment/CamelInitProcessor.java#L88 The question is whether we should fix this?
              </div></li><li><div><div><b>body:</b> there’s a bean post processor in camel that usually take cares of doing
injection so we perhaps need to implement a dedicated one for arc

On Thu, 15 Aug 2019 at 17:45, Peter Palaga &lt;notifications@github.com&gt; wrote:

&gt; Thanks, {{camel.component.twitter-directmessage.user}} works.
&gt;
&gt; @ConfigProperty and @Inject do not work because we do not let Arc to
&gt; instantiate them
&gt; https://github.com/apache/camel-quarkus/blob/c74d4a2846c5bd5b6c2963e9b2d8ccf78fadd4a9/extensions/core/deployment/src/main/java/org/apache/camel/quarkus/core/deployment/CamelInitProcessor.java#L88
&gt; The question is whether we should fix this?
&gt;
&gt; —
&gt; You are receiving this because you commented.
&gt;
&gt;
&gt; Reply to this email directly, view it on GitHub
&gt; &lt;https://github.com/apache/camel-quarkus/issues/136?email_source=notifications&amp;email_token=AAOIJBMXZPNKBQIL3AZ3RVTQEV2ZNA5CNFSM4IL6SDUKYY3PNVWWK3TUL52HS4DFVREXG43VMVBW63LNMVXHJKTDN5WW2ZLOORPWSZGOD4MFTVI#issuecomment-521689557&gt;,
&gt; or mute the thread
&gt; &lt;https://github.com/notifications/unsubscribe-auth/AAOIJBNQCFLB7KGZNCT4JULQEV2ZNANCNFSM4IL6SDUA&gt;
&gt; .
&gt;
-- 
--
Luca Burgazzoli

                </div><div><b>label:</b> code-design
                </div></div></li><li><div>
                I have primitive PoC how this could work. 

Plz. assign to me.
              </div></li></ol></div><div><b>github_pulls:</b> <ol></ol></div><div><b>github_pulls_comments:</b> <ol></ol></div><div><b>github_pulls_reviews:</b> <ol></ol></div><div><b>jira_issues:</b> <ol></ol></div><div><b>jira_issues_comments:</b> <ol></ol></div></div></html>