<!DOCTYPE html><html><div class="item-title">
        Item 192
      </div> <div class="item-details"><div><b>git_comments:</b> <ol><li><div>
                * The split enumerator created from the associated Source. This one is created either during resetting
	 * the coordinator to a checkpoint, or when the coordinator is started. 
              </div></li><li><div>
                 there are two ways the coordinator can get created:
  (1) Source.restoreEnumerator(), in which case the 'resetToCheckpoint()' method creates it
  (2) Source.createEnumerator, in which case it has not been created, yet, and we create it here
              </div></li><li><div>
                 ------------------------------------------------------------------------
  test mocks
 ------------------------------------------------------------------------
              </div></li><li><div><div><b>comment:</b>  cleanup
                </div><div><b>label:</b> code-design
                </div></div></li><li><div>
                 ------------------------------------------------------------------------
  test helpers
 ------------------------------------------------------------------------
              </div></li></ol></div><div><b>git_commits:</b> <ol><li><div><div><b>summary:</b> [FLINK-20223][runtime] (part 2) Set user code classloader as context class loader for SplitEnumerator creation and thread
                </div><div><b>message:</b> [FLINK-20223][runtime] (part 2) Set user code classloader as context class loader for SplitEnumerator creation and thread

Co-authored-by: Jiangjie (Becket) Qin &lt;jiangjie.qj@alibaba-inc.com&gt;

  - This moves the instantiation of the SplitEnumerator out of the constructor to prevent double-instantiation
  - Add context class loaders to creation and coordinator thread
  - Class-loading and SplitEnumerator instantiation is purely handled in the SourceCoordinator and does not leak
    into RecreateOnResetOperatorCoordinator.

                </div><div><b>label:</b> code-design
                </div></div></li></ol></div><div><b>github_issues:</b> <ol></ol></div><div><b>github_issues_comments:</b> <ol></ol></div><div><b>github_pulls:</b> <ol></ol></div><div><b>github_pulls_comments:</b> <ol></ol></div><div><b>github_pulls_reviews:</b> <ol></ol></div><div><b>jira_issues:</b> <ol><li><div><div><b>summary:</b> The RecreateOnResetOperatorCoordinator and SourceCoordinator executor thread should use the user class loader.
                </div><div><b>description:</b> The {{RecreateOnResetOperatorCoordinator}}&nbsp;and the {{SourceCoordinator}}&nbsp;executor thread should both use the user class loader. Otherwise {{ClassNotFoundException}}&nbsp;may be thrown from the interaction with the {{SplitEnumerator}}s.
                </div></div></li><li><div><div><b>summary:</b> The RecreateOnResetOperatorCoordinator and SourceCoordinator executor thread should use the user class loader.
                </div><div><b>description:</b> The {{RecreateOnResetOperatorCoordinator}}&nbsp;and the {{SourceCoordinator}}&nbsp;executor thread should both use the user class loader. Otherwise {{ClassNotFoundException}}&nbsp;may be thrown from the interaction with the {{SplitEnumerator}}s.
                </div></div></li><li><div><div><b>summary:</b> The RecreateOnResetOperatorCoordinator and SourceCoordinator executor thread should use the user class loader.
                </div><div><b>description:</b> The {{RecreateOnResetOperatorCoordinator}}&nbsp;and the {{SourceCoordinator}}&nbsp;executor thread should both use the user class loader. Otherwise {{ClassNotFoundException}}&nbsp;may be thrown from the interaction with the {{SplitEnumerator}}s.
                </div></div></li></ol></div><div><b>jira_issues_comments:</b> <ol><li><div>
                Fixed in 1.12.0 via
  - 0132fa2bafd81bc55ff10f0306534a163296d6da
  - 40bbc174411b1502842ed3cdb9c421d51aa5fc0d
              </div></li></ol></div></div></html>