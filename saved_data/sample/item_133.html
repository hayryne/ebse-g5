<!DOCTYPE html><html><div class="item-title">
        Item 133
      </div> <div class="item-details"><div><b>git_comments:</b> <ol><li><div>
                
 * Licensed to the Apache Software Foundation (ASF) under one
 *  or more contributor license agreements.  See the NOTICE file
 *  distributed with this work for additional information
 *  regarding copyright ownership.  The ASF licenses this file
 *  to you under the Apache License, Version 2.0 (the
 *  "License"); you may not use this file except in compliance
 *  with the License.  You may obtain a copy of the License at
 *
 *       http://www.apache.org/licenses/LICENSE-2.0
 *
 *  Unless required by applicable law or agreed to in writing, software
 *  distributed under the License is distributed on an "AS IS" BASIS,
 *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 *  See the License for the specific language governing permissions and
 *  limitations under the License.
 
              </div></li><li><div>
                *
 * Test miscellaneous service operations through mocked failures.
 
              </div></li><li><div>
                *
   * Stop a service; if it is null do nothing. Exceptions are caught and
   * logged at warn level. (but not Throwables). This operation is intended to
   * be used in cleanup operations
   *
   * @param log the log to warn at
   * @param service a service; may be null
   * @return any exception that was caught; null if none was.
   * @see ServiceOperations#stopQuietly(Service)
   
              </div></li></ol></div><div><b>git_commits:</b> <ol><li><div><div><b>summary:</b> HADOOP-14615. Add ServiceOperations.stopQuietly that accept slf4j logger API.
                </div><div><b>message:</b> HADOOP-14615. Add ServiceOperations.stopQuietly that accept slf4j logger API.
Contributed by Wenxin He.

(cherry picked from commit 1aaa7f1eacab20d1c27f410333a536033cad1aab)

                </div></div></li></ol></div><div><b>github_issues:</b> <ol></ol></div><div><b>github_issues_comments:</b> <ol></ol></div><div><b>github_pulls:</b> <ol></ol></div><div><b>github_pulls_comments:</b> <ol></ol></div><div><b>github_pulls_reviews:</b> <ol></ol></div><div><b>jira_issues:</b> <ol><li><div><div><b>summary:</b> Add ServiceOperations.stopQuietly that accept slf4j logger API
                </div><div><b>description:</b> Split from HADOOP-14539.
Now ServiceOperations.stopQuietly only accepts commons-logging logger API. Now we are migrating the APIs to slf4j, slf4j logger API should be accepted as well. 
                </div></div></li><li><div><div><b>summary:</b> Add ServiceOperations.stopQuietly that accept slf4j logger API
                </div><div><b>description:</b> Split from HADOOP-14539.
Now ServiceOperations.stopQuietly only accepts commons-logging logger API. Now we are migrating the APIs to slf4j, slf4j logger API should be accepted as well. 
                </div><div><b>label:</b> code-design
                </div></div></li><li><div><div><b>summary:</b> Add ServiceOperations.stopQuietly that accept slf4j logger API
                </div><div><b>description:</b> Split from HADOOP-14539.
Now ServiceOperations.stopQuietly only accepts commons-logging logger API. Now we are migrating the APIs to slf4j, slf4j logger API should be accepted as well. 
                </div></div></li><li><div><div><b>summary:</b> Add ServiceOperations.stopQuietly that accept slf4j logger API
                </div><div><b>description:</b> Split from HADOOP-14539.
Now ServiceOperations.stopQuietly only accepts commons-logging logger API. Now we are migrating the APIs to slf4j, slf4j logger API should be accepted as well. 
                </div></div></li><li><div><div><b>summary:</b> Add ServiceOperations.stopQuietly that accept slf4j logger API
                </div><div><b>description:</b> Split from HADOOP-14539.
Now ServiceOperations.stopQuietly only accepts commons-logging logger API. Now we are migrating the APIs to slf4j, slf4j logger API should be accepted as well. 
                </div></div></li><li><div><div><b>summary:</b> Add ServiceOperations.stopQuietly that accept slf4j logger API
                </div><div><b>description:</b> Split from HADOOP-14539.
Now ServiceOperations.stopQuietly only accepts commons-logging logger API. Now we are migrating the APIs to slf4j, slf4j logger API should be accepted as well. 
                </div></div></li><li><div><div><b>summary:</b> Add ServiceOperations.stopQuietly that accept slf4j logger API
                </div><div><b>description:</b> Split from HADOOP-14539.
Now ServiceOperations.stopQuietly only accepts commons-logging logger API. Now we are migrating the APIs to slf4j, slf4j logger API should be accepted as well. 
                </div></div></li><li><div><div><b>summary:</b> Add ServiceOperations.stopQuietly that accept slf4j logger API
                </div><div><b>description:</b> Split from HADOOP-14539.
Now ServiceOperations.stopQuietly only accepts commons-logging logger API. Now we are migrating the APIs to slf4j, slf4j logger API should be accepted as well. 
                </div></div></li><li><div><div><b>summary:</b> Add ServiceOperations.stopQuietly that accept slf4j logger API
                </div><div><b>description:</b> Split from HADOOP-14539.
Now ServiceOperations.stopQuietly only accepts commons-logging logger API. Now we are migrating the APIs to slf4j, slf4j logger API should be accepted as well. 
                </div><div><b>label:</b> documentation
                </div></div></li><li><div><div><b>summary:</b> Add ServiceOperations.stopQuietly that accept slf4j logger API
                </div><div><b>description:</b> Split from HADOOP-14539.
Now ServiceOperations.stopQuietly only accepts commons-logging logger API. Now we are migrating the APIs to slf4j, slf4j logger API should be accepted as well. 
                </div></div></li><li><div><div><b>summary:</b> Add ServiceOperations.stopQuietly that accept slf4j logger API
                </div><div><b>description:</b> Split from HADOOP-14539.
Now ServiceOperations.stopQuietly only accepts commons-logging logger API. Now we are migrating the APIs to slf4j, slf4j logger API should be accepted as well. 
                </div></div></li><li><div><div><b>summary:</b> Add ServiceOperations.stopQuietly that accept slf4j logger API
                </div><div><b>description:</b> Split from HADOOP-14539.
Now ServiceOperations.stopQuietly only accepts commons-logging logger API. Now we are migrating the APIs to slf4j, slf4j logger API should be accepted as well. 
                </div></div></li></ol></div><div><b>jira_issues_comments:</b> <ol><li><div>
                | (x) *{color:red}-1 overall{color}* |
\\
\\
|| Vote || Subsystem || Runtime || Comment ||
| {color:blue}0{color} | {color:blue} reexec {color} | {color:blue}  0m 22s{color} | {color:blue} Docker mode activated. {color} |
| {color:green}+1{color} | {color:green} @author {color} | {color:green}  0m  0s{color} | {color:green} The patch does not contain any @author tags. {color} |
| {color:red}-1{color} | {color:red} test4tests {color} | {color:red}  0m  0s{color} | {color:red} The patch doesn't appear to include any new or modified tests. Please justify why no new tests are needed for this patch. Also please list what manual steps were performed to verify this patch. {color} |
| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green} 14m 12s{color} | {color:green} trunk passed {color} |
| {color:green}+1{color} | {color:green} compile {color} | {color:green} 13m 52s{color} | {color:green} trunk passed {color} |
| {color:green}+1{color} | {color:green} checkstyle {color} | {color:green}  0m 38s{color} | {color:green} trunk passed {color} |
| {color:green}+1{color} | {color:green} mvnsite {color} | {color:green}  1m  8s{color} | {color:green} trunk passed {color} |
| {color:green}+1{color} | {color:green} findbugs {color} | {color:green}  1m 27s{color} | {color:green} trunk passed {color} |
| {color:green}+1{color} | {color:green} javadoc {color} | {color:green}  0m 52s{color} | {color:green} trunk passed {color} |
| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green}  1m  1s{color} | {color:green} the patch passed {color} |
| {color:green}+1{color} | {color:green} compile {color} | {color:green} 16m 59s{color} | {color:green} the patch passed {color} |
| {color:green}+1{color} | {color:green} javac {color} | {color:green} 16m 59s{color} | {color:green} the patch passed {color} |
| {color:green}+1{color} | {color:green} checkstyle {color} | {color:green}  0m 36s{color} | {color:green} the patch passed {color} |
| {color:green}+1{color} | {color:green} mvnsite {color} | {color:green}  1m  3s{color} | {color:green} the patch passed {color} |
| {color:green}+1{color} | {color:green} whitespace {color} | {color:green}  0m  0s{color} | {color:green} The patch has no whitespace issues. {color} |
| {color:green}+1{color} | {color:green} findbugs {color} | {color:green}  1m 31s{color} | {color:green} the patch passed {color} |
| {color:green}+1{color} | {color:green} javadoc {color} | {color:green}  0m 49s{color} | {color:green} the patch passed {color} |
| {color:green}+1{color} | {color:green} unit {color} | {color:green}  8m  2s{color} | {color:green} hadoop-common in the patch passed. {color} |
| {color:green}+1{color} | {color:green} asflicense {color} | {color:green}  0m 34s{color} | {color:green} The patch does not generate ASF License warnings. {color} |
| {color:black}{color} | {color:black} {color} | {color:black} 65m  7s{color} | {color:black} {color} |
\\
\\
|| Subsystem || Report/Notes ||
| Docker |  Image:yetus/hadoop:14b5c93 |
| JIRA Issue | HADOOP-14615 |
| JIRA Patch URL | https://issues.apache.org/jira/secure/attachment/12875203/HADOOP-14615.001.patch |
| Optional Tests |  asflicense  compile  javac  javadoc  mvninstall  mvnsite  unit  findbugs  checkstyle  |
| uname | Linux 0cbb29efe57c 3.13.0-116-generic #163-Ubuntu SMP Fri Mar 31 14:13:22 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux |
| Build tool | maven |
| Personality | /testptch/hadoop/patchprocess/precommit/personality/provided.sh |
| git revision | trunk / 3be2659 |
| Default Java | 1.8.0_131 |
| findbugs | v3.1.0-RC1 |
|  Test Results | https://builds.apache.org/job/PreCommit-HADOOP-Build/12684/testReport/ |
| modules | C: hadoop-common-project/hadoop-common U: hadoop-common-project/hadoop-common |
| Console output | https://builds.apache.org/job/PreCommit-HADOOP-Build/12684/console |
| Powered by | Apache Yetus 0.5.0-SNAPSHOT   http://yetus.apache.org |


This message was automatically generated.


              </div></li><li><div><div><b>body:</b> this is something we need.

could you move the log.warn message to the SLF4J message construction LOG.warn(" {}"), style? It's more robust as well as efficient (though on a warning I don't care about efficiency. robustness I do)
                </div><div><b>label:</b> code-design
                </div></div></li><li><div>
                Thanks for your advice, [~stevel@apache.org].

002.patch attached.
              </div></li><li><div>
                | (x) *{color:red}-1 overall{color}* |
\\
\\
|| Vote || Subsystem || Runtime || Comment ||
| {color:blue}0{color} | {color:blue} reexec {color} | {color:blue}  0m 13s{color} | {color:blue} Docker mode activated. {color} |
| {color:green}+1{color} | {color:green} @author {color} | {color:green}  0m  0s{color} | {color:green} The patch does not contain any @author tags. {color} |
| {color:red}-1{color} | {color:red} test4tests {color} | {color:red}  0m  0s{color} | {color:red} The patch doesn't appear to include any new or modified tests. Please justify why no new tests are needed for this patch. Also please list what manual steps were performed to verify this patch. {color} |
| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green} 15m 49s{color} | {color:green} trunk passed {color} |
| {color:green}+1{color} | {color:green} compile {color} | {color:green} 16m 49s{color} | {color:green} trunk passed {color} |
| {color:green}+1{color} | {color:green} checkstyle {color} | {color:green}  0m 36s{color} | {color:green} trunk passed {color} |
| {color:green}+1{color} | {color:green} mvnsite {color} | {color:green}  1m  3s{color} | {color:green} trunk passed {color} |
| {color:green}+1{color} | {color:green} findbugs {color} | {color:green}  1m 23s{color} | {color:green} trunk passed {color} |
| {color:green}+1{color} | {color:green} javadoc {color} | {color:green}  0m 47s{color} | {color:green} trunk passed {color} |
| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green}  0m 39s{color} | {color:green} the patch passed {color} |
| {color:green}+1{color} | {color:green} compile {color} | {color:green} 10m  6s{color} | {color:green} the patch passed {color} |
| {color:green}+1{color} | {color:green} javac {color} | {color:green} 10m  6s{color} | {color:green} the patch passed {color} |
| {color:green}+1{color} | {color:green} checkstyle {color} | {color:green}  0m 36s{color} | {color:green} the patch passed {color} |
| {color:green}+1{color} | {color:green} mvnsite {color} | {color:green}  1m  1s{color} | {color:green} the patch passed {color} |
| {color:green}+1{color} | {color:green} whitespace {color} | {color:green}  0m  0s{color} | {color:green} The patch has no whitespace issues. {color} |
| {color:green}+1{color} | {color:green} findbugs {color} | {color:green}  1m 30s{color} | {color:green} the patch passed {color} |
| {color:green}+1{color} | {color:green} javadoc {color} | {color:green}  0m 49s{color} | {color:green} the patch passed {color} |
| {color:red}-1{color} | {color:red} unit {color} | {color:red}  7m 22s{color} | {color:red} hadoop-common in the patch failed. {color} |
| {color:green}+1{color} | {color:green} asflicense {color} | {color:green}  0m 33s{color} | {color:green} The patch does not generate ASF License warnings. {color} |
| {color:black}{color} | {color:black} {color} | {color:black} 61m  4s{color} | {color:black} {color} |
\\
\\
|| Reason || Tests ||
| Failed junit tests | hadoop.ha.TestZKFailoverController |
\\
\\
|| Subsystem || Report/Notes ||
| Docker |  Image:yetus/hadoop:14b5c93 |
| JIRA Issue | HADOOP-14615 |
| JIRA Patch URL | https://issues.apache.org/jira/secure/attachment/12875357/HADOOP-14615.002.patch |
| Optional Tests |  asflicense  compile  javac  javadoc  mvninstall  mvnsite  unit  findbugs  checkstyle  |
| uname | Linux aa37a8d1b429 3.13.0-119-generic #166-Ubuntu SMP Wed May 3 12:18:55 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux |
| Build tool | maven |
| Personality | /testptch/hadoop/patchprocess/precommit/personality/provided.sh |
| git revision | trunk / fa1aaee |
| Default Java | 1.8.0_131 |
| findbugs | v3.1.0-RC1 |
| unit | https://builds.apache.org/job/PreCommit-HADOOP-Build/12695/artifact/patchprocess/patch-unit-hadoop-common-project_hadoop-common.txt |
|  Test Results | https://builds.apache.org/job/PreCommit-HADOOP-Build/12695/testReport/ |
| modules | C: hadoop-common-project/hadoop-common U: hadoop-common-project/hadoop-common |
| Console output | https://builds.apache.org/job/PreCommit-HADOOP-Build/12695/console |
| Powered by | Apache Yetus 0.5.0-SNAPSHOT   http://yetus.apache.org |


This message was automatically generated.


              </div></li><li><div>
                The test failure is unreleated. It runs successfully in my environments. [~stevel@apache.org]
              </div></li><li><div>
                Should we add a test for this? Once the API gets adopted, it's less relevant, but it's probably worth during for completion, at least with a dummy service which throws an IOE in its close(). That way we get to verify that the method really is resilient to failures
              </div></li><li><div>
                Thanks, [~stevel@apache.org].

Test added in 003.patch.
              </div></li><li><div>
                | (/) *{color:green}+1 overall{color}* |
\\
\\
|| Vote || Subsystem || Runtime || Comment ||
| {color:blue}0{color} | {color:blue} reexec {color} | {color:blue}  0m 21s{color} | {color:blue} Docker mode activated. {color} |
| {color:green}+1{color} | {color:green} @author {color} | {color:green}  0m  0s{color} | {color:green} The patch does not contain any @author tags. {color} |
| {color:green}+1{color} | {color:green} test4tests {color} | {color:green}  0m  0s{color} | {color:green} The patch appears to include 1 new or modified test files. {color} |
| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green} 14m 19s{color} | {color:green} trunk passed {color} |
| {color:green}+1{color} | {color:green} compile {color} | {color:green} 15m 36s{color} | {color:green} trunk passed {color} |
| {color:green}+1{color} | {color:green} checkstyle {color} | {color:green}  0m 33s{color} | {color:green} trunk passed {color} |
| {color:green}+1{color} | {color:green} mvnsite {color} | {color:green}  1m  5s{color} | {color:green} trunk passed {color} |
| {color:green}+1{color} | {color:green} findbugs {color} | {color:green}  1m 28s{color} | {color:green} trunk passed {color} |
| {color:green}+1{color} | {color:green} javadoc {color} | {color:green}  0m 50s{color} | {color:green} trunk passed {color} |
| {color:green}+1{color} | {color:green} mvninstall {color} | {color:green}  0m 46s{color} | {color:green} the patch passed {color} |
| {color:green}+1{color} | {color:green} compile {color} | {color:green} 11m 40s{color} | {color:green} the patch passed {color} |
| {color:green}+1{color} | {color:green} javac {color} | {color:green} 11m 40s{color} | {color:green} the patch passed {color} |
| {color:orange}-0{color} | {color:orange} checkstyle {color} | {color:orange}  0m 32s{color} | {color:orange} hadoop-common-project/hadoop-common: The patch generated 1 new + 4 unchanged - 0 fixed = 5 total (was 4) {color} |
| {color:green}+1{color} | {color:green} mvnsite {color} | {color:green}  1m  4s{color} | {color:green} the patch passed {color} |
| {color:green}+1{color} | {color:green} whitespace {color} | {color:green}  0m  0s{color} | {color:green} The patch has no whitespace issues. {color} |
| {color:green}+1{color} | {color:green} findbugs {color} | {color:green}  1m 38s{color} | {color:green} the patch passed {color} |
| {color:green}+1{color} | {color:green} javadoc {color} | {color:green}  0m 55s{color} | {color:green} the patch passed {color} |
| {color:green}+1{color} | {color:green} unit {color} | {color:green}  8m 22s{color} | {color:green} hadoop-common in the patch passed. {color} |
| {color:green}+1{color} | {color:green} asflicense {color} | {color:green}  0m 31s{color} | {color:green} The patch does not generate ASF License warnings. {color} |
| {color:black}{color} | {color:black} {color} | {color:black} 61m 22s{color} | {color:black} {color} |
\\
\\
|| Subsystem || Report/Notes ||
| Docker |  Image:yetus/hadoop:14b5c93 |
| JIRA Issue | HADOOP-14615 |
| JIRA Patch URL | https://issues.apache.org/jira/secure/attachment/12875577/HADOOP-14615.003.patch |
| Optional Tests |  asflicense  compile  javac  javadoc  mvninstall  mvnsite  unit  findbugs  checkstyle  |
| uname | Linux d3865725f18d 4.4.0-43-generic #63-Ubuntu SMP Wed Oct 12 13:48:03 UTC 2016 x86_64 x86_64 x86_64 GNU/Linux |
| Build tool | maven |
| Personality | /testptch/hadoop/patchprocess/precommit/personality/provided.sh |
| git revision | trunk / 186650d |
| Default Java | 1.8.0_131 |
| findbugs | v3.1.0-RC1 |
| checkstyle | https://builds.apache.org/job/PreCommit-HADOOP-Build/12711/artifact/patchprocess/diff-checkstyle-hadoop-common-project_hadoop-common.txt |
|  Test Results | https://builds.apache.org/job/PreCommit-HADOOP-Build/12711/testReport/ |
| modules | C: hadoop-common-project/hadoop-common U: hadoop-common-project/hadoop-common |
| Console output | https://builds.apache.org/job/PreCommit-HADOOP-Build/12711/console |
| Powered by | Apache Yetus 0.5.0-SNAPSHOT   http://yetus.apache.org |


This message was automatically generated.


              </div></li><li><div><div><b>body:</b> LTGM
+1

committed with the javadoc complaint fixed; no need to go round on another iteration on that.
                </div><div><b>label:</b> documentation
                </div></div></li><li><div>
                SUCCESS: Integrated in Jenkins build Hadoop-trunk-Commit #11965 (See [https://builds.apache.org/job/Hadoop-trunk-Commit/11965/])
HADOOP-14615. Add ServiceOperations.stopQuietly that accept slf4j logger (stevel: rev 1aaa7f1eacab20d1c27f410333a536033cad1aab)
* (add) hadoop-common-project/hadoop-common/src/test/java/org/apache/hadoop/service/TestServiceOperations.java
* (edit) hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/service/ServiceOperations.java

              </div></li><li><div>
                Thanks, [~stevel@apache.org]!
              </div></li></ol></div></div></html>