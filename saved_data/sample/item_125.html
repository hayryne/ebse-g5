<!DOCTYPE html><html><div class="item-title">
        Item 125
      </div> <div class="item-details"><div><b>git_comments:</b> <ol><li><div>
                *
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * "License"); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 
              </div></li><li><div>
                 getFileStatus() is supposed to pass through with the default filter.
              </div></li><li><div>
                 add authentication filter for webhdfs
              </div></li></ol></div><div><b>git_commits:</b> <ol><li><div><div><b>summary:</b> HDFS-5716. Allow WebHDFS to use pluggable authentication filter. Contributed by Haohui Mai
                </div><div><b>message:</b> HDFS-5716. Allow WebHDFS to use pluggable authentication filter. Contributed by Haohui Mai

git-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1568547 13f79535-47bb-0310-9956-ffa450edef68

                </div></div></li></ol></div><div><b>github_issues:</b> <ol></ol></div><div><b>github_issues_comments:</b> <ol></ol></div><div><b>github_pulls:</b> <ol></ol></div><div><b>github_pulls_comments:</b> <ol></ol></div><div><b>github_pulls_reviews:</b> <ol></ol></div><div><b>jira_issues:</b> <ol><li><div><div><b>summary:</b> Allow WebHDFS to use pluggable authentication filter
                </div><div><b>description:</b> Currently the WebHDFS server only uses SPNEGO filters for authentication purposes. The design serves the purpose well when SPNEGO is available, however, other services (e.g., the web UI) where SPNEGO might be unavailable can also use WebHDFS.

Note that the web UI and the WebHDFS are served by the same Jetty server on the same port. The Web UI can use customized authentication filters, it might make sense to allow WebHDFS to take customized authentication filters as well.
                </div></div></li></ol></div><div><b>jira_issues_comments:</b> <ol><li><div>
                This patch introduces a new configuration {{dfs.web.authentication.filter}}, which allows the users to specify its own filter to authorize webhdfs requests.
The default is to authorize the requests using spnego if security is enabled.
              </div></li><li><div>
                The v1 patch adds a new unit test.
              </div></li><li><div>
                {color:red}-1 overall{color}.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12627713/HDFS-5716.001.patch
  against trunk revision .

    {color:green}+1 @author{color}.  The patch does not contain any @author tags.

    {color:green}+1 tests included{color}.  The patch appears to include 1 new or modified test files.

    {color:green}+1 javac{color}.  The applied patch does not increase the total number of javac compiler warnings.

    {color:green}+1 javadoc{color}.  There were no new javadoc warning messages.

    {color:green}+1 eclipse:eclipse{color}.  The patch built with eclipse:eclipse.

    {color:green}+1 findbugs{color}.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.

    {color:green}+1 release audit{color}.  The applied patch does not increase the total number of release audit warnings.

    {color:red}-1 core tests{color}.  The patch failed these unit tests in hadoop-hdfs-project/hadoop-hdfs:

                  org.apache.hadoop.hdfs.server.namenode.ha.TestHASafeMode
                  org.apache.hadoop.hdfs.server.namenode.TestCacheDirectives
                  org.apache.hadoop.hdfs.server.namenode.TestAuditLogs

    {color:green}+1 contrib tests{color}.  The patch passed contrib unit tests.

Test results: https://builds.apache.org/job/PreCommit-HDFS-Build/6078//testReport/
Console output: https://builds.apache.org/job/PreCommit-HDFS-Build/6078//console

This message is automatically generated.
              </div></li><li><div><div><b>body:</b> +1. The patch looks good to me. 
Minor: it would be nice to add some comments to the unit test testWebHdfsAuthFilter().
                </div><div><b>label:</b> documentation
                </div></div></li><li><div>
                Thanks Brandon for the review. The v2 patch addresses Brandon's comment.
              </div></li><li><div>
                {noformat}+    // getFileStatus() is supposed to pass through with the default filter.{noformat}
Here, getFileStatus() should fail or pass?
              </div></li><li><div>
                {quote}Here, getFileStatus() should fail or pass?{quote}
It should pass with default filter but fail with the test filter. 

I will commit the patch soon.
              </div></li><li><div>
                {color:red}-1 overall{color}.  Here are the results of testing the latest attachment 
  http://issues.apache.org/jira/secure/attachment/12629158/HDFS-5716.002.patch
  against trunk revision .

    {color:red}-1 patch{color}.  The patch command could not apply the patch.

Console output: https://builds.apache.org/job/PreCommit-HDFS-Build/6161//console

This message is automatically generated.
              </div></li><li><div>
                The new patch has just comment change and got +1 from Jinkins last time already. The test failures are unrelated.
I've committed the patch.  Thank you, Haohui.
              </div></li><li><div>
                SUCCESS: Integrated in Hadoop-trunk-Commit #5175 (See [https://builds.apache.org/job/Hadoop-trunk-Commit/5175/])
HDFS-5716. Allow WebHDFS to use pluggable authentication filter. Contributed by Haohui Mai (brandonli: http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;view=rev&amp;rev=1568547)
* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt
* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/DFSConfigKeys.java
* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/NameNodeHttpServer.java
* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/test/java/org/apache/hadoop/hdfs/web/TestWebHdfsWithAuthenticationFilter.java

              </div></li><li><div>
                FAILURE: Integrated in Hadoop-Yarn-trunk #482 (See [https://builds.apache.org/job/Hadoop-Yarn-trunk/482/])
HDFS-5716. Allow WebHDFS to use pluggable authentication filter. Contributed by Haohui Mai (brandonli: http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;view=rev&amp;rev=1568547)
* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt
* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/DFSConfigKeys.java
* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/NameNodeHttpServer.java
* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/test/java/org/apache/hadoop/hdfs/web/TestWebHdfsWithAuthenticationFilter.java

              </div></li><li><div>
                FAILURE: Integrated in Hadoop-Hdfs-trunk #1674 (See [https://builds.apache.org/job/Hadoop-Hdfs-trunk/1674/])
HDFS-5716. Allow WebHDFS to use pluggable authentication filter. Contributed by Haohui Mai (brandonli: http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;view=rev&amp;rev=1568547)
* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt
* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/DFSConfigKeys.java
* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/NameNodeHttpServer.java
* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/test/java/org/apache/hadoop/hdfs/web/TestWebHdfsWithAuthenticationFilter.java

              </div></li><li><div>
                SUCCESS: Integrated in Hadoop-Mapreduce-trunk #1699 (See [https://builds.apache.org/job/Hadoop-Mapreduce-trunk/1699/])
HDFS-5716. Allow WebHDFS to use pluggable authentication filter. Contributed by Haohui Mai (brandonli: http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;view=rev&amp;rev=1568547)
* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/CHANGES.txt
* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/DFSConfigKeys.java
* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/NameNodeHttpServer.java
* /hadoop/common/trunk/hadoop-hdfs-project/hadoop-hdfs/src/test/java/org/apache/hadoop/hdfs/web/TestWebHdfsWithAuthenticationFilter.java

              </div></li></ol></div></div></html>