<!DOCTYPE html><html><div class="item-title">
        Item 277
      </div> <div class="item-details"><div><b>git_comments:</b> <ol><li><div>
                 use a different table with a unique name for each variation
              </div></li><li><div>
                 test each combination of types and salting
              </div></li><li><div><div><b>comment:</b>  clean up the connections used
                </div><div><b>label:</b> code-design
                </div></div></li></ol></div><div><b>git_commits:</b> <ol><li><div><div><b>summary:</b> PHOENIX-6034 Optimize InListIT (#838)
                </div><div><b>message:</b> PHOENIX-6034 Optimize InListIT (#838)


                </div></div></li></ol></div><div><b>github_issues:</b> <ol></ol></div><div><b>github_issues_comments:</b> <ol></ol></div><div><b>github_pulls:</b> <ol><li><div><div><b>title:</b> PHOENIX-6034 Optimize InListIT
                </div><div><b>body:</b> These changes have reduced the time of the test from 16mins to 50seconds.
                </div></div></li><li><div><div><b>title:</b> PHOENIX-6034 Optimize InListIT
                </div><div><b>body:</b> These changes have reduced the time of the test from 16mins to 50seconds.
                </div><div><b>label:</b> code-design
                </div></div></li><li><div><div><b>title:</b> PHOENIX-6034 Optimize InListIT
                </div><div><b>body:</b> These changes have reduced the time of the test from 16mins to 50seconds.
                </div></div></li><li><div><div><b>title:</b> PHOENIX-6034 Optimize InListIT
                </div><div><b>body:</b> These changes have reduced the time of the test from 16mins to 50seconds.
                </div><div><b>label:</b> code-design
                </div></div></li><li><div><div><b>title:</b> PHOENIX-6034 Optimize InListIT
                </div><div><b>body:</b> These changes have reduced the time of the test from 16mins to 50seconds.
                </div></div></li><li><div><div><b>title:</b> PHOENIX-6034 Optimize InListIT
                </div><div><b>body:</b> These changes have reduced the time of the test from 16mins to 50seconds.
                </div></div></li></ol></div><div><b>github_pulls_comments:</b> <ol></ol></div><div><b>github_pulls_reviews:</b> <ol><li><div><div><b>body:</b> Instead of the initialized variable, could we change this to the @BeforeClass annotation instead?
In fact would the whole test still work if we only change @Before to @BeforeClass?
                </div><div><b>label:</b> code-design
                </div></div></li><li><div>
                And sorry I missed this for so long. I was off end of July and then missed it.
              </div></li><li><div><div><b>body:</b> &gt; would the whole test still work if we only change @before to @BeforeClass?

Yeah , actually @BeforeClass requires a method to be static so all the data structures need to be updated as static. I didn't spend time doing that probably because of being lazy though could have used @BeforeAll and make the Junit lifecycle to be @TestInstance(Lifecycle.PER_CLASS) to avoid an initialized variable.
                </div><div><b>label:</b> code-design
                </div></div></li><li><div>
                I looked up @TestInstance because it sounds interesting, but it's a Junit5 feature, and we're still on Junit 4. AFAICT The only solutions are your current one, or using @BeforeClass as you said.
              </div></li></ol></div><div><b>jira_issues:</b> <ol><li><div><div><b>summary:</b> Optimize InListIT
                </div><div><b>description:</b> This is just an attempt to take one test from Lars [list|[https://www.mail-archive.com/dev@phoenix.apache.org/msg57310.html]] and improve the performance.

&nbsp;

&nbsp;
                </div></div></li></ol></div><div><b>jira_issues_comments:</b> <ol><li><div>
                We now have two different tickets and patches for this issue.&nbsp;PHOENIX-6029&nbsp; and this one.

(I didn't check which patch is superior.)
              </div></li><li><div><div><b>body:</b> I looked into your code and it seems to be fine for me. I realised that the lot of same initialisation caused the slow test run as well, but your solution is better.
I closed&nbsp;PHOENIX-6029&nbsp;as duplicate, let's go with this one.
                </div><div><b>label:</b> code-design
                </div></div></li><li><div>
                +1
              </div></li><li><div>
                Sorry [~RichardAntal], I didn't know that you were working on it otherwise could have reviewed yours instead of creating this.

&nbsp;

&nbsp;

&nbsp;
              </div></li><li><div>
                Thanks for picking this up [~ankit@apache.org] (and [~RichardAntal])!

Nice to see some work on reducing the test runtimes.
              </div></li><li><div>
                Looks like the last run took just about 3 minutes. Great job!!
              </div></li></ol></div></div></html>