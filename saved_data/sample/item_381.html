<!DOCTYPE html><html><div class="item-title">
        Item 381
      </div> <div class="item-details"><div><b>git_comments:</b> <ol><li><div>
                *
   * Return Maximum records
   * @return
   
              </div></li></ol></div><div><b>git_commits:</b> <ol><li><div><div><b>summary:</b> [CARBONDATA-2356] Added UT Scenarios for LuceneDataMap
                </div><div><b>message:</b> [CARBONDATA-2356] Added UT Scenarios for LuceneDataMap

This closes #2180

                </div></div></li></ol></div><div><b>github_issues:</b> <ol></ol></div><div><b>github_issues_comments:</b> <ol></ol></div><div><b>github_pulls:</b> <ol><li><div><div><b>title:</b> [CARBONDATA-2356] Added UT Scenarios for LuceneDataMap
                </div><div><b>body:</b> 
 - [X] Any interfaces changed?
          NA
 - [X] Any backward compatibility impacted?
          NA
 - [X] Document update required?
          NA
 - [X] Testing done
        Please provide details on 
        - Whether new unit test cases have been added or why no new tests are required?
        - How it is tested? Please attach test report.
        - Is it a performance related change? Please attach the performance test report.
        - Any additional information to help reviewers in testing this change.
         NA
 - [X] For large changes, please consider breaking it into sub-tasks under an umbrella JIRA. 
         NA

                </div></div></li></ol></div><div><b>github_pulls_comments:</b> <ol><li><div>
                Build Failed with Spark 2.2.1, Please check CI http://88.99.58.216:8080/job/ApacheCarbonPRBuilder/3904/

              </div></li><li><div>
                Build Success with Spark 2.1.0, Please check CI http://136.243.101.176:8080/job/ApacheCarbonPRBuilder1/5125/

              </div></li><li><div>
                Build Failed with Spark 2.2.1, Please check CI http://88.99.58.216:8080/job/ApacheCarbonPRBuilder/3927/

              </div></li><li><div>
                Build Failed  with Spark 2.1.0, Please check CI http://136.243.101.176:8080/job/ApacheCarbonPRBuilder1/5149/

              </div></li><li><div>
                Build Success with Spark 2.2.1, Please check CI http://88.99.58.216:8080/job/ApacheCarbonPRBuilder/3930/

              </div></li><li><div>
                Build Failed  with Spark 2.1.0, Please check CI http://136.243.101.176:8080/job/ApacheCarbonPRBuilder1/5151/

              </div></li><li><div>
                Build Success with Spark 2.2.1, Please check CI http://88.99.58.216:8080/job/ApacheCarbonPRBuilder/3935/

              </div></li><li><div>
                Retest this please
              </div></li><li><div>
                Retest this please
              </div></li><li><div>
                Build Success with Spark 2.2.1, Please check CI http://88.99.58.216:8080/job/ApacheCarbonPRBuilder/4025/

              </div></li><li><div>
                Build Failed  with Spark 2.1.0, Please check CI http://136.243.101.176:8080/job/ApacheCarbonPRBuilder1/5220/

              </div></li><li><div>
                Retest this please
              </div></li><li><div>
                Build Success with Spark 2.2.1, Please check CI http://88.99.58.216:8080/job/ApacheCarbonPRBuilder/4034/

              </div></li><li><div>
                Build Failed with Spark 2.2.1, Please check CI http://88.99.58.216:8080/job/ApacheCarbonPRBuilder/4038/

              </div></li><li><div>
                Retest this please
              </div></li><li><div>
                Build Success with Spark 2.1.0, Please check CI http://136.243.101.176:8080/job/ApacheCarbonPRBuilder1/5235/

              </div></li><li><div>
                Build Success with Spark 2.2.1, Please check CI http://88.99.58.216:8080/job/ApacheCarbonPRBuilder/4063/

              </div></li><li><div>
                Build Success with Spark 2.1.0, Please check CI http://136.243.101.176:8080/job/ApacheCarbonPRBuilder1/5245/

              </div></li><li><div>
                Build Failed with Spark 2.2.1, Please check CI http://88.99.58.216:8080/job/ApacheCarbonPRBuilder/4075/

              </div></li><li><div>
                Build Failed  with Spark 2.1.0, Please check CI http://136.243.101.176:8080/job/ApacheCarbonPRBuilder1/5256/

              </div></li><li><div>
                Build Failed with Spark 2.2.1, Please check CI http://88.99.58.216:8080/job/ApacheCarbonPRBuilder/4084/

              </div></li><li><div>
                Build Failed  with Spark 2.1.0, Please check CI http://136.243.101.176:8080/job/ApacheCarbonPRBuilder1/5265/

              </div></li><li><div>
                Build Success with Spark 2.2.1, Please check CI http://88.99.58.216:8080/job/ApacheCarbonPRBuilder/4090/

              </div></li><li><div>
                Build Success with Spark 2.1.0, Please check CI http://136.243.101.176:8080/job/ApacheCarbonPRBuilder1/5271/

              </div></li><li><div>
                Build Failed  with Spark 2.1.0, Please check CI http://136.243.101.176:8080/job/ApacheCarbonPRBuilder1/5285/

              </div></li><li><div>
                Build Failed with Spark 2.2.1, Please check CI http://88.99.58.216:8080/job/ApacheCarbonPRBuilder/4105/

              </div></li><li><div>
                Retest this please

              </div></li><li><div>
                Build Success with Spark 2.2.1, Please check CI http://88.99.58.216:8080/job/ApacheCarbonPRBuilder/4108/

              </div></li><li><div>
                Build Success with Spark 2.1.0, Please check CI http://136.243.101.176:8080/job/ApacheCarbonPRBuilder1/5288/

              </div></li><li><div>
                Build Failed with Spark 2.2.1, Please check CI http://88.99.58.216:8080/job/ApacheCarbonPRBuilder/4112/

              </div></li><li><div>
                Build Failed  with Spark 2.1.0, Please check CI http://136.243.101.176:8080/job/ApacheCarbonPRBuilder1/5292/

              </div></li><li><div>
                Build Success with Spark 2.2.1, Please check CI http://88.99.58.216:8080/job/ApacheCarbonPRBuilder/4113/

              </div></li><li><div>
                Build Success with Spark 2.1.0, Please check CI http://136.243.101.176:8080/job/ApacheCarbonPRBuilder1/5293/

              </div></li><li><div>
                Build Failed with Spark 2.2.1, Please check CI http://88.99.58.216:8080/job/ApacheCarbonPRBuilder/4231/

              </div></li><li><div>
                Build Success with Spark 2.2.1, Please check CI http://88.99.58.216:8080/job/ApacheCarbonPRBuilder/4235/

              </div></li><li><div>
                Build Success with Spark 2.1.0, Please check CI http://136.243.101.176:8080/job/ApacheCarbonPRBuilder1/5399/

              </div></li><li><div>
                SDV Build Success , Please check CI http://144.76.159.231:8080/job/ApacheSDVTests/4537/

              </div></li><li><div>
                Build Success with Spark 2.1.0, Please check CI http://136.243.101.176:8080/job/ApacheCarbonPRBuilder1/5402/

              </div></li><li><div>
                SDV Build Success , Please check CI http://144.76.159.231:8080/job/ApacheSDVTests/4541/

              </div></li><li><div>
                Build Failed  with Spark 2.1.0, Please check CI http://136.243.101.176:8080/job/ApacheCarbonPRBuilder1/5425/

              </div></li><li><div>
                Build Failed with Spark 2.2.1, Please check CI http://88.99.58.216:8080/job/ApacheCarbonPRBuilder/4259/

              </div></li><li><div>
                SDV Build Fail , Please check CI http://144.76.159.231:8080/job/ApacheSDVTests/4562/

              </div></li><li><div>
                Build Success with Spark 2.2.1, Please check CI http://88.99.58.216:8080/job/ApacheCarbonPRBuilder/4268/

              </div></li><li><div>
                Build Failed with Spark 2.2.1, Please check CI http://88.99.58.216:8080/job/ApacheCarbonPRBuilder/4275/

              </div></li><li><div>
                Build Failed  with Spark 2.1.0, Please check CI http://136.243.101.176:8080/job/ApacheCarbonPRBuilder1/5436/

              </div></li><li><div>
                Retest this please
              </div></li><li><div>
                Build Success with Spark 2.2.1, Please check CI http://88.99.58.216:8080/job/ApacheCarbonPRBuilder/4283/

              </div></li><li><div>
                Build Success with Spark 2.1.0, Please check CI http://136.243.101.176:8080/job/ApacheCarbonPRBuilder1/5449/

              </div></li><li><div>
                SDV Build Fail , Please check CI http://144.76.159.231:8080/job/ApacheSDVTests/4566/

              </div></li><li><div>
                LGTM
              </div></li><li><div>
                SDV Build Fail , Please check CI http://144.76.159.231:8080/job/ApacheSDVTests/4571/

              </div></li><li><div>
                SDV Build Fail , Please check CI http://144.76.159.231:8080/job/ApacheSDVTests/4581/

              </div></li><li><div>
                SDV Build Fail , Please check CI http://144.76.159.231:8080/job/ApacheSDVTests/4583/

              </div></li></ol></div><div><b>github_pulls_reviews:</b> <ol><li><div>
                I think it is better to pass this variable from the TEXT_MATCH UDF, like TEXT_MATCH("name:a", 100), so that user can decide the value. If user does not give the value, default value can be Integer.MAX_VALUE
              </div></li><li><div>
                Can you change Exception to a more specific exception

              </div></li><li><div>
                Changed Exception to a more specific exception.Please check
              </div></li><li><div>
                Added
              </div></li><li><div>
                @Indhumathi27 i think what jacky means is, when user fires sql like "select * from table wjere text_match('name:a',100)", he should fire with number of records in result from lucene search, if he doesnot give in sql, then we will pass integer max , so please handle according to that in udf
              </div></li><li><div>
                change to `name, city`, non-capital
              </div></li><li><div>
                change to name, city, non-capital
              </div></li><li><div>
                I think a local variable is enough, not required to make it class member
              </div></li><li><div>
                And change to `maxDoc`
              </div></li><li><div>
                It seems there is no testcase for this parameter when user creating datamap, do I miss anything?
              </div></li><li><div>
                parseInt may give NumberFormatException, please handle it
              </div></li><li><div>
                What should be the correct format in the strQuery?
Please add description for it.
              </div></li><li><div>
                I am not sure why this if branch is needed
              </div></li><li><div>
                okay
              </div></li><li><div>
                @jackylk Tired to  implement Text_Match UDF with variable number of arguments(either 1 0r 2).but it doesnt work.Only either one works
              </div></li><li><div>
                @jackylk Implemented new function TEXT_MATCH_WITH_LIMIT to support user to fire query with number of records.TEXT_MATCH will return Integer.MaxValue number of records.
              </div></li><li><div>
                Don't add this method here, it is very specific to lucene. So only add this in that lucene expression.
              </div></li><li><div>
                removed
              </div></li><li><div>
                please rename to TextMatchLimit
              </div></li><li><div>
                This message is not correct, should be TEXT_MATCH_WITH_LIMIT
              </div></li><li><div>
                rename to TextMatchLimit
              </div></li></ol></div><div><b>jira_issues:</b> <ol><li><div><div><b>summary:</b> Adding UT for Lucene DataMap
                </div><div><b>description:</b> 
                </div></div></li></ol></div><div><b>jira_issues_comments:</b> <ol></ol></div></div></html>