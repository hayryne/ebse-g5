<!DOCTYPE html><html><div class="item-title">
        Item 233
      </div> <div class="item-details"><div><b>git_comments:</b> <ol><li><div>
                *
	 * @param fixedIp the fixedIp to set
	 
              </div></li><li><div>
                *
	 * 
	 
              </div></li><li><div>
                *
	 * @param networkUuid the networkUuid to set
	 
              </div></li><li><div>
                *
 * @author Jeffrey Nguyen
 *
 
              </div></li><li><div>
                *
	 * @return the fixedIp
	 
              </div></li><li><div>
                *
	 * @return the networkUuid
	 
              </div></li><li><div>
                
 * Licensed to the Apache Software Foundation (ASF) under one 
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * "License"); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 * 
 *  http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY 
 * KIND, either express or implied.  See the License for the 
 * specific language governing permissions and limitations
 * under the License.
 
              </div></li><li><div>
                *
	 * @param portUuid the portUuid to set
	 
              </div></li><li><div>
                *
	 * @return the portUuid
	 
              </div></li><li><div>
                *
	 * @param networkInterfaces the networkInterfaces to set
	 
              </div></li><li><div>
                *
	 * @return the networkInterfaces
	 
              </div></li><li><div>
                
 * Licensed to the Apache Software Foundation (ASF) under one 
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * "License"); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 * 
 *  http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY 
 * KIND, either express or implied.  See the License for the 
 * specific language governing permissions and limitations
 * under the License.
 
              </div></li><li><div>
                *
 * Had to wrap {@link NetworkInterface} array using a class, since there's a bug in current 
 * stub generation.
 * 
 * @author Jeffrey Nguyen
 *
 
              </div></li><li><div>
                
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * "License"); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *  http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied.  See the License for the
 * specific language governing permissions and limitations
 * under the License.
 
              </div></li><li><div>
                *
 * @author Jeffrey Nguyen
 *
 
              </div></li><li><div>
                *
     * @param networkInterfaces the networkInterfaces to set
     
              </div></li><li><div>
                *
     * @return the networkInterfaces
     
              </div></li><li><div>
                *
     * Network Interfaces Configuration
     
              </div></li><li><div>
                *
     * @param networkInterfaces the networkInterfaces to set
     
              </div></li><li><div>
                *
     * @return the networkInterfaces
     
              </div></li></ol></div><div><b>git_commits:</b> <ol><li><div><div><b>summary:</b> applying patch for STRATOS-507 - provided by jeffrey
                </div><div><b>message:</b> applying patch for STRATOS-507 - provided by jeffrey

                </div></div></li></ol></div><div><b>github_issues:</b> <ol></ol></div><div><b>github_issues_comments:</b> <ol></ol></div><div><b>github_pulls:</b> <ol></ol></div><div><b>github_pulls_comments:</b> <ol></ol></div><div><b>github_pulls_reviews:</b> <ol></ol></div><div><b>jira_issues:</b> <ol><li><div><div><b>summary:</b> Support to assign fixed private IPs and Port number in addition to network UUIDs for cartridges
                </div><div><b>description:</b> 
Hi Stratos Devs,

I'm currently working on Stratos enhancement to leverage new network API supported by jClouds [1].

In the current environment, when we attached a list of network UUIDs to a cartridge and subscribe to this cartridge, the new instance will have private IPs randomly assigned to each network.   We need the ability to specify fixed private IP for each network.

In addition to fixed private IPs, we could also assign port UUIDs or whatever the underlined Iaas supports for the networks configuration.

I am currently working on jClouds enhancement [1].  This JIRA is for the changes required on Stratos side.

Please see [3] below on how the private IPs are specified in the JSON payload.

In the existing implementation of multiple networks [2], the JSON cartridge definition can specify multiple networks like one below.

                    {
                        "name": "networkInterfaces", 
                        "value": "fb9c21f4-0672-48b2-8279-77334bb63a53,aa1809a2-c32d-4eb8-a5c5-e46f692416e0,1e43f86f-4165-4f2e-8017-dd4cfb5548b0"
                    }

With this new enhancement, the JSON cartridge definition can specify multiple networks and fixed private IPs like one below.

                    {
                        "name": "networkInterfaces", 
                        "value": "[{\"uuid\":\"fb9c21f4-0672-48b2-8279-77334bb63a53\",\"fixed_ip\":\"172.16.0.10\"},{\"uuid\":\"aa1809a2-c32d-4eb8-a5c5-e46f692416e0\",\"fixed_ip\":\"172.16.1.11\"}]"
                    }

Questions:
- Should introduce new property for the new format or should I just use existing "networkInterfaces" properties, which implies fixing [2]?  When invoking jClouds API, we should set the value one way or the other, but not both.
- In the current implementation of Stratos, all cartridge properties are treated as String.  Therefore, with this new enhancement, the networks tuples need to escape the double quotes.   Is this okay?

Please let me know what you think.

Regards,
-Jeffrey

[1] https://issues.apache.org/jira/browse/JCLOUDS-493
[2] https://issues.apache.org/jira/browse/STRATOS-180
[3] OpenStack JSON payload for creating server with network uuid and fixed private IP:

"{"server":{"name":"testp-e12","imageRef":"66dac7ce-992c-43a4-b765-029c0b6fc1fe","flavorRef":"1d89ff82-5981-4a14-91e5-fc769f82a2f9","metadata":{"jclouds-group":"testp"},"key_name":"test","security_groups":[{"name":"default"}],"user_data":"U0VSVk...VAx","networks":[{"uuid":"fb9c21f4-0672-48b2-8279-77334bb63a53","fixed_ip":"172.16.0.10"},{"uuid":"aa1809a2-c32d-4eb8-a5c5-e46f692416e0","fixed_ip":"172.16.1.11"},{"uuid":"1e43f86f-4165-4f2e-8017-dd4cfb5548b0","fixed_ip":"172.16.2.12"}]}}"

                </div></div></li><li><div><div><b>summary:</b> Support to assign fixed private IPs and Port number in addition to network UUIDs for cartridges
                </div><div><b>description:</b> 
Hi Stratos Devs,

I'm currently working on Stratos enhancement to leverage new network API supported by jClouds [1].

In the current environment, when we attached a list of network UUIDs to a cartridge and subscribe to this cartridge, the new instance will have private IPs randomly assigned to each network.   We need the ability to specify fixed private IP for each network.

In addition to fixed private IPs, we could also assign port UUIDs or whatever the underlined Iaas supports for the networks configuration.

I am currently working on jClouds enhancement [1].  This JIRA is for the changes required on Stratos side.

Please see [3] below on how the private IPs are specified in the JSON payload.

In the existing implementation of multiple networks [2], the JSON cartridge definition can specify multiple networks like one below.

                    {
                        "name": "networkInterfaces", 
                        "value": "fb9c21f4-0672-48b2-8279-77334bb63a53,aa1809a2-c32d-4eb8-a5c5-e46f692416e0,1e43f86f-4165-4f2e-8017-dd4cfb5548b0"
                    }

With this new enhancement, the JSON cartridge definition can specify multiple networks and fixed private IPs like one below.

                    {
                        "name": "networkInterfaces", 
                        "value": "[{\"uuid\":\"fb9c21f4-0672-48b2-8279-77334bb63a53\",\"fixed_ip\":\"172.16.0.10\"},{\"uuid\":\"aa1809a2-c32d-4eb8-a5c5-e46f692416e0\",\"fixed_ip\":\"172.16.1.11\"}]"
                    }

Questions:
- Should introduce new property for the new format or should I just use existing "networkInterfaces" properties, which implies fixing [2]?  When invoking jClouds API, we should set the value one way or the other, but not both.
- In the current implementation of Stratos, all cartridge properties are treated as String.  Therefore, with this new enhancement, the networks tuples need to escape the double quotes.   Is this okay?

Please let me know what you think.

Regards,
-Jeffrey

[1] https://issues.apache.org/jira/browse/JCLOUDS-493
[2] https://issues.apache.org/jira/browse/STRATOS-180
[3] OpenStack JSON payload for creating server with network uuid and fixed private IP:

"{"server":{"name":"testp-e12","imageRef":"66dac7ce-992c-43a4-b765-029c0b6fc1fe","flavorRef":"1d89ff82-5981-4a14-91e5-fc769f82a2f9","metadata":{"jclouds-group":"testp"},"key_name":"test","security_groups":[{"name":"default"}],"user_data":"U0VSVk...VAx","networks":[{"uuid":"fb9c21f4-0672-48b2-8279-77334bb63a53","fixed_ip":"172.16.0.10"},{"uuid":"aa1809a2-c32d-4eb8-a5c5-e46f692416e0","fixed_ip":"172.16.1.11"},{"uuid":"1e43f86f-4165-4f2e-8017-dd4cfb5548b0","fixed_ip":"172.16.2.12"}]}}"

                </div><div><b>label:</b> code-design
                </div></div></li><li><div><div><b>summary:</b> Support to assign fixed private IPs and Port number in addition to network UUIDs for cartridges
                </div><div><b>description:</b> 
Hi Stratos Devs,

I'm currently working on Stratos enhancement to leverage new network API supported by jClouds [1].

In the current environment, when we attached a list of network UUIDs to a cartridge and subscribe to this cartridge, the new instance will have private IPs randomly assigned to each network.   We need the ability to specify fixed private IP for each network.

In addition to fixed private IPs, we could also assign port UUIDs or whatever the underlined Iaas supports for the networks configuration.

I am currently working on jClouds enhancement [1].  This JIRA is for the changes required on Stratos side.

Please see [3] below on how the private IPs are specified in the JSON payload.

In the existing implementation of multiple networks [2], the JSON cartridge definition can specify multiple networks like one below.

                    {
                        "name": "networkInterfaces", 
                        "value": "fb9c21f4-0672-48b2-8279-77334bb63a53,aa1809a2-c32d-4eb8-a5c5-e46f692416e0,1e43f86f-4165-4f2e-8017-dd4cfb5548b0"
                    }

With this new enhancement, the JSON cartridge definition can specify multiple networks and fixed private IPs like one below.

                    {
                        "name": "networkInterfaces", 
                        "value": "[{\"uuid\":\"fb9c21f4-0672-48b2-8279-77334bb63a53\",\"fixed_ip\":\"172.16.0.10\"},{\"uuid\":\"aa1809a2-c32d-4eb8-a5c5-e46f692416e0\",\"fixed_ip\":\"172.16.1.11\"}]"
                    }

Questions:
- Should introduce new property for the new format or should I just use existing "networkInterfaces" properties, which implies fixing [2]?  When invoking jClouds API, we should set the value one way or the other, but not both.
- In the current implementation of Stratos, all cartridge properties are treated as String.  Therefore, with this new enhancement, the networks tuples need to escape the double quotes.   Is this okay?

Please let me know what you think.

Regards,
-Jeffrey

[1] https://issues.apache.org/jira/browse/JCLOUDS-493
[2] https://issues.apache.org/jira/browse/STRATOS-180
[3] OpenStack JSON payload for creating server with network uuid and fixed private IP:

"{"server":{"name":"testp-e12","imageRef":"66dac7ce-992c-43a4-b765-029c0b6fc1fe","flavorRef":"1d89ff82-5981-4a14-91e5-fc769f82a2f9","metadata":{"jclouds-group":"testp"},"key_name":"test","security_groups":[{"name":"default"}],"user_data":"U0VSVk...VAx","networks":[{"uuid":"fb9c21f4-0672-48b2-8279-77334bb63a53","fixed_ip":"172.16.0.10"},{"uuid":"aa1809a2-c32d-4eb8-a5c5-e46f692416e0","fixed_ip":"172.16.1.11"},{"uuid":"1e43f86f-4165-4f2e-8017-dd4cfb5548b0","fixed_ip":"172.16.2.12"}]}}"

                </div></div></li><li><div><div><b>summary:</b> Support to assign fixed private IPs and Port number in addition to network UUIDs for cartridges
                </div><div><b>description:</b> 
Hi Stratos Devs,

I'm currently working on Stratos enhancement to leverage new network API supported by jClouds [1].

In the current environment, when we attached a list of network UUIDs to a cartridge and subscribe to this cartridge, the new instance will have private IPs randomly assigned to each network.   We need the ability to specify fixed private IP for each network.

In addition to fixed private IPs, we could also assign port UUIDs or whatever the underlined Iaas supports for the networks configuration.

I am currently working on jClouds enhancement [1].  This JIRA is for the changes required on Stratos side.

Please see [3] below on how the private IPs are specified in the JSON payload.

In the existing implementation of multiple networks [2], the JSON cartridge definition can specify multiple networks like one below.

                    {
                        "name": "networkInterfaces", 
                        "value": "fb9c21f4-0672-48b2-8279-77334bb63a53,aa1809a2-c32d-4eb8-a5c5-e46f692416e0,1e43f86f-4165-4f2e-8017-dd4cfb5548b0"
                    }

With this new enhancement, the JSON cartridge definition can specify multiple networks and fixed private IPs like one below.

                    {
                        "name": "networkInterfaces", 
                        "value": "[{\"uuid\":\"fb9c21f4-0672-48b2-8279-77334bb63a53\",\"fixed_ip\":\"172.16.0.10\"},{\"uuid\":\"aa1809a2-c32d-4eb8-a5c5-e46f692416e0\",\"fixed_ip\":\"172.16.1.11\"}]"
                    }

Questions:
- Should introduce new property for the new format or should I just use existing "networkInterfaces" properties, which implies fixing [2]?  When invoking jClouds API, we should set the value one way or the other, but not both.
- In the current implementation of Stratos, all cartridge properties are treated as String.  Therefore, with this new enhancement, the networks tuples need to escape the double quotes.   Is this okay?

Please let me know what you think.

Regards,
-Jeffrey

[1] https://issues.apache.org/jira/browse/JCLOUDS-493
[2] https://issues.apache.org/jira/browse/STRATOS-180
[3] OpenStack JSON payload for creating server with network uuid and fixed private IP:

"{"server":{"name":"testp-e12","imageRef":"66dac7ce-992c-43a4-b765-029c0b6fc1fe","flavorRef":"1d89ff82-5981-4a14-91e5-fc769f82a2f9","metadata":{"jclouds-group":"testp"},"key_name":"test","security_groups":[{"name":"default"}],"user_data":"U0VSVk...VAx","networks":[{"uuid":"fb9c21f4-0672-48b2-8279-77334bb63a53","fixed_ip":"172.16.0.10"},{"uuid":"aa1809a2-c32d-4eb8-a5c5-e46f692416e0","fixed_ip":"172.16.1.11"},{"uuid":"1e43f86f-4165-4f2e-8017-dd4cfb5548b0","fixed_ip":"172.16.2.12"}]}}"

                </div></div></li><li><div><div><b>summary:</b> Support to assign fixed private IPs and Port number in addition to network UUIDs for cartridges
                </div><div><b>description:</b> 
Hi Stratos Devs,

I'm currently working on Stratos enhancement to leverage new network API supported by jClouds [1].

In the current environment, when we attached a list of network UUIDs to a cartridge and subscribe to this cartridge, the new instance will have private IPs randomly assigned to each network.   We need the ability to specify fixed private IP for each network.

In addition to fixed private IPs, we could also assign port UUIDs or whatever the underlined Iaas supports for the networks configuration.

I am currently working on jClouds enhancement [1].  This JIRA is for the changes required on Stratos side.

Please see [3] below on how the private IPs are specified in the JSON payload.

In the existing implementation of multiple networks [2], the JSON cartridge definition can specify multiple networks like one below.

                    {
                        "name": "networkInterfaces", 
                        "value": "fb9c21f4-0672-48b2-8279-77334bb63a53,aa1809a2-c32d-4eb8-a5c5-e46f692416e0,1e43f86f-4165-4f2e-8017-dd4cfb5548b0"
                    }

With this new enhancement, the JSON cartridge definition can specify multiple networks and fixed private IPs like one below.

                    {
                        "name": "networkInterfaces", 
                        "value": "[{\"uuid\":\"fb9c21f4-0672-48b2-8279-77334bb63a53\",\"fixed_ip\":\"172.16.0.10\"},{\"uuid\":\"aa1809a2-c32d-4eb8-a5c5-e46f692416e0\",\"fixed_ip\":\"172.16.1.11\"}]"
                    }

Questions:
- Should introduce new property for the new format or should I just use existing "networkInterfaces" properties, which implies fixing [2]?  When invoking jClouds API, we should set the value one way or the other, but not both.
- In the current implementation of Stratos, all cartridge properties are treated as String.  Therefore, with this new enhancement, the networks tuples need to escape the double quotes.   Is this okay?

Please let me know what you think.

Regards,
-Jeffrey

[1] https://issues.apache.org/jira/browse/JCLOUDS-493
[2] https://issues.apache.org/jira/browse/STRATOS-180
[3] OpenStack JSON payload for creating server with network uuid and fixed private IP:

"{"server":{"name":"testp-e12","imageRef":"66dac7ce-992c-43a4-b765-029c0b6fc1fe","flavorRef":"1d89ff82-5981-4a14-91e5-fc769f82a2f9","metadata":{"jclouds-group":"testp"},"key_name":"test","security_groups":[{"name":"default"}],"user_data":"U0VSVk...VAx","networks":[{"uuid":"fb9c21f4-0672-48b2-8279-77334bb63a53","fixed_ip":"172.16.0.10"},{"uuid":"aa1809a2-c32d-4eb8-a5c5-e46f692416e0","fixed_ip":"172.16.1.11"},{"uuid":"1e43f86f-4165-4f2e-8017-dd4cfb5548b0","fixed_ip":"172.16.2.12"}]}}"

                </div></div></li><li><div><div><b>summary:</b> Support to assign fixed private IPs and Port number in addition to network UUIDs for cartridges
                </div><div><b>description:</b> 
Hi Stratos Devs,

I'm currently working on Stratos enhancement to leverage new network API supported by jClouds [1].

In the current environment, when we attached a list of network UUIDs to a cartridge and subscribe to this cartridge, the new instance will have private IPs randomly assigned to each network.   We need the ability to specify fixed private IP for each network.

In addition to fixed private IPs, we could also assign port UUIDs or whatever the underlined Iaas supports for the networks configuration.

I am currently working on jClouds enhancement [1].  This JIRA is for the changes required on Stratos side.

Please see [3] below on how the private IPs are specified in the JSON payload.

In the existing implementation of multiple networks [2], the JSON cartridge definition can specify multiple networks like one below.

                    {
                        "name": "networkInterfaces", 
                        "value": "fb9c21f4-0672-48b2-8279-77334bb63a53,aa1809a2-c32d-4eb8-a5c5-e46f692416e0,1e43f86f-4165-4f2e-8017-dd4cfb5548b0"
                    }

With this new enhancement, the JSON cartridge definition can specify multiple networks and fixed private IPs like one below.

                    {
                        "name": "networkInterfaces", 
                        "value": "[{\"uuid\":\"fb9c21f4-0672-48b2-8279-77334bb63a53\",\"fixed_ip\":\"172.16.0.10\"},{\"uuid\":\"aa1809a2-c32d-4eb8-a5c5-e46f692416e0\",\"fixed_ip\":\"172.16.1.11\"}]"
                    }

Questions:
- Should introduce new property for the new format or should I just use existing "networkInterfaces" properties, which implies fixing [2]?  When invoking jClouds API, we should set the value one way or the other, but not both.
- In the current implementation of Stratos, all cartridge properties are treated as String.  Therefore, with this new enhancement, the networks tuples need to escape the double quotes.   Is this okay?

Please let me know what you think.

Regards,
-Jeffrey

[1] https://issues.apache.org/jira/browse/JCLOUDS-493
[2] https://issues.apache.org/jira/browse/STRATOS-180
[3] OpenStack JSON payload for creating server with network uuid and fixed private IP:

"{"server":{"name":"testp-e12","imageRef":"66dac7ce-992c-43a4-b765-029c0b6fc1fe","flavorRef":"1d89ff82-5981-4a14-91e5-fc769f82a2f9","metadata":{"jclouds-group":"testp"},"key_name":"test","security_groups":[{"name":"default"}],"user_data":"U0VSVk...VAx","networks":[{"uuid":"fb9c21f4-0672-48b2-8279-77334bb63a53","fixed_ip":"172.16.0.10"},{"uuid":"aa1809a2-c32d-4eb8-a5c5-e46f692416e0","fixed_ip":"172.16.1.11"},{"uuid":"1e43f86f-4165-4f2e-8017-dd4cfb5548b0","fixed_ip":"172.16.2.12"}]}}"

                </div></div></li><li><div><div><b>summary:</b> Support to assign fixed private IPs and Port number in addition to network UUIDs for cartridges
                </div><div><b>description:</b> 
Hi Stratos Devs,

I'm currently working on Stratos enhancement to leverage new network API supported by jClouds [1].

In the current environment, when we attached a list of network UUIDs to a cartridge and subscribe to this cartridge, the new instance will have private IPs randomly assigned to each network.   We need the ability to specify fixed private IP for each network.

In addition to fixed private IPs, we could also assign port UUIDs or whatever the underlined Iaas supports for the networks configuration.

I am currently working on jClouds enhancement [1].  This JIRA is for the changes required on Stratos side.

Please see [3] below on how the private IPs are specified in the JSON payload.

In the existing implementation of multiple networks [2], the JSON cartridge definition can specify multiple networks like one below.

                    {
                        "name": "networkInterfaces", 
                        "value": "fb9c21f4-0672-48b2-8279-77334bb63a53,aa1809a2-c32d-4eb8-a5c5-e46f692416e0,1e43f86f-4165-4f2e-8017-dd4cfb5548b0"
                    }

With this new enhancement, the JSON cartridge definition can specify multiple networks and fixed private IPs like one below.

                    {
                        "name": "networkInterfaces", 
                        "value": "[{\"uuid\":\"fb9c21f4-0672-48b2-8279-77334bb63a53\",\"fixed_ip\":\"172.16.0.10\"},{\"uuid\":\"aa1809a2-c32d-4eb8-a5c5-e46f692416e0\",\"fixed_ip\":\"172.16.1.11\"}]"
                    }

Questions:
- Should introduce new property for the new format or should I just use existing "networkInterfaces" properties, which implies fixing [2]?  When invoking jClouds API, we should set the value one way or the other, but not both.
- In the current implementation of Stratos, all cartridge properties are treated as String.  Therefore, with this new enhancement, the networks tuples need to escape the double quotes.   Is this okay?

Please let me know what you think.

Regards,
-Jeffrey

[1] https://issues.apache.org/jira/browse/JCLOUDS-493
[2] https://issues.apache.org/jira/browse/STRATOS-180
[3] OpenStack JSON payload for creating server with network uuid and fixed private IP:

"{"server":{"name":"testp-e12","imageRef":"66dac7ce-992c-43a4-b765-029c0b6fc1fe","flavorRef":"1d89ff82-5981-4a14-91e5-fc769f82a2f9","metadata":{"jclouds-group":"testp"},"key_name":"test","security_groups":[{"name":"default"}],"user_data":"U0VSVk...VAx","networks":[{"uuid":"fb9c21f4-0672-48b2-8279-77334bb63a53","fixed_ip":"172.16.0.10"},{"uuid":"aa1809a2-c32d-4eb8-a5c5-e46f692416e0","fixed_ip":"172.16.1.11"},{"uuid":"1e43f86f-4165-4f2e-8017-dd4cfb5548b0","fixed_ip":"172.16.2.12"}]}}"

                </div></div></li><li><div><div><b>summary:</b> Support to assign fixed private IPs and Port number in addition to network UUIDs for cartridges
                </div><div><b>description:</b> 
Hi Stratos Devs,

I'm currently working on Stratos enhancement to leverage new network API supported by jClouds [1].

In the current environment, when we attached a list of network UUIDs to a cartridge and subscribe to this cartridge, the new instance will have private IPs randomly assigned to each network.   We need the ability to specify fixed private IP for each network.

In addition to fixed private IPs, we could also assign port UUIDs or whatever the underlined Iaas supports for the networks configuration.

I am currently working on jClouds enhancement [1].  This JIRA is for the changes required on Stratos side.

Please see [3] below on how the private IPs are specified in the JSON payload.

In the existing implementation of multiple networks [2], the JSON cartridge definition can specify multiple networks like one below.

                    {
                        "name": "networkInterfaces", 
                        "value": "fb9c21f4-0672-48b2-8279-77334bb63a53,aa1809a2-c32d-4eb8-a5c5-e46f692416e0,1e43f86f-4165-4f2e-8017-dd4cfb5548b0"
                    }

With this new enhancement, the JSON cartridge definition can specify multiple networks and fixed private IPs like one below.

                    {
                        "name": "networkInterfaces", 
                        "value": "[{\"uuid\":\"fb9c21f4-0672-48b2-8279-77334bb63a53\",\"fixed_ip\":\"172.16.0.10\"},{\"uuid\":\"aa1809a2-c32d-4eb8-a5c5-e46f692416e0\",\"fixed_ip\":\"172.16.1.11\"}]"
                    }

Questions:
- Should introduce new property for the new format or should I just use existing "networkInterfaces" properties, which implies fixing [2]?  When invoking jClouds API, we should set the value one way or the other, but not both.
- In the current implementation of Stratos, all cartridge properties are treated as String.  Therefore, with this new enhancement, the networks tuples need to escape the double quotes.   Is this okay?

Please let me know what you think.

Regards,
-Jeffrey

[1] https://issues.apache.org/jira/browse/JCLOUDS-493
[2] https://issues.apache.org/jira/browse/STRATOS-180
[3] OpenStack JSON payload for creating server with network uuid and fixed private IP:

"{"server":{"name":"testp-e12","imageRef":"66dac7ce-992c-43a4-b765-029c0b6fc1fe","flavorRef":"1d89ff82-5981-4a14-91e5-fc769f82a2f9","metadata":{"jclouds-group":"testp"},"key_name":"test","security_groups":[{"name":"default"}],"user_data":"U0VSVk...VAx","networks":[{"uuid":"fb9c21f4-0672-48b2-8279-77334bb63a53","fixed_ip":"172.16.0.10"},{"uuid":"aa1809a2-c32d-4eb8-a5c5-e46f692416e0","fixed_ip":"172.16.1.11"},{"uuid":"1e43f86f-4165-4f2e-8017-dd4cfb5548b0","fixed_ip":"172.16.2.12"}]}}"

                </div></div></li><li><div><div><b>summary:</b> Support to assign fixed private IPs and Port number in addition to network UUIDs for cartridges
                </div><div><b>description:</b> 
Hi Stratos Devs,

I'm currently working on Stratos enhancement to leverage new network API supported by jClouds [1].

In the current environment, when we attached a list of network UUIDs to a cartridge and subscribe to this cartridge, the new instance will have private IPs randomly assigned to each network.   We need the ability to specify fixed private IP for each network.

In addition to fixed private IPs, we could also assign port UUIDs or whatever the underlined Iaas supports for the networks configuration.

I am currently working on jClouds enhancement [1].  This JIRA is for the changes required on Stratos side.

Please see [3] below on how the private IPs are specified in the JSON payload.

In the existing implementation of multiple networks [2], the JSON cartridge definition can specify multiple networks like one below.

                    {
                        "name": "networkInterfaces", 
                        "value": "fb9c21f4-0672-48b2-8279-77334bb63a53,aa1809a2-c32d-4eb8-a5c5-e46f692416e0,1e43f86f-4165-4f2e-8017-dd4cfb5548b0"
                    }

With this new enhancement, the JSON cartridge definition can specify multiple networks and fixed private IPs like one below.

                    {
                        "name": "networkInterfaces", 
                        "value": "[{\"uuid\":\"fb9c21f4-0672-48b2-8279-77334bb63a53\",\"fixed_ip\":\"172.16.0.10\"},{\"uuid\":\"aa1809a2-c32d-4eb8-a5c5-e46f692416e0\",\"fixed_ip\":\"172.16.1.11\"}]"
                    }

Questions:
- Should introduce new property for the new format or should I just use existing "networkInterfaces" properties, which implies fixing [2]?  When invoking jClouds API, we should set the value one way or the other, but not both.
- In the current implementation of Stratos, all cartridge properties are treated as String.  Therefore, with this new enhancement, the networks tuples need to escape the double quotes.   Is this okay?

Please let me know what you think.

Regards,
-Jeffrey

[1] https://issues.apache.org/jira/browse/JCLOUDS-493
[2] https://issues.apache.org/jira/browse/STRATOS-180
[3] OpenStack JSON payload for creating server with network uuid and fixed private IP:

"{"server":{"name":"testp-e12","imageRef":"66dac7ce-992c-43a4-b765-029c0b6fc1fe","flavorRef":"1d89ff82-5981-4a14-91e5-fc769f82a2f9","metadata":{"jclouds-group":"testp"},"key_name":"test","security_groups":[{"name":"default"}],"user_data":"U0VSVk...VAx","networks":[{"uuid":"fb9c21f4-0672-48b2-8279-77334bb63a53","fixed_ip":"172.16.0.10"},{"uuid":"aa1809a2-c32d-4eb8-a5c5-e46f692416e0","fixed_ip":"172.16.1.11"},{"uuid":"1e43f86f-4165-4f2e-8017-dd4cfb5548b0","fixed_ip":"172.16.2.12"}]}}"

                </div></div></li><li><div><div><b>summary:</b> Support to assign fixed private IPs and Port number in addition to network UUIDs for cartridges
                </div><div><b>description:</b> 
Hi Stratos Devs,

I'm currently working on Stratos enhancement to leverage new network API supported by jClouds [1].

In the current environment, when we attached a list of network UUIDs to a cartridge and subscribe to this cartridge, the new instance will have private IPs randomly assigned to each network.   We need the ability to specify fixed private IP for each network.

In addition to fixed private IPs, we could also assign port UUIDs or whatever the underlined Iaas supports for the networks configuration.

I am currently working on jClouds enhancement [1].  This JIRA is for the changes required on Stratos side.

Please see [3] below on how the private IPs are specified in the JSON payload.

In the existing implementation of multiple networks [2], the JSON cartridge definition can specify multiple networks like one below.

                    {
                        "name": "networkInterfaces", 
                        "value": "fb9c21f4-0672-48b2-8279-77334bb63a53,aa1809a2-c32d-4eb8-a5c5-e46f692416e0,1e43f86f-4165-4f2e-8017-dd4cfb5548b0"
                    }

With this new enhancement, the JSON cartridge definition can specify multiple networks and fixed private IPs like one below.

                    {
                        "name": "networkInterfaces", 
                        "value": "[{\"uuid\":\"fb9c21f4-0672-48b2-8279-77334bb63a53\",\"fixed_ip\":\"172.16.0.10\"},{\"uuid\":\"aa1809a2-c32d-4eb8-a5c5-e46f692416e0\",\"fixed_ip\":\"172.16.1.11\"}]"
                    }

Questions:
- Should introduce new property for the new format or should I just use existing "networkInterfaces" properties, which implies fixing [2]?  When invoking jClouds API, we should set the value one way or the other, but not both.
- In the current implementation of Stratos, all cartridge properties are treated as String.  Therefore, with this new enhancement, the networks tuples need to escape the double quotes.   Is this okay?

Please let me know what you think.

Regards,
-Jeffrey

[1] https://issues.apache.org/jira/browse/JCLOUDS-493
[2] https://issues.apache.org/jira/browse/STRATOS-180
[3] OpenStack JSON payload for creating server with network uuid and fixed private IP:

"{"server":{"name":"testp-e12","imageRef":"66dac7ce-992c-43a4-b765-029c0b6fc1fe","flavorRef":"1d89ff82-5981-4a14-91e5-fc769f82a2f9","metadata":{"jclouds-group":"testp"},"key_name":"test","security_groups":[{"name":"default"}],"user_data":"U0VSVk...VAx","networks":[{"uuid":"fb9c21f4-0672-48b2-8279-77334bb63a53","fixed_ip":"172.16.0.10"},{"uuid":"aa1809a2-c32d-4eb8-a5c5-e46f692416e0","fixed_ip":"172.16.1.11"},{"uuid":"1e43f86f-4165-4f2e-8017-dd4cfb5548b0","fixed_ip":"172.16.2.12"}]}}"

                </div></div></li><li><div><div><b>summary:</b> Support to assign fixed private IPs and Port number in addition to network UUIDs for cartridges
                </div><div><b>description:</b> 
Hi Stratos Devs,

I'm currently working on Stratos enhancement to leverage new network API supported by jClouds [1].

In the current environment, when we attached a list of network UUIDs to a cartridge and subscribe to this cartridge, the new instance will have private IPs randomly assigned to each network.   We need the ability to specify fixed private IP for each network.

In addition to fixed private IPs, we could also assign port UUIDs or whatever the underlined Iaas supports for the networks configuration.

I am currently working on jClouds enhancement [1].  This JIRA is for the changes required on Stratos side.

Please see [3] below on how the private IPs are specified in the JSON payload.

In the existing implementation of multiple networks [2], the JSON cartridge definition can specify multiple networks like one below.

                    {
                        "name": "networkInterfaces", 
                        "value": "fb9c21f4-0672-48b2-8279-77334bb63a53,aa1809a2-c32d-4eb8-a5c5-e46f692416e0,1e43f86f-4165-4f2e-8017-dd4cfb5548b0"
                    }

With this new enhancement, the JSON cartridge definition can specify multiple networks and fixed private IPs like one below.

                    {
                        "name": "networkInterfaces", 
                        "value": "[{\"uuid\":\"fb9c21f4-0672-48b2-8279-77334bb63a53\",\"fixed_ip\":\"172.16.0.10\"},{\"uuid\":\"aa1809a2-c32d-4eb8-a5c5-e46f692416e0\",\"fixed_ip\":\"172.16.1.11\"}]"
                    }

Questions:
- Should introduce new property for the new format or should I just use existing "networkInterfaces" properties, which implies fixing [2]?  When invoking jClouds API, we should set the value one way or the other, but not both.
- In the current implementation of Stratos, all cartridge properties are treated as String.  Therefore, with this new enhancement, the networks tuples need to escape the double quotes.   Is this okay?

Please let me know what you think.

Regards,
-Jeffrey

[1] https://issues.apache.org/jira/browse/JCLOUDS-493
[2] https://issues.apache.org/jira/browse/STRATOS-180
[3] OpenStack JSON payload for creating server with network uuid and fixed private IP:

"{"server":{"name":"testp-e12","imageRef":"66dac7ce-992c-43a4-b765-029c0b6fc1fe","flavorRef":"1d89ff82-5981-4a14-91e5-fc769f82a2f9","metadata":{"jclouds-group":"testp"},"key_name":"test","security_groups":[{"name":"default"}],"user_data":"U0VSVk...VAx","networks":[{"uuid":"fb9c21f4-0672-48b2-8279-77334bb63a53","fixed_ip":"172.16.0.10"},{"uuid":"aa1809a2-c32d-4eb8-a5c5-e46f692416e0","fixed_ip":"172.16.1.11"},{"uuid":"1e43f86f-4165-4f2e-8017-dd4cfb5548b0","fixed_ip":"172.16.2.12"}]}}"

                </div></div></li><li><div><div><b>summary:</b> Support to assign fixed private IPs and Port number in addition to network UUIDs for cartridges
                </div><div><b>description:</b> 
Hi Stratos Devs,

I'm currently working on Stratos enhancement to leverage new network API supported by jClouds [1].

In the current environment, when we attached a list of network UUIDs to a cartridge and subscribe to this cartridge, the new instance will have private IPs randomly assigned to each network.   We need the ability to specify fixed private IP for each network.

In addition to fixed private IPs, we could also assign port UUIDs or whatever the underlined Iaas supports for the networks configuration.

I am currently working on jClouds enhancement [1].  This JIRA is for the changes required on Stratos side.

Please see [3] below on how the private IPs are specified in the JSON payload.

In the existing implementation of multiple networks [2], the JSON cartridge definition can specify multiple networks like one below.

                    {
                        "name": "networkInterfaces", 
                        "value": "fb9c21f4-0672-48b2-8279-77334bb63a53,aa1809a2-c32d-4eb8-a5c5-e46f692416e0,1e43f86f-4165-4f2e-8017-dd4cfb5548b0"
                    }

With this new enhancement, the JSON cartridge definition can specify multiple networks and fixed private IPs like one below.

                    {
                        "name": "networkInterfaces", 
                        "value": "[{\"uuid\":\"fb9c21f4-0672-48b2-8279-77334bb63a53\",\"fixed_ip\":\"172.16.0.10\"},{\"uuid\":\"aa1809a2-c32d-4eb8-a5c5-e46f692416e0\",\"fixed_ip\":\"172.16.1.11\"}]"
                    }

Questions:
- Should introduce new property for the new format or should I just use existing "networkInterfaces" properties, which implies fixing [2]?  When invoking jClouds API, we should set the value one way or the other, but not both.
- In the current implementation of Stratos, all cartridge properties are treated as String.  Therefore, with this new enhancement, the networks tuples need to escape the double quotes.   Is this okay?

Please let me know what you think.

Regards,
-Jeffrey

[1] https://issues.apache.org/jira/browse/JCLOUDS-493
[2] https://issues.apache.org/jira/browse/STRATOS-180
[3] OpenStack JSON payload for creating server with network uuid and fixed private IP:

"{"server":{"name":"testp-e12","imageRef":"66dac7ce-992c-43a4-b765-029c0b6fc1fe","flavorRef":"1d89ff82-5981-4a14-91e5-fc769f82a2f9","metadata":{"jclouds-group":"testp"},"key_name":"test","security_groups":[{"name":"default"}],"user_data":"U0VSVk...VAx","networks":[{"uuid":"fb9c21f4-0672-48b2-8279-77334bb63a53","fixed_ip":"172.16.0.10"},{"uuid":"aa1809a2-c32d-4eb8-a5c5-e46f692416e0","fixed_ip":"172.16.1.11"},{"uuid":"1e43f86f-4165-4f2e-8017-dd4cfb5548b0","fixed_ip":"172.16.2.12"}]}}"

                </div></div></li><li><div><div><b>summary:</b> Support to assign fixed private IPs and Port number in addition to network UUIDs for cartridges
                </div><div><b>description:</b> 
Hi Stratos Devs,

I'm currently working on Stratos enhancement to leverage new network API supported by jClouds [1].

In the current environment, when we attached a list of network UUIDs to a cartridge and subscribe to this cartridge, the new instance will have private IPs randomly assigned to each network.   We need the ability to specify fixed private IP for each network.

In addition to fixed private IPs, we could also assign port UUIDs or whatever the underlined Iaas supports for the networks configuration.

I am currently working on jClouds enhancement [1].  This JIRA is for the changes required on Stratos side.

Please see [3] below on how the private IPs are specified in the JSON payload.

In the existing implementation of multiple networks [2], the JSON cartridge definition can specify multiple networks like one below.

                    {
                        "name": "networkInterfaces", 
                        "value": "fb9c21f4-0672-48b2-8279-77334bb63a53,aa1809a2-c32d-4eb8-a5c5-e46f692416e0,1e43f86f-4165-4f2e-8017-dd4cfb5548b0"
                    }

With this new enhancement, the JSON cartridge definition can specify multiple networks and fixed private IPs like one below.

                    {
                        "name": "networkInterfaces", 
                        "value": "[{\"uuid\":\"fb9c21f4-0672-48b2-8279-77334bb63a53\",\"fixed_ip\":\"172.16.0.10\"},{\"uuid\":\"aa1809a2-c32d-4eb8-a5c5-e46f692416e0\",\"fixed_ip\":\"172.16.1.11\"}]"
                    }

Questions:
- Should introduce new property for the new format or should I just use existing "networkInterfaces" properties, which implies fixing [2]?  When invoking jClouds API, we should set the value one way or the other, but not both.
- In the current implementation of Stratos, all cartridge properties are treated as String.  Therefore, with this new enhancement, the networks tuples need to escape the double quotes.   Is this okay?

Please let me know what you think.

Regards,
-Jeffrey

[1] https://issues.apache.org/jira/browse/JCLOUDS-493
[2] https://issues.apache.org/jira/browse/STRATOS-180
[3] OpenStack JSON payload for creating server with network uuid and fixed private IP:

"{"server":{"name":"testp-e12","imageRef":"66dac7ce-992c-43a4-b765-029c0b6fc1fe","flavorRef":"1d89ff82-5981-4a14-91e5-fc769f82a2f9","metadata":{"jclouds-group":"testp"},"key_name":"test","security_groups":[{"name":"default"}],"user_data":"U0VSVk...VAx","networks":[{"uuid":"fb9c21f4-0672-48b2-8279-77334bb63a53","fixed_ip":"172.16.0.10"},{"uuid":"aa1809a2-c32d-4eb8-a5c5-e46f692416e0","fixed_ip":"172.16.1.11"},{"uuid":"1e43f86f-4165-4f2e-8017-dd4cfb5548b0","fixed_ip":"172.16.2.12"}]}}"

                </div></div></li><li><div><div><b>summary:</b> Support to assign fixed private IPs and Port number in addition to network UUIDs for cartridges
                </div><div><b>description:</b> 
Hi Stratos Devs,

I'm currently working on Stratos enhancement to leverage new network API supported by jClouds [1].

In the current environment, when we attached a list of network UUIDs to a cartridge and subscribe to this cartridge, the new instance will have private IPs randomly assigned to each network.   We need the ability to specify fixed private IP for each network.

In addition to fixed private IPs, we could also assign port UUIDs or whatever the underlined Iaas supports for the networks configuration.

I am currently working on jClouds enhancement [1].  This JIRA is for the changes required on Stratos side.

Please see [3] below on how the private IPs are specified in the JSON payload.

In the existing implementation of multiple networks [2], the JSON cartridge definition can specify multiple networks like one below.

                    {
                        "name": "networkInterfaces", 
                        "value": "fb9c21f4-0672-48b2-8279-77334bb63a53,aa1809a2-c32d-4eb8-a5c5-e46f692416e0,1e43f86f-4165-4f2e-8017-dd4cfb5548b0"
                    }

With this new enhancement, the JSON cartridge definition can specify multiple networks and fixed private IPs like one below.

                    {
                        "name": "networkInterfaces", 
                        "value": "[{\"uuid\":\"fb9c21f4-0672-48b2-8279-77334bb63a53\",\"fixed_ip\":\"172.16.0.10\"},{\"uuid\":\"aa1809a2-c32d-4eb8-a5c5-e46f692416e0\",\"fixed_ip\":\"172.16.1.11\"}]"
                    }

Questions:
- Should introduce new property for the new format or should I just use existing "networkInterfaces" properties, which implies fixing [2]?  When invoking jClouds API, we should set the value one way or the other, but not both.
- In the current implementation of Stratos, all cartridge properties are treated as String.  Therefore, with this new enhancement, the networks tuples need to escape the double quotes.   Is this okay?

Please let me know what you think.

Regards,
-Jeffrey

[1] https://issues.apache.org/jira/browse/JCLOUDS-493
[2] https://issues.apache.org/jira/browse/STRATOS-180
[3] OpenStack JSON payload for creating server with network uuid and fixed private IP:

"{"server":{"name":"testp-e12","imageRef":"66dac7ce-992c-43a4-b765-029c0b6fc1fe","flavorRef":"1d89ff82-5981-4a14-91e5-fc769f82a2f9","metadata":{"jclouds-group":"testp"},"key_name":"test","security_groups":[{"name":"default"}],"user_data":"U0VSVk...VAx","networks":[{"uuid":"fb9c21f4-0672-48b2-8279-77334bb63a53","fixed_ip":"172.16.0.10"},{"uuid":"aa1809a2-c32d-4eb8-a5c5-e46f692416e0","fixed_ip":"172.16.1.11"},{"uuid":"1e43f86f-4165-4f2e-8017-dd4cfb5548b0","fixed_ip":"172.16.2.12"}]}}"

                </div></div></li><li><div><div><b>summary:</b> Support to assign fixed private IPs and Port number in addition to network UUIDs for cartridges
                </div><div><b>description:</b> 
Hi Stratos Devs,

I'm currently working on Stratos enhancement to leverage new network API supported by jClouds [1].

In the current environment, when we attached a list of network UUIDs to a cartridge and subscribe to this cartridge, the new instance will have private IPs randomly assigned to each network.   We need the ability to specify fixed private IP for each network.

In addition to fixed private IPs, we could also assign port UUIDs or whatever the underlined Iaas supports for the networks configuration.

I am currently working on jClouds enhancement [1].  This JIRA is for the changes required on Stratos side.

Please see [3] below on how the private IPs are specified in the JSON payload.

In the existing implementation of multiple networks [2], the JSON cartridge definition can specify multiple networks like one below.

                    {
                        "name": "networkInterfaces", 
                        "value": "fb9c21f4-0672-48b2-8279-77334bb63a53,aa1809a2-c32d-4eb8-a5c5-e46f692416e0,1e43f86f-4165-4f2e-8017-dd4cfb5548b0"
                    }

With this new enhancement, the JSON cartridge definition can specify multiple networks and fixed private IPs like one below.

                    {
                        "name": "networkInterfaces", 
                        "value": "[{\"uuid\":\"fb9c21f4-0672-48b2-8279-77334bb63a53\",\"fixed_ip\":\"172.16.0.10\"},{\"uuid\":\"aa1809a2-c32d-4eb8-a5c5-e46f692416e0\",\"fixed_ip\":\"172.16.1.11\"}]"
                    }

Questions:
- Should introduce new property for the new format or should I just use existing "networkInterfaces" properties, which implies fixing [2]?  When invoking jClouds API, we should set the value one way or the other, but not both.
- In the current implementation of Stratos, all cartridge properties are treated as String.  Therefore, with this new enhancement, the networks tuples need to escape the double quotes.   Is this okay?

Please let me know what you think.

Regards,
-Jeffrey

[1] https://issues.apache.org/jira/browse/JCLOUDS-493
[2] https://issues.apache.org/jira/browse/STRATOS-180
[3] OpenStack JSON payload for creating server with network uuid and fixed private IP:

"{"server":{"name":"testp-e12","imageRef":"66dac7ce-992c-43a4-b765-029c0b6fc1fe","flavorRef":"1d89ff82-5981-4a14-91e5-fc769f82a2f9","metadata":{"jclouds-group":"testp"},"key_name":"test","security_groups":[{"name":"default"}],"user_data":"U0VSVk...VAx","networks":[{"uuid":"fb9c21f4-0672-48b2-8279-77334bb63a53","fixed_ip":"172.16.0.10"},{"uuid":"aa1809a2-c32d-4eb8-a5c5-e46f692416e0","fixed_ip":"172.16.1.11"},{"uuid":"1e43f86f-4165-4f2e-8017-dd4cfb5548b0","fixed_ip":"172.16.2.12"}]}}"

                </div></div></li><li><div><div><b>summary:</b> Support to assign fixed private IPs and Port number in addition to network UUIDs for cartridges
                </div><div><b>description:</b> 
Hi Stratos Devs,

I'm currently working on Stratos enhancement to leverage new network API supported by jClouds [1].

In the current environment, when we attached a list of network UUIDs to a cartridge and subscribe to this cartridge, the new instance will have private IPs randomly assigned to each network.   We need the ability to specify fixed private IP for each network.

In addition to fixed private IPs, we could also assign port UUIDs or whatever the underlined Iaas supports for the networks configuration.

I am currently working on jClouds enhancement [1].  This JIRA is for the changes required on Stratos side.

Please see [3] below on how the private IPs are specified in the JSON payload.

In the existing implementation of multiple networks [2], the JSON cartridge definition can specify multiple networks like one below.

                    {
                        "name": "networkInterfaces", 
                        "value": "fb9c21f4-0672-48b2-8279-77334bb63a53,aa1809a2-c32d-4eb8-a5c5-e46f692416e0,1e43f86f-4165-4f2e-8017-dd4cfb5548b0"
                    }

With this new enhancement, the JSON cartridge definition can specify multiple networks and fixed private IPs like one below.

                    {
                        "name": "networkInterfaces", 
                        "value": "[{\"uuid\":\"fb9c21f4-0672-48b2-8279-77334bb63a53\",\"fixed_ip\":\"172.16.0.10\"},{\"uuid\":\"aa1809a2-c32d-4eb8-a5c5-e46f692416e0\",\"fixed_ip\":\"172.16.1.11\"}]"
                    }

Questions:
- Should introduce new property for the new format or should I just use existing "networkInterfaces" properties, which implies fixing [2]?  When invoking jClouds API, we should set the value one way or the other, but not both.
- In the current implementation of Stratos, all cartridge properties are treated as String.  Therefore, with this new enhancement, the networks tuples need to escape the double quotes.   Is this okay?

Please let me know what you think.

Regards,
-Jeffrey

[1] https://issues.apache.org/jira/browse/JCLOUDS-493
[2] https://issues.apache.org/jira/browse/STRATOS-180
[3] OpenStack JSON payload for creating server with network uuid and fixed private IP:

"{"server":{"name":"testp-e12","imageRef":"66dac7ce-992c-43a4-b765-029c0b6fc1fe","flavorRef":"1d89ff82-5981-4a14-91e5-fc769f82a2f9","metadata":{"jclouds-group":"testp"},"key_name":"test","security_groups":[{"name":"default"}],"user_data":"U0VSVk...VAx","networks":[{"uuid":"fb9c21f4-0672-48b2-8279-77334bb63a53","fixed_ip":"172.16.0.10"},{"uuid":"aa1809a2-c32d-4eb8-a5c5-e46f692416e0","fixed_ip":"172.16.1.11"},{"uuid":"1e43f86f-4165-4f2e-8017-dd4cfb5548b0","fixed_ip":"172.16.2.12"}]}}"

                </div></div></li></ol></div><div><b>jira_issues_comments:</b> <ol><li><div>
                Hi Jeffrey ,

Why can't we also follow the same as openstack payload structure in the cartridge definition. As we support json array in the cartridge definition, it would be nice, if you could also follow the same. We can introduce a new section for the network in the cartridge definition rather than pushing all the network interfaces as string into the cartridge properties. Would you think that the following will be cleaner in this case? For Eg:

In order to just define the network interfaces
====================================
"network" : [
		{
		    "uuid": "fb9c21f4-0672-48b2-8279-77334bb63a53",
		     "elasticIp" : true
		},
		{
		    "uuid": "aa1809a2-c32d-4eb8-a5c5-e46f692416e0",
		    "elasticIp" : true
		},
		{
		    "uuid": "aa1809a2-c32d-4eb8-a5c5-e46f692416e0",
		    "elasticIp" : true
               }
	]

Network interfaces with fixedip
=======================
	"network" : [
		{
		    "uuid": "fb9c21f4-0672-48b2-8279-77334bb63a53",
		    "fixedIp": "172.16.0.10"
		},
		{
		    "uuid": "aa1809a2-c32d-4eb8-a5c5-e46f692416e0",
		    "fixedIp" : "172.16.0.11"
		    
		},
		{
		    "uuid": "aa1809a2-c32d-4eb8-a5c5-e46f692416e0",
		    "fixedIp" : "172.16.0.12"
		    
		}
		]
              </div></li><li><div><div><b>body:</b> 
Thanks Reka for the comment.  I like that suggestion of pulling this out
of the Cartridge Property section.  Two questions I have for you:

1/- When we do that, should we remove the "networkInterfaces" property
under Cartridge Property section since it doesn't make sense to have both
co-exist? 

2/- Based on OpenStack specs
(http://docs.openstack.org/api/openstack-compute/2/content/NetworksSection.
html), you can only have 3 attributes: network UUID, fixed_ip, and port
UUID.  I'm not sure what the "elasticIp" is used for.   Ideally, having
just the valid network attributes in the JSON object will make it easier
to process and more efficient.

Copied Nirmal too since he introduced the "networkInterfaces" under
Cartridge Property.

Regards,

-Jeffrey




                </div><div><b>label:</b> code-design
                </div></div></li><li><div>
                On Tue, Mar 11, 2014 at 10:08 PM, Jeffrey Nguyen (jeffrngu) &lt;


+1



-- 
Best Regards,
Nirmal

Nirmal Fernando.
PPMC Member &amp; Committer of Apache Stratos,
Senior Software Engineer, WSO2 Inc.

Blog: http://nirmalfdo.blogspot.com/

              </div></li><li><div>
                Hi Jeffery,

For 1) Yah. +1. Please remove the network from cartridge properties.

     2) I have added elasticIp for the stratos usage only. May be we can survive without that also. We will adhere to openstack spec here then. Regarding port, if stratos use it at any point, we can use port as well. Else, we will leave port and use only uuid and fixedIp. Also, we normally adhere to cartridge definition convention when making element name. For Eg: better to have fixedIp than fixed_ip. After the suggestions, i hope that we can follow up like below: 

In order to just define the network interfaces
====================================
"network" : [
{ "uuid": "fb9c21f4-0672-48b2-8279-77334bb63a53"},
{ "uuid": "aa1809a2-c32d-4eb8-a5c5-e46f692416e0"},
{ "uuid": "aa1809a2-c32d-4eb8-a5c5-e46f692416e0"}
]

Network interfaces with fixedip
=======================
"network" : [
{ "uuid": "fb9c21f4-0672-48b2-8279-77334bb63a53", "fixedIp": "172.16.0.10" },
{ "uuid": "aa1809a2-c32d-4eb8-a5c5-e46f692416e0", "fixedIp" : "172.16.0.11" },
{ "uuid": "aa1809a2-c32d-4eb8-a5c5-e46f692416e0", "fixedIp" : "172.16.0.12" }
]

Thanks,
Reka

              </div></li><li><div>
                
Thank you Nirmal and Reka for confirming the removal of existing
"networkInterfaces" and elasticIp properties.

As for the naming convention for the for the fixed IP, correct me if I'm
wrong but I thought the JSON payload is Iaas specific.  It is processed
as-is by the underlined Iaas.  As such, for OpenStack, we can use
"fixed_ip" for OpenStack based on
http://docs.openstack.org/api/openstack-compute/2/content/NetworksSection.h
tml.  Otherwise, we need to have code at the OpenStack layer/adapter to
convert from "fixedIp" to "fixed_ip".

Just to make sure we're all on the same page, my intention is to treat all
these network properties as name/value pairs.  There's no code to deal
with specific network attributes.

Also, where exactly do you suggest the new "network" config section be?
Should it still be under "iaasProvider" but outside of the "property", or
should it be some where outside of "iaasProvider" section?

Thanks,
-Jeffrey

On 3/11/14 11:19 AM, "Reka Thirunavukkarasu (JIRA)" &lt;jira@apache.org&gt;



              </div></li><li><div>
                +1. Then we will go ahead using fixed_ip in order to avoid further code changes. Also +1 to make it is network properties as well.

Do we have networks defined/configured per region or per zone? In that case, it would be better to have it as part of iaasProvider section. So that we can define the networks per region/zone wise in iaasProvider.  
              </div></li><li><div>
                Thanks Reka!

For the network properties, I'm getting opposition by one jClouds
developer in making it generic name/value based in Map&lt;String, String&gt;
structure.   Please see the discussion on
https://issues.apache.org/jira/browse/JCLOUDS-493.  This is for the
jClouds side enhancement to support Stratos side.

If you want to see generic name/value pair support in jClouds, please
voice your opinion.  Otherwise, I would have to go with the approach
suggested by this jClouds developer. In which case, we would have to
explicitly check for existent of each network property on the Stratos side.

-Jeffrey

On 3/11/14 12:25 PM, "Reka Thirunavukkarasu (JIRA)" &lt;jira@apache.org&gt;



              </div></li><li><div>
                Hi Jeffrey,

I went through the jira that you have pointed. So, still improvement to Map&lt;String, String&gt; need to be done in jclouds level. Until then, jclouds support on this, +1 to go ahead with the proposed approach.


              </div></li><li><div>
                
Hi Reka,

I assume you were referring to Zack's proposed approach correct?

-Jeffrey




              </div></li><li><div>
                Hi Jeffrey,

Yah..I meant the same..
              </div></li><li><div>
                Please review the attached patch.   As discussed above, "networkInterfaces" property under "iaasProvider" is now moved to a separate config section under "iaasProvider/networkInterfaces".  It is a JSON array format.   For OpenStack,  each network tuple can support up to 3 parameters: networkUuid, fixedIp, and portUuid.

For AWS, I made the change to support network UUID only.  The change is needed since "networkInterfaces" is no longer under "iaasProvider/property".  Devs are welcome to enhance AWS to support fixedIp, and portUuid if applicable.

OpenStack:

    "cartridgeDefinitionBean": {
...
        "iaasProvider": [
            {
                "imageId": "RegionOne/66dac7ce-992c-43a4-b765-029c0b6fc1fe", 
                "maxInstanceLimit": "4", 
                "property": [
                    {
                        "name": "instanceType", 
                        "value": "RegionOne/1d89ff82-5981-4a14-91e5-fc769f82a2f9"
                    }, 
                    ...
                ], 
                "networkInterfaces": [
                    {
                        "networkUuid": "fb9c21f4-0672-48b2-8279-77334bb63a53",
                        "fixedIp": "172.10.2.2"
                    },
                    {
                        "networkUuid": "aa1809a2-c32d-4eb8-a5c5-e46f692416e0",
                        "fixedIp": "172.10.4.4"
                    },
                    {
                        "networkUuid": "1e43f86f-4165-4f2e-8017-dd4cfb5548b0"
                    }
                ],
                "type": "openstack-Core"
            }
        ], 
        "multiTenant": "false", 
        "portMapping": [
            {
...
            }
        ], 
        "property": [
...
        ], 
        "version": "1.0"
    }
}


AWS:

{ "cartridgeDefinitionBean": {
...
  "deployment": {
  },
  "iaasProvider": [
    {
      "type": "ec2",
      "imageId": "ap-southeast-1/ami-16d78044",
      "maxInstanceLimit": "4",
      "property": [
          { "name": "instanceType", "value": "m1.medium" },
          { "name": "keyPair", "value": "nirmal-stratos" }
      ],
      "networkInterfaces":[
          {"networkUuid": "c076ab11-a76f-4409-8773-1a72201074fc"},
          {"networkUuid": "c076ab11-a76f-4409-8773-1a7220107aw"},
          {"networkUuid": "c076ab11-a76f-4409-8773-1a72201075df"}
       ]
    }
  ]
}
}
              </div></li><li><div>
                Please note that this JIRA depends on STRATOS-520, which is already resolved.
              </div></li><li><div>
                
I pulled master branch again and re-apply the patch.  Please find updated patch attached.

Thanks,
-Jeffrey
              </div></li><li><div>
                Patch is reviewed and committed in 7af2113c7a237742cfb895186878ef56797088b9.
              </div></li></ol></div></div></html>