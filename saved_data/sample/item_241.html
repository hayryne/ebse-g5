<!DOCTYPE html><html><div class="item-title">
        Item 241
      </div> <div class="item-details"><div><b>git_comments:</b> <ol><li><div>
                
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * "License"); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied.  See the License for the
 * specific language governing permissions and limitations
 * under the License.
 
              </div></li><li><div>
                
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * "License"); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied.  See the License for the
 * specific language governing permissions and limitations
 * under the License.
 
              </div></li><li><div><div><b>comment:</b>  Processor Documentation ================================================== 
                </div><div><b>label:</b> documentation
                </div></div></li><li><div>
                www.apache.org/licenses/LICENSE-2.0
              </div></li><li><div>
                
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at
      http://www.apache.org/licenses/LICENSE-2.0
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.

              </div></li><li><div>
                
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * "License"); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied.  See the License for the
 * specific language governing permissions and limitations
 * under the License.
 
              </div></li></ol></div><div><b>git_commits:</b> <ol><li><div><div><b>summary:</b> NIFI-5333 Added GetMongoRecord.
                </div><div><b>message:</b> NIFI-5333 Added GetMongoRecord.

Signed-off-by: zenfenan &lt;zenfenan@apache.org&gt;

This closes #3011

                </div></div></li></ol></div><div><b>github_issues:</b> <ol></ol></div><div><b>github_issues_comments:</b> <ol></ol></div><div><b>github_pulls:</b> <ol><li><div><div><b>title:</b> NIFI-5333 Added GetMongoRecord.
                </div><div><b>body:</b> Thank you for submitting a contribution to Apache NiFi.

In order to streamline the review of the contribution we ask you
to ensure the following steps have been taken:

### For all changes:
- [ ] Is there a JIRA ticket associated with this PR? Is it referenced 
     in the commit message?

- [ ] Does your PR title start with NIFI-XXXX where XXXX is the JIRA number you are trying to resolve? Pay particular attention to the hyphen "-" character.

- [ ] Has your PR been rebased against the latest commit within the target branch (typically master)?

- [ ] Is your initial contribution a single, squashed commit?

### For code changes:
- [ ] Have you ensured that the full suite of tests is executed via mvn -Pcontrib-check clean install at the root nifi folder?
- [ ] Have you written or updated unit tests to verify your changes?
- [ ] If adding new dependencies to the code, are these dependencies licensed in a way that is compatible for inclusion under [ASF 2.0](http://www.apache.org/legal/resolved.html#category-a)? 
- [ ] If applicable, have you updated the LICENSE file, including the main LICENSE file under nifi-assembly?
- [ ] If applicable, have you updated the NOTICE file, including the main NOTICE file found under nifi-assembly?
- [ ] If adding new Properties, have you added .displayName in addition to .name (programmatic access) for each of the new properties?

### For documentation related changes:
- [ ] Have you ensured that format looks appropriate for the output in which it is rendered?

### Note:
Please ensure that once the PR is submitted, you check travis-ci for build issues and submit an update to your PR as soon as possible.

                </div></div></li></ol></div><div><b>github_pulls_comments:</b> <ol><li><div>
                @zenfenan @mattyb149  it's back.
              </div></li><li><div>
                @zenfenan any chance we can get a review underway?
              </div></li><li><div>
                @MikeThomsen Will try to do by this weekend.
              </div></li><li><div>
                Thanks @zenfenan. Could you and/or @mattyb149 take a look at 4975 as well sometime? That's the GridFS support. Would really like to give NiFi the ability to work natively with that.

If either of you are being held up by reviews, please ping me.
              </div></li></ol></div><div><b>github_pulls_reviews:</b> <ol><li><div>
                Has to be changed.
              </div></li><li><div>
                Done.
              </div></li><li><div><div><b>body:</b> We already have the `CLIENT_SERVICE` property descriptor in the AbstractMongo processor. This has to be removed.
                </div><div><b>label:</b> code-design
                </div></div></li><li><div>
                Fixed. Couldn't test locally because I'm having connectivity issues for one of the maven dependencies in nifi-hdfs-processors.
              </div></li><li><div>
                Just pushed an update that fixed some bad behavior. Ran the whole IT suite against dockerized Mongo and no issues.
              </div></li></ol></div><div><b>jira_issues:</b> <ol><li><div><div><b>summary:</b> Create GetMongoRecord processor
                </div><div><b>description:</b> A processor similar to GetMongo that uses the record API should be created.
                </div></div></li></ol></div><div><b>jira_issues_comments:</b> <ol><li><div>
                Hi,

Would you like to explain your use case?
              </div></li><li><div>
                There is already a GetMongo to pull data from Mongo.  Mike appears to just be pointing out that pulling them in the form of format/schema aware records leveraging nifi's record reader/writer capabilities will be far more powerful/efficient/performant.
              </div></li><li><div>
                GitHub user MikeThomsen opened a pull request:

    https://github.com/apache/nifi/pull/2993

    NIFI-5333 Added GetMongoRecord.

    Thank you for submitting a contribution to Apache NiFi.
    
    In order to streamline the review of the contribution we ask you
    to ensure the following steps have been taken:
    
    ### For all changes:
    - [ ] Is there a JIRA ticket associated with this PR? Is it referenced 
         in the commit message?
    
    - [ ] Does your PR title start with NIFI-XXXX where XXXX is the JIRA number you are trying to resolve? Pay particular attention to the hyphen "-" character.
    
    - [ ] Has your PR been rebased against the latest commit within the target branch (typically master)?
    
    - [ ] Is your initial contribution a single, squashed commit?
    
    ### For code changes:
    - [ ] Have you ensured that the full suite of tests is executed via mvn -Pcontrib-check clean install at the root nifi folder?
    - [ ] Have you written or updated unit tests to verify your changes?
    - [ ] If adding new dependencies to the code, are these dependencies licensed in a way that is compatible for inclusion under [ASF 2.0](http://www.apache.org/legal/resolved.html#category-a)? 
    - [ ] If applicable, have you updated the LICENSE file, including the main LICENSE file under nifi-assembly?
    - [ ] If applicable, have you updated the NOTICE file, including the main NOTICE file found under nifi-assembly?
    - [ ] If adding new Properties, have you added .displayName in addition to .name (programmatic access) for each of the new properties?
    
    ### For documentation related changes:
    - [ ] Have you ensured that format looks appropriate for the output in which it is rendered?
    
    ### Note:
    Please ensure that once the PR is submitted, you check travis-ci for build issues and submit an update to your PR as soon as possible.


You can merge this pull request into a Git repository by running:

    $ git pull https://github.com/MikeThomsen/nifi NIFI-5333

Alternatively you can review and apply these changes as the patch at:

    https://github.com/apache/nifi/pull/2993.patch

To close this pull request, make a commit to your master/trunk branch
with (at least) the following in the commit message:

    This closes #2993
    
----
commit 3d15a2671ac1e28fb8ce6b5057e12b512d4f66ef
Author: Mike Thomsen &lt;mikerthomsen@...&gt;
Date:   2018-09-02T19:58:33Z

    NIFI-5333 Added GetMongoRecord.

----

              </div></li><li><div>
                Github user MikeThomsen commented on the issue:

    https://github.com/apache/nifi/pull/2993
  
    @zenfenan any updates?

              </div></li><li><div>
                Github user zenfenan commented on the issue:

    https://github.com/apache/nifi/pull/2993
  
    Will try to complete it by this weekend. Extremely sorry.. Got super busy for the past few days.

              </div></li><li><div>
                Github user MikeThomsen commented on the issue:

    https://github.com/apache/nifi/pull/2993
  
    @zenfenan I got to thinking about it, and I think it needs [this](https://github.com/apache/nifi/pull/2896) one done first to make it work right. So I'm going to close this out until that one is done.

              </div></li><li><div>
                Github user MikeThomsen closed the pull request at:

    https://github.com/apache/nifi/pull/2993

              </div></li><li><div>
                GitHub user MikeThomsen opened a pull request:

    https://github.com/apache/nifi/pull/3011

    NIFI-5333 Added GetMongoRecord.

    Thank you for submitting a contribution to Apache NiFi.
    
    In order to streamline the review of the contribution we ask you
    to ensure the following steps have been taken:
    
    ### For all changes:
    - [ ] Is there a JIRA ticket associated with this PR? Is it referenced 
         in the commit message?
    
    - [ ] Does your PR title start with NIFI-XXXX where XXXX is the JIRA number you are trying to resolve? Pay particular attention to the hyphen "-" character.
    
    - [ ] Has your PR been rebased against the latest commit within the target branch (typically master)?
    
    - [ ] Is your initial contribution a single, squashed commit?
    
    ### For code changes:
    - [ ] Have you ensured that the full suite of tests is executed via mvn -Pcontrib-check clean install at the root nifi folder?
    - [ ] Have you written or updated unit tests to verify your changes?
    - [ ] If adding new dependencies to the code, are these dependencies licensed in a way that is compatible for inclusion under [ASF 2.0](http://www.apache.org/legal/resolved.html#category-a)? 
    - [ ] If applicable, have you updated the LICENSE file, including the main LICENSE file under nifi-assembly?
    - [ ] If applicable, have you updated the NOTICE file, including the main NOTICE file found under nifi-assembly?
    - [ ] If adding new Properties, have you added .displayName in addition to .name (programmatic access) for each of the new properties?
    
    ### For documentation related changes:
    - [ ] Have you ensured that format looks appropriate for the output in which it is rendered?
    
    ### Note:
    Please ensure that once the PR is submitted, you check travis-ci for build issues and submit an update to your PR as soon as possible.


You can merge this pull request into a Git repository by running:

    $ git pull https://github.com/MikeThomsen/nifi NIFI-5333

Alternatively you can review and apply these changes as the patch at:

    https://github.com/apache/nifi/pull/3011.patch

To close this pull request, make a commit to your master/trunk branch
with (at least) the following in the commit message:

    This closes #3011
    
----
commit d9fbe281b2a01c66cea9c4a6523c84c84c303be7
Author: Mike Thomsen &lt;mikerthomsen@...&gt;
Date:   2018-09-02T19:58:33Z

    NIFI-5333 Added GetMongoRecord.

----

              </div></li><li><div>
                Github user MikeThomsen commented on the issue:

    https://github.com/apache/nifi/pull/3011
  
    @zenfenan @mattyb149  it's back.

              </div></li><li><div>
                Github user MikeThomsen commented on the issue:

    https://github.com/apache/nifi/pull/3011
  
    @zenfenan any chance we can get a review underway?

              </div></li><li><div>
                Github user zenfenan commented on the issue:

    https://github.com/apache/nifi/pull/3011
  
    @MikeThomsen Will try to do by this weekend.

              </div></li><li><div>
                Github user zenfenan commented on a diff in the pull request:

    https://github.com/apache/nifi/pull/3011#discussion_r232223940
  
    --- Diff: nifi-nar-bundles/nifi-mongodb-bundle/nifi-mongodb-processors/pom.xml ---
    @@ -101,6 +101,7 @@
             &lt;dependency&gt;
                 &lt;groupId&gt;org.apache.nifi&lt;/groupId&gt;
                 &lt;artifactId&gt;nifi-mongodb-client-service-api&lt;/artifactId&gt;
    +            &lt;version&gt;1.8.0-SNAPSHOT&lt;/version&gt;
    --- End diff --
    
    Has to be changed.

              </div></li><li><div>
                Github user MikeThomsen commented on a diff in the pull request:

    https://github.com/apache/nifi/pull/3011#discussion_r232453403
  
    --- Diff: nifi-nar-bundles/nifi-mongodb-bundle/nifi-mongodb-processors/pom.xml ---
    @@ -101,6 +101,7 @@
             &lt;dependency&gt;
                 &lt;groupId&gt;org.apache.nifi&lt;/groupId&gt;
                 &lt;artifactId&gt;nifi-mongodb-client-service-api&lt;/artifactId&gt;
    +            &lt;version&gt;1.8.0-SNAPSHOT&lt;/version&gt;
    --- End diff --
    
    Done.

              </div></li><li><div>
                Github user MikeThomsen commented on the issue:

    https://github.com/apache/nifi/pull/3011
  
    Thanks @zenfenan. Could you and/or @mattyb149 take a look at 4975 as well sometime? That's the GridFS support. Would really like to give NiFi the ability to work natively with that.

              </div></li><li><div>
                Github user zenfenan commented on a diff in the pull request:

    https://github.com/apache/nifi/pull/3011#discussion_r234443725
  
    --- Diff: nifi-nar-bundles/nifi-mongodb-bundle/nifi-mongodb-processors/src/main/java/org/apache/nifi/processors/mongodb/GetMongoRecord.java ---
    @@ -0,0 +1,213 @@
    +/*
    + * Licensed to the Apache Software Foundation (ASF) under one
    + * or more contributor license agreements.  See the NOTICE file
    + * distributed with this work for additional information
    + * regarding copyright ownership.  The ASF licenses this file
    + * to you under the Apache License, Version 2.0 (the
    + * "License"); you may not use this file except in compliance
    + * with the License.  You may obtain a copy of the License at
    + *
    + *   http://www.apache.org/licenses/LICENSE-2.0
    + *
    + * Unless required by applicable law or agreed to in writing,
    + * software distributed under the License is distributed on an
    + * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    + * KIND, either express or implied.  See the License for the
    + * specific language governing permissions and limitations
    + * under the License.
    + */
    +
    +package org.apache.nifi.processors.mongodb;
    +
    +import com.mongodb.client.FindIterable;
    +import com.mongodb.client.MongoCollection;
    +import com.mongodb.client.MongoCursor;
    +import org.apache.nifi.annotation.behavior.InputRequirement;
    +import org.apache.nifi.annotation.behavior.WritesAttribute;
    +import org.apache.nifi.annotation.behavior.WritesAttributes;
    +import org.apache.nifi.annotation.documentation.CapabilityDescription;
    +import org.apache.nifi.annotation.documentation.Tags;
    +import org.apache.nifi.annotation.lifecycle.OnScheduled;
    +import org.apache.nifi.components.PropertyDescriptor;
    +import org.apache.nifi.expression.ExpressionLanguageScope;
    +import org.apache.nifi.flowfile.FlowFile;
    +import org.apache.nifi.mongodb.MongoDBClientService;
    +import org.apache.nifi.processor.ProcessContext;
    +import org.apache.nifi.processor.ProcessSession;
    +import org.apache.nifi.processor.Relationship;
    +import org.apache.nifi.processor.exception.ProcessException;
    +import org.apache.nifi.processor.util.StandardValidators;
    +import org.apache.nifi.schema.access.SchemaNotFoundException;
    +import org.apache.nifi.serialization.RecordSetWriter;
    +import org.apache.nifi.serialization.RecordSetWriterFactory;
    +import org.apache.nifi.serialization.record.MapRecord;
    +import org.apache.nifi.serialization.record.Record;
    +import org.apache.nifi.serialization.record.RecordSchema;
    +import org.bson.Document;
    +import org.bson.types.ObjectId;
    +
    +import java.io.OutputStream;
    +import java.util.ArrayList;
    +import java.util.Collections;
    +import java.util.HashMap;
    +import java.util.HashSet;
    +import java.util.List;
    +import java.util.Map;
    +import java.util.Set;
    +
    +@CapabilityDescription("A record-based version of GetMongo that uses the Record writers to write the MongoDB result set.")
    +@Tags({"mongo", "mongodb", "get", "fetch", "record", "json"})
    +@InputRequirement(InputRequirement.Requirement.INPUT_ALLOWED)
    +@WritesAttributes({
    +    @WritesAttribute(attribute = GetMongo.DB_NAME, description = "The database where the results came from."),
    +    @WritesAttribute(attribute = GetMongo.COL_NAME, description = "The collection where the results came from.")
    +})
    +public class GetMongoRecord extends AbstractMongoQueryProcessor {
    +    public static final PropertyDescriptor CLIENT = new PropertyDescriptor.Builder()
    --- End diff --
    
    We already have the `CLIENT_SERVICE` property descriptor in the AbstractMongo processor. This has to be removed.

              </div></li><li><div>
                Github user MikeThomsen commented on a diff in the pull request:

    https://github.com/apache/nifi/pull/3011#discussion_r234457340
  
    --- Diff: nifi-nar-bundles/nifi-mongodb-bundle/nifi-mongodb-processors/src/main/java/org/apache/nifi/processors/mongodb/GetMongoRecord.java ---
    @@ -0,0 +1,213 @@
    +/*
    + * Licensed to the Apache Software Foundation (ASF) under one
    + * or more contributor license agreements.  See the NOTICE file
    + * distributed with this work for additional information
    + * regarding copyright ownership.  The ASF licenses this file
    + * to you under the Apache License, Version 2.0 (the
    + * "License"); you may not use this file except in compliance
    + * with the License.  You may obtain a copy of the License at
    + *
    + *   http://www.apache.org/licenses/LICENSE-2.0
    + *
    + * Unless required by applicable law or agreed to in writing,
    + * software distributed under the License is distributed on an
    + * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    + * KIND, either express or implied.  See the License for the
    + * specific language governing permissions and limitations
    + * under the License.
    + */
    +
    +package org.apache.nifi.processors.mongodb;
    +
    +import com.mongodb.client.FindIterable;
    +import com.mongodb.client.MongoCollection;
    +import com.mongodb.client.MongoCursor;
    +import org.apache.nifi.annotation.behavior.InputRequirement;
    +import org.apache.nifi.annotation.behavior.WritesAttribute;
    +import org.apache.nifi.annotation.behavior.WritesAttributes;
    +import org.apache.nifi.annotation.documentation.CapabilityDescription;
    +import org.apache.nifi.annotation.documentation.Tags;
    +import org.apache.nifi.annotation.lifecycle.OnScheduled;
    +import org.apache.nifi.components.PropertyDescriptor;
    +import org.apache.nifi.expression.ExpressionLanguageScope;
    +import org.apache.nifi.flowfile.FlowFile;
    +import org.apache.nifi.mongodb.MongoDBClientService;
    +import org.apache.nifi.processor.ProcessContext;
    +import org.apache.nifi.processor.ProcessSession;
    +import org.apache.nifi.processor.Relationship;
    +import org.apache.nifi.processor.exception.ProcessException;
    +import org.apache.nifi.processor.util.StandardValidators;
    +import org.apache.nifi.schema.access.SchemaNotFoundException;
    +import org.apache.nifi.serialization.RecordSetWriter;
    +import org.apache.nifi.serialization.RecordSetWriterFactory;
    +import org.apache.nifi.serialization.record.MapRecord;
    +import org.apache.nifi.serialization.record.Record;
    +import org.apache.nifi.serialization.record.RecordSchema;
    +import org.bson.Document;
    +import org.bson.types.ObjectId;
    +
    +import java.io.OutputStream;
    +import java.util.ArrayList;
    +import java.util.Collections;
    +import java.util.HashMap;
    +import java.util.HashSet;
    +import java.util.List;
    +import java.util.Map;
    +import java.util.Set;
    +
    +@CapabilityDescription("A record-based version of GetMongo that uses the Record writers to write the MongoDB result set.")
    +@Tags({"mongo", "mongodb", "get", "fetch", "record", "json"})
    +@InputRequirement(InputRequirement.Requirement.INPUT_ALLOWED)
    +@WritesAttributes({
    +    @WritesAttribute(attribute = GetMongo.DB_NAME, description = "The database where the results came from."),
    +    @WritesAttribute(attribute = GetMongo.COL_NAME, description = "The collection where the results came from.")
    +})
    +public class GetMongoRecord extends AbstractMongoQueryProcessor {
    +    public static final PropertyDescriptor CLIENT = new PropertyDescriptor.Builder()
    --- End diff --
    
    Fixed. Couldn't test locally because I'm having connectivity issues for one of the maven dependencies in nifi-hdfs-processors.

              </div></li><li><div>
                Github user MikeThomsen commented on a diff in the pull request:

    https://github.com/apache/nifi/pull/3011#discussion_r234461028
  
    --- Diff: nifi-nar-bundles/nifi-mongodb-bundle/nifi-mongodb-processors/src/main/java/org/apache/nifi/processors/mongodb/GetMongoRecord.java ---
    @@ -0,0 +1,213 @@
    +/*
    + * Licensed to the Apache Software Foundation (ASF) under one
    + * or more contributor license agreements.  See the NOTICE file
    + * distributed with this work for additional information
    + * regarding copyright ownership.  The ASF licenses this file
    + * to you under the Apache License, Version 2.0 (the
    + * "License"); you may not use this file except in compliance
    + * with the License.  You may obtain a copy of the License at
    + *
    + *   http://www.apache.org/licenses/LICENSE-2.0
    + *
    + * Unless required by applicable law or agreed to in writing,
    + * software distributed under the License is distributed on an
    + * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    + * KIND, either express or implied.  See the License for the
    + * specific language governing permissions and limitations
    + * under the License.
    + */
    +
    +package org.apache.nifi.processors.mongodb;
    +
    +import com.mongodb.client.FindIterable;
    +import com.mongodb.client.MongoCollection;
    +import com.mongodb.client.MongoCursor;
    +import org.apache.nifi.annotation.behavior.InputRequirement;
    +import org.apache.nifi.annotation.behavior.WritesAttribute;
    +import org.apache.nifi.annotation.behavior.WritesAttributes;
    +import org.apache.nifi.annotation.documentation.CapabilityDescription;
    +import org.apache.nifi.annotation.documentation.Tags;
    +import org.apache.nifi.annotation.lifecycle.OnScheduled;
    +import org.apache.nifi.components.PropertyDescriptor;
    +import org.apache.nifi.expression.ExpressionLanguageScope;
    +import org.apache.nifi.flowfile.FlowFile;
    +import org.apache.nifi.mongodb.MongoDBClientService;
    +import org.apache.nifi.processor.ProcessContext;
    +import org.apache.nifi.processor.ProcessSession;
    +import org.apache.nifi.processor.Relationship;
    +import org.apache.nifi.processor.exception.ProcessException;
    +import org.apache.nifi.processor.util.StandardValidators;
    +import org.apache.nifi.schema.access.SchemaNotFoundException;
    +import org.apache.nifi.serialization.RecordSetWriter;
    +import org.apache.nifi.serialization.RecordSetWriterFactory;
    +import org.apache.nifi.serialization.record.MapRecord;
    +import org.apache.nifi.serialization.record.Record;
    +import org.apache.nifi.serialization.record.RecordSchema;
    +import org.bson.Document;
    +import org.bson.types.ObjectId;
    +
    +import java.io.OutputStream;
    +import java.util.ArrayList;
    +import java.util.Collections;
    +import java.util.HashMap;
    +import java.util.HashSet;
    +import java.util.List;
    +import java.util.Map;
    +import java.util.Set;
    +
    +@CapabilityDescription("A record-based version of GetMongo that uses the Record writers to write the MongoDB result set.")
    +@Tags({"mongo", "mongodb", "get", "fetch", "record", "json"})
    +@InputRequirement(InputRequirement.Requirement.INPUT_ALLOWED)
    +@WritesAttributes({
    +    @WritesAttribute(attribute = GetMongo.DB_NAME, description = "The database where the results came from."),
    +    @WritesAttribute(attribute = GetMongo.COL_NAME, description = "The collection where the results came from.")
    +})
    +public class GetMongoRecord extends AbstractMongoQueryProcessor {
    +    public static final PropertyDescriptor CLIENT = new PropertyDescriptor.Builder()
    --- End diff --
    
    Just pushed an update that fixed some bad behavior. Ran the whole IT suite against dockerized Mongo and no issues.

              </div></li><li><div>
                Commit e603c486f49f058d5f37892d172c1d6dddff55c7 in nifi's branch refs/heads/master from [~mike.thomsen]
[ https://git-wip-us.apache.org/repos/asf?p=nifi.git;h=e603c48 ]

NIFI-5333 Added GetMongoRecord.

Signed-off-by: zenfenan &lt;zenfenan@apache.org&gt;

This closes #3011

              </div></li><li><div>
                Github user asfgit closed the pull request at:

    https://github.com/apache/nifi/pull/3011

              </div></li><li><div>
                For some reason this was left open.
              </div></li></ol></div></div></html>