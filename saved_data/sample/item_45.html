<!DOCTYPE html><html><div class="item-title">
        Item 45
      </div> <div class="item-details"><div><b>git_comments:</b> <ol><li><div>
                * A mixin to add Jackson annotations to {@link SSEAwsKeyManagementParams}. 
              </div></li><li><div>
                * A mixin to add Jackson annotations to {@link SSECustomerKey}. 
              </div></li><li><div>
                * A mixin to add Jackson annotations to {@link AWSCredentialsProvider}. 
              </div></li><li><div>
                * Options used to configure Amazon Web Services S3. 
              </div></li><li><div>
                * Tests {@link AwsModule}. 
              </div></li></ol></div><div><b>git_commits:</b> <ol><li><div><div><b>summary:</b> Merge pull request #5491: [BEAM-3813] Support (de)serialization of S3 encryption options via JSON
                </div><div><b>message:</b> Merge pull request #5491: [BEAM-3813] Support (de)serialization of S3 encryption options via JSON


                </div></div></li></ol></div><div><b>github_issues:</b> <ol></ol></div><div><b>github_issues_comments:</b> <ol></ol></div><div><b>github_pulls:</b> <ol><li><div><div><b>title:</b> [BEAM-3813] Support (de)serialization of S3 encryption options via JSON
                </div><div><b>body:</b> Following your remarks, I reused the same JIRA ticket since this is related. PTAL
R: @lukecwik 
                </div></div></li><li><div><div><b>title:</b> [BEAM-3813] Support (de)serialization of S3 encryption options via JSON
                </div><div><b>body:</b> Following your remarks, I reused the same JIRA ticket since this is related. PTAL
R: @lukecwik 
                </div><div><b>label:</b> code-design
                </div></div></li><li><div><div><b>title:</b> [BEAM-3813] Support (de)serialization of S3 encryption options via JSON
                </div><div><b>body:</b> Following your remarks, I reused the same JIRA ticket since this is related. PTAL
R: @lukecwik 
                </div></div></li><li><div><div><b>title:</b> [BEAM-3813] Support (de)serialization of S3 encryption options via JSON
                </div><div><b>body:</b> Following your remarks, I reused the same JIRA ticket since this is related. PTAL
R: @lukecwik 
                </div></div></li><li><div><div><b>title:</b> [BEAM-3813] Support (de)serialization of S3 encryption options via JSON
                </div><div><b>body:</b> Following your remarks, I reused the same JIRA ticket since this is related. PTAL
R: @lukecwik 
                </div></div></li><li><div><div><b>title:</b> [BEAM-3813] Support (de)serialization of S3 encryption options via JSON
                </div><div><b>body:</b> Following your remarks, I reused the same JIRA ticket since this is related. PTAL
R: @lukecwik 
                </div><div><b>label:</b> code-design
                </div></div></li><li><div><div><b>title:</b> [BEAM-3813] Support (de)serialization of S3 encryption options via JSON
                </div><div><b>body:</b> Following your remarks, I reused the same JIRA ticket since this is related. PTAL
R: @lukecwik 
                </div></div></li><li><div><div><b>title:</b> [BEAM-3813] Support (de)serialization of S3 encryption options via JSON
                </div><div><b>body:</b> Following your remarks, I reused the same JIRA ticket since this is related. PTAL
R: @lukecwik 
                </div></div></li><li><div><div><b>title:</b> [BEAM-3813] Support (de)serialization of S3 encryption options via JSON
                </div><div><b>body:</b> Following your remarks, I reused the same JIRA ticket since this is related. PTAL
R: @lukecwik 
                </div></div></li></ol></div><div><b>github_pulls_comments:</b> <ol><li><div>
                Fixes done. PTAL again @lukecwik 
              </div></li><li><div><div><b>body:</b> Thanks for the review @lukecwik , it really improved it by making it simpler.
                </div><div><b>label:</b> code-design
                </div></div></li></ol></div><div><b>github_pulls_reviews:</b> <ol><li><div>
                Any reason now to put the extra serializers/deserializes into AwsModule.java?
              </div></li><li><div>
                Annoyingly, passing in `null` doesn't have the SSECustomerKey set the defaults: https://github.com/aws/aws-sdk-java/blob/master/aws-java-sdk-s3/src/main/java/com/amazonaws/services/s3/model/SSECustomerKey.java#L162

We should only call withYYY if the user specified YYY in the JSON.


              </div></li><li><div><div><b>body:</b> Might be easier to read if you convert the value into a `Map&lt;String, String&gt;` using:
```
Map&lt;String, String&gt; asMap =
          jsonParser.readValueAs(new TypeReference&lt;Map&lt;String, String&gt;&gt;() {
          });
```
ditto on below.
                </div><div><b>label:</b> code-design
                </div></div></li><li><div>
                Try a test where you set the minimal set of properties.
              </div></li><li><div>
                No, I just thought since they corresponded to a different object `S3Options` they would be good in their own module but I can put all in AwsModule if you think it is better.
              </div></li></ol></div><div><b>jira_issues:</b> <ol><li><div><div><b>summary:</b> Support encryption for S3FileSystem (SSE-S3, SSE-C and SSE-KMS)
                </div><div><b>description:</b> We should enable AWS S3 users to use encryption when reading or writing by provide encryption keys or using server side encryption via an algorithm, or a key management system (KMS)..

&nbsp;
                </div></div></li></ol></div><div><b>jira_issues_comments:</b> <ol><li><div>
                Do you plan to integrate/build a pluggable KMS solution for Apache Beam or are you specifically extending how the AWSCredentialsProvider can be configured via PipelineOptions inside of S3Options?

If its the former then I was curious as to what you were planning to do.
              </div></li><li><div>
                So far I have only thought about doing this for S3 since I want to have this feature out ideally for the next release. However you bring a nice point, I had not thought about a pluggable solution, or how we could design one. Maybe we create a Jira for that one (if this can benefit Gcs too). Do you have some idea already?
              </div></li><li><div>
                Sounds good for getting this working for S3 via the existing S3 credentials providers.

Filed https://issues.apache.org/jira/browse/BEAM-3821 for the idea of having a pluggable KMS.
              </div></li></ol></div></div></html>