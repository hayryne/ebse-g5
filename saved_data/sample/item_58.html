<!DOCTYPE html><html><div class="item-title">
        Item 58
      </div> <div class="item-details"><div><b>git_comments:</b> <ol></ol></div><div><b>git_commits:</b> <ol><li><div><div><b>summary:</b> SOLR-14297: Replace commons-codec Base64 with JDK8 Base64 (#2222)
                </div><div><b>message:</b> SOLR-14297: Replace commons-codec Base64 with JDK8 Base64 (#2222)


                </div></div></li></ol></div><div><b>github_issues:</b> <ol></ol></div><div><b>github_issues_comments:</b> <ol></ol></div><div><b>github_pulls:</b> <ol><li><div><div><b>title:</b> SOLR-14297: replace commons-codec Base64 with JDK8 Base64
                </div><div><b>body:</b> &lt;!--
_(If you are a project committer then you may remove some/all of the following template.)_

Before creating a pull request, please file an issue in the ASF Jira system for Lucene or Solr:

* https://issues.apache.org/jira/projects/LUCENE
* https://issues.apache.org/jira/projects/SOLR

You will need to create an account in Jira in order to create an issue.

The title of the PR should reference the Jira issue number in the form:

* LUCENE-####: &lt;short description of problem or changes&gt;
* SOLR-####: &lt;short description of problem or changes&gt;

LUCENE and SOLR must be fully capitalized. A short description helps people scanning pull requests for items they can work on.

Properly referencing the issue in the title ensures that Jira is correctly updated with code review comments and commits. --&gt;


# Description

Java8 has a builtin Base64 encoder and decoder, there is no need to use commons-codec for this purpose.

# Solution

Eliminate commons-codec Base64 usage

# Tests

Unit tests

# Checklist

Please review the following and check all that apply:

- [x] I have reviewed the guidelines for [How to Contribute](https://wiki.apache.org/solr/HowToContribute) and my code conforms to the standards described there to the best of my ability.
- [x] I have created a Jira issue and added the issue ID to my pull request title.
- [x] I have given Solr maintainers [access](https://help.github.com/en/articles/allowing-changes-to-a-pull-request-branch-created-from-a-fork) to contribute to my PR branch. (optional but recommended)
- [x] I have developed this patch against the `master` branch.
- [x] I have run `./gradlew check`.
- [ ] I have added tests for my changes.
- [ ] I have added documentation for the [Ref Guide](https://github.com/apache/lucene-solr/tree/master/solr/solr-ref-guide) (for Solr changes only).

                </div><div><b>label:</b> code-design
                </div></div></li><li><div><div><b>title:</b> SOLR-14297: replace commons-codec Base64 with JDK8 Base64
                </div><div><b>body:</b> &lt;!--
_(If you are a project committer then you may remove some/all of the following template.)_

Before creating a pull request, please file an issue in the ASF Jira system for Lucene or Solr:

* https://issues.apache.org/jira/projects/LUCENE
* https://issues.apache.org/jira/projects/SOLR

You will need to create an account in Jira in order to create an issue.

The title of the PR should reference the Jira issue number in the form:

* LUCENE-####: &lt;short description of problem or changes&gt;
* SOLR-####: &lt;short description of problem or changes&gt;

LUCENE and SOLR must be fully capitalized. A short description helps people scanning pull requests for items they can work on.

Properly referencing the issue in the title ensures that Jira is correctly updated with code review comments and commits. --&gt;


# Description

Java8 has a builtin Base64 encoder and decoder, there is no need to use commons-codec for this purpose.

# Solution

Eliminate commons-codec Base64 usage

# Tests

Unit tests

# Checklist

Please review the following and check all that apply:

- [x] I have reviewed the guidelines for [How to Contribute](https://wiki.apache.org/solr/HowToContribute) and my code conforms to the standards described there to the best of my ability.
- [x] I have created a Jira issue and added the issue ID to my pull request title.
- [x] I have given Solr maintainers [access](https://help.github.com/en/articles/allowing-changes-to-a-pull-request-branch-created-from-a-fork) to contribute to my PR branch. (optional but recommended)
- [x] I have developed this patch against the `master` branch.
- [x] I have run `./gradlew check`.
- [ ] I have added tests for my changes.
- [ ] I have added documentation for the [Ref Guide](https://github.com/apache/lucene-solr/tree/master/solr/solr-ref-guide) (for Solr changes only).

                </div></div></li><li><div><div><b>title:</b> SOLR-14297: replace commons-codec Base64 with JDK8 Base64
                </div><div><b>body:</b> &lt;!--
_(If you are a project committer then you may remove some/all of the following template.)_

Before creating a pull request, please file an issue in the ASF Jira system for Lucene or Solr:

* https://issues.apache.org/jira/projects/LUCENE
* https://issues.apache.org/jira/projects/SOLR

You will need to create an account in Jira in order to create an issue.

The title of the PR should reference the Jira issue number in the form:

* LUCENE-####: &lt;short description of problem or changes&gt;
* SOLR-####: &lt;short description of problem or changes&gt;

LUCENE and SOLR must be fully capitalized. A short description helps people scanning pull requests for items they can work on.

Properly referencing the issue in the title ensures that Jira is correctly updated with code review comments and commits. --&gt;


# Description

Java8 has a builtin Base64 encoder and decoder, there is no need to use commons-codec for this purpose.

# Solution

Eliminate commons-codec Base64 usage

# Tests

Unit tests

# Checklist

Please review the following and check all that apply:

- [x] I have reviewed the guidelines for [How to Contribute](https://wiki.apache.org/solr/HowToContribute) and my code conforms to the standards described there to the best of my ability.
- [x] I have created a Jira issue and added the issue ID to my pull request title.
- [x] I have given Solr maintainers [access](https://help.github.com/en/articles/allowing-changes-to-a-pull-request-branch-created-from-a-fork) to contribute to my PR branch. (optional but recommended)
- [x] I have developed this patch against the `master` branch.
- [x] I have run `./gradlew check`.
- [ ] I have added tests for my changes.
- [ ] I have added documentation for the [Ref Guide](https://github.com/apache/lucene-solr/tree/master/solr/solr-ref-guide) (for Solr changes only).

                </div></div></li><li><div><div><b>title:</b> SOLR-14297: replace commons-codec Base64 with JDK8 Base64
                </div><div><b>body:</b> &lt;!--
_(If you are a project committer then you may remove some/all of the following template.)_

Before creating a pull request, please file an issue in the ASF Jira system for Lucene or Solr:

* https://issues.apache.org/jira/projects/LUCENE
* https://issues.apache.org/jira/projects/SOLR

You will need to create an account in Jira in order to create an issue.

The title of the PR should reference the Jira issue number in the form:

* LUCENE-####: &lt;short description of problem or changes&gt;
* SOLR-####: &lt;short description of problem or changes&gt;

LUCENE and SOLR must be fully capitalized. A short description helps people scanning pull requests for items they can work on.

Properly referencing the issue in the title ensures that Jira is correctly updated with code review comments and commits. --&gt;


# Description

Java8 has a builtin Base64 encoder and decoder, there is no need to use commons-codec for this purpose.

# Solution

Eliminate commons-codec Base64 usage

# Tests

Unit tests

# Checklist

Please review the following and check all that apply:

- [x] I have reviewed the guidelines for [How to Contribute](https://wiki.apache.org/solr/HowToContribute) and my code conforms to the standards described there to the best of my ability.
- [x] I have created a Jira issue and added the issue ID to my pull request title.
- [x] I have given Solr maintainers [access](https://help.github.com/en/articles/allowing-changes-to-a-pull-request-branch-created-from-a-fork) to contribute to my PR branch. (optional but recommended)
- [x] I have developed this patch against the `master` branch.
- [x] I have run `./gradlew check`.
- [ ] I have added tests for my changes.
- [ ] I have added documentation for the [Ref Guide](https://github.com/apache/lucene-solr/tree/master/solr/solr-ref-guide) (for Solr changes only).

                </div></div></li><li><div><div><b>title:</b> SOLR-14297: replace commons-codec Base64 with JDK8 Base64
                </div><div><b>body:</b> &lt;!--
_(If you are a project committer then you may remove some/all of the following template.)_

Before creating a pull request, please file an issue in the ASF Jira system for Lucene or Solr:

* https://issues.apache.org/jira/projects/LUCENE
* https://issues.apache.org/jira/projects/SOLR

You will need to create an account in Jira in order to create an issue.

The title of the PR should reference the Jira issue number in the form:

* LUCENE-####: &lt;short description of problem or changes&gt;
* SOLR-####: &lt;short description of problem or changes&gt;

LUCENE and SOLR must be fully capitalized. A short description helps people scanning pull requests for items they can work on.

Properly referencing the issue in the title ensures that Jira is correctly updated with code review comments and commits. --&gt;


# Description

Java8 has a builtin Base64 encoder and decoder, there is no need to use commons-codec for this purpose.

# Solution

Eliminate commons-codec Base64 usage

# Tests

Unit tests

# Checklist

Please review the following and check all that apply:

- [x] I have reviewed the guidelines for [How to Contribute](https://wiki.apache.org/solr/HowToContribute) and my code conforms to the standards described there to the best of my ability.
- [x] I have created a Jira issue and added the issue ID to my pull request title.
- [x] I have given Solr maintainers [access](https://help.github.com/en/articles/allowing-changes-to-a-pull-request-branch-created-from-a-fork) to contribute to my PR branch. (optional but recommended)
- [x] I have developed this patch against the `master` branch.
- [x] I have run `./gradlew check`.
- [ ] I have added tests for my changes.
- [ ] I have added documentation for the [Ref Guide](https://github.com/apache/lucene-solr/tree/master/solr/solr-ref-guide) (for Solr changes only).

                </div></div></li></ol></div><div><b>github_pulls_comments:</b> <ol><li><div><div><b>body:</b> Since Base64.Encoder and Base64.Decoder are thread-safe, it might be better to have static instantiations of each for each class here, instead of generating one per request.

Otherwise this looks pretty straightforward!
                </div><div><b>label:</b> code-design
                </div></div></li><li><div>
                It seems to me `getDecoder()` and `getEncoder()` does not generate a new decoder/encoder just returns the same one: http://hg.openjdk.java.net/jdk8/jdk8/jdk/file/687fd7c7986d/src/share/classes/java/util/Base64.java#l151
              </div></li><li><div>
                Could you please add an entry to `solr/CHANGES.txt` in the 9.0 section under "Other"?
              </div></li></ol></div><div><b>github_pulls_reviews:</b> <ol></ol></div><div><b>jira_issues:</b> <ol><li><div><div><b>summary:</b> Remove apache commons-codec Base64 calls in favor of java 8 alternatives
                </div><div><b>description:</b> Java8 has a builtin Base64 encoder and decoder, there is no need to use commons-codec for this purpose.
                </div></div></li><li><div><div><b>summary:</b> Remove apache commons-codec Base64 calls in favor of java 8 alternatives
                </div><div><b>description:</b> Java8 has a builtin Base64 encoder and decoder, there is no need to use commons-codec for this purpose.
                </div></div></li><li><div><div><b>summary:</b> Remove apache commons-codec Base64 calls in favor of java 8 alternatives
                </div><div><b>description:</b> Java8 has a builtin Base64 encoder and decoder, there is no need to use commons-codec for this purpose.
                </div><div><b>label:</b> code-design
                </div></div></li><li><div><div><b>summary:</b> Remove apache commons-codec Base64 calls in favor of java 8 alternatives
                </div><div><b>description:</b> Java8 has a builtin Base64 encoder and decoder, there is no need to use commons-codec for this purpose.
                </div></div></li><li><div><div><b>summary:</b> Remove apache commons-codec Base64 calls in favor of java 8 alternatives
                </div><div><b>description:</b> Java8 has a builtin Base64 encoder and decoder, there is no need to use commons-codec for this purpose.
                </div></div></li><li><div><div><b>summary:</b> Remove apache commons-codec Base64 calls in favor of java 8 alternatives
                </div><div><b>description:</b> Java8 has a builtin Base64 encoder and decoder, there is no need to use commons-codec for this purpose.
                </div></div></li><li><div><div><b>summary:</b> Remove apache commons-codec Base64 calls in favor of java 8 alternatives
                </div><div><b>description:</b> Java8 has a builtin Base64 encoder and decoder, there is no need to use commons-codec for this purpose.
                </div></div></li><li><div><div><b>summary:</b> Remove apache commons-codec Base64 calls in favor of java 8 alternatives
                </div><div><b>description:</b> Java8 has a builtin Base64 encoder and decoder, there is no need to use commons-codec for this purpose.
                </div></div></li></ol></div><div><b>jira_issues_comments:</b> <ol><li><div>
                When I created this patch I realized that solr has it's own Base64 implementation:&nbsp;[https://github.com/apache/lucene-solr/blob/master/solr/solrj/src/java/org/apache/solr/common/util/Base64.java] It was added by SOLR-1116 in 2009, maybe it could also be replaced by the Java8 Base64 class.
              </div></li><li><div>
                | (x) *{color:red}-1 overall{color}* |
\\
\\
|| Vote || Subsystem || Runtime || Comment ||
|| || || || {color:brown} Prechecks {color} ||
| {color:red}-1{color} | {color:red} test4tests {color} | {color:red}  0m  0s{color} | {color:red} The patch doesn't appear to include any new or modified tests. Please justify why no new tests are needed for this patch. Also please list what manual steps were performed to verify this patch. {color} |
|| || || || {color:brown} master Compile Tests {color} ||
| {color:green}+1{color} | {color:green} compile {color} | {color:green}  1m  3s{color} | {color:green} master passed {color} |
|| || || || {color:brown} Patch Compile Tests {color} ||
| {color:green}+1{color} | {color:green} compile {color} | {color:green}  1m  4s{color} | {color:green} the patch passed {color} |
| {color:green}+1{color} | {color:green} javac {color} | {color:green}  1m  4s{color} | {color:green} the patch passed {color} |
| {color:green}+1{color} | {color:green} Release audit (RAT) {color} | {color:green}  0m  5s{color} | {color:green} the patch passed {color} |
| {color:green}+1{color} | {color:green} Check forbidden APIs {color} | {color:green}  0m  2s{color} | {color:green} the patch passed {color} |
| {color:green}+1{color} | {color:green} Validate source patterns {color} | {color:green}  0m  2s{color} | {color:green} the patch passed {color} |
|| || || || {color:brown} Other Tests {color} ||
| {color:green}+1{color} | {color:green} unit {color} | {color:green}  0m  3s{color} | {color:green} tools in the patch passed. {color} |
| {color:green}+1{color} | {color:green} unit {color} | {color:green} 48m 10s{color} | {color:green} core in the patch passed. {color} |
| {color:black}{color} | {color:black} {color} | {color:black} 52m 44s{color} | {color:black} {color} |
\\
\\
|| Subsystem || Report/Notes ||
| JIRA Issue | SOLR-14297 |
| JIRA Patch URL | https://issues.apache.org/jira/secure/attachment/12995277/SOLR-14297-01.patch |
| Optional Tests |  compile  javac  unit  ratsources  checkforbiddenapis  validatesourcepatterns  |
| uname | Linux lucene1-us-west 4.15.0-54-generic #58-Ubuntu SMP Mon Jun 24 10:55:24 UTC 2019 x86_64 x86_64 x86_64 GNU/Linux |
| Build tool | ant |
| Personality | /home/jenkins/jenkins-slave/workspace/PreCommit-SOLR-Build/sourcedir/dev-tools/test-patch/lucene-solr-yetus-personality.sh |
| git revision | master / f4b5069c1fb |
| ant | version: Apache Ant(TM) version 1.10.5 compiled on March 28 2019 |
| Default Java | LTS |
|  Test Results | https://builds.apache.org/job/PreCommit-SOLR-Build/692/testReport/ |
| modules | C: . lucene/tools solr/core U: . |
| Console output | https://builds.apache.org/job/PreCommit-SOLR-Build/692/console |
| Powered by | Apache Yetus 0.7.0   http://yetus.apache.org |


This message was automatically generated.


              </div></li><li><div><div><b>body:</b> There is a lot more usage of the Solr Commons Base64 class, so I would suggest tackling that in a separate ticket.
                </div><div><b>label:</b> code-design
                </div></div></li><li><div>
                Commit 83e0397c42826b8b88c5595957df6da151d42009 in lucene-solr's branch refs/heads/master from András Salamon
[ https://gitbox.apache.org/repos/asf?p=lucene-solr.git;h=83e0397 ]

SOLR-14297: Replace commons-codec Base64 with JDK8 Base64 (#2222)


              </div></li><li><div>
                Thanks for the contribution [~asalamon74]!
              </div></li><li><div>
                Created a separate Jira about the own Base64 class elimination:&nbsp;SOLR-15111 
              </div></li></ol></div></div></html>