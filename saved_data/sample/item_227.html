<!DOCTYPE html><html><div class="item-title">
        Item 227
      </div> <div class="item-details"><div><b>git_comments:</b> <ol><li><div>
                *
   * Given a configuration get the bind host that could be used by ZKFC.
   * We derive it from NN service rpc bind host or NN rpc bind host.
   *
   * @param conf input configuration
   * @return the bind host address found in conf
   
              </div></li></ol></div><div><b>git_commits:</b> <ol><li><div><div><b>summary:</b> HDFS-15281. Make sure ZKFC uses dfs.namenode.rpc-address to bind to host address (#1964)
                </div><div><b>message:</b> HDFS-15281. Make sure ZKFC uses dfs.namenode.rpc-address to bind to host address (#1964)

Contributed by Dhiraj Hegde.

Signed-off-by: Mingliang Liu &lt;liuml07@apache.org&gt;
Signed-off-by: Inigo Goiri &lt;inigoiri@apache.org&gt;

                </div></div></li></ol></div><div><b>github_issues:</b> <ol></ol></div><div><b>github_issues_comments:</b> <ol></ol></div><div><b>github_pulls:</b> <ol><li><div><div><b>title:</b> HDFS-15281. ZKFC ignores dfs.namenode.rpc-bind-host and uses dfs.namenode.rpc-address to bind to host address
                </div><div><b>body:</b> Details of the issue is here: https://issues.apache.org/jira/browse/HDFS-15281

## NOTICE

Please create an issue in ASF JIRA before opening a pull request,
and you need to set the title of the pull request which starts with
the corresponding JIRA issue number. (e.g. HADOOP-XXXXX. Fix a typo in YYY.)
For more details, please see https://cwiki.apache.org/confluence/display/HADOOP/How+To+Contribute

                </div></div></li></ol></div><div><b>github_pulls_comments:</b> <ol><li><div>
                :broken_heart: **-1 overall**






| Vote | Subsystem | Runtime | Comment |
|:----:|----------:|--------:|:--------|
| +0 :ok: |  reexec  |   0m 38s |  Docker mode activated.  |
||| _ Prechecks _ |
| +1 :green_heart: |  dupname  |   0m  1s |  No case conflicting files found.  |
| +1 :green_heart: |  @author  |   0m  0s |  The patch does not contain any @author tags.  |
| +1 :green_heart: |  test4tests  |   0m  0s |  The patch appears to include 1 new or modified test files.  |
||| _ trunk Compile Tests _ |
| +0 :ok: |  mvndep  |   0m 57s |  Maven dependency ordering for branch  |
| +1 :green_heart: |  mvninstall  |  20m  6s |  trunk passed  |
| +1 :green_heart: |  compile  |  17m  7s |  trunk passed  |
| +1 :green_heart: |  checkstyle  |   2m 39s |  trunk passed  |
| +1 :green_heart: |  mvnsite  |   2m 57s |  trunk passed  |
| +1 :green_heart: |  shadedclient  |  21m  4s |  branch has no errors when building and testing our client artifacts.  |
| +1 :green_heart: |  javadoc  |   1m 59s |  trunk passed  |
| +0 :ok: |  spotbugs  |   3m  5s |  Used deprecated FindBugs config; considering switching to SpotBugs.  |
| -1 :x: |  findbugs  |   3m  3s |  hadoop-hdfs-project/hadoop-hdfs in trunk has 3 extant findbugs warnings.  |
||| _ Patch Compile Tests _ |
| +0 :ok: |  mvndep  |   0m 24s |  Maven dependency ordering for patch  |
| +1 :green_heart: |  mvninstall  |   2m  0s |  the patch passed  |
| +1 :green_heart: |  compile  |  16m 22s |  the patch passed  |
| +1 :green_heart: |  javac  |  16m 22s |  the patch passed  |
| -0 :warning: |  checkstyle  |   2m 37s |  root: The patch generated 41 new + 41 unchanged - 0 fixed = 82 total (was 41)  |
| +1 :green_heart: |  mvnsite  |   2m 55s |  the patch passed  |
| -1 :x: |  whitespace  |   0m  0s |  The patch has 2 line(s) that end in whitespace. Use git apply --whitespace=fix &lt;&lt;patch_file&gt;&gt;. Refer https://git-scm.com/docs/git-apply  |
| +1 :green_heart: |  shadedclient  |  14m  1s |  patch has no errors when building and testing our client artifacts.  |
| +1 :green_heart: |  javadoc  |   2m  2s |  the patch passed  |
| +1 :green_heart: |  findbugs  |   5m 34s |  the patch passed  |
||| _ Other Tests _ |
| +1 :green_heart: |  unit  |   9m 11s |  hadoop-common in the patch passed.  |
| -1 :x: |  unit  |  93m 23s |  hadoop-hdfs in the patch passed.  |
| +1 :green_heart: |  asflicense  |   1m  4s |  The patch does not generate ASF License warnings.  |
|  |   | 221m 49s |   |


| Reason | Tests |
|-------:|:------|
| Failed junit tests | hadoop.hdfs.server.blockmanagement.TestUnderReplicatedBlocks |


| Subsystem | Report/Notes |
|----------:|:-------------|
| Docker | ClientAPI=1.40 ServerAPI=1.40 base: https://builds.apache.org/job/hadoop-multibranch/job/PR-1964/1/artifact/out/Dockerfile |
| GITHUB PR | https://github.com/apache/hadoop/pull/1964 |
| Optional Tests | dupname asflicense compile javac javadoc mvninstall mvnsite unit shadedclient findbugs checkstyle |
| uname | Linux b7268dc3b636 4.15.0-58-generic #64-Ubuntu SMP Tue Aug 6 11:12:41 UTC 2019 x86_64 x86_64 x86_64 GNU/Linux |
| Build tool | maven |
| Personality | personality/hadoop.sh |
| git revision | trunk / 1824aee |
| Default Java | Private Build-1.8.0_242-8u242-b08-0ubuntu3~16.04-b08 |
| findbugs | https://builds.apache.org/job/hadoop-multibranch/job/PR-1964/1/artifact/out/branch-findbugs-hadoop-hdfs-project_hadoop-hdfs-warnings.html |
| checkstyle | https://builds.apache.org/job/hadoop-multibranch/job/PR-1964/1/artifact/out/diff-checkstyle-root.txt |
| whitespace | https://builds.apache.org/job/hadoop-multibranch/job/PR-1964/1/artifact/out/whitespace-eol.txt |
| unit | https://builds.apache.org/job/hadoop-multibranch/job/PR-1964/1/artifact/out/patch-unit-hadoop-hdfs-project_hadoop-hdfs.txt |
|  Test Results | https://builds.apache.org/job/hadoop-multibranch/job/PR-1964/1/testReport/ |
| Max. process+thread count | 4378 (vs. ulimit of 5500) |
| modules | C: hadoop-common-project/hadoop-common hadoop-hdfs-project/hadoop-hdfs U: . |
| Console output | https://builds.apache.org/job/hadoop-multibranch/job/PR-1964/1/console |
| versions | git=2.7.4 maven=3.3.9 findbugs=3.1.0-RC1 |
| Powered by | Apache Yetus 0.12.0 https://yetus.apache.org |


This message was automatically generated.


              </div></li><li><div>
                :broken_heart: **-1 overall**






| Vote | Subsystem | Runtime | Comment |
|:----:|----------:|--------:|:--------|
| +0 :ok: |  reexec  |  24m 54s |  Docker mode activated.  |
||| _ Prechecks _ |
| +1 :green_heart: |  dupname  |   0m  0s |  No case conflicting files found.  |
| +1 :green_heart: |  @author  |   0m  0s |  The patch does not contain any @author tags.  |
| +1 :green_heart: |  test4tests  |   0m  0s |  The patch appears to include 1 new or modified test files.  |
||| _ trunk Compile Tests _ |
| +0 :ok: |  mvndep  |   0m 23s |  Maven dependency ordering for branch  |
| +1 :green_heart: |  mvninstall  |  18m 57s |  trunk passed  |
| +1 :green_heart: |  compile  |  16m 59s |  trunk passed  |
| +1 :green_heart: |  checkstyle  |   2m 37s |  trunk passed  |
| +1 :green_heart: |  mvnsite  |   2m 53s |  trunk passed  |
| +1 :green_heart: |  shadedclient  |  20m 59s |  branch has no errors when building and testing our client artifacts.  |
| +1 :green_heart: |  javadoc  |   1m 59s |  trunk passed  |
| +0 :ok: |  spotbugs  |   3m  2s |  Used deprecated FindBugs config; considering switching to SpotBugs.  |
| -1 :x: |  findbugs  |   3m  0s |  hadoop-hdfs-project/hadoop-hdfs in trunk has 3 extant findbugs warnings.  |
||| _ Patch Compile Tests _ |
| +0 :ok: |  mvndep  |   0m 23s |  Maven dependency ordering for patch  |
| +1 :green_heart: |  mvninstall  |   1m 59s |  the patch passed  |
| +1 :green_heart: |  compile  |  16m 12s |  the patch passed  |
| +1 :green_heart: |  javac  |  16m 12s |  the patch passed  |
| -0 :warning: |  checkstyle  |   2m 44s |  root: The patch generated 41 new + 41 unchanged - 0 fixed = 82 total (was 41)  |
| +1 :green_heart: |  mvnsite  |   2m 56s |  the patch passed  |
| +1 :green_heart: |  whitespace  |   0m  0s |  The patch has no whitespace issues.  |
| +1 :green_heart: |  shadedclient  |  14m 21s |  patch has no errors when building and testing our client artifacts.  |
| +1 :green_heart: |  javadoc  |   1m 58s |  the patch passed  |
| +1 :green_heart: |  findbugs  |   5m 23s |  the patch passed  |
||| _ Other Tests _ |
| +1 :green_heart: |  unit  |   9m 10s |  hadoop-common in the patch passed.  |
| -1 :x: |  unit  |  93m 41s |  hadoop-hdfs in the patch passed.  |
| +1 :green_heart: |  asflicense  |   1m  3s |  The patch does not generate ASF License warnings.  |
|  |   | 244m 22s |   |


| Reason | Tests |
|-------:|:------|
| Failed junit tests | hadoop.hdfs.server.namenode.ha.TestEditLogTailer |
|   | hadoop.hdfs.server.blockmanagement.TestUnderReplicatedBlocks |
|   | hadoop.hdfs.TestReconstructStripedFile |


| Subsystem | Report/Notes |
|----------:|:-------------|
| Docker | ClientAPI=1.40 ServerAPI=1.40 base: https://builds.apache.org/job/hadoop-multibranch/job/PR-1964/2/artifact/out/Dockerfile |
| GITHUB PR | https://github.com/apache/hadoop/pull/1964 |
| Optional Tests | dupname asflicense compile javac javadoc mvninstall mvnsite unit shadedclient findbugs checkstyle |
| uname | Linux 845a04822ca0 4.15.0-58-generic #64-Ubuntu SMP Tue Aug 6 11:12:41 UTC 2019 x86_64 x86_64 x86_64 GNU/Linux |
| Build tool | maven |
| Personality | personality/hadoop.sh |
| git revision | trunk / 79e03fb |
| Default Java | Private Build-1.8.0_242-8u242-b08-0ubuntu3~16.04-b08 |
| findbugs | https://builds.apache.org/job/hadoop-multibranch/job/PR-1964/2/artifact/out/branch-findbugs-hadoop-hdfs-project_hadoop-hdfs-warnings.html |
| checkstyle | https://builds.apache.org/job/hadoop-multibranch/job/PR-1964/2/artifact/out/diff-checkstyle-root.txt |
| unit | https://builds.apache.org/job/hadoop-multibranch/job/PR-1964/2/artifact/out/patch-unit-hadoop-hdfs-project_hadoop-hdfs.txt |
|  Test Results | https://builds.apache.org/job/hadoop-multibranch/job/PR-1964/2/testReport/ |
| Max. process+thread count | 4604 (vs. ulimit of 5500) |
| modules | C: hadoop-common-project/hadoop-common hadoop-hdfs-project/hadoop-hdfs U: . |
| Console output | https://builds.apache.org/job/hadoop-multibranch/job/PR-1964/2/console |
| versions | git=2.7.4 maven=3.3.9 findbugs=3.1.0-RC1 |
| Powered by | Apache Yetus 0.12.0 https://yetus.apache.org |


This message was automatically generated.


              </div></li><li><div>
                :broken_heart: **-1 overall**






| Vote | Subsystem | Runtime | Comment |
|:----:|----------:|--------:|:--------|
| +0 :ok: |  reexec  |   0m 52s |  Docker mode activated.  |
||| _ Prechecks _ |
| +1 :green_heart: |  dupname  |   0m  0s |  No case conflicting files found.  |
| +1 :green_heart: |  @author  |   0m  0s |  The patch does not contain any @author tags.  |
| +1 :green_heart: |  test4tests  |   0m  0s |  The patch appears to include 2 new or modified test files.  |
||| _ trunk Compile Tests _ |
| +0 :ok: |  mvndep  |   0m 50s |  Maven dependency ordering for branch  |
| +1 :green_heart: |  mvninstall  |  22m 50s |  trunk passed  |
| -1 :x: |  compile  |  19m 50s |  root in trunk failed.  |
| +1 :green_heart: |  checkstyle  |   3m  7s |  trunk passed  |
| +1 :green_heart: |  mvnsite  |   3m 11s |  trunk passed  |
| +1 :green_heart: |  shadedclient  |  24m  3s |  branch has no errors when building and testing our client artifacts.  |
| +1 :green_heart: |  javadoc  |   1m 53s |  trunk passed  |
| +0 :ok: |  spotbugs  |   3m 57s |  Used deprecated FindBugs config; considering switching to SpotBugs.  |
| -1 :x: |  findbugs  |   3m 55s |  hadoop-hdfs-project/hadoop-hdfs in trunk has 3 extant findbugs warnings.  |
||| _ Patch Compile Tests _ |
| +0 :ok: |  mvndep  |   0m 25s |  Maven dependency ordering for patch  |
| +1 :green_heart: |  mvninstall  |   2m 11s |  the patch passed  |
| -1 :x: |  compile  |  19m  8s |  root in the patch failed.  |
| -1 :x: |  javac  |  19m  8s |  root in the patch failed.  |
| -0 :warning: |  checkstyle  |   3m  3s |  root: The patch generated 41 new + 46 unchanged - 0 fixed = 87 total (was 46)  |
| +1 :green_heart: |  mvnsite  |   3m  3s |  the patch passed  |
| +1 :green_heart: |  whitespace  |   0m  0s |  The patch has no whitespace issues.  |
| +1 :green_heart: |  shadedclient  |  16m 30s |  patch has no errors when building and testing our client artifacts.  |
| +1 :green_heart: |  javadoc  |   2m  0s |  the patch passed  |
| +1 :green_heart: |  findbugs  |   6m 10s |  the patch passed  |
||| _ Other Tests _ |
| +1 :green_heart: |  unit  |  10m 18s |  hadoop-common in the patch passed.  |
| -1 :x: |  unit  |  63m 27s |  hadoop-hdfs in the patch passed.  |
| -1 :x: |  asflicense  |   0m 53s |  The patch generated 6 ASF License warnings.  |
|  |   | 208m 51s |   |


| Reason | Tests |
|-------:|:------|
| Failed junit tests | hadoop.hdfs.server.datanode.TestNNHandlesBlockReportPerStorage |
|   | hadoop.hdfs.TestDecommissionWithBackoffMonitor |
|   | hadoop.hdfs.TestPread |
|   | hadoop.hdfs.server.datanode.TestReadOnlySharedStorage |
|   | hadoop.hdfs.server.datanode.TestBlockScanner |
|   | hadoop.hdfs.server.datanode.TestDataNodeVolumeFailureToleration |
|   | hadoop.hdfs.server.datanode.TestDataNodeVolumeFailureReporting |
|   | hadoop.hdfs.server.datanode.TestDataNodeRollingUpgrade |
|   | hadoop.hdfs.TestDecommission |
|   | hadoop.hdfs.server.datanode.TestNNHandlesCombinedBlockReport |
|   | hadoop.hdfs.TestErasureCodeBenchmarkThroughput |
|   | hadoop.hdfs.server.datanode.TestDirectoryScanner |
|   | hadoop.hdfs.TestErasureCodingPolicies |
|   | hadoop.hdfs.TestClose |
|   | hadoop.hdfs.server.datanode.TestBlockRecovery |
|   | hadoop.hdfs.TestUnsetAndChangeDirectoryEcPolicy |
|   | hadoop.hdfs.TestReconstructStripedFileWithRandomECPolicy |
|   | hadoop.hdfs.security.TestDelegationToken |
|   | hadoop.hdfs.TestDecommissionWithStriped |


| Subsystem | Report/Notes |
|----------:|:-------------|
| Docker | ClientAPI=1.40 ServerAPI=1.40 base: https://builds.apache.org/job/hadoop-multibranch/job/PR-1964/3/artifact/out/Dockerfile |
| GITHUB PR | https://github.com/apache/hadoop/pull/1964 |
| Optional Tests | dupname asflicense compile javac javadoc mvninstall mvnsite unit shadedclient findbugs checkstyle |
| uname | Linux a2722ffecb38 4.15.0-58-generic #64-Ubuntu SMP Tue Aug 6 11:12:41 UTC 2019 x86_64 x86_64 x86_64 GNU/Linux |
| Build tool | maven |
| Personality | personality/hadoop.sh |
| git revision | trunk / 3d69383 |
| Default Java | Private Build-1.8.0_242-8u242-b08-0ubuntu3~16.04-b08 |
| compile | https://builds.apache.org/job/hadoop-multibranch/job/PR-1964/3/artifact/out/branch-compile-root.txt |
| findbugs | https://builds.apache.org/job/hadoop-multibranch/job/PR-1964/3/artifact/out/branch-findbugs-hadoop-hdfs-project_hadoop-hdfs-warnings.html |
| compile | https://builds.apache.org/job/hadoop-multibranch/job/PR-1964/3/artifact/out/patch-compile-root.txt |
| javac | https://builds.apache.org/job/hadoop-multibranch/job/PR-1964/3/artifact/out/patch-compile-root.txt |
| checkstyle | https://builds.apache.org/job/hadoop-multibranch/job/PR-1964/3/artifact/out/diff-checkstyle-root.txt |
| unit | https://builds.apache.org/job/hadoop-multibranch/job/PR-1964/3/artifact/out/patch-unit-hadoop-hdfs-project_hadoop-hdfs.txt |
|  Test Results | https://builds.apache.org/job/hadoop-multibranch/job/PR-1964/3/testReport/ |
| asflicense | https://builds.apache.org/job/hadoop-multibranch/job/PR-1964/3/artifact/out/patch-asflicense-problems.txt |
| Max. process+thread count | 3507 (vs. ulimit of 5500) |
| modules | C: hadoop-common-project/hadoop-common hadoop-hdfs-project/hadoop-hdfs U: . |
| Console output | https://builds.apache.org/job/hadoop-multibranch/job/PR-1964/3/console |
| versions | git=2.7.4 maven=3.3.9 findbugs=3.1.0-RC1 |
| Powered by | Apache Yetus 0.12.0 https://yetus.apache.org |


This message was automatically generated.


              </div></li><li><div>
                Looks good to me overall. May need a clean QA run before committing.

Test failure seem unrelated, but worth another look. And we can search recent builds to see if they are also happening without this patch.

The `compile` issue is unrelated, reported by https://issues.apache.org/jira/browse/HADOOP-17007

`findbugs` warnings are unrelated.
              </div></li><li><div>
                :broken_heart: **-1 overall**






| Vote | Subsystem | Runtime | Comment |
|:----:|----------:|--------:|:--------|
| +0 :ok: |  reexec  |   0m 32s |  Docker mode activated.  |
||| _ Prechecks _ |
| +1 :green_heart: |  dupname  |   0m  0s |  No case conflicting files found.  |
| +1 :green_heart: |  @author  |   0m  0s |  The patch does not contain any @author tags.  |
| +1 :green_heart: |  test4tests  |   0m  0s |  The patch appears to include 2 new or modified test files.  |
||| _ trunk Compile Tests _ |
| +0 :ok: |  mvndep  |   0m 48s |  Maven dependency ordering for branch  |
| +1 :green_heart: |  mvninstall  |  19m  5s |  trunk passed  |
| -1 :x: |  compile  |  16m 55s |  root in trunk failed.  |
| +1 :green_heart: |  checkstyle  |   2m 39s |  trunk passed  |
| +1 :green_heart: |  mvnsite  |   2m 55s |  trunk passed  |
| +1 :green_heart: |  shadedclient  |  20m 58s |  branch has no errors when building and testing our client artifacts.  |
| +1 :green_heart: |  javadoc  |   1m 59s |  trunk passed  |
| +0 :ok: |  spotbugs  |   3m  2s |  Used deprecated FindBugs config; considering switching to SpotBugs.  |
| -1 :x: |  findbugs  |   3m  0s |  hadoop-hdfs-project/hadoop-hdfs in trunk has 3 extant findbugs warnings.  |
||| _ Patch Compile Tests _ |
| +0 :ok: |  mvndep  |   0m 24s |  Maven dependency ordering for patch  |
| +1 :green_heart: |  mvninstall  |   1m 57s |  the patch passed  |
| -1 :x: |  compile  |  16m 16s |  root in the patch failed.  |
| -1 :x: |  javac  |  16m 16s |  root in the patch failed.  |
| -0 :warning: |  checkstyle  |   2m 38s |  root: The patch generated 41 new + 46 unchanged - 0 fixed = 87 total (was 46)  |
| +1 :green_heart: |  mvnsite  |   2m 53s |  the patch passed  |
| +1 :green_heart: |  whitespace  |   0m  0s |  The patch has no whitespace issues.  |
| +1 :green_heart: |  shadedclient  |  14m 33s |  patch has no errors when building and testing our client artifacts.  |
| +1 :green_heart: |  javadoc  |   2m  2s |  the patch passed  |
| +1 :green_heart: |  findbugs  |   5m 23s |  the patch passed  |
||| _ Other Tests _ |
| +1 :green_heart: |  unit  |   9m 12s |  hadoop-common in the patch passed.  |
| -1 :x: |  unit  |  92m 36s |  hadoop-hdfs in the patch passed.  |
| +1 :green_heart: |  asflicense  |   1m  5s |  The patch does not generate ASF License warnings.  |
|  |   | 219m 36s |   |


| Reason | Tests |
|-------:|:------|
| Failed junit tests | hadoop.hdfs.server.datanode.TestNNHandlesBlockReportPerStorage |
|   | hadoop.hdfs.server.datanode.TestBPOfferService |


| Subsystem | Report/Notes |
|----------:|:-------------|
| Docker | ClientAPI=1.40 ServerAPI=1.40 base: https://builds.apache.org/job/hadoop-multibranch/job/PR-1964/4/artifact/out/Dockerfile |
| GITHUB PR | https://github.com/apache/hadoop/pull/1964 |
| Optional Tests | dupname asflicense compile javac javadoc mvninstall mvnsite unit shadedclient findbugs checkstyle |
| uname | Linux 90978287cb7b 4.15.0-58-generic #64-Ubuntu SMP Tue Aug 6 11:12:41 UTC 2019 x86_64 x86_64 x86_64 GNU/Linux |
| Build tool | maven |
| Personality | personality/hadoop.sh |
| git revision | trunk / 5958af4 |
| Default Java | Private Build-1.8.0_242-8u242-b08-0ubuntu3~16.04-b08 |
| compile | https://builds.apache.org/job/hadoop-multibranch/job/PR-1964/4/artifact/out/branch-compile-root.txt |
| findbugs | https://builds.apache.org/job/hadoop-multibranch/job/PR-1964/4/artifact/out/branch-findbugs-hadoop-hdfs-project_hadoop-hdfs-warnings.html |
| compile | https://builds.apache.org/job/hadoop-multibranch/job/PR-1964/4/artifact/out/patch-compile-root.txt |
| javac | https://builds.apache.org/job/hadoop-multibranch/job/PR-1964/4/artifact/out/patch-compile-root.txt |
| checkstyle | https://builds.apache.org/job/hadoop-multibranch/job/PR-1964/4/artifact/out/diff-checkstyle-root.txt |
| unit | https://builds.apache.org/job/hadoop-multibranch/job/PR-1964/4/artifact/out/patch-unit-hadoop-hdfs-project_hadoop-hdfs.txt |
|  Test Results | https://builds.apache.org/job/hadoop-multibranch/job/PR-1964/4/testReport/ |
| Max. process+thread count | 5345 (vs. ulimit of 5500) |
| modules | C: hadoop-common-project/hadoop-common hadoop-hdfs-project/hadoop-hdfs U: . |
| Console output | https://builds.apache.org/job/hadoop-multibranch/job/PR-1964/4/console |
| versions | git=2.7.4 maven=3.3.9 findbugs=3.1.0-RC1 |
| Powered by | Apache Yetus 0.12.0 https://yetus.apache.org |


This message was automatically generated.


              </div></li><li><div>
                I'm a little confused with the @hadoop-yetus report... it looks like is checking old code.
              </div></li><li><div>
                &gt; I'm a little confused with the @hadoop-yetus report... it looks like is checking old code.

Yes same here. CC: @aajisaka @hadoop-yetus  Basically after the author updated the PR, the Yetus was still generating reports using old patch / commits.

One way to confirm is that:
1. The new [build](https://builds.apache.org/job/hadoop-multibranch/job/PR-1964/4/console) was triggered by and generated for the recent commit
1. The two recent commits have [deleted](https://github.com/apache/hadoop/pull/1964/commits/d8b4db1fc0e59c183d0725e3754f1d8d0085f115) a source code file it added in its initial commit
1. The checkstyle is still reporting that deleted source file.
              </div></li><li><div>
                I have 

&gt; &gt; I'm a little confused with the @hadoop-yetus report... it looks like is checking old code.
&gt; 
&gt; Yes same here. CC: @aajisaka @hadoop-yetus Basically after the author updated the PR, the Yetus was still generating reports using old patch / commits.
&gt; 
&gt; One way to confirm is that:
&gt; 
&gt; 1. The new [build](https://builds.apache.org/job/hadoop-multibranch/job/PR-1964/4/console) was triggered by and generated for the recent commit
&gt; 2. The two recent commits have [deleted](https://github.com/apache/hadoop/pull/1964/commits/d8b4db1fc0e59c183d0725e3754f1d8d0085f115) a source code file it added in its initial commit
&gt; 3. The checkstyle is still reporting that deleted source file.

I have just uploaded the patch diff too, in case that helps kick off a better build.
              </div></li><li><div>
                :broken_heart: **-1 overall**






| Vote | Subsystem | Runtime | Comment |
|:----:|----------:|--------:|:--------|
| +0 :ok: |  reexec  |  24m 46s |  Docker mode activated.  |
||| _ Prechecks _ |
| +1 :green_heart: |  dupname  |   0m  0s |  No case conflicting files found.  |
| +1 :green_heart: |  @author  |   0m  0s |  The patch does not contain any @author tags.  |
| +1 :green_heart: |  test4tests  |   0m  0s |  The patch appears to include 2 new or modified test files.  |
||| _ trunk Compile Tests _ |
| +0 :ok: |  mvndep  |   0m 48s |  Maven dependency ordering for branch  |
| +1 :green_heart: |  mvninstall  |  19m  4s |  trunk passed  |
| -1 :x: |  compile  |  16m 49s |  root in trunk failed.  |
| +1 :green_heart: |  checkstyle  |   2m 39s |  trunk passed  |
| +1 :green_heart: |  mvnsite  |   2m 52s |  trunk passed  |
| +1 :green_heart: |  shadedclient  |  21m  5s |  branch has no errors when building and testing our client artifacts.  |
| +1 :green_heart: |  javadoc  |   2m  0s |  trunk passed  |
| +0 :ok: |  spotbugs  |   3m  6s |  Used deprecated FindBugs config; considering switching to SpotBugs.  |
| -1 :x: |  findbugs  |   3m  4s |  hadoop-hdfs-project/hadoop-hdfs in trunk has 3 extant findbugs warnings.  |
||| _ Patch Compile Tests _ |
| +0 :ok: |  mvndep  |   0m 23s |  Maven dependency ordering for patch  |
| +1 :green_heart: |  mvninstall  |   1m 58s |  the patch passed  |
| -1 :x: |  compile  |  17m 30s |  root in the patch failed.  |
| -1 :x: |  javac  |  17m 30s |  root in the patch failed.  |
| -0 :warning: |  checkstyle  |   2m 59s |  root: The patch generated 40 new + 46 unchanged - 0 fixed = 86 total (was 46)  |
| +1 :green_heart: |  mvnsite  |   3m  4s |  the patch passed  |
| +1 :green_heart: |  whitespace  |   0m  0s |  The patch has no whitespace issues.  |
| +1 :green_heart: |  shadedclient  |  15m  7s |  patch has no errors when building and testing our client artifacts.  |
| +1 :green_heart: |  javadoc  |   2m  4s |  the patch passed  |
| +1 :green_heart: |  findbugs  |   5m 43s |  the patch passed  |
||| _ Other Tests _ |
| +1 :green_heart: |  unit  |   9m 35s |  hadoop-common in the patch passed.  |
| -1 :x: |  unit  |  94m  6s |  hadoop-hdfs in the patch passed.  |
| +1 :green_heart: |  asflicense  |   1m  3s |  The patch does not generate ASF License warnings.  |
|  |   | 248m 26s |   |


| Reason | Tests |
|-------:|:------|
| Failed junit tests | hadoop.hdfs.TestDecommissionWithBackoffMonitor |
|   | hadoop.hdfs.TestEncryptedTransfer |
|   | hadoop.hdfs.TestErasureCodingMultipleRacks |
|   | hadoop.hdfs.TestDistributedFileSystem |
|   | hadoop.hdfs.TestDecommissionWithStriped |
|   | hadoop.hdfs.server.datanode.TestDataNodeMultipleRegistrations |
|   | hadoop.hdfs.server.datanode.web.TestDatanodeHttpXFrame |


| Subsystem | Report/Notes |
|----------:|:-------------|
| Docker | ClientAPI=1.40 ServerAPI=1.40 base: https://builds.apache.org/job/hadoop-multibranch/job/PR-1964/5/artifact/out/Dockerfile |
| GITHUB PR | https://github.com/apache/hadoop/pull/1964 |
| Optional Tests | dupname asflicense compile javac javadoc mvninstall mvnsite unit shadedclient findbugs checkstyle |
| uname | Linux 2a2c131643a4 4.15.0-58-generic #64-Ubuntu SMP Tue Aug 6 11:12:41 UTC 2019 x86_64 x86_64 x86_64 GNU/Linux |
| Build tool | maven |
| Personality | personality/hadoop.sh |
| git revision | trunk / 30ef8d0 |
| Default Java | Private Build-1.8.0_252-8u252-b09-1~16.04-b09 |
| compile | https://builds.apache.org/job/hadoop-multibranch/job/PR-1964/5/artifact/out/branch-compile-root.txt |
| findbugs | https://builds.apache.org/job/hadoop-multibranch/job/PR-1964/5/artifact/out/branch-findbugs-hadoop-hdfs-project_hadoop-hdfs-warnings.html |
| compile | https://builds.apache.org/job/hadoop-multibranch/job/PR-1964/5/artifact/out/patch-compile-root.txt |
| javac | https://builds.apache.org/job/hadoop-multibranch/job/PR-1964/5/artifact/out/patch-compile-root.txt |
| checkstyle | https://builds.apache.org/job/hadoop-multibranch/job/PR-1964/5/artifact/out/diff-checkstyle-root.txt |
| unit | https://builds.apache.org/job/hadoop-multibranch/job/PR-1964/5/artifact/out/patch-unit-hadoop-hdfs-project_hadoop-hdfs.txt |
|  Test Results | https://builds.apache.org/job/hadoop-multibranch/job/PR-1964/5/testReport/ |
| Max. process+thread count | 4475 (vs. ulimit of 5500) |
| modules | C: hadoop-common-project/hadoop-common hadoop-hdfs-project/hadoop-hdfs U: . |
| Console output | https://builds.apache.org/job/hadoop-multibranch/job/PR-1964/5/console |
| versions | git=2.7.4 maven=3.3.9 findbugs=3.1.0-RC1 |
| Powered by | Apache Yetus 0.12.0 https://yetus.apache.org |


This message was automatically generated.


              </div></li></ol></div><div><b>github_pulls_reviews:</b> <ol><li><div>
                Use the logger format with {}
              </div></li><li><div>
                Use standard javadoc with a break line and add the param and the return.
              </div></li><li><div>
                It kind of comes from HAUtil but let's make it right here.
              </div></li><li><div>
                As this is already checking for ==null or isEmpty() this is redundant with getZkfcServerBindHost() we could just return the value instead of doing line 139.
              </div></li><li><div>
                Use logger
              </div></li><li><div>
                nit: this can be one blank line.
              </div></li><li><div>
                Alternatively, this test can go to `TestDFSZKFailoverController`? We may reuse existing setup and shutdown methods hopefully?
              </div></li><li><div>
                nit: remove blank lines within `try` clause? Seems related statements. It's fine if you prefer keeping them.
nit: line length is usually 80 characters. You can check the checkstyle reports from the QA comment, for e.g. https://builds.apache.org/job/hadoop-multibranch/job/PR-1964/2/artifact/out/diff-checkstyle-root.txt
              </div></li><li><div>
                nit: `assertEquals` is simpler.
```
assertThat("Bind address not expected to be wildcard by default.",
    LOCALHOST_SERVER_ADDRESS, zkfc.getRpcAddressToBindTo().getHostString());
```
              </div></li><li><div>
                If you like, you can use try-with on MiniDFSCluster, e.g.
```
try (MiniDFSCluster cluster = new MiniDFSCluster.Builder...) {
    // some stuff using cluster
}
```
and later
```
try (MiniDFSCluster cluster = new MiniDFSCluster.Builder...) {
    // some stuff using cluster
}
```
without name conflicts and no necessary to reset cluster to `null` in-between.

But if you move this to `TestDFSZKFailoverController`, we can split this test method into two methods and reuse the mini cluster defined there. I'm fine either way.
              </div></li><li><div>
                nit: not used?
              </div></li><li><div>
                I'm thinking, since we care more about the service RPC binding host, this config should be setting that only.
```
conf.set(DFS_NAMENODE_SERVICE_RPC_BIND_HOST_KEY, WILDCARD_ADDRESS);
```
Is this agreed?
              </div></li><li><div>
                This actually can be `private static`. 
1. First it can be static because it does not refer to this ZKFC object fields
2. Other methods are `protected` I *guess* because they are overriding parent class `ZKFailoverController` methods. When overriding, we can not change the scope to a smaller one (aka weaker access privilege). So here we keep the `protected` keyword.
              </div></li><li><div>
                Fixed
              </div></li><li><div>
                Fixed
              </div></li><li><div>
                Fixed. I moved tests case to TestDFSZKFailoverController
              </div></li><li><div>
                Went with the first suggestion
              </div></li><li><div>
                Fixed
              </div></li><li><div>
                Fixed.
              </div></li><li><div>
                Fixed.
              </div></li><li><div>
                He has moved tests to the existing test class so this file is deleted.
              </div></li><li><div>
                Fixed
              </div></li><li><div>
                Fixed, removed the lines.
              </div></li><li><div>
                Fixed. Added javadoc
              </div></li></ol></div><div><b>jira_issues:</b> <ol></ol></div><div><b>jira_issues_comments:</b> <ol></ol></div></div></html>